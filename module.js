var H9 = Object.defineProperty;
var U9 = (e,t,n)=>t in e ? H9(e, t, {
    enumerable: !0,
    configurable: !0,
    writable: !0,
    value: n
}) : e[t] = n;
var M = (e,t,n)=>(U9(e, typeof t != "symbol" ? t + "" : t, n),
n);
var D0 = (e,t,n)=>{
    if (t.has(e))
        throw TypeError("Cannot add the same private member more than once");
    t instanceof WeakSet ? t.add(e) : t.set(e, n)
}
;
function V9(e, t) {
    for (var n = 0; n < t.length; n++) {
        const r = t[n];
        if (typeof r != "string" && !Array.isArray(r)) {
            for (const i in r)
                if (i !== "default" && !(i in e)) {
                    const o = Object.getOwnPropertyDescriptor(r, i);
                    o && Object.defineProperty(e, i, o.get ? o : {
                        enumerable: !0,
                        get: ()=>r[i]
                    })
                }
        }
    }
    return Object.freeze(Object.defineProperty(e, Symbol.toStringTag, {
        value: "Module"
    }))
}
(function() {
    const t = document.createElement("link").relList;
    if (t && t.supports && t.supports("modulepreload"))
        return;
    for (const i of document.querySelectorAll('link[rel="modulepreload"]'))
        r(i);
    new MutationObserver(i=>{
        for (const o of i)
            if (o.type === "childList")
                for (const s of o.addedNodes)
                    s.tagName === "LINK" && s.rel === "modulepreload" && r(s)
    }
    ).observe(document, {
        childList: !0,
        subtree: !0
    });
    function n(i) {
        const o = {};
        return i.integrity && (o.integrity = i.integrity),
        i.referrerPolicy && (o.referrerPolicy = i.referrerPolicy),
        i.crossOrigin === "use-credentials" ? o.credentials = "include" : i.crossOrigin === "anonymous" ? o.credentials = "omit" : o.credentials = "same-origin",
        o
    }
    function r(i) {
        if (i.ep)
            return;
        i.ep = !0;
        const o = n(i);
        fetch(i.href, o)
    }
}
)();
var $d = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Al(e) {
    return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
}
function DX(e) {
    if (e.__esModule)
        return e;
    var t = e.default;
    if (typeof t == "function") {
        var n = function r() {
            if (this instanceof r) {
                var i = [null];
                i.push.apply(i, arguments);
                var o = Function.bind.apply(t, i);
                return new o
            }
            return t.apply(this, arguments)
        };
        n.prototype = t.prototype
    } else
        n = {};
    return Object.defineProperty(n, "__esModule", {
        value: !0
    }),
    Object.keys(e).forEach(function(r) {
        var i = Object.getOwnPropertyDescriptor(e, r);
        Object.defineProperty(n, r, i.get ? i : {
            enumerable: !0,
            get: function() {
                return e[r]
            }
        })
    }),
    n
}
var p5 = {
    exports: {}
}
  , k1 = {}
  , m5 = {
    exports: {}
}
  , _e = {};
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var dd = Symbol.for("react.element")
  , W9 = Symbol.for("react.portal")
  , G9 = Symbol.for("react.fragment")
  , j9 = Symbol.for("react.strict_mode")
  , Y9 = Symbol.for("react.profiler")
  , Z9 = Symbol.for("react.provider")
  , K9 = Symbol.for("react.context")
  , X9 = Symbol.for("react.forward_ref")
  , q9 = Symbol.for("react.suspense")
  , Q9 = Symbol.for("react.memo")
  , J9 = Symbol.for("react.lazy")
  , V3 = Symbol.iterator;
function eT(e) {
    return e === null || typeof e != "object" ? null : (e = V3 && e[V3] || e["@@iterator"],
    typeof e == "function" ? e : null)
}
var g5 = {
    isMounted: function() {
        return !1
    },
    enqueueForceUpdate: function() {},
    enqueueReplaceState: function() {},
    enqueueSetState: function() {}
}
  , v5 = Object.assign
  , y5 = {};
function Ll(e, t, n) {
    this.props = e,
    this.context = t,
    this.refs = y5,
    this.updater = n || g5
}
Ll.prototype.isReactComponent = {};
Ll.prototype.setState = function(e, t) {
    if (typeof e != "object" && typeof e != "function" && e != null)
        throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");
    this.updater.enqueueSetState(this, e, t, "setState")
}
;
Ll.prototype.forceUpdate = function(e) {
    this.updater.enqueueForceUpdate(this, e, "forceUpdate")
}
;
function E5() {}
E5.prototype = Ll.prototype;
function O2(e, t, n) {
    this.props = e,
    this.context = t,
    this.refs = y5,
    this.updater = n || g5
}
var D2 = O2.prototype = new E5;
D2.constructor = O2;
v5(D2, Ll.prototype);
D2.isPureReactComponent = !0;
var W3 = Array.isArray
  , w5 = Object.prototype.hasOwnProperty
  , N2 = {
    current: null
}
  , b5 = {
    key: !0,
    ref: !0,
    __self: !0,
    __source: !0
};
function _5(e, t, n) {
    var r, i = {}, o = null, s = null;
    if (t != null)
        for (r in t.ref !== void 0 && (s = t.ref),
        t.key !== void 0 && (o = "" + t.key),
        t)
            w5.call(t, r) && !b5.hasOwnProperty(r) && (i[r] = t[r]);
    var a = arguments.length - 2;
    if (a === 1)
        i.children = n;
    else if (1 < a) {
        for (var l = Array(a), c = 0; c < a; c++)
            l[c] = arguments[c + 2];
        i.children = l
    }
    if (e && e.defaultProps)
        for (r in a = e.defaultProps,
        a)
            i[r] === void 0 && (i[r] = a[r]);
    return {
        $$typeof: dd,
        type: e,
        key: o,
        ref: s,
        props: i,
        _owner: N2.current
    }
}
function tT(e, t) {
    return {
        $$typeof: dd,
        type: e.type,
        key: t,
        ref: e.ref,
        props: e.props,
        _owner: e._owner
    }
}
function F2(e) {
    return typeof e == "object" && e !== null && e.$$typeof === dd
}
function nT(e) {
    var t = {
        "=": "=0",
        ":": "=2"
    };
    return "$" + e.replace(/[=:]/g, function(n) {
        return t[n]
    })
}
var G3 = /\/+/g;
function N0(e, t) {
    return typeof e == "object" && e !== null && e.key != null ? nT("" + e.key) : t.toString(36)
}
function Rf(e, t, n, r, i) {
    var o = typeof e;
    (o === "undefined" || o === "boolean") && (e = null);
    var s = !1;
    if (e === null)
        s = !0;
    else
        switch (o) {
        case "string":
        case "number":
            s = !0;
            break;
        case "object":
            switch (e.$$typeof) {
            case dd:
            case W9:
                s = !0
            }
        }
    if (s)
        return s = e,
        i = i(s),
        e = r === "" ? "." + N0(s, 0) : r,
        W3(i) ? (n = "",
        e != null && (n = e.replace(G3, "$&/") + "/"),
        Rf(i, t, n, "", function(c) {
            return c
        })) : i != null && (F2(i) && (i = tT(i, n + (!i.key || s && s.key === i.key ? "" : ("" + i.key).replace(G3, "$&/") + "/") + e)),
        t.push(i)),
        1;
    if (s = 0,
    r = r === "" ? "." : r + ":",
    W3(e))
        for (var a = 0; a < e.length; a++) {
            o = e[a];
            var l = r + N0(o, a);
            s += Rf(o, t, n, l, i)
        }
    else if (l = eT(e),
    typeof l == "function")
        for (e = l.call(e),
        a = 0; !(o = e.next()).done; )
            o = o.value,
            l = r + N0(o, a++),
            s += Rf(o, t, n, l, i);
    else if (o === "object")
        throw t = String(e),
        Error("Objects are not valid as a React child (found: " + (t === "[object Object]" ? "object with keys {" + Object.keys(e).join(", ") + "}" : t) + "). If you meant to render a collection of children, use an array instead.");
    return s
}
function Bd(e, t, n) {
    if (e == null)
        return e;
    var r = []
      , i = 0;
    return Rf(e, r, "", "", function(o) {
        return t.call(n, o, i++)
    }),
    r
}
function rT(e) {
    if (e._status === -1) {
        var t = e._result;
        t = t(),
        t.then(function(n) {
            (e._status === 0 || e._status === -1) && (e._status = 1,
            e._result = n)
        }, function(n) {
            (e._status === 0 || e._status === -1) && (e._status = 2,
            e._result = n)
        }),
        e._status === -1 && (e._status = 0,
        e._result = t)
    }
    if (e._status === 1)
        return e._result.default;
    throw e._result
}
var bn = {
    current: null
}
  , Of = {
    transition: null
}
  , iT = {
    ReactCurrentDispatcher: bn,
    ReactCurrentBatchConfig: Of,
    ReactCurrentOwner: N2
};
_e.Children = {
    map: Bd,
    forEach: function(e, t, n) {
        Bd(e, function() {
            t.apply(this, arguments)
        }, n)
    },
    count: function(e) {
        var t = 0;
        return Bd(e, function() {
            t++
        }),
        t
    },
    toArray: function(e) {
        return Bd(e, function(t) {
            return t
        }) || []
    },
    only: function(e) {
        if (!F2(e))
            throw Error("React.Children.only expected to receive a single React element child.");
        return e
    }
};
_e.Component = Ll;
_e.Fragment = G9;
_e.Profiler = Y9;
_e.PureComponent = O2;
_e.StrictMode = j9;
_e.Suspense = q9;
_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = iT;
_e.cloneElement = function(e, t, n) {
    if (e == null)
        throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + e + ".");
    var r = v5({}, e.props)
      , i = e.key
      , o = e.ref
      , s = e._owner;
    if (t != null) {
        if (t.ref !== void 0 && (o = t.ref,
        s = N2.current),
        t.key !== void 0 && (i = "" + t.key),
        e.type && e.type.defaultProps)
            var a = e.type.defaultProps;
        for (l in t)
            w5.call(t, l) && !b5.hasOwnProperty(l) && (r[l] = t[l] === void 0 && a !== void 0 ? a[l] : t[l])
    }
    var l = arguments.length - 2;
    if (l === 1)
        r.children = n;
    else if (1 < l) {
        a = Array(l);
        for (var c = 0; c < l; c++)
            a[c] = arguments[c + 2];
        r.children = a
    }
    return {
        $$typeof: dd,
        type: e.type,
        key: i,
        ref: o,
        props: r,
        _owner: s
    }
}
;
_e.createContext = function(e) {
    return e = {
        $$typeof: K9,
        _currentValue: e,
        _currentValue2: e,
        _threadCount: 0,
        Provider: null,
        Consumer: null,
        _defaultValue: null,
        _globalName: null
    },
    e.Provider = {
        $$typeof: Z9,
        _context: e
    },
    e.Consumer = e
}
;
_e.createElement = _5;
_e.createFactory = function(e) {
    var t = _5.bind(null, e);
    return t.type = e,
    t
}
;
_e.createRef = function() {
    return {
        current: null
    }
}
;
_e.forwardRef = function(e) {
    return {
        $$typeof: X9,
        render: e
    }
}
;
_e.isValidElement = F2;
_e.lazy = function(e) {
    return {
        $$typeof: J9,
        _payload: {
            _status: -1,
            _result: e
        },
        _init: rT
    }
}
;
_e.memo = function(e, t) {
    return {
        $$typeof: Q9,
        type: e,
        compare: t === void 0 ? null : t
    }
}
;
_e.startTransition = function(e) {
    var t = Of.transition;
    Of.transition = {};
    try {
        e()
    } finally {
        Of.transition = t
    }
}
;
_e.unstable_act = function() {
    throw Error("act(...) is not supported in production builds of React.")
}
;
_e.useCallback = function(e, t) {
    return bn.current.useCallback(e, t)
}
;
_e.useContext = function(e) {
    return bn.current.useContext(e)
}
;
_e.useDebugValue = function() {}
;
_e.useDeferredValue = function(e) {
    return bn.current.useDeferredValue(e)
}
;
_e.useEffect = function(e, t) {
    return bn.current.useEffect(e, t)
}
;
_e.useId = function() {
    return bn.current.useId()
}
;
_e.useImperativeHandle = function(e, t, n) {
    return bn.current.useImperativeHandle(e, t, n)
}
;
_e.useInsertionEffect = function(e, t) {
    return bn.current.useInsertionEffect(e, t)
}
;
_e.useLayoutEffect = function(e, t) {
    return bn.current.useLayoutEffect(e, t)
}
;
_e.useMemo = function(e, t) {
    return bn.current.useMemo(e, t)
}
;
_e.useReducer = function(e, t, n) {
    return bn.current.useReducer(e, t, n)
}
;
_e.useRef = function(e) {
    return bn.current.useRef(e)
}
;
_e.useState = function(e) {
    return bn.current.useState(e)
}
;
_e.useSyncExternalStore = function(e, t, n) {
    return bn.current.useSyncExternalStore(e, t, n)
}
;
_e.useTransition = function() {
    return bn.current.useTransition()
}
;
_e.version = "18.2.0";
m5.exports = _e;
var x = m5.exports;
const ee = Al(x)
  , oT = V9({
    __proto__: null,
    default: ee
}, [x]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var sT = x
  , aT = Symbol.for("react.element")
  , lT = Symbol.for("react.fragment")
  , cT = Object.prototype.hasOwnProperty
  , uT = sT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner
  , dT = {
    key: !0,
    ref: !0,
    __self: !0,
    __source: !0
};
function x5(e, t, n) {
    var r, i = {}, o = null, s = null;
    n !== void 0 && (o = "" + n),
    t.key !== void 0 && (o = "" + t.key),
    t.ref !== void 0 && (s = t.ref);
    for (r in t)
        cT.call(t, r) && !dT.hasOwnProperty(r) && (i[r] = t[r]);
    if (e && e.defaultProps)
        for (r in t = e.defaultProps,
        t)
            i[r] === void 0 && (i[r] = t[r]);
    return {
        $$typeof: aT,
        type: e,
        key: o,
        ref: s,
        props: i,
        _owner: uT.current
    }
}
k1.Fragment = lT;
k1.jsx = x5;
k1.jsxs = x5;
p5.exports = k1;
var $2 = p5.exports;
const re = $2.Fragment
  , p = $2.jsx
  , k = $2.jsxs;
var I5 = {
    exports: {}
}
  , jn = {}
  , S5 = {
    exports: {}
}
  , C5 = {};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
(function(e) {
    function t(z, W) {
        var D = z.length;
        z.push(W);
        e: for (; 0 < D; ) {
            var F = D - 1 >>> 1
              , B = z[F];
            if (0 < i(B, W))
                z[F] = W,
                z[D] = B,
                D = F;
            else
                break e
        }
    }
    function n(z) {
        return z.length === 0 ? null : z[0]
    }
    function r(z) {
        if (z.length === 0)
            return null;
        var W = z[0]
          , D = z.pop();
        if (D !== W) {
            z[0] = D;
            e: for (var F = 0, B = z.length, Y = B >>> 1; F < Y; ) {
                var G = 2 * (F + 1) - 1
                  , K = z[G]
                  , q = G + 1
                  , oe = z[q];
                if (0 > i(K, D))
                    q < B && 0 > i(oe, K) ? (z[F] = oe,
                    z[q] = D,
                    F = q) : (z[F] = K,
                    z[G] = D,
                    F = G);
                else if (q < B && 0 > i(oe, D))
                    z[F] = oe,
                    z[q] = D,
                    F = q;
                else
                    break e
            }
        }
        return W
    }
    function i(z, W) {
        var D = z.sortIndex - W.sortIndex;
        return D !== 0 ? D : z.id - W.id
    }
    if (typeof performance == "object" && typeof performance.now == "function") {
        var o = performance;
        e.unstable_now = function() {
            return o.now()
        }
    } else {
        var s = Date
          , a = s.now();
        e.unstable_now = function() {
            return s.now() - a
        }
    }
    var l = []
      , c = []
      , u = 1
      , d = null
      , f = 3
      , h = !1
      , m = !1
      , g = !1
      , E = typeof setTimeout == "function" ? setTimeout : null
      , v = typeof clearTimeout == "function" ? clearTimeout : null
      , y = typeof setImmediate < "u" ? setImmediate : null;
    typeof navigator < "u" && navigator.scheduling !== void 0 && navigator.scheduling.isInputPending !== void 0 && navigator.scheduling.isInputPending.bind(navigator.scheduling);
    function w(z) {
        for (var W = n(c); W !== null; ) {
            if (W.callback === null)
                r(c);
            else if (W.startTime <= z)
                r(c),
                W.sortIndex = W.expirationTime,
                t(l, W);
            else
                break;
            W = n(c)
        }
    }
    function b(z) {
        if (g = !1,
        w(z),
        !m)
            if (n(l) !== null)
                m = !0,
                te(I);
            else {
                var W = n(c);
                W !== null && Z(b, W.startTime - z)
            }
    }
    function I(z, W) {
        m = !1,
        g && (g = !1,
        v(T),
        T = -1),
        h = !0;
        var D = f;
        try {
            for (w(W),
            d = n(l); d !== null && (!(d.expirationTime > W) || z && !P()); ) {
                var F = d.callback;
                if (typeof F == "function") {
                    d.callback = null,
                    f = d.priorityLevel;
                    var B = F(d.expirationTime <= W);
                    W = e.unstable_now(),
                    typeof B == "function" ? d.callback = B : d === n(l) && r(l),
                    w(W)
                } else
                    r(l);
                d = n(l)
            }
            if (d !== null)
                var Y = !0;
            else {
                var G = n(c);
                G !== null && Z(b, G.startTime - W),
                Y = !1
            }
            return Y
        } finally {
            d = null,
            f = D,
            h = !1
        }
    }
    var S = !1
      , C = null
      , T = -1
      , L = 5
      , A = -1;
    function P() {
        return !(e.unstable_now() - A < L)
    }
    function O() {
        if (C !== null) {
            var z = e.unstable_now();
            A = z;
            var W = !0;
            try {
                W = C(!0, z)
            } finally {
                W ? N() : (S = !1,
                C = null)
            }
        } else
            S = !1
    }
    var N;
    if (typeof y == "function")
        N = function() {
            y(O)
        }
        ;
    else if (typeof MessageChannel < "u") {
        var $ = new MessageChannel
          , V = $.port2;
        $.port1.onmessage = O,
        N = function() {
            V.postMessage(null)
        }
    } else
        N = function() {
            E(O, 0)
        }
        ;
    function te(z) {
        C = z,
        S || (S = !0,
        N())
    }
    function Z(z, W) {
        T = E(function() {
            z(e.unstable_now())
        }, W)
    }
    e.unstable_IdlePriority = 5,
    e.unstable_ImmediatePriority = 1,
    e.unstable_LowPriority = 4,
    e.unstable_NormalPriority = 3,
    e.unstable_Profiling = null,
    e.unstable_UserBlockingPriority = 2,
    e.unstable_cancelCallback = function(z) {
        z.callback = null
    }
    ,
    e.unstable_continueExecution = function() {
        m || h || (m = !0,
        te(I))
    }
    ,
    e.unstable_forceFrameRate = function(z) {
        0 > z || 125 < z ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : L = 0 < z ? Math.floor(1e3 / z) : 5
    }
    ,
    e.unstable_getCurrentPriorityLevel = function() {
        return f
    }
    ,
    e.unstable_getFirstCallbackNode = function() {
        return n(l)
    }
    ,
    e.unstable_next = function(z) {
        switch (f) {
        case 1:
        case 2:
        case 3:
            var W = 3;
            break;
        default:
            W = f
        }
        var D = f;
        f = W;
        try {
            return z()
        } finally {
            f = D
        }
    }
    ,
    e.unstable_pauseExecution = function() {}
    ,
    e.unstable_requestPaint = function() {}
    ,
    e.unstable_runWithPriority = function(z, W) {
        switch (z) {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
            break;
        default:
            z = 3
        }
        var D = f;
        f = z;
        try {
            return W()
        } finally {
            f = D
        }
    }
    ,
    e.unstable_scheduleCallback = function(z, W, D) {
        var F = e.unstable_now();
        switch (typeof D == "object" && D !== null ? (D = D.delay,
        D = typeof D == "number" && 0 < D ? F + D : F) : D = F,
        z) {
        case 1:
            var B = -1;
            break;
        case 2:
            B = 250;
            break;
        case 5:
            B = 1073741823;
            break;
        case 4:
            B = 1e4;
            break;
        default:
            B = 5e3
        }
        return B = D + B,
        z = {
            id: u++,
            callback: W,
            priorityLevel: z,
            startTime: D,
            expirationTime: B,
            sortIndex: -1
        },
        D > F ? (z.sortIndex = D,
        t(c, z),
        n(l) === null && z === n(c) && (g ? (v(T),
        T = -1) : g = !0,
        Z(b, D - F))) : (z.sortIndex = B,
        t(l, z),
        m || h || (m = !0,
        te(I))),
        z
    }
    ,
    e.unstable_shouldYield = P,
    e.unstable_wrapCallback = function(z) {
        var W = f;
        return function() {
            var D = f;
            f = W;
            try {
                return z.apply(this, arguments)
            } finally {
                f = D
            }
        }
    }
}
)(C5);
S5.exports = C5;
var fT = S5.exports;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var k5 = x
  , Wn = fT;
function X(e) {
    for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++)
        t += "&args[]=" + encodeURIComponent(arguments[n]);
    return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings."
}
var T5 = new Set
  , pu = {};
function la(e, t) {
    ul(e, t),
    ul(e + "Capture", t)
}
function ul(e, t) {
    for (pu[e] = t,
    e = 0; e < t.length; e++)
        T5.add(t[e])
}
var Hi = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u")
  , gm = Object.prototype.hasOwnProperty
  , hT = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/
  , j3 = {}
  , Y3 = {};
function pT(e) {
    return gm.call(Y3, e) ? !0 : gm.call(j3, e) ? !1 : hT.test(e) ? Y3[e] = !0 : (j3[e] = !0,
    !1)
}
function mT(e, t, n, r) {
    if (n !== null && n.type === 0)
        return !1;
    switch (typeof t) {
    case "function":
    case "symbol":
        return !0;
    case "boolean":
        return r ? !1 : n !== null ? !n.acceptsBooleans : (e = e.toLowerCase().slice(0, 5),
        e !== "data-" && e !== "aria-");
    default:
        return !1
    }
}
function gT(e, t, n, r) {
    if (t === null || typeof t > "u" || mT(e, t, n, r))
        return !0;
    if (r)
        return !1;
    if (n !== null)
        switch (n.type) {
        case 3:
            return !t;
        case 4:
            return t === !1;
        case 5:
            return isNaN(t);
        case 6:
            return isNaN(t) || 1 > t
        }
    return !1
}
function _n(e, t, n, r, i, o, s) {
    this.acceptsBooleans = t === 2 || t === 3 || t === 4,
    this.attributeName = r,
    this.attributeNamespace = i,
    this.mustUseProperty = n,
    this.propertyName = e,
    this.type = t,
    this.sanitizeURL = o,
    this.removeEmptyString = s
}
var Zt = {};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e) {
    Zt[e] = new _n(e,0,!1,e,null,!1,!1)
});
[["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(e) {
    var t = e[0];
    Zt[t] = new _n(t,1,!1,e[1],null,!1,!1)
});
["contentEditable", "draggable", "spellCheck", "value"].forEach(function(e) {
    Zt[e] = new _n(e,2,!1,e.toLowerCase(),null,!1,!1)
});
["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(e) {
    Zt[e] = new _n(e,2,!1,e,null,!1,!1)
});
"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e) {
    Zt[e] = new _n(e,3,!1,e.toLowerCase(),null,!1,!1)
});
["checked", "multiple", "muted", "selected"].forEach(function(e) {
    Zt[e] = new _n(e,3,!0,e,null,!1,!1)
});
["capture", "download"].forEach(function(e) {
    Zt[e] = new _n(e,4,!1,e,null,!1,!1)
});
["cols", "rows", "size", "span"].forEach(function(e) {
    Zt[e] = new _n(e,6,!1,e,null,!1,!1)
});
["rowSpan", "start"].forEach(function(e) {
    Zt[e] = new _n(e,5,!1,e.toLowerCase(),null,!1,!1)
});
var B2 = /[\-:]([a-z])/g;
function z2(e) {
    return e[1].toUpperCase()
}
"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e) {
    var t = e.replace(B2, z2);
    Zt[t] = new _n(t,1,!1,e,null,!1,!1)
});
"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e) {
    var t = e.replace(B2, z2);
    Zt[t] = new _n(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)
});
["xml:base", "xml:lang", "xml:space"].forEach(function(e) {
    var t = e.replace(B2, z2);
    Zt[t] = new _n(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)
});
["tabIndex", "crossOrigin"].forEach(function(e) {
    Zt[e] = new _n(e,1,!1,e.toLowerCase(),null,!1,!1)
});
Zt.xlinkHref = new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);
["src", "href", "action", "formAction"].forEach(function(e) {
    Zt[e] = new _n(e,1,!1,e.toLowerCase(),null,!0,!0)
});
function H2(e, t, n, r) {
    var i = Zt.hasOwnProperty(t) ? Zt[t] : null;
    (i !== null ? i.type !== 0 : r || !(2 < t.length) || t[0] !== "o" && t[0] !== "O" || t[1] !== "n" && t[1] !== "N") && (gT(t, n, i, r) && (n = null),
    r || i === null ? pT(t) && (n === null ? e.removeAttribute(t) : e.setAttribute(t, "" + n)) : i.mustUseProperty ? e[i.propertyName] = n === null ? i.type === 3 ? !1 : "" : n : (t = i.attributeName,
    r = i.attributeNamespace,
    n === null ? e.removeAttribute(t) : (i = i.type,
    n = i === 3 || i === 4 && n === !0 ? "" : "" + n,
    r ? e.setAttributeNS(r, t, n) : e.setAttribute(t, n))))
}
var Zi = k5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED
  , zd = Symbol.for("react.element")
  , Aa = Symbol.for("react.portal")
  , La = Symbol.for("react.fragment")
  , U2 = Symbol.for("react.strict_mode")
  , vm = Symbol.for("react.profiler")
  , M5 = Symbol.for("react.provider")
  , A5 = Symbol.for("react.context")
  , V2 = Symbol.for("react.forward_ref")
  , ym = Symbol.for("react.suspense")
  , Em = Symbol.for("react.suspense_list")
  , W2 = Symbol.for("react.memo")
  , lo = Symbol.for("react.lazy")
  , L5 = Symbol.for("react.offscreen")
  , Z3 = Symbol.iterator;
function Ql(e) {
    return e === null || typeof e != "object" ? null : (e = Z3 && e[Z3] || e["@@iterator"],
    typeof e == "function" ? e : null)
}
var dt = Object.assign, F0;
function kc(e) {
    if (F0 === void 0)
        try {
            throw Error()
        } catch (n) {
            var t = n.stack.trim().match(/\n( *(at )?)/);
            F0 = t && t[1] || ""
        }
    return `
` + F0 + e
}
var $0 = !1;
function B0(e, t) {
    if (!e || $0)
        return "";
    $0 = !0;
    var n = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
        if (t)
            if (t = function() {
                throw Error()
            }
            ,
            Object.defineProperty(t.prototype, "props", {
                set: function() {
                    throw Error()
                }
            }),
            typeof Reflect == "object" && Reflect.construct) {
                try {
                    Reflect.construct(t, [])
                } catch (c) {
                    var r = c
                }
                Reflect.construct(e, [], t)
            } else {
                try {
                    t.call()
                } catch (c) {
                    r = c
                }
                e.call(t.prototype)
            }
        else {
            try {
                throw Error()
            } catch (c) {
                r = c
            }
            e()
        }
    } catch (c) {
        if (c && r && typeof c.stack == "string") {
            for (var i = c.stack.split(`
`), o = r.stack.split(`
`), s = i.length - 1, a = o.length - 1; 1 <= s && 0 <= a && i[s] !== o[a]; )
                a--;
            for (; 1 <= s && 0 <= a; s--,
            a--)
                if (i[s] !== o[a]) {
                    if (s !== 1 || a !== 1)
                        do
                            if (s--,
                            a--,
                            0 > a || i[s] !== o[a]) {
                                var l = `
` + i[s].replace(" at new ", " at ");
                                return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)),
                                l
                            }
                        while (1 <= s && 0 <= a);
                    break
                }
        }
    } finally {
        $0 = !1,
        Error.prepareStackTrace = n
    }
    return (e = e ? e.displayName || e.name : "") ? kc(e) : ""
}
function vT(e) {
    switch (e.tag) {
    case 5:
        return kc(e.type);
    case 16:
        return kc("Lazy");
    case 13:
        return kc("Suspense");
    case 19:
        return kc("SuspenseList");
    case 0:
    case 2:
    case 15:
        return e = B0(e.type, !1),
        e;
    case 11:
        return e = B0(e.type.render, !1),
        e;
    case 1:
        return e = B0(e.type, !0),
        e;
    default:
        return ""
    }
}
function wm(e) {
    if (e == null)
        return null;
    if (typeof e == "function")
        return e.displayName || e.name || null;
    if (typeof e == "string")
        return e;
    switch (e) {
    case La:
        return "Fragment";
    case Aa:
        return "Portal";
    case vm:
        return "Profiler";
    case U2:
        return "StrictMode";
    case ym:
        return "Suspense";
    case Em:
        return "SuspenseList"
    }
    if (typeof e == "object")
        switch (e.$$typeof) {
        case A5:
            return (e.displayName || "Context") + ".Consumer";
        case M5:
            return (e._context.displayName || "Context") + ".Provider";
        case V2:
            var t = e.render;
            return e = e.displayName,
            e || (e = t.displayName || t.name || "",
            e = e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef"),
            e;
        case W2:
            return t = e.displayName || null,
            t !== null ? t : wm(e.type) || "Memo";
        case lo:
            t = e._payload,
            e = e._init;
            try {
                return wm(e(t))
            } catch {}
        }
    return null
}
function yT(e) {
    var t = e.type;
    switch (e.tag) {
    case 24:
        return "Cache";
    case 9:
        return (t.displayName || "Context") + ".Consumer";
    case 10:
        return (t._context.displayName || "Context") + ".Provider";
    case 18:
        return "DehydratedFragment";
    case 11:
        return e = t.render,
        e = e.displayName || e.name || "",
        t.displayName || (e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef");
    case 7:
        return "Fragment";
    case 5:
        return t;
    case 4:
        return "Portal";
    case 3:
        return "Root";
    case 6:
        return "Text";
    case 16:
        return wm(t);
    case 8:
        return t === U2 ? "StrictMode" : "Mode";
    case 22:
        return "Offscreen";
    case 12:
        return "Profiler";
    case 21:
        return "Scope";
    case 13:
        return "Suspense";
    case 19:
        return "SuspenseList";
    case 25:
        return "TracingMarker";
    case 1:
    case 0:
    case 17:
    case 2:
    case 14:
    case 15:
        if (typeof t == "function")
            return t.displayName || t.name || null;
        if (typeof t == "string")
            return t
    }
    return null
}
function Uo(e) {
    switch (typeof e) {
    case "boolean":
    case "number":
    case "string":
    case "undefined":
        return e;
    case "object":
        return e;
    default:
        return ""
    }
}
function P5(e) {
    var t = e.type;
    return (e = e.nodeName) && e.toLowerCase() === "input" && (t === "checkbox" || t === "radio")
}
function ET(e) {
    var t = P5(e) ? "checked" : "value"
      , n = Object.getOwnPropertyDescriptor(e.constructor.prototype, t)
      , r = "" + e[t];
    if (!e.hasOwnProperty(t) && typeof n < "u" && typeof n.get == "function" && typeof n.set == "function") {
        var i = n.get
          , o = n.set;
        return Object.defineProperty(e, t, {
            configurable: !0,
            get: function() {
                return i.call(this)
            },
            set: function(s) {
                r = "" + s,
                o.call(this, s)
            }
        }),
        Object.defineProperty(e, t, {
            enumerable: n.enumerable
        }),
        {
            getValue: function() {
                return r
            },
            setValue: function(s) {
                r = "" + s
            },
            stopTracking: function() {
                e._valueTracker = null,
                delete e[t]
            }
        }
    }
}
function Hd(e) {
    e._valueTracker || (e._valueTracker = ET(e))
}
function R5(e) {
    if (!e)
        return !1;
    var t = e._valueTracker;
    if (!t)
        return !0;
    var n = t.getValue()
      , r = "";
    return e && (r = P5(e) ? e.checked ? "true" : "false" : e.value),
    e = r,
    e !== n ? (t.setValue(e),
    !0) : !1
}
function hh(e) {
    if (e = e || (typeof document < "u" ? document : void 0),
    typeof e > "u")
        return null;
    try {
        return e.activeElement || e.body
    } catch {
        return e.body
    }
}
function bm(e, t) {
    var n = t.checked;
    return dt({}, t, {
        defaultChecked: void 0,
        defaultValue: void 0,
        value: void 0,
        checked: n ?? e._wrapperState.initialChecked
    })
}
function K3(e, t) {
    var n = t.defaultValue == null ? "" : t.defaultValue
      , r = t.checked != null ? t.checked : t.defaultChecked;
    n = Uo(t.value != null ? t.value : n),
    e._wrapperState = {
        initialChecked: r,
        initialValue: n,
        controlled: t.type === "checkbox" || t.type === "radio" ? t.checked != null : t.value != null
    }
}
function O5(e, t) {
    t = t.checked,
    t != null && H2(e, "checked", t, !1)
}
function _m(e, t) {
    O5(e, t);
    var n = Uo(t.value)
      , r = t.type;
    if (n != null)
        r === "number" ? (n === 0 && e.value === "" || e.value != n) && (e.value = "" + n) : e.value !== "" + n && (e.value = "" + n);
    else if (r === "submit" || r === "reset") {
        e.removeAttribute("value");
        return
    }
    t.hasOwnProperty("value") ? xm(e, t.type, n) : t.hasOwnProperty("defaultValue") && xm(e, t.type, Uo(t.defaultValue)),
    t.checked == null && t.defaultChecked != null && (e.defaultChecked = !!t.defaultChecked)
}
function X3(e, t, n) {
    if (t.hasOwnProperty("value") || t.hasOwnProperty("defaultValue")) {
        var r = t.type;
        if (!(r !== "submit" && r !== "reset" || t.value !== void 0 && t.value !== null))
            return;
        t = "" + e._wrapperState.initialValue,
        n || t === e.value || (e.value = t),
        e.defaultValue = t
    }
    n = e.name,
    n !== "" && (e.name = ""),
    e.defaultChecked = !!e._wrapperState.initialChecked,
    n !== "" && (e.name = n)
}
function xm(e, t, n) {
    (t !== "number" || hh(e.ownerDocument) !== e) && (n == null ? e.defaultValue = "" + e._wrapperState.initialValue : e.defaultValue !== "" + n && (e.defaultValue = "" + n))
}
var Tc = Array.isArray;
function Ka(e, t, n, r) {
    if (e = e.options,
    t) {
        t = {};
        for (var i = 0; i < n.length; i++)
            t["$" + n[i]] = !0;
        for (n = 0; n < e.length; n++)
            i = t.hasOwnProperty("$" + e[n].value),
            e[n].selected !== i && (e[n].selected = i),
            i && r && (e[n].defaultSelected = !0)
    } else {
        for (n = "" + Uo(n),
        t = null,
        i = 0; i < e.length; i++) {
            if (e[i].value === n) {
                e[i].selected = !0,
                r && (e[i].defaultSelected = !0);
                return
            }
            t !== null || e[i].disabled || (t = e[i])
        }
        t !== null && (t.selected = !0)
    }
}
function Im(e, t) {
    if (t.dangerouslySetInnerHTML != null)
        throw Error(X(91));
    return dt({}, t, {
        value: void 0,
        defaultValue: void 0,
        children: "" + e._wrapperState.initialValue
    })
}
function q3(e, t) {
    var n = t.value;
    if (n == null) {
        if (n = t.children,
        t = t.defaultValue,
        n != null) {
            if (t != null)
                throw Error(X(92));
            if (Tc(n)) {
                if (1 < n.length)
                    throw Error(X(93));
                n = n[0]
            }
            t = n
        }
        t == null && (t = ""),
        n = t
    }
    e._wrapperState = {
        initialValue: Uo(n)
    }
}
function D5(e, t) {
    var n = Uo(t.value)
      , r = Uo(t.defaultValue);
    n != null && (n = "" + n,
    n !== e.value && (e.value = n),
    t.defaultValue == null && e.defaultValue !== n && (e.defaultValue = n)),
    r != null && (e.defaultValue = "" + r)
}
function Q3(e) {
    var t = e.textContent;
    t === e._wrapperState.initialValue && t !== "" && t !== null && (e.value = t)
}
function N5(e) {
    switch (e) {
    case "svg":
        return "http://www.w3.org/2000/svg";
    case "math":
        return "http://www.w3.org/1998/Math/MathML";
    default:
        return "http://www.w3.org/1999/xhtml"
    }
}
function Sm(e, t) {
    return e == null || e === "http://www.w3.org/1999/xhtml" ? N5(t) : e === "http://www.w3.org/2000/svg" && t === "foreignObject" ? "http://www.w3.org/1999/xhtml" : e
}
var Ud, F5 = function(e) {
    return typeof MSApp < "u" && MSApp.execUnsafeLocalFunction ? function(t, n, r, i) {
        MSApp.execUnsafeLocalFunction(function() {
            return e(t, n, r, i)
        })
    }
    : e
}(function(e, t) {
    if (e.namespaceURI !== "http://www.w3.org/2000/svg" || "innerHTML"in e)
        e.innerHTML = t;
    else {
        for (Ud = Ud || document.createElement("div"),
        Ud.innerHTML = "<svg>" + t.valueOf().toString() + "</svg>",
        t = Ud.firstChild; e.firstChild; )
            e.removeChild(e.firstChild);
        for (; t.firstChild; )
            e.appendChild(t.firstChild)
    }
});
function mu(e, t) {
    if (t) {
        var n = e.firstChild;
        if (n && n === e.lastChild && n.nodeType === 3) {
            n.nodeValue = t;
            return
        }
    }
    e.textContent = t
}
var zc = {
    animationIterationCount: !0,
    aspectRatio: !0,
    borderImageOutset: !0,
    borderImageSlice: !0,
    borderImageWidth: !0,
    boxFlex: !0,
    boxFlexGroup: !0,
    boxOrdinalGroup: !0,
    columnCount: !0,
    columns: !0,
    flex: !0,
    flexGrow: !0,
    flexPositive: !0,
    flexShrink: !0,
    flexNegative: !0,
    flexOrder: !0,
    gridArea: !0,
    gridRow: !0,
    gridRowEnd: !0,
    gridRowSpan: !0,
    gridRowStart: !0,
    gridColumn: !0,
    gridColumnEnd: !0,
    gridColumnSpan: !0,
    gridColumnStart: !0,
    fontWeight: !0,
    lineClamp: !0,
    lineHeight: !0,
    opacity: !0,
    order: !0,
    orphans: !0,
    tabSize: !0,
    widows: !0,
    zIndex: !0,
    zoom: !0,
    fillOpacity: !0,
    floodOpacity: !0,
    stopOpacity: !0,
    strokeDasharray: !0,
    strokeDashoffset: !0,
    strokeMiterlimit: !0,
    strokeOpacity: !0,
    strokeWidth: !0
}
  , wT = ["Webkit", "ms", "Moz", "O"];
Object.keys(zc).forEach(function(e) {
    wT.forEach(function(t) {
        t = t + e.charAt(0).toUpperCase() + e.substring(1),
        zc[t] = zc[e]
    })
});
function $5(e, t, n) {
    return t == null || typeof t == "boolean" || t === "" ? "" : n || typeof t != "number" || t === 0 || zc.hasOwnProperty(e) && zc[e] ? ("" + t).trim() : t + "px"
}
function B5(e, t) {
    e = e.style;
    for (var n in t)
        if (t.hasOwnProperty(n)) {
            var r = n.indexOf("--") === 0
              , i = $5(n, t[n], r);
            n === "float" && (n = "cssFloat"),
            r ? e.setProperty(n, i) : e[n] = i
        }
}
var bT = dt({
    menuitem: !0
}, {
    area: !0,
    base: !0,
    br: !0,
    col: !0,
    embed: !0,
    hr: !0,
    img: !0,
    input: !0,
    keygen: !0,
    link: !0,
    meta: !0,
    param: !0,
    source: !0,
    track: !0,
    wbr: !0
});
function Cm(e, t) {
    if (t) {
        if (bT[e] && (t.children != null || t.dangerouslySetInnerHTML != null))
            throw Error(X(137, e));
        if (t.dangerouslySetInnerHTML != null) {
            if (t.children != null)
                throw Error(X(60));
            if (typeof t.dangerouslySetInnerHTML != "object" || !("__html"in t.dangerouslySetInnerHTML))
                throw Error(X(61))
        }
        if (t.style != null && typeof t.style != "object")
            throw Error(X(62))
    }
}
function km(e, t) {
    if (e.indexOf("-") === -1)
        return typeof t.is == "string";
    switch (e) {
    case "annotation-xml":
    case "color-profile":
    case "font-face":
    case "font-face-src":
    case "font-face-uri":
    case "font-face-format":
    case "font-face-name":
    case "missing-glyph":
        return !1;
    default:
        return !0
    }
}
var Tm = null;
function G2(e) {
    return e = e.target || e.srcElement || window,
    e.correspondingUseElement && (e = e.correspondingUseElement),
    e.nodeType === 3 ? e.parentNode : e
}
var Mm = null
  , Xa = null
  , qa = null;
function J3(e) {
    if (e = pd(e)) {
        if (typeof Mm != "function")
            throw Error(X(280));
        var t = e.stateNode;
        t && (t = P1(t),
        Mm(e.stateNode, e.type, t))
    }
}
function z5(e) {
    Xa ? qa ? qa.push(e) : qa = [e] : Xa = e
}
function H5() {
    if (Xa) {
        var e = Xa
          , t = qa;
        if (qa = Xa = null,
        J3(e),
        t)
            for (e = 0; e < t.length; e++)
                J3(t[e])
    }
}
function U5(e, t) {
    return e(t)
}
function V5() {}
var z0 = !1;
function W5(e, t, n) {
    if (z0)
        return e(t, n);
    z0 = !0;
    try {
        return U5(e, t, n)
    } finally {
        z0 = !1,
        (Xa !== null || qa !== null) && (V5(),
        H5())
    }
}
function gu(e, t) {
    var n = e.stateNode;
    if (n === null)
        return null;
    var r = P1(n);
    if (r === null)
        return null;
    n = r[t];
    e: switch (t) {
    case "onClick":
    case "onClickCapture":
    case "onDoubleClick":
    case "onDoubleClickCapture":
    case "onMouseDown":
    case "onMouseDownCapture":
    case "onMouseMove":
    case "onMouseMoveCapture":
    case "onMouseUp":
    case "onMouseUpCapture":
    case "onMouseEnter":
        (r = !r.disabled) || (e = e.type,
        r = !(e === "button" || e === "input" || e === "select" || e === "textarea")),
        e = !r;
        break e;
    default:
        e = !1
    }
    if (e)
        return null;
    if (n && typeof n != "function")
        throw Error(X(231, t, typeof n));
    return n
}
var Am = !1;
if (Hi)
    try {
        var Jl = {};
        Object.defineProperty(Jl, "passive", {
            get: function() {
                Am = !0
            }
        }),
        window.addEventListener("test", Jl, Jl),
        window.removeEventListener("test", Jl, Jl)
    } catch {
        Am = !1
    }
function _T(e, t, n, r, i, o, s, a, l) {
    var c = Array.prototype.slice.call(arguments, 3);
    try {
        t.apply(n, c)
    } catch (u) {
        this.onError(u)
    }
}
var Hc = !1
  , ph = null
  , mh = !1
  , Lm = null
  , xT = {
    onError: function(e) {
        Hc = !0,
        ph = e
    }
};
function IT(e, t, n, r, i, o, s, a, l) {
    Hc = !1,
    ph = null,
    _T.apply(xT, arguments)
}
function ST(e, t, n, r, i, o, s, a, l) {
    if (IT.apply(this, arguments),
    Hc) {
        if (Hc) {
            var c = ph;
            Hc = !1,
            ph = null
        } else
            throw Error(X(198));
        mh || (mh = !0,
        Lm = c)
    }
}
function ca(e) {
    var t = e
      , n = e;
    if (e.alternate)
        for (; t.return; )
            t = t.return;
    else {
        e = t;
        do
            t = e,
            t.flags & 4098 && (n = t.return),
            e = t.return;
        while (e)
    }
    return t.tag === 3 ? n : null
}
function G5(e) {
    if (e.tag === 13) {
        var t = e.memoizedState;
        if (t === null && (e = e.alternate,
        e !== null && (t = e.memoizedState)),
        t !== null)
            return t.dehydrated
    }
    return null
}
function eE(e) {
    if (ca(e) !== e)
        throw Error(X(188))
}
function CT(e) {
    var t = e.alternate;
    if (!t) {
        if (t = ca(e),
        t === null)
            throw Error(X(188));
        return t !== e ? null : e
    }
    for (var n = e, r = t; ; ) {
        var i = n.return;
        if (i === null)
            break;
        var o = i.alternate;
        if (o === null) {
            if (r = i.return,
            r !== null) {
                n = r;
                continue
            }
            break
        }
        if (i.child === o.child) {
            for (o = i.child; o; ) {
                if (o === n)
                    return eE(i),
                    e;
                if (o === r)
                    return eE(i),
                    t;
                o = o.sibling
            }
            throw Error(X(188))
        }
        if (n.return !== r.return)
            n = i,
            r = o;
        else {
            for (var s = !1, a = i.child; a; ) {
                if (a === n) {
                    s = !0,
                    n = i,
                    r = o;
                    break
                }
                if (a === r) {
                    s = !0,
                    r = i,
                    n = o;
                    break
                }
                a = a.sibling
            }
            if (!s) {
                for (a = o.child; a; ) {
                    if (a === n) {
                        s = !0,
                        n = o,
                        r = i;
                        break
                    }
                    if (a === r) {
                        s = !0,
                        r = o,
                        n = i;
                        break
                    }
                    a = a.sibling
                }
                if (!s)
                    throw Error(X(189))
            }
        }
        if (n.alternate !== r)
            throw Error(X(190))
    }
    if (n.tag !== 3)
        throw Error(X(188));
    return n.stateNode.current === n ? e : t
}
function j5(e) {
    return e = CT(e),
    e !== null ? Y5(e) : null
}
function Y5(e) {
    if (e.tag === 5 || e.tag === 6)
        return e;
    for (e = e.child; e !== null; ) {
        var t = Y5(e);
        if (t !== null)
            return t;
        e = e.sibling
    }
    return null
}
var Z5 = Wn.unstable_scheduleCallback
  , tE = Wn.unstable_cancelCallback
  , kT = Wn.unstable_shouldYield
  , TT = Wn.unstable_requestPaint
  , vt = Wn.unstable_now
  , MT = Wn.unstable_getCurrentPriorityLevel
  , j2 = Wn.unstable_ImmediatePriority
  , K5 = Wn.unstable_UserBlockingPriority
  , gh = Wn.unstable_NormalPriority
  , AT = Wn.unstable_LowPriority
  , X5 = Wn.unstable_IdlePriority
  , T1 = null
  , si = null;
function LT(e) {
    if (si && typeof si.onCommitFiberRoot == "function")
        try {
            si.onCommitFiberRoot(T1, e, void 0, (e.current.flags & 128) === 128)
        } catch {}
}
var Mr = Math.clz32 ? Math.clz32 : OT
  , PT = Math.log
  , RT = Math.LN2;
function OT(e) {
    return e >>>= 0,
    e === 0 ? 32 : 31 - (PT(e) / RT | 0) | 0
}
var Vd = 64
  , Wd = 4194304;
function Mc(e) {
    switch (e & -e) {
    case 1:
        return 1;
    case 2:
        return 2;
    case 4:
        return 4;
    case 8:
        return 8;
    case 16:
        return 16;
    case 32:
        return 32;
    case 64:
    case 128:
    case 256:
    case 512:
    case 1024:
    case 2048:
    case 4096:
    case 8192:
    case 16384:
    case 32768:
    case 65536:
    case 131072:
    case 262144:
    case 524288:
    case 1048576:
    case 2097152:
        return e & 4194240;
    case 4194304:
    case 8388608:
    case 16777216:
    case 33554432:
    case 67108864:
        return e & 130023424;
    case 134217728:
        return 134217728;
    case 268435456:
        return 268435456;
    case 536870912:
        return 536870912;
    case 1073741824:
        return 1073741824;
    default:
        return e
    }
}
function vh(e, t) {
    var n = e.pendingLanes;
    if (n === 0)
        return 0;
    var r = 0
      , i = e.suspendedLanes
      , o = e.pingedLanes
      , s = n & 268435455;
    if (s !== 0) {
        var a = s & ~i;
        a !== 0 ? r = Mc(a) : (o &= s,
        o !== 0 && (r = Mc(o)))
    } else
        s = n & ~i,
        s !== 0 ? r = Mc(s) : o !== 0 && (r = Mc(o));
    if (r === 0)
        return 0;
    if (t !== 0 && t !== r && !(t & i) && (i = r & -r,
    o = t & -t,
    i >= o || i === 16 && (o & 4194240) !== 0))
        return t;
    if (r & 4 && (r |= n & 16),
    t = e.entangledLanes,
    t !== 0)
        for (e = e.entanglements,
        t &= r; 0 < t; )
            n = 31 - Mr(t),
            i = 1 << n,
            r |= e[n],
            t &= ~i;
    return r
}
function DT(e, t) {
    switch (e) {
    case 1:
    case 2:
    case 4:
        return t + 250;
    case 8:
    case 16:
    case 32:
    case 64:
    case 128:
    case 256:
    case 512:
    case 1024:
    case 2048:
    case 4096:
    case 8192:
    case 16384:
    case 32768:
    case 65536:
    case 131072:
    case 262144:
    case 524288:
    case 1048576:
    case 2097152:
        return t + 5e3;
    case 4194304:
    case 8388608:
    case 16777216:
    case 33554432:
    case 67108864:
        return -1;
    case 134217728:
    case 268435456:
    case 536870912:
    case 1073741824:
        return -1;
    default:
        return -1
    }
}
function NT(e, t) {
    for (var n = e.suspendedLanes, r = e.pingedLanes, i = e.expirationTimes, o = e.pendingLanes; 0 < o; ) {
        var s = 31 - Mr(o)
          , a = 1 << s
          , l = i[s];
        l === -1 ? (!(a & n) || a & r) && (i[s] = DT(a, t)) : l <= t && (e.expiredLanes |= a),
        o &= ~a
    }
}
function Pm(e) {
    return e = e.pendingLanes & -1073741825,
    e !== 0 ? e : e & 1073741824 ? 1073741824 : 0
}
function q5() {
    var e = Vd;
    return Vd <<= 1,
    !(Vd & 4194240) && (Vd = 64),
    e
}
function H0(e) {
    for (var t = [], n = 0; 31 > n; n++)
        t.push(e);
    return t
}
function fd(e, t, n) {
    e.pendingLanes |= t,
    t !== 536870912 && (e.suspendedLanes = 0,
    e.pingedLanes = 0),
    e = e.eventTimes,
    t = 31 - Mr(t),
    e[t] = n
}
function FT(e, t) {
    var n = e.pendingLanes & ~t;
    e.pendingLanes = t,
    e.suspendedLanes = 0,
    e.pingedLanes = 0,
    e.expiredLanes &= t,
    e.mutableReadLanes &= t,
    e.entangledLanes &= t,
    t = e.entanglements;
    var r = e.eventTimes;
    for (e = e.expirationTimes; 0 < n; ) {
        var i = 31 - Mr(n)
          , o = 1 << i;
        t[i] = 0,
        r[i] = -1,
        e[i] = -1,
        n &= ~o
    }
}
function Y2(e, t) {
    var n = e.entangledLanes |= t;
    for (e = e.entanglements; n; ) {
        var r = 31 - Mr(n)
          , i = 1 << r;
        i & t | e[r] & t && (e[r] |= t),
        n &= ~i
    }
}
var Be = 0;
function Q5(e) {
    return e &= -e,
    1 < e ? 4 < e ? e & 268435455 ? 16 : 536870912 : 4 : 1
}
var J5, Z2, e_, t_, n_, Rm = !1, Gd = [], To = null, Mo = null, Ao = null, vu = new Map, yu = new Map, fo = [], $T = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
function nE(e, t) {
    switch (e) {
    case "focusin":
    case "focusout":
        To = null;
        break;
    case "dragenter":
    case "dragleave":
        Mo = null;
        break;
    case "mouseover":
    case "mouseout":
        Ao = null;
        break;
    case "pointerover":
    case "pointerout":
        vu.delete(t.pointerId);
        break;
    case "gotpointercapture":
    case "lostpointercapture":
        yu.delete(t.pointerId)
    }
}
function ec(e, t, n, r, i, o) {
    return e === null || e.nativeEvent !== o ? (e = {
        blockedOn: t,
        domEventName: n,
        eventSystemFlags: r,
        nativeEvent: o,
        targetContainers: [i]
    },
    t !== null && (t = pd(t),
    t !== null && Z2(t)),
    e) : (e.eventSystemFlags |= r,
    t = e.targetContainers,
    i !== null && t.indexOf(i) === -1 && t.push(i),
    e)
}
function BT(e, t, n, r, i) {
    switch (t) {
    case "focusin":
        return To = ec(To, e, t, n, r, i),
        !0;
    case "dragenter":
        return Mo = ec(Mo, e, t, n, r, i),
        !0;
    case "mouseover":
        return Ao = ec(Ao, e, t, n, r, i),
        !0;
    case "pointerover":
        var o = i.pointerId;
        return vu.set(o, ec(vu.get(o) || null, e, t, n, r, i)),
        !0;
    case "gotpointercapture":
        return o = i.pointerId,
        yu.set(o, ec(yu.get(o) || null, e, t, n, r, i)),
        !0
    }
    return !1
}
function r_(e) {
    var t = xs(e.target);
    if (t !== null) {
        var n = ca(t);
        if (n !== null) {
            if (t = n.tag,
            t === 13) {
                if (t = G5(n),
                t !== null) {
                    e.blockedOn = t,
                    n_(e.priority, function() {
                        e_(n)
                    });
                    return
                }
            } else if (t === 3 && n.stateNode.current.memoizedState.isDehydrated) {
                e.blockedOn = n.tag === 3 ? n.stateNode.containerInfo : null;
                return
            }
        }
    }
    e.blockedOn = null
}
function Df(e) {
    if (e.blockedOn !== null)
        return !1;
    for (var t = e.targetContainers; 0 < t.length; ) {
        var n = Om(e.domEventName, e.eventSystemFlags, t[0], e.nativeEvent);
        if (n === null) {
            n = e.nativeEvent;
            var r = new n.constructor(n.type,n);
            Tm = r,
            n.target.dispatchEvent(r),
            Tm = null
        } else
            return t = pd(n),
            t !== null && Z2(t),
            e.blockedOn = n,
            !1;
        t.shift()
    }
    return !0
}
function rE(e, t, n) {
    Df(e) && n.delete(t)
}
function zT() {
    Rm = !1,
    To !== null && Df(To) && (To = null),
    Mo !== null && Df(Mo) && (Mo = null),
    Ao !== null && Df(Ao) && (Ao = null),
    vu.forEach(rE),
    yu.forEach(rE)
}
function tc(e, t) {
    e.blockedOn === t && (e.blockedOn = null,
    Rm || (Rm = !0,
    Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority, zT)))
}
function Eu(e) {
    function t(i) {
        return tc(i, e)
    }
    if (0 < Gd.length) {
        tc(Gd[0], e);
        for (var n = 1; n < Gd.length; n++) {
            var r = Gd[n];
            r.blockedOn === e && (r.blockedOn = null)
        }
    }
    for (To !== null && tc(To, e),
    Mo !== null && tc(Mo, e),
    Ao !== null && tc(Ao, e),
    vu.forEach(t),
    yu.forEach(t),
    n = 0; n < fo.length; n++)
        r = fo[n],
        r.blockedOn === e && (r.blockedOn = null);
    for (; 0 < fo.length && (n = fo[0],
    n.blockedOn === null); )
        r_(n),
        n.blockedOn === null && fo.shift()
}
var Qa = Zi.ReactCurrentBatchConfig
  , yh = !0;
function HT(e, t, n, r) {
    var i = Be
      , o = Qa.transition;
    Qa.transition = null;
    try {
        Be = 1,
        K2(e, t, n, r)
    } finally {
        Be = i,
        Qa.transition = o
    }
}
function UT(e, t, n, r) {
    var i = Be
      , o = Qa.transition;
    Qa.transition = null;
    try {
        Be = 4,
        K2(e, t, n, r)
    } finally {
        Be = i,
        Qa.transition = o
    }
}
function K2(e, t, n, r) {
    if (yh) {
        var i = Om(e, t, n, r);
        if (i === null)
            q0(e, t, r, Eh, n),
            nE(e, r);
        else if (BT(i, e, t, n, r))
            r.stopPropagation();
        else if (nE(e, r),
        t & 4 && -1 < $T.indexOf(e)) {
            for (; i !== null; ) {
                var o = pd(i);
                if (o !== null && J5(o),
                o = Om(e, t, n, r),
                o === null && q0(e, t, r, Eh, n),
                o === i)
                    break;
                i = o
            }
            i !== null && r.stopPropagation()
        } else
            q0(e, t, r, null, n)
    }
}
var Eh = null;
function Om(e, t, n, r) {
    if (Eh = null,
    e = G2(r),
    e = xs(e),
    e !== null)
        if (t = ca(e),
        t === null)
            e = null;
        else if (n = t.tag,
        n === 13) {
            if (e = G5(t),
            e !== null)
                return e;
            e = null
        } else if (n === 3) {
            if (t.stateNode.current.memoizedState.isDehydrated)
                return t.tag === 3 ? t.stateNode.containerInfo : null;
            e = null
        } else
            t !== e && (e = null);
    return Eh = e,
    null
}
function i_(e) {
    switch (e) {
    case "cancel":
    case "click":
    case "close":
    case "contextmenu":
    case "copy":
    case "cut":
    case "auxclick":
    case "dblclick":
    case "dragend":
    case "dragstart":
    case "drop":
    case "focusin":
    case "focusout":
    case "input":
    case "invalid":
    case "keydown":
    case "keypress":
    case "keyup":
    case "mousedown":
    case "mouseup":
    case "paste":
    case "pause":
    case "play":
    case "pointercancel":
    case "pointerdown":
    case "pointerup":
    case "ratechange":
    case "reset":
    case "resize":
    case "seeked":
    case "submit":
    case "touchcancel":
    case "touchend":
    case "touchstart":
    case "volumechange":
    case "change":
    case "selectionchange":
    case "textInput":
    case "compositionstart":
    case "compositionend":
    case "compositionupdate":
    case "beforeblur":
    case "afterblur":
    case "beforeinput":
    case "blur":
    case "fullscreenchange":
    case "focus":
    case "hashchange":
    case "popstate":
    case "select":
    case "selectstart":
        return 1;
    case "drag":
    case "dragenter":
    case "dragexit":
    case "dragleave":
    case "dragover":
    case "mousemove":
    case "mouseout":
    case "mouseover":
    case "pointermove":
    case "pointerout":
    case "pointerover":
    case "scroll":
    case "toggle":
    case "touchmove":
    case "wheel":
    case "mouseenter":
    case "mouseleave":
    case "pointerenter":
    case "pointerleave":
        return 4;
    case "message":
        switch (MT()) {
        case j2:
            return 1;
        case K5:
            return 4;
        case gh:
        case AT:
            return 16;
        case X5:
            return 536870912;
        default:
            return 16
        }
    default:
        return 16
    }
}
var yo = null
  , X2 = null
  , Nf = null;
function o_() {
    if (Nf)
        return Nf;
    var e, t = X2, n = t.length, r, i = "value"in yo ? yo.value : yo.textContent, o = i.length;
    for (e = 0; e < n && t[e] === i[e]; e++)
        ;
    var s = n - e;
    for (r = 1; r <= s && t[n - r] === i[o - r]; r++)
        ;
    return Nf = i.slice(e, 1 < r ? 1 - r : void 0)
}
function Ff(e) {
    var t = e.keyCode;
    return "charCode"in e ? (e = e.charCode,
    e === 0 && t === 13 && (e = 13)) : e = t,
    e === 10 && (e = 13),
    32 <= e || e === 13 ? e : 0
}
function jd() {
    return !0
}
function iE() {
    return !1
}
function Yn(e) {
    function t(n, r, i, o, s) {
        this._reactName = n,
        this._targetInst = i,
        this.type = r,
        this.nativeEvent = o,
        this.target = s,
        this.currentTarget = null;
        for (var a in e)
            e.hasOwnProperty(a) && (n = e[a],
            this[a] = n ? n(o) : o[a]);
        return this.isDefaultPrevented = (o.defaultPrevented != null ? o.defaultPrevented : o.returnValue === !1) ? jd : iE,
        this.isPropagationStopped = iE,
        this
    }
    return dt(t.prototype, {
        preventDefault: function() {
            this.defaultPrevented = !0;
            var n = this.nativeEvent;
            n && (n.preventDefault ? n.preventDefault() : typeof n.returnValue != "unknown" && (n.returnValue = !1),
            this.isDefaultPrevented = jd)
        },
        stopPropagation: function() {
            var n = this.nativeEvent;
            n && (n.stopPropagation ? n.stopPropagation() : typeof n.cancelBubble != "unknown" && (n.cancelBubble = !0),
            this.isPropagationStopped = jd)
        },
        persist: function() {},
        isPersistent: jd
    }),
    t
}
var Pl = {
    eventPhase: 0,
    bubbles: 0,
    cancelable: 0,
    timeStamp: function(e) {
        return e.timeStamp || Date.now()
    },
    defaultPrevented: 0,
    isTrusted: 0
}, q2 = Yn(Pl), hd = dt({}, Pl, {
    view: 0,
    detail: 0
}), VT = Yn(hd), U0, V0, nc, M1 = dt({}, hd, {
    screenX: 0,
    screenY: 0,
    clientX: 0,
    clientY: 0,
    pageX: 0,
    pageY: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    getModifierState: Q2,
    button: 0,
    buttons: 0,
    relatedTarget: function(e) {
        return e.relatedTarget === void 0 ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget
    },
    movementX: function(e) {
        return "movementX"in e ? e.movementX : (e !== nc && (nc && e.type === "mousemove" ? (U0 = e.screenX - nc.screenX,
        V0 = e.screenY - nc.screenY) : V0 = U0 = 0,
        nc = e),
        U0)
    },
    movementY: function(e) {
        return "movementY"in e ? e.movementY : V0
    }
}), oE = Yn(M1), WT = dt({}, M1, {
    dataTransfer: 0
}), GT = Yn(WT), jT = dt({}, hd, {
    relatedTarget: 0
}), W0 = Yn(jT), YT = dt({}, Pl, {
    animationName: 0,
    elapsedTime: 0,
    pseudoElement: 0
}), ZT = Yn(YT), KT = dt({}, Pl, {
    clipboardData: function(e) {
        return "clipboardData"in e ? e.clipboardData : window.clipboardData
    }
}), XT = Yn(KT), qT = dt({}, Pl, {
    data: 0
}), sE = Yn(qT), QT = {
    Esc: "Escape",
    Spacebar: " ",
    Left: "ArrowLeft",
    Up: "ArrowUp",
    Right: "ArrowRight",
    Down: "ArrowDown",
    Del: "Delete",
    Win: "OS",
    Menu: "ContextMenu",
    Apps: "ContextMenu",
    Scroll: "ScrollLock",
    MozPrintableKey: "Unidentified"
}, JT = {
    8: "Backspace",
    9: "Tab",
    12: "Clear",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    45: "Insert",
    46: "Delete",
    112: "F1",
    113: "F2",
    114: "F3",
    115: "F4",
    116: "F5",
    117: "F6",
    118: "F7",
    119: "F8",
    120: "F9",
    121: "F10",
    122: "F11",
    123: "F12",
    144: "NumLock",
    145: "ScrollLock",
    224: "Meta"
}, eM = {
    Alt: "altKey",
    Control: "ctrlKey",
    Meta: "metaKey",
    Shift: "shiftKey"
};
function tM(e) {
    var t = this.nativeEvent;
    return t.getModifierState ? t.getModifierState(e) : (e = eM[e]) ? !!t[e] : !1
}
function Q2() {
    return tM
}
var nM = dt({}, hd, {
    key: function(e) {
        if (e.key) {
            var t = QT[e.key] || e.key;
            if (t !== "Unidentified")
                return t
        }
        return e.type === "keypress" ? (e = Ff(e),
        e === 13 ? "Enter" : String.fromCharCode(e)) : e.type === "keydown" || e.type === "keyup" ? JT[e.keyCode] || "Unidentified" : ""
    },
    code: 0,
    location: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    repeat: 0,
    locale: 0,
    getModifierState: Q2,
    charCode: function(e) {
        return e.type === "keypress" ? Ff(e) : 0
    },
    keyCode: function(e) {
        return e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0
    },
    which: function(e) {
        return e.type === "keypress" ? Ff(e) : e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0
    }
})
  , rM = Yn(nM)
  , iM = dt({}, M1, {
    pointerId: 0,
    width: 0,
    height: 0,
    pressure: 0,
    tangentialPressure: 0,
    tiltX: 0,
    tiltY: 0,
    twist: 0,
    pointerType: 0,
    isPrimary: 0
})
  , aE = Yn(iM)
  , oM = dt({}, hd, {
    touches: 0,
    targetTouches: 0,
    changedTouches: 0,
    altKey: 0,
    metaKey: 0,
    ctrlKey: 0,
    shiftKey: 0,
    getModifierState: Q2
})
  , sM = Yn(oM)
  , aM = dt({}, Pl, {
    propertyName: 0,
    elapsedTime: 0,
    pseudoElement: 0
})
  , lM = Yn(aM)
  , cM = dt({}, M1, {
    deltaX: function(e) {
        return "deltaX"in e ? e.deltaX : "wheelDeltaX"in e ? -e.wheelDeltaX : 0
    },
    deltaY: function(e) {
        return "deltaY"in e ? e.deltaY : "wheelDeltaY"in e ? -e.wheelDeltaY : "wheelDelta"in e ? -e.wheelDelta : 0
    },
    deltaZ: 0,
    deltaMode: 0
})
  , uM = Yn(cM)
  , dM = [9, 13, 27, 32]
  , J2 = Hi && "CompositionEvent"in window
  , Uc = null;
Hi && "documentMode"in document && (Uc = document.documentMode);
var fM = Hi && "TextEvent"in window && !Uc
  , s_ = Hi && (!J2 || Uc && 8 < Uc && 11 >= Uc)
  , lE = String.fromCharCode(32)
  , cE = !1;
function a_(e, t) {
    switch (e) {
    case "keyup":
        return dM.indexOf(t.keyCode) !== -1;
    case "keydown":
        return t.keyCode !== 229;
    case "keypress":
    case "mousedown":
    case "focusout":
        return !0;
    default:
        return !1
    }
}
function l_(e) {
    return e = e.detail,
    typeof e == "object" && "data"in e ? e.data : null
}
var Pa = !1;
function hM(e, t) {
    switch (e) {
    case "compositionend":
        return l_(t);
    case "keypress":
        return t.which !== 32 ? null : (cE = !0,
        lE);
    case "textInput":
        return e = t.data,
        e === lE && cE ? null : e;
    default:
        return null
    }
}
function pM(e, t) {
    if (Pa)
        return e === "compositionend" || !J2 && a_(e, t) ? (e = o_(),
        Nf = X2 = yo = null,
        Pa = !1,
        e) : null;
    switch (e) {
    case "paste":
        return null;
    case "keypress":
        if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) {
            if (t.char && 1 < t.char.length)
                return t.char;
            if (t.which)
                return String.fromCharCode(t.which)
        }
        return null;
    case "compositionend":
        return s_ && t.locale !== "ko" ? null : t.data;
    default:
        return null
    }
}
var mM = {
    color: !0,
    date: !0,
    datetime: !0,
    "datetime-local": !0,
    email: !0,
    month: !0,
    number: !0,
    password: !0,
    range: !0,
    search: !0,
    tel: !0,
    text: !0,
    time: !0,
    url: !0,
    week: !0
};
function uE(e) {
    var t = e && e.nodeName && e.nodeName.toLowerCase();
    return t === "input" ? !!mM[e.type] : t === "textarea"
}
function c_(e, t, n, r) {
    z5(r),
    t = wh(t, "onChange"),
    0 < t.length && (n = new q2("onChange","change",null,n,r),
    e.push({
        event: n,
        listeners: t
    }))
}
var Vc = null
  , wu = null;
function gM(e) {
    w_(e, 0)
}
function A1(e) {
    var t = Da(e);
    if (R5(t))
        return e
}
function vM(e, t) {
    if (e === "change")
        return t
}
var u_ = !1;
if (Hi) {
    var G0;
    if (Hi) {
        var j0 = "oninput"in document;
        if (!j0) {
            var dE = document.createElement("div");
            dE.setAttribute("oninput", "return;"),
            j0 = typeof dE.oninput == "function"
        }
        G0 = j0
    } else
        G0 = !1;
    u_ = G0 && (!document.documentMode || 9 < document.documentMode)
}
function fE() {
    Vc && (Vc.detachEvent("onpropertychange", d_),
    wu = Vc = null)
}
function d_(e) {
    if (e.propertyName === "value" && A1(wu)) {
        var t = [];
        c_(t, wu, e, G2(e)),
        W5(gM, t)
    }
}
function yM(e, t, n) {
    e === "focusin" ? (fE(),
    Vc = t,
    wu = n,
    Vc.attachEvent("onpropertychange", d_)) : e === "focusout" && fE()
}
function EM(e) {
    if (e === "selectionchange" || e === "keyup" || e === "keydown")
        return A1(wu)
}
function wM(e, t) {
    if (e === "click")
        return A1(t)
}
function bM(e, t) {
    if (e === "input" || e === "change")
        return A1(t)
}
function _M(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t
}
var Nr = typeof Object.is == "function" ? Object.is : _M;
function bu(e, t) {
    if (Nr(e, t))
        return !0;
    if (typeof e != "object" || e === null || typeof t != "object" || t === null)
        return !1;
    var n = Object.keys(e)
      , r = Object.keys(t);
    if (n.length !== r.length)
        return !1;
    for (r = 0; r < n.length; r++) {
        var i = n[r];
        if (!gm.call(t, i) || !Nr(e[i], t[i]))
            return !1
    }
    return !0
}
function hE(e) {
    for (; e && e.firstChild; )
        e = e.firstChild;
    return e
}
function pE(e, t) {
    var n = hE(e);
    e = 0;
    for (var r; n; ) {
        if (n.nodeType === 3) {
            if (r = e + n.textContent.length,
            e <= t && r >= t)
                return {
                    node: n,
                    offset: t - e
                };
            e = r
        }
        e: {
            for (; n; ) {
                if (n.nextSibling) {
                    n = n.nextSibling;
                    break e
                }
                n = n.parentNode
            }
            n = void 0
        }
        n = hE(n)
    }
}
function f_(e, t) {
    return e && t ? e === t ? !0 : e && e.nodeType === 3 ? !1 : t && t.nodeType === 3 ? f_(e, t.parentNode) : "contains"in e ? e.contains(t) : e.compareDocumentPosition ? !!(e.compareDocumentPosition(t) & 16) : !1 : !1
}
function h_() {
    for (var e = window, t = hh(); t instanceof e.HTMLIFrameElement; ) {
        try {
            var n = typeof t.contentWindow.location.href == "string"
        } catch {
            n = !1
        }
        if (n)
            e = t.contentWindow;
        else
            break;
        t = hh(e.document)
    }
    return t
}
function ev(e) {
    var t = e && e.nodeName && e.nodeName.toLowerCase();
    return t && (t === "input" && (e.type === "text" || e.type === "search" || e.type === "tel" || e.type === "url" || e.type === "password") || t === "textarea" || e.contentEditable === "true")
}
function xM(e) {
    var t = h_()
      , n = e.focusedElem
      , r = e.selectionRange;
    if (t !== n && n && n.ownerDocument && f_(n.ownerDocument.documentElement, n)) {
        if (r !== null && ev(n)) {
            if (t = r.start,
            e = r.end,
            e === void 0 && (e = t),
            "selectionStart"in n)
                n.selectionStart = t,
                n.selectionEnd = Math.min(e, n.value.length);
            else if (e = (t = n.ownerDocument || document) && t.defaultView || window,
            e.getSelection) {
                e = e.getSelection();
                var i = n.textContent.length
                  , o = Math.min(r.start, i);
                r = r.end === void 0 ? o : Math.min(r.end, i),
                !e.extend && o > r && (i = r,
                r = o,
                o = i),
                i = pE(n, o);
                var s = pE(n, r);
                i && s && (e.rangeCount !== 1 || e.anchorNode !== i.node || e.anchorOffset !== i.offset || e.focusNode !== s.node || e.focusOffset !== s.offset) && (t = t.createRange(),
                t.setStart(i.node, i.offset),
                e.removeAllRanges(),
                o > r ? (e.addRange(t),
                e.extend(s.node, s.offset)) : (t.setEnd(s.node, s.offset),
                e.addRange(t)))
            }
        }
        for (t = [],
        e = n; e = e.parentNode; )
            e.nodeType === 1 && t.push({
                element: e,
                left: e.scrollLeft,
                top: e.scrollTop
            });
        for (typeof n.focus == "function" && n.focus(),
        n = 0; n < t.length; n++)
            e = t[n],
            e.element.scrollLeft = e.left,
            e.element.scrollTop = e.top
    }
}
var IM = Hi && "documentMode"in document && 11 >= document.documentMode
  , Ra = null
  , Dm = null
  , Wc = null
  , Nm = !1;
function mE(e, t, n) {
    var r = n.window === n ? n.document : n.nodeType === 9 ? n : n.ownerDocument;
    Nm || Ra == null || Ra !== hh(r) || (r = Ra,
    "selectionStart"in r && ev(r) ? r = {
        start: r.selectionStart,
        end: r.selectionEnd
    } : (r = (r.ownerDocument && r.ownerDocument.defaultView || window).getSelection(),
    r = {
        anchorNode: r.anchorNode,
        anchorOffset: r.anchorOffset,
        focusNode: r.focusNode,
        focusOffset: r.focusOffset
    }),
    Wc && bu(Wc, r) || (Wc = r,
    r = wh(Dm, "onSelect"),
    0 < r.length && (t = new q2("onSelect","select",null,t,n),
    e.push({
        event: t,
        listeners: r
    }),
    t.target = Ra)))
}
function Yd(e, t) {
    var n = {};
    return n[e.toLowerCase()] = t.toLowerCase(),
    n["Webkit" + e] = "webkit" + t,
    n["Moz" + e] = "moz" + t,
    n
}
var Oa = {
    animationend: Yd("Animation", "AnimationEnd"),
    animationiteration: Yd("Animation", "AnimationIteration"),
    animationstart: Yd("Animation", "AnimationStart"),
    transitionend: Yd("Transition", "TransitionEnd")
}
  , Y0 = {}
  , p_ = {};
Hi && (p_ = document.createElement("div").style,
"AnimationEvent"in window || (delete Oa.animationend.animation,
delete Oa.animationiteration.animation,
delete Oa.animationstart.animation),
"TransitionEvent"in window || delete Oa.transitionend.transition);
function L1(e) {
    if (Y0[e])
        return Y0[e];
    if (!Oa[e])
        return e;
    var t = Oa[e], n;
    for (n in t)
        if (t.hasOwnProperty(n) && n in p_)
            return Y0[e] = t[n];
    return e
}
var m_ = L1("animationend")
  , g_ = L1("animationiteration")
  , v_ = L1("animationstart")
  , y_ = L1("transitionend")
  , E_ = new Map
  , gE = "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");
function es(e, t) {
    E_.set(e, t),
    la(t, [e])
}
for (var Z0 = 0; Z0 < gE.length; Z0++) {
    var K0 = gE[Z0]
      , SM = K0.toLowerCase()
      , CM = K0[0].toUpperCase() + K0.slice(1);
    es(SM, "on" + CM)
}
es(m_, "onAnimationEnd");
es(g_, "onAnimationIteration");
es(v_, "onAnimationStart");
es("dblclick", "onDoubleClick");
es("focusin", "onFocus");
es("focusout", "onBlur");
es(y_, "onTransitionEnd");
ul("onMouseEnter", ["mouseout", "mouseover"]);
ul("onMouseLeave", ["mouseout", "mouseover"]);
ul("onPointerEnter", ["pointerout", "pointerover"]);
ul("onPointerLeave", ["pointerout", "pointerover"]);
la("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" "));
la("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));
la("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]);
la("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" "));
la("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" "));
la("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
var Ac = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" ")
  , kM = new Set("cancel close invalid load scroll toggle".split(" ").concat(Ac));
function vE(e, t, n) {
    var r = e.type || "unknown-event";
    e.currentTarget = n,
    ST(r, t, void 0, e),
    e.currentTarget = null
}
function w_(e, t) {
    t = (t & 4) !== 0;
    for (var n = 0; n < e.length; n++) {
        var r = e[n]
          , i = r.event;
        r = r.listeners;
        e: {
            var o = void 0;
            if (t)
                for (var s = r.length - 1; 0 <= s; s--) {
                    var a = r[s]
                      , l = a.instance
                      , c = a.currentTarget;
                    if (a = a.listener,
                    l !== o && i.isPropagationStopped())
                        break e;
                    vE(i, a, c),
                    o = l
                }
            else
                for (s = 0; s < r.length; s++) {
                    if (a = r[s],
                    l = a.instance,
                    c = a.currentTarget,
                    a = a.listener,
                    l !== o && i.isPropagationStopped())
                        break e;
                    vE(i, a, c),
                    o = l
                }
        }
    }
    if (mh)
        throw e = Lm,
        mh = !1,
        Lm = null,
        e
}
function Ye(e, t) {
    var n = t[Hm];
    n === void 0 && (n = t[Hm] = new Set);
    var r = e + "__bubble";
    n.has(r) || (b_(t, e, 2, !1),
    n.add(r))
}
function X0(e, t, n) {
    var r = 0;
    t && (r |= 4),
    b_(n, e, r, t)
}
var Zd = "_reactListening" + Math.random().toString(36).slice(2);
function _u(e) {
    if (!e[Zd]) {
        e[Zd] = !0,
        T5.forEach(function(n) {
            n !== "selectionchange" && (kM.has(n) || X0(n, !1, e),
            X0(n, !0, e))
        });
        var t = e.nodeType === 9 ? e : e.ownerDocument;
        t === null || t[Zd] || (t[Zd] = !0,
        X0("selectionchange", !1, t))
    }
}
function b_(e, t, n, r) {
    switch (i_(t)) {
    case 1:
        var i = HT;
        break;
    case 4:
        i = UT;
        break;
    default:
        i = K2
    }
    n = i.bind(null, t, n, e),
    i = void 0,
    !Am || t !== "touchstart" && t !== "touchmove" && t !== "wheel" || (i = !0),
    r ? i !== void 0 ? e.addEventListener(t, n, {
        capture: !0,
        passive: i
    }) : e.addEventListener(t, n, !0) : i !== void 0 ? e.addEventListener(t, n, {
        passive: i
    }) : e.addEventListener(t, n, !1)
}
function q0(e, t, n, r, i) {
    var o = r;
    if (!(t & 1) && !(t & 2) && r !== null)
        e: for (; ; ) {
            if (r === null)
                return;
            var s = r.tag;
            if (s === 3 || s === 4) {
                var a = r.stateNode.containerInfo;
                if (a === i || a.nodeType === 8 && a.parentNode === i)
                    break;
                if (s === 4)
                    for (s = r.return; s !== null; ) {
                        var l = s.tag;
                        if ((l === 3 || l === 4) && (l = s.stateNode.containerInfo,
                        l === i || l.nodeType === 8 && l.parentNode === i))
                            return;
                        s = s.return
                    }
                for (; a !== null; ) {
                    if (s = xs(a),
                    s === null)
                        return;
                    if (l = s.tag,
                    l === 5 || l === 6) {
                        r = o = s;
                        continue e
                    }
                    a = a.parentNode
                }
            }
            r = r.return
        }
    W5(function() {
        var c = o
          , u = G2(n)
          , d = [];
        e: {
            var f = E_.get(e);
            if (f !== void 0) {
                var h = q2
                  , m = e;
                switch (e) {
                case "keypress":
                    if (Ff(n) === 0)
                        break e;
                case "keydown":
                case "keyup":
                    h = rM;
                    break;
                case "focusin":
                    m = "focus",
                    h = W0;
                    break;
                case "focusout":
                    m = "blur",
                    h = W0;
                    break;
                case "beforeblur":
                case "afterblur":
                    h = W0;
                    break;
                case "click":
                    if (n.button === 2)
                        break e;
                case "auxclick":
                case "dblclick":
                case "mousedown":
                case "mousemove":
                case "mouseup":
                case "mouseout":
                case "mouseover":
                case "contextmenu":
                    h = oE;
                    break;
                case "drag":
                case "dragend":
                case "dragenter":
                case "dragexit":
                case "dragleave":
                case "dragover":
                case "dragstart":
                case "drop":
                    h = GT;
                    break;
                case "touchcancel":
                case "touchend":
                case "touchmove":
                case "touchstart":
                    h = sM;
                    break;
                case m_:
                case g_:
                case v_:
                    h = ZT;
                    break;
                case y_:
                    h = lM;
                    break;
                case "scroll":
                    h = VT;
                    break;
                case "wheel":
                    h = uM;
                    break;
                case "copy":
                case "cut":
                case "paste":
                    h = XT;
                    break;
                case "gotpointercapture":
                case "lostpointercapture":
                case "pointercancel":
                case "pointerdown":
                case "pointermove":
                case "pointerout":
                case "pointerover":
                case "pointerup":
                    h = aE
                }
                var g = (t & 4) !== 0
                  , E = !g && e === "scroll"
                  , v = g ? f !== null ? f + "Capture" : null : f;
                g = [];
                for (var y = c, w; y !== null; ) {
                    w = y;
                    var b = w.stateNode;
                    if (w.tag === 5 && b !== null && (w = b,
                    v !== null && (b = gu(y, v),
                    b != null && g.push(xu(y, b, w)))),
                    E)
                        break;
                    y = y.return
                }
                0 < g.length && (f = new h(f,m,null,n,u),
                d.push({
                    event: f,
                    listeners: g
                }))
            }
        }
        if (!(t & 7)) {
            e: {
                if (f = e === "mouseover" || e === "pointerover",
                h = e === "mouseout" || e === "pointerout",
                f && n !== Tm && (m = n.relatedTarget || n.fromElement) && (xs(m) || m[Ui]))
                    break e;
                if ((h || f) && (f = u.window === u ? u : (f = u.ownerDocument) ? f.defaultView || f.parentWindow : window,
                h ? (m = n.relatedTarget || n.toElement,
                h = c,
                m = m ? xs(m) : null,
                m !== null && (E = ca(m),
                m !== E || m.tag !== 5 && m.tag !== 6) && (m = null)) : (h = null,
                m = c),
                h !== m)) {
                    if (g = oE,
                    b = "onMouseLeave",
                    v = "onMouseEnter",
                    y = "mouse",
                    (e === "pointerout" || e === "pointerover") && (g = aE,
                    b = "onPointerLeave",
                    v = "onPointerEnter",
                    y = "pointer"),
                    E = h == null ? f : Da(h),
                    w = m == null ? f : Da(m),
                    f = new g(b,y + "leave",h,n,u),
                    f.target = E,
                    f.relatedTarget = w,
                    b = null,
                    xs(u) === c && (g = new g(v,y + "enter",m,n,u),
                    g.target = w,
                    g.relatedTarget = E,
                    b = g),
                    E = b,
                    h && m)
                        t: {
                            for (g = h,
                            v = m,
                            y = 0,
                            w = g; w; w = va(w))
                                y++;
                            for (w = 0,
                            b = v; b; b = va(b))
                                w++;
                            for (; 0 < y - w; )
                                g = va(g),
                                y--;
                            for (; 0 < w - y; )
                                v = va(v),
                                w--;
                            for (; y--; ) {
                                if (g === v || v !== null && g === v.alternate)
                                    break t;
                                g = va(g),
                                v = va(v)
                            }
                            g = null
                        }
                    else
                        g = null;
                    h !== null && yE(d, f, h, g, !1),
                    m !== null && E !== null && yE(d, E, m, g, !0)
                }
            }
            e: {
                if (f = c ? Da(c) : window,
                h = f.nodeName && f.nodeName.toLowerCase(),
                h === "select" || h === "input" && f.type === "file")
                    var I = vM;
                else if (uE(f))
                    if (u_)
                        I = bM;
                    else {
                        I = EM;
                        var S = yM
                    }
                else
                    (h = f.nodeName) && h.toLowerCase() === "input" && (f.type === "checkbox" || f.type === "radio") && (I = wM);
                if (I && (I = I(e, c))) {
                    c_(d, I, n, u);
                    break e
                }
                S && S(e, f, c),
                e === "focusout" && (S = f._wrapperState) && S.controlled && f.type === "number" && xm(f, "number", f.value)
            }
            switch (S = c ? Da(c) : window,
            e) {
            case "focusin":
                (uE(S) || S.contentEditable === "true") && (Ra = S,
                Dm = c,
                Wc = null);
                break;
            case "focusout":
                Wc = Dm = Ra = null;
                break;
            case "mousedown":
                Nm = !0;
                break;
            case "contextmenu":
            case "mouseup":
            case "dragend":
                Nm = !1,
                mE(d, n, u);
                break;
            case "selectionchange":
                if (IM)
                    break;
            case "keydown":
            case "keyup":
                mE(d, n, u)
            }
            var C;
            if (J2)
                e: {
                    switch (e) {
                    case "compositionstart":
                        var T = "onCompositionStart";
                        break e;
                    case "compositionend":
                        T = "onCompositionEnd";
                        break e;
                    case "compositionupdate":
                        T = "onCompositionUpdate";
                        break e
                    }
                    T = void 0
                }
            else
                Pa ? a_(e, n) && (T = "onCompositionEnd") : e === "keydown" && n.keyCode === 229 && (T = "onCompositionStart");
            T && (s_ && n.locale !== "ko" && (Pa || T !== "onCompositionStart" ? T === "onCompositionEnd" && Pa && (C = o_()) : (yo = u,
            X2 = "value"in yo ? yo.value : yo.textContent,
            Pa = !0)),
            S = wh(c, T),
            0 < S.length && (T = new sE(T,e,null,n,u),
            d.push({
                event: T,
                listeners: S
            }),
            C ? T.data = C : (C = l_(n),
            C !== null && (T.data = C)))),
            (C = fM ? hM(e, n) : pM(e, n)) && (c = wh(c, "onBeforeInput"),
            0 < c.length && (u = new sE("onBeforeInput","beforeinput",null,n,u),
            d.push({
                event: u,
                listeners: c
            }),
            u.data = C))
        }
        w_(d, t)
    })
}
function xu(e, t, n) {
    return {
        instance: e,
        listener: t,
        currentTarget: n
    }
}
function wh(e, t) {
    for (var n = t + "Capture", r = []; e !== null; ) {
        var i = e
          , o = i.stateNode;
        i.tag === 5 && o !== null && (i = o,
        o = gu(e, n),
        o != null && r.unshift(xu(e, o, i)),
        o = gu(e, t),
        o != null && r.push(xu(e, o, i))),
        e = e.return
    }
    return r
}
function va(e) {
    if (e === null)
        return null;
    do
        e = e.return;
    while (e && e.tag !== 5);
    return e || null
}
function yE(e, t, n, r, i) {
    for (var o = t._reactName, s = []; n !== null && n !== r; ) {
        var a = n
          , l = a.alternate
          , c = a.stateNode;
        if (l !== null && l === r)
            break;
        a.tag === 5 && c !== null && (a = c,
        i ? (l = gu(n, o),
        l != null && s.unshift(xu(n, l, a))) : i || (l = gu(n, o),
        l != null && s.push(xu(n, l, a)))),
        n = n.return
    }
    s.length !== 0 && e.push({
        event: t,
        listeners: s
    })
}
var TM = /\r\n?/g
  , MM = /\u0000|\uFFFD/g;
function EE(e) {
    return (typeof e == "string" ? e : "" + e).replace(TM, `
`).replace(MM, "")
}
function Kd(e, t, n) {
    if (t = EE(t),
    EE(e) !== t && n)
        throw Error(X(425))
}
function bh() {}
var Fm = null
  , $m = null;
function Bm(e, t) {
    return e === "textarea" || e === "noscript" || typeof t.children == "string" || typeof t.children == "number" || typeof t.dangerouslySetInnerHTML == "object" && t.dangerouslySetInnerHTML !== null && t.dangerouslySetInnerHTML.__html != null
}
var zm = typeof setTimeout == "function" ? setTimeout : void 0
  , AM = typeof clearTimeout == "function" ? clearTimeout : void 0
  , wE = typeof Promise == "function" ? Promise : void 0
  , LM = typeof queueMicrotask == "function" ? queueMicrotask : typeof wE < "u" ? function(e) {
    return wE.resolve(null).then(e).catch(PM)
}
: zm;
function PM(e) {
    setTimeout(function() {
        throw e
    })
}
function Q0(e, t) {
    var n = t
      , r = 0;
    do {
        var i = n.nextSibling;
        if (e.removeChild(n),
        i && i.nodeType === 8)
            if (n = i.data,
            n === "/$") {
                if (r === 0) {
                    e.removeChild(i),
                    Eu(t);
                    return
                }
                r--
            } else
                n !== "$" && n !== "$?" && n !== "$!" || r++;
        n = i
    } while (n);
    Eu(t)
}
function Lo(e) {
    for (; e != null; e = e.nextSibling) {
        var t = e.nodeType;
        if (t === 1 || t === 3)
            break;
        if (t === 8) {
            if (t = e.data,
            t === "$" || t === "$!" || t === "$?")
                break;
            if (t === "/$")
                return null
        }
    }
    return e
}
function bE(e) {
    e = e.previousSibling;
    for (var t = 0; e; ) {
        if (e.nodeType === 8) {
            var n = e.data;
            if (n === "$" || n === "$!" || n === "$?") {
                if (t === 0)
                    return e;
                t--
            } else
                n === "/$" && t++
        }
        e = e.previousSibling
    }
    return null
}
var Rl = Math.random().toString(36).slice(2)
  , ti = "__reactFiber$" + Rl
  , Iu = "__reactProps$" + Rl
  , Ui = "__reactContainer$" + Rl
  , Hm = "__reactEvents$" + Rl
  , RM = "__reactListeners$" + Rl
  , OM = "__reactHandles$" + Rl;
function xs(e) {
    var t = e[ti];
    if (t)
        return t;
    for (var n = e.parentNode; n; ) {
        if (t = n[Ui] || n[ti]) {
            if (n = t.alternate,
            t.child !== null || n !== null && n.child !== null)
                for (e = bE(e); e !== null; ) {
                    if (n = e[ti])
                        return n;
                    e = bE(e)
                }
            return t
        }
        e = n,
        n = e.parentNode
    }
    return null
}
function pd(e) {
    return e = e[ti] || e[Ui],
    !e || e.tag !== 5 && e.tag !== 6 && e.tag !== 13 && e.tag !== 3 ? null : e
}
function Da(e) {
    if (e.tag === 5 || e.tag === 6)
        return e.stateNode;
    throw Error(X(33))
}
function P1(e) {
    return e[Iu] || null
}
var Um = []
  , Na = -1;
function ts(e) {
    return {
        current: e
    }
}
function qe(e) {
    0 > Na || (e.current = Um[Na],
    Um[Na] = null,
    Na--)
}
function je(e, t) {
    Na++,
    Um[Na] = e.current,
    e.current = t
}
var Vo = {}
  , ln = ts(Vo)
  , Mn = ts(!1)
  , Us = Vo;
function dl(e, t) {
    var n = e.type.contextTypes;
    if (!n)
        return Vo;
    var r = e.stateNode;
    if (r && r.__reactInternalMemoizedUnmaskedChildContext === t)
        return r.__reactInternalMemoizedMaskedChildContext;
    var i = {}, o;
    for (o in n)
        i[o] = t[o];
    return r && (e = e.stateNode,
    e.__reactInternalMemoizedUnmaskedChildContext = t,
    e.__reactInternalMemoizedMaskedChildContext = i),
    i
}
function An(e) {
    return e = e.childContextTypes,
    e != null
}
function _h() {
    qe(Mn),
    qe(ln)
}
function _E(e, t, n) {
    if (ln.current !== Vo)
        throw Error(X(168));
    je(ln, t),
    je(Mn, n)
}
function __(e, t, n) {
    var r = e.stateNode;
    if (t = t.childContextTypes,
    typeof r.getChildContext != "function")
        return n;
    r = r.getChildContext();
    for (var i in r)
        if (!(i in t))
            throw Error(X(108, yT(e) || "Unknown", i));
    return dt({}, n, r)
}
function xh(e) {
    return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || Vo,
    Us = ln.current,
    je(ln, e),
    je(Mn, Mn.current),
    !0
}
function xE(e, t, n) {
    var r = e.stateNode;
    if (!r)
        throw Error(X(169));
    n ? (e = __(e, t, Us),
    r.__reactInternalMemoizedMergedChildContext = e,
    qe(Mn),
    qe(ln),
    je(ln, e)) : qe(Mn),
    je(Mn, n)
}
var Mi = null
  , R1 = !1
  , J0 = !1;
function x_(e) {
    Mi === null ? Mi = [e] : Mi.push(e)
}
function DM(e) {
    R1 = !0,
    x_(e)
}
function ns() {
    if (!J0 && Mi !== null) {
        J0 = !0;
        var e = 0
          , t = Be;
        try {
            var n = Mi;
            for (Be = 1; e < n.length; e++) {
                var r = n[e];
                do
                    r = r(!0);
                while (r !== null)
            }
            Mi = null,
            R1 = !1
        } catch (i) {
            throw Mi !== null && (Mi = Mi.slice(e + 1)),
            Z5(j2, ns),
            i
        } finally {
            Be = t,
            J0 = !1
        }
    }
    return null
}
var Fa = []
  , $a = 0
  , Ih = null
  , Sh = 0
  , tr = []
  , nr = 0
  , Vs = null
  , Li = 1
  , Pi = "";
function ls(e, t) {
    Fa[$a++] = Sh,
    Fa[$a++] = Ih,
    Ih = e,
    Sh = t
}
function I_(e, t, n) {
    tr[nr++] = Li,
    tr[nr++] = Pi,
    tr[nr++] = Vs,
    Vs = e;
    var r = Li;
    e = Pi;
    var i = 32 - Mr(r) - 1;
    r &= ~(1 << i),
    n += 1;
    var o = 32 - Mr(t) + i;
    if (30 < o) {
        var s = i - i % 5;
        o = (r & (1 << s) - 1).toString(32),
        r >>= s,
        i -= s,
        Li = 1 << 32 - Mr(t) + i | n << i | r,
        Pi = o + e
    } else
        Li = 1 << o | n << i | r,
        Pi = e
}
function tv(e) {
    e.return !== null && (ls(e, 1),
    I_(e, 1, 0))
}
function nv(e) {
    for (; e === Ih; )
        Ih = Fa[--$a],
        Fa[$a] = null,
        Sh = Fa[--$a],
        Fa[$a] = null;
    for (; e === Vs; )
        Vs = tr[--nr],
        tr[nr] = null,
        Pi = tr[--nr],
        tr[nr] = null,
        Li = tr[--nr],
        tr[nr] = null
}
var Un = null
  , $n = null
  , et = !1
  , Ir = null;
function S_(e, t) {
    var n = rr(5, null, null, 0);
    n.elementType = "DELETED",
    n.stateNode = t,
    n.return = e,
    t = e.deletions,
    t === null ? (e.deletions = [n],
    e.flags |= 16) : t.push(n)
}
function IE(e, t) {
    switch (e.tag) {
    case 5:
        var n = e.type;
        return t = t.nodeType !== 1 || n.toLowerCase() !== t.nodeName.toLowerCase() ? null : t,
        t !== null ? (e.stateNode = t,
        Un = e,
        $n = Lo(t.firstChild),
        !0) : !1;
    case 6:
        return t = e.pendingProps === "" || t.nodeType !== 3 ? null : t,
        t !== null ? (e.stateNode = t,
        Un = e,
        $n = null,
        !0) : !1;
    case 13:
        return t = t.nodeType !== 8 ? null : t,
        t !== null ? (n = Vs !== null ? {
            id: Li,
            overflow: Pi
        } : null,
        e.memoizedState = {
            dehydrated: t,
            treeContext: n,
            retryLane: 1073741824
        },
        n = rr(18, null, null, 0),
        n.stateNode = t,
        n.return = e,
        e.child = n,
        Un = e,
        $n = null,
        !0) : !1;
    default:
        return !1
    }
}
function Vm(e) {
    return (e.mode & 1) !== 0 && (e.flags & 128) === 0
}
function Wm(e) {
    if (et) {
        var t = $n;
        if (t) {
            var n = t;
            if (!IE(e, t)) {
                if (Vm(e))
                    throw Error(X(418));
                t = Lo(n.nextSibling);
                var r = Un;
                t && IE(e, t) ? S_(r, n) : (e.flags = e.flags & -4097 | 2,
                et = !1,
                Un = e)
            }
        } else {
            if (Vm(e))
                throw Error(X(418));
            e.flags = e.flags & -4097 | 2,
            et = !1,
            Un = e
        }
    }
}
function SE(e) {
    for (e = e.return; e !== null && e.tag !== 5 && e.tag !== 3 && e.tag !== 13; )
        e = e.return;
    Un = e
}
function Xd(e) {
    if (e !== Un)
        return !1;
    if (!et)
        return SE(e),
        et = !0,
        !1;
    var t;
    if ((t = e.tag !== 3) && !(t = e.tag !== 5) && (t = e.type,
    t = t !== "head" && t !== "body" && !Bm(e.type, e.memoizedProps)),
    t && (t = $n)) {
        if (Vm(e))
            throw C_(),
            Error(X(418));
        for (; t; )
            S_(e, t),
            t = Lo(t.nextSibling)
    }
    if (SE(e),
    e.tag === 13) {
        if (e = e.memoizedState,
        e = e !== null ? e.dehydrated : null,
        !e)
            throw Error(X(317));
        e: {
            for (e = e.nextSibling,
            t = 0; e; ) {
                if (e.nodeType === 8) {
                    var n = e.data;
                    if (n === "/$") {
                        if (t === 0) {
                            $n = Lo(e.nextSibling);
                            break e
                        }
                        t--
                    } else
                        n !== "$" && n !== "$!" && n !== "$?" || t++
                }
                e = e.nextSibling
            }
            $n = null
        }
    } else
        $n = Un ? Lo(e.stateNode.nextSibling) : null;
    return !0
}
function C_() {
    for (var e = $n; e; )
        e = Lo(e.nextSibling)
}
function fl() {
    $n = Un = null,
    et = !1
}
function rv(e) {
    Ir === null ? Ir = [e] : Ir.push(e)
}
var NM = Zi.ReactCurrentBatchConfig;
function wr(e, t) {
    if (e && e.defaultProps) {
        t = dt({}, t),
        e = e.defaultProps;
        for (var n in e)
            t[n] === void 0 && (t[n] = e[n]);
        return t
    }
    return t
}
var Ch = ts(null)
  , kh = null
  , Ba = null
  , iv = null;
function ov() {
    iv = Ba = kh = null
}
function sv(e) {
    var t = Ch.current;
    qe(Ch),
    e._currentValue = t
}
function Gm(e, t, n) {
    for (; e !== null; ) {
        var r = e.alternate;
        if ((e.childLanes & t) !== t ? (e.childLanes |= t,
        r !== null && (r.childLanes |= t)) : r !== null && (r.childLanes & t) !== t && (r.childLanes |= t),
        e === n)
            break;
        e = e.return
    }
}
function Ja(e, t) {
    kh = e,
    iv = Ba = null,
    e = e.dependencies,
    e !== null && e.firstContext !== null && (e.lanes & t && (Cn = !0),
    e.firstContext = null)
}
function cr(e) {
    var t = e._currentValue;
    if (iv !== e)
        if (e = {
            context: e,
            memoizedValue: t,
            next: null
        },
        Ba === null) {
            if (kh === null)
                throw Error(X(308));
            Ba = e,
            kh.dependencies = {
                lanes: 0,
                firstContext: e
            }
        } else
            Ba = Ba.next = e;
    return t
}
var Is = null;
function av(e) {
    Is === null ? Is = [e] : Is.push(e)
}
function k_(e, t, n, r) {
    var i = t.interleaved;
    return i === null ? (n.next = n,
    av(t)) : (n.next = i.next,
    i.next = n),
    t.interleaved = n,
    Vi(e, r)
}
function Vi(e, t) {
    e.lanes |= t;
    var n = e.alternate;
    for (n !== null && (n.lanes |= t),
    n = e,
    e = e.return; e !== null; )
        e.childLanes |= t,
        n = e.alternate,
        n !== null && (n.childLanes |= t),
        n = e,
        e = e.return;
    return n.tag === 3 ? n.stateNode : null
}
var co = !1;
function lv(e) {
    e.updateQueue = {
        baseState: e.memoizedState,
        firstBaseUpdate: null,
        lastBaseUpdate: null,
        shared: {
            pending: null,
            interleaved: null,
            lanes: 0
        },
        effects: null
    }
}
function T_(e, t) {
    e = e.updateQueue,
    t.updateQueue === e && (t.updateQueue = {
        baseState: e.baseState,
        firstBaseUpdate: e.firstBaseUpdate,
        lastBaseUpdate: e.lastBaseUpdate,
        shared: e.shared,
        effects: e.effects
    })
}
function Ri(e, t) {
    return {
        eventTime: e,
        lane: t,
        tag: 0,
        payload: null,
        callback: null,
        next: null
    }
}
function Po(e, t, n) {
    var r = e.updateQueue;
    if (r === null)
        return null;
    if (r = r.shared,
    Te & 2) {
        var i = r.pending;
        return i === null ? t.next = t : (t.next = i.next,
        i.next = t),
        r.pending = t,
        Vi(e, n)
    }
    return i = r.interleaved,
    i === null ? (t.next = t,
    av(r)) : (t.next = i.next,
    i.next = t),
    r.interleaved = t,
    Vi(e, n)
}
function $f(e, t, n) {
    if (t = t.updateQueue,
    t !== null && (t = t.shared,
    (n & 4194240) !== 0)) {
        var r = t.lanes;
        r &= e.pendingLanes,
        n |= r,
        t.lanes = n,
        Y2(e, n)
    }
}
function CE(e, t) {
    var n = e.updateQueue
      , r = e.alternate;
    if (r !== null && (r = r.updateQueue,
    n === r)) {
        var i = null
          , o = null;
        if (n = n.firstBaseUpdate,
        n !== null) {
            do {
                var s = {
                    eventTime: n.eventTime,
                    lane: n.lane,
                    tag: n.tag,
                    payload: n.payload,
                    callback: n.callback,
                    next: null
                };
                o === null ? i = o = s : o = o.next = s,
                n = n.next
            } while (n !== null);
            o === null ? i = o = t : o = o.next = t
        } else
            i = o = t;
        n = {
            baseState: r.baseState,
            firstBaseUpdate: i,
            lastBaseUpdate: o,
            shared: r.shared,
            effects: r.effects
        },
        e.updateQueue = n;
        return
    }
    e = n.lastBaseUpdate,
    e === null ? n.firstBaseUpdate = t : e.next = t,
    n.lastBaseUpdate = t
}
function Th(e, t, n, r) {
    var i = e.updateQueue;
    co = !1;
    var o = i.firstBaseUpdate
      , s = i.lastBaseUpdate
      , a = i.shared.pending;
    if (a !== null) {
        i.shared.pending = null;
        var l = a
          , c = l.next;
        l.next = null,
        s === null ? o = c : s.next = c,
        s = l;
        var u = e.alternate;
        u !== null && (u = u.updateQueue,
        a = u.lastBaseUpdate,
        a !== s && (a === null ? u.firstBaseUpdate = c : a.next = c,
        u.lastBaseUpdate = l))
    }
    if (o !== null) {
        var d = i.baseState;
        s = 0,
        u = c = l = null,
        a = o;
        do {
            var f = a.lane
              , h = a.eventTime;
            if ((r & f) === f) {
                u !== null && (u = u.next = {
                    eventTime: h,
                    lane: 0,
                    tag: a.tag,
                    payload: a.payload,
                    callback: a.callback,
                    next: null
                });
                e: {
                    var m = e
                      , g = a;
                    switch (f = t,
                    h = n,
                    g.tag) {
                    case 1:
                        if (m = g.payload,
                        typeof m == "function") {
                            d = m.call(h, d, f);
                            break e
                        }
                        d = m;
                        break e;
                    case 3:
                        m.flags = m.flags & -65537 | 128;
                    case 0:
                        if (m = g.payload,
                        f = typeof m == "function" ? m.call(h, d, f) : m,
                        f == null)
                            break e;
                        d = dt({}, d, f);
                        break e;
                    case 2:
                        co = !0
                    }
                }
                a.callback !== null && a.lane !== 0 && (e.flags |= 64,
                f = i.effects,
                f === null ? i.effects = [a] : f.push(a))
            } else
                h = {
                    eventTime: h,
                    lane: f,
                    tag: a.tag,
                    payload: a.payload,
                    callback: a.callback,
                    next: null
                },
                u === null ? (c = u = h,
                l = d) : u = u.next = h,
                s |= f;
            if (a = a.next,
            a === null) {
                if (a = i.shared.pending,
                a === null)
                    break;
                f = a,
                a = f.next,
                f.next = null,
                i.lastBaseUpdate = f,
                i.shared.pending = null
            }
        } while (1);
        if (u === null && (l = d),
        i.baseState = l,
        i.firstBaseUpdate = c,
        i.lastBaseUpdate = u,
        t = i.shared.interleaved,
        t !== null) {
            i = t;
            do
                s |= i.lane,
                i = i.next;
            while (i !== t)
        } else
            o === null && (i.shared.lanes = 0);
        Gs |= s,
        e.lanes = s,
        e.memoizedState = d
    }
}
function kE(e, t, n) {
    if (e = t.effects,
    t.effects = null,
    e !== null)
        for (t = 0; t < e.length; t++) {
            var r = e[t]
              , i = r.callback;
            if (i !== null) {
                if (r.callback = null,
                r = n,
                typeof i != "function")
                    throw Error(X(191, i));
                i.call(r)
            }
        }
}
var M_ = new k5.Component().refs;
function jm(e, t, n, r) {
    t = e.memoizedState,
    n = n(r, t),
    n = n == null ? t : dt({}, t, n),
    e.memoizedState = n,
    e.lanes === 0 && (e.updateQueue.baseState = n)
}
var O1 = {
    isMounted: function(e) {
        return (e = e._reactInternals) ? ca(e) === e : !1
    },
    enqueueSetState: function(e, t, n) {
        e = e._reactInternals;
        var r = wn()
          , i = Oo(e)
          , o = Ri(r, i);
        o.payload = t,
        n != null && (o.callback = n),
        t = Po(e, o, i),
        t !== null && (Ar(t, e, i, r),
        $f(t, e, i))
    },
    enqueueReplaceState: function(e, t, n) {
        e = e._reactInternals;
        var r = wn()
          , i = Oo(e)
          , o = Ri(r, i);
        o.tag = 1,
        o.payload = t,
        n != null && (o.callback = n),
        t = Po(e, o, i),
        t !== null && (Ar(t, e, i, r),
        $f(t, e, i))
    },
    enqueueForceUpdate: function(e, t) {
        e = e._reactInternals;
        var n = wn()
          , r = Oo(e)
          , i = Ri(n, r);
        i.tag = 2,
        t != null && (i.callback = t),
        t = Po(e, i, r),
        t !== null && (Ar(t, e, r, n),
        $f(t, e, r))
    }
};
function TE(e, t, n, r, i, o, s) {
    return e = e.stateNode,
    typeof e.shouldComponentUpdate == "function" ? e.shouldComponentUpdate(r, o, s) : t.prototype && t.prototype.isPureReactComponent ? !bu(n, r) || !bu(i, o) : !0
}
function A_(e, t, n) {
    var r = !1
      , i = Vo
      , o = t.contextType;
    return typeof o == "object" && o !== null ? o = cr(o) : (i = An(t) ? Us : ln.current,
    r = t.contextTypes,
    o = (r = r != null) ? dl(e, i) : Vo),
    t = new t(n,o),
    e.memoizedState = t.state !== null && t.state !== void 0 ? t.state : null,
    t.updater = O1,
    e.stateNode = t,
    t._reactInternals = e,
    r && (e = e.stateNode,
    e.__reactInternalMemoizedUnmaskedChildContext = i,
    e.__reactInternalMemoizedMaskedChildContext = o),
    t
}
function ME(e, t, n, r) {
    e = t.state,
    typeof t.componentWillReceiveProps == "function" && t.componentWillReceiveProps(n, r),
    typeof t.UNSAFE_componentWillReceiveProps == "function" && t.UNSAFE_componentWillReceiveProps(n, r),
    t.state !== e && O1.enqueueReplaceState(t, t.state, null)
}
function Ym(e, t, n, r) {
    var i = e.stateNode;
    i.props = n,
    i.state = e.memoizedState,
    i.refs = M_,
    lv(e);
    var o = t.contextType;
    typeof o == "object" && o !== null ? i.context = cr(o) : (o = An(t) ? Us : ln.current,
    i.context = dl(e, o)),
    i.state = e.memoizedState,
    o = t.getDerivedStateFromProps,
    typeof o == "function" && (jm(e, t, o, n),
    i.state = e.memoizedState),
    typeof t.getDerivedStateFromProps == "function" || typeof i.getSnapshotBeforeUpdate == "function" || typeof i.UNSAFE_componentWillMount != "function" && typeof i.componentWillMount != "function" || (t = i.state,
    typeof i.componentWillMount == "function" && i.componentWillMount(),
    typeof i.UNSAFE_componentWillMount == "function" && i.UNSAFE_componentWillMount(),
    t !== i.state && O1.enqueueReplaceState(i, i.state, null),
    Th(e, n, i, r),
    i.state = e.memoizedState),
    typeof i.componentDidMount == "function" && (e.flags |= 4194308)
}
function rc(e, t, n) {
    if (e = n.ref,
    e !== null && typeof e != "function" && typeof e != "object") {
        if (n._owner) {
            if (n = n._owner,
            n) {
                if (n.tag !== 1)
                    throw Error(X(309));
                var r = n.stateNode
            }
            if (!r)
                throw Error(X(147, e));
            var i = r
              , o = "" + e;
            return t !== null && t.ref !== null && typeof t.ref == "function" && t.ref._stringRef === o ? t.ref : (t = function(s) {
                var a = i.refs;
                a === M_ && (a = i.refs = {}),
                s === null ? delete a[o] : a[o] = s
            }
            ,
            t._stringRef = o,
            t)
        }
        if (typeof e != "string")
            throw Error(X(284));
        if (!n._owner)
            throw Error(X(290, e))
    }
    return e
}
function qd(e, t) {
    throw e = Object.prototype.toString.call(t),
    Error(X(31, e === "[object Object]" ? "object with keys {" + Object.keys(t).join(", ") + "}" : e))
}
function AE(e) {
    var t = e._init;
    return t(e._payload)
}
function L_(e) {
    function t(v, y) {
        if (e) {
            var w = v.deletions;
            w === null ? (v.deletions = [y],
            v.flags |= 16) : w.push(y)
        }
    }
    function n(v, y) {
        if (!e)
            return null;
        for (; y !== null; )
            t(v, y),
            y = y.sibling;
        return null
    }
    function r(v, y) {
        for (v = new Map; y !== null; )
            y.key !== null ? v.set(y.key, y) : v.set(y.index, y),
            y = y.sibling;
        return v
    }
    function i(v, y) {
        return v = Do(v, y),
        v.index = 0,
        v.sibling = null,
        v
    }
    function o(v, y, w) {
        return v.index = w,
        e ? (w = v.alternate,
        w !== null ? (w = w.index,
        w < y ? (v.flags |= 2,
        y) : w) : (v.flags |= 2,
        y)) : (v.flags |= 1048576,
        y)
    }
    function s(v) {
        return e && v.alternate === null && (v.flags |= 2),
        v
    }
    function a(v, y, w, b) {
        return y === null || y.tag !== 6 ? (y = sp(w, v.mode, b),
        y.return = v,
        y) : (y = i(y, w),
        y.return = v,
        y)
    }
    function l(v, y, w, b) {
        var I = w.type;
        return I === La ? u(v, y, w.props.children, b, w.key) : y !== null && (y.elementType === I || typeof I == "object" && I !== null && I.$$typeof === lo && AE(I) === y.type) ? (b = i(y, w.props),
        b.ref = rc(v, y, w),
        b.return = v,
        b) : (b = Wf(w.type, w.key, w.props, null, v.mode, b),
        b.ref = rc(v, y, w),
        b.return = v,
        b)
    }
    function c(v, y, w, b) {
        return y === null || y.tag !== 4 || y.stateNode.containerInfo !== w.containerInfo || y.stateNode.implementation !== w.implementation ? (y = ap(w, v.mode, b),
        y.return = v,
        y) : (y = i(y, w.children || []),
        y.return = v,
        y)
    }
    function u(v, y, w, b, I) {
        return y === null || y.tag !== 7 ? (y = Bs(w, v.mode, b, I),
        y.return = v,
        y) : (y = i(y, w),
        y.return = v,
        y)
    }
    function d(v, y, w) {
        if (typeof y == "string" && y !== "" || typeof y == "number")
            return y = sp("" + y, v.mode, w),
            y.return = v,
            y;
        if (typeof y == "object" && y !== null) {
            switch (y.$$typeof) {
            case zd:
                return w = Wf(y.type, y.key, y.props, null, v.mode, w),
                w.ref = rc(v, null, y),
                w.return = v,
                w;
            case Aa:
                return y = ap(y, v.mode, w),
                y.return = v,
                y;
            case lo:
                var b = y._init;
                return d(v, b(y._payload), w)
            }
            if (Tc(y) || Ql(y))
                return y = Bs(y, v.mode, w, null),
                y.return = v,
                y;
            qd(v, y)
        }
        return null
    }
    function f(v, y, w, b) {
        var I = y !== null ? y.key : null;
        if (typeof w == "string" && w !== "" || typeof w == "number")
            return I !== null ? null : a(v, y, "" + w, b);
        if (typeof w == "object" && w !== null) {
            switch (w.$$typeof) {
            case zd:
                return w.key === I ? l(v, y, w, b) : null;
            case Aa:
                return w.key === I ? c(v, y, w, b) : null;
            case lo:
                return I = w._init,
                f(v, y, I(w._payload), b)
            }
            if (Tc(w) || Ql(w))
                return I !== null ? null : u(v, y, w, b, null);
            qd(v, w)
        }
        return null
    }
    function h(v, y, w, b, I) {
        if (typeof b == "string" && b !== "" || typeof b == "number")
            return v = v.get(w) || null,
            a(y, v, "" + b, I);
        if (typeof b == "object" && b !== null) {
            switch (b.$$typeof) {
            case zd:
                return v = v.get(b.key === null ? w : b.key) || null,
                l(y, v, b, I);
            case Aa:
                return v = v.get(b.key === null ? w : b.key) || null,
                c(y, v, b, I);
            case lo:
                var S = b._init;
                return h(v, y, w, S(b._payload), I)
            }
            if (Tc(b) || Ql(b))
                return v = v.get(w) || null,
                u(y, v, b, I, null);
            qd(y, b)
        }
        return null
    }
    function m(v, y, w, b) {
        for (var I = null, S = null, C = y, T = y = 0, L = null; C !== null && T < w.length; T++) {
            C.index > T ? (L = C,
            C = null) : L = C.sibling;
            var A = f(v, C, w[T], b);
            if (A === null) {
                C === null && (C = L);
                break
            }
            e && C && A.alternate === null && t(v, C),
            y = o(A, y, T),
            S === null ? I = A : S.sibling = A,
            S = A,
            C = L
        }
        if (T === w.length)
            return n(v, C),
            et && ls(v, T),
            I;
        if (C === null) {
            for (; T < w.length; T++)
                C = d(v, w[T], b),
                C !== null && (y = o(C, y, T),
                S === null ? I = C : S.sibling = C,
                S = C);
            return et && ls(v, T),
            I
        }
        for (C = r(v, C); T < w.length; T++)
            L = h(C, v, T, w[T], b),
            L !== null && (e && L.alternate !== null && C.delete(L.key === null ? T : L.key),
            y = o(L, y, T),
            S === null ? I = L : S.sibling = L,
            S = L);
        return e && C.forEach(function(P) {
            return t(v, P)
        }),
        et && ls(v, T),
        I
    }
    function g(v, y, w, b) {
        var I = Ql(w);
        if (typeof I != "function")
            throw Error(X(150));
        if (w = I.call(w),
        w == null)
            throw Error(X(151));
        for (var S = I = null, C = y, T = y = 0, L = null, A = w.next(); C !== null && !A.done; T++,
        A = w.next()) {
            C.index > T ? (L = C,
            C = null) : L = C.sibling;
            var P = f(v, C, A.value, b);
            if (P === null) {
                C === null && (C = L);
                break
            }
            e && C && P.alternate === null && t(v, C),
            y = o(P, y, T),
            S === null ? I = P : S.sibling = P,
            S = P,
            C = L
        }
        if (A.done)
            return n(v, C),
            et && ls(v, T),
            I;
        if (C === null) {
            for (; !A.done; T++,
            A = w.next())
                A = d(v, A.value, b),
                A !== null && (y = o(A, y, T),
                S === null ? I = A : S.sibling = A,
                S = A);
            return et && ls(v, T),
            I
        }
        for (C = r(v, C); !A.done; T++,
        A = w.next())
            A = h(C, v, T, A.value, b),
            A !== null && (e && A.alternate !== null && C.delete(A.key === null ? T : A.key),
            y = o(A, y, T),
            S === null ? I = A : S.sibling = A,
            S = A);
        return e && C.forEach(function(O) {
            return t(v, O)
        }),
        et && ls(v, T),
        I
    }
    function E(v, y, w, b) {
        if (typeof w == "object" && w !== null && w.type === La && w.key === null && (w = w.props.children),
        typeof w == "object" && w !== null) {
            switch (w.$$typeof) {
            case zd:
                e: {
                    for (var I = w.key, S = y; S !== null; ) {
                        if (S.key === I) {
                            if (I = w.type,
                            I === La) {
                                if (S.tag === 7) {
                                    n(v, S.sibling),
                                    y = i(S, w.props.children),
                                    y.return = v,
                                    v = y;
                                    break e
                                }
                            } else if (S.elementType === I || typeof I == "object" && I !== null && I.$$typeof === lo && AE(I) === S.type) {
                                n(v, S.sibling),
                                y = i(S, w.props),
                                y.ref = rc(v, S, w),
                                y.return = v,
                                v = y;
                                break e
                            }
                            n(v, S);
                            break
                        } else
                            t(v, S);
                        S = S.sibling
                    }
                    w.type === La ? (y = Bs(w.props.children, v.mode, b, w.key),
                    y.return = v,
                    v = y) : (b = Wf(w.type, w.key, w.props, null, v.mode, b),
                    b.ref = rc(v, y, w),
                    b.return = v,
                    v = b)
                }
                return s(v);
            case Aa:
                e: {
                    for (S = w.key; y !== null; ) {
                        if (y.key === S)
                            if (y.tag === 4 && y.stateNode.containerInfo === w.containerInfo && y.stateNode.implementation === w.implementation) {
                                n(v, y.sibling),
                                y = i(y, w.children || []),
                                y.return = v,
                                v = y;
                                break e
                            } else {
                                n(v, y);
                                break
                            }
                        else
                            t(v, y);
                        y = y.sibling
                    }
                    y = ap(w, v.mode, b),
                    y.return = v,
                    v = y
                }
                return s(v);
            case lo:
                return S = w._init,
                E(v, y, S(w._payload), b)
            }
            if (Tc(w))
                return m(v, y, w, b);
            if (Ql(w))
                return g(v, y, w, b);
            qd(v, w)
        }
        return typeof w == "string" && w !== "" || typeof w == "number" ? (w = "" + w,
        y !== null && y.tag === 6 ? (n(v, y.sibling),
        y = i(y, w),
        y.return = v,
        v = y) : (n(v, y),
        y = sp(w, v.mode, b),
        y.return = v,
        v = y),
        s(v)) : n(v, y)
    }
    return E
}
var hl = L_(!0)
  , P_ = L_(!1)
  , md = {}
  , ai = ts(md)
  , Su = ts(md)
  , Cu = ts(md);
function Ss(e) {
    if (e === md)
        throw Error(X(174));
    return e
}
function cv(e, t) {
    switch (je(Cu, t),
    je(Su, e),
    je(ai, md),
    e = t.nodeType,
    e) {
    case 9:
    case 11:
        t = (t = t.documentElement) ? t.namespaceURI : Sm(null, "");
        break;
    default:
        e = e === 8 ? t.parentNode : t,
        t = e.namespaceURI || null,
        e = e.tagName,
        t = Sm(t, e)
    }
    qe(ai),
    je(ai, t)
}
function pl() {
    qe(ai),
    qe(Su),
    qe(Cu)
}
function R_(e) {
    Ss(Cu.current);
    var t = Ss(ai.current)
      , n = Sm(t, e.type);
    t !== n && (je(Su, e),
    je(ai, n))
}
function uv(e) {
    Su.current === e && (qe(ai),
    qe(Su))
}
var st = ts(0);
function Mh(e) {
    for (var t = e; t !== null; ) {
        if (t.tag === 13) {
            var n = t.memoizedState;
            if (n !== null && (n = n.dehydrated,
            n === null || n.data === "$?" || n.data === "$!"))
                return t
        } else if (t.tag === 19 && t.memoizedProps.revealOrder !== void 0) {
            if (t.flags & 128)
                return t
        } else if (t.child !== null) {
            t.child.return = t,
            t = t.child;
            continue
        }
        if (t === e)
            break;
        for (; t.sibling === null; ) {
            if (t.return === null || t.return === e)
                return null;
            t = t.return
        }
        t.sibling.return = t.return,
        t = t.sibling
    }
    return null
}
var ep = [];
function dv() {
    for (var e = 0; e < ep.length; e++)
        ep[e]._workInProgressVersionPrimary = null;
    ep.length = 0
}
var Bf = Zi.ReactCurrentDispatcher
  , tp = Zi.ReactCurrentBatchConfig
  , Ws = 0
  , ct = null
  , St = null
  , Nt = null
  , Ah = !1
  , Gc = !1
  , ku = 0
  , FM = 0;
function qt() {
    throw Error(X(321))
}
function fv(e, t) {
    if (t === null)
        return !1;
    for (var n = 0; n < t.length && n < e.length; n++)
        if (!Nr(e[n], t[n]))
            return !1;
    return !0
}
function hv(e, t, n, r, i, o) {
    if (Ws = o,
    ct = t,
    t.memoizedState = null,
    t.updateQueue = null,
    t.lanes = 0,
    Bf.current = e === null || e.memoizedState === null ? HM : UM,
    e = n(r, i),
    Gc) {
        o = 0;
        do {
            if (Gc = !1,
            ku = 0,
            25 <= o)
                throw Error(X(301));
            o += 1,
            Nt = St = null,
            t.updateQueue = null,
            Bf.current = VM,
            e = n(r, i)
        } while (Gc)
    }
    if (Bf.current = Lh,
    t = St !== null && St.next !== null,
    Ws = 0,
    Nt = St = ct = null,
    Ah = !1,
    t)
        throw Error(X(300));
    return e
}
function pv() {
    var e = ku !== 0;
    return ku = 0,
    e
}
function Xr() {
    var e = {
        memoizedState: null,
        baseState: null,
        baseQueue: null,
        queue: null,
        next: null
    };
    return Nt === null ? ct.memoizedState = Nt = e : Nt = Nt.next = e,
    Nt
}
function ur() {
    if (St === null) {
        var e = ct.alternate;
        e = e !== null ? e.memoizedState : null
    } else
        e = St.next;
    var t = Nt === null ? ct.memoizedState : Nt.next;
    if (t !== null)
        Nt = t,
        St = e;
    else {
        if (e === null)
            throw Error(X(310));
        St = e,
        e = {
            memoizedState: St.memoizedState,
            baseState: St.baseState,
            baseQueue: St.baseQueue,
            queue: St.queue,
            next: null
        },
        Nt === null ? ct.memoizedState = Nt = e : Nt = Nt.next = e
    }
    return Nt
}
function Tu(e, t) {
    return typeof t == "function" ? t(e) : t
}
function np(e) {
    var t = ur()
      , n = t.queue;
    if (n === null)
        throw Error(X(311));
    n.lastRenderedReducer = e;
    var r = St
      , i = r.baseQueue
      , o = n.pending;
    if (o !== null) {
        if (i !== null) {
            var s = i.next;
            i.next = o.next,
            o.next = s
        }
        r.baseQueue = i = o,
        n.pending = null
    }
    if (i !== null) {
        o = i.next,
        r = r.baseState;
        var a = s = null
          , l = null
          , c = o;
        do {
            var u = c.lane;
            if ((Ws & u) === u)
                l !== null && (l = l.next = {
                    lane: 0,
                    action: c.action,
                    hasEagerState: c.hasEagerState,
                    eagerState: c.eagerState,
                    next: null
                }),
                r = c.hasEagerState ? c.eagerState : e(r, c.action);
            else {
                var d = {
                    lane: u,
                    action: c.action,
                    hasEagerState: c.hasEagerState,
                    eagerState: c.eagerState,
                    next: null
                };
                l === null ? (a = l = d,
                s = r) : l = l.next = d,
                ct.lanes |= u,
                Gs |= u
            }
            c = c.next
        } while (c !== null && c !== o);
        l === null ? s = r : l.next = a,
        Nr(r, t.memoizedState) || (Cn = !0),
        t.memoizedState = r,
        t.baseState = s,
        t.baseQueue = l,
        n.lastRenderedState = r
    }
    if (e = n.interleaved,
    e !== null) {
        i = e;
        do
            o = i.lane,
            ct.lanes |= o,
            Gs |= o,
            i = i.next;
        while (i !== e)
    } else
        i === null && (n.lanes = 0);
    return [t.memoizedState, n.dispatch]
}
function rp(e) {
    var t = ur()
      , n = t.queue;
    if (n === null)
        throw Error(X(311));
    n.lastRenderedReducer = e;
    var r = n.dispatch
      , i = n.pending
      , o = t.memoizedState;
    if (i !== null) {
        n.pending = null;
        var s = i = i.next;
        do
            o = e(o, s.action),
            s = s.next;
        while (s !== i);
        Nr(o, t.memoizedState) || (Cn = !0),
        t.memoizedState = o,
        t.baseQueue === null && (t.baseState = o),
        n.lastRenderedState = o
    }
    return [o, r]
}
function O_() {}
function D_(e, t) {
    var n = ct
      , r = ur()
      , i = t()
      , o = !Nr(r.memoizedState, i);
    if (o && (r.memoizedState = i,
    Cn = !0),
    r = r.queue,
    mv($_.bind(null, n, r, e), [e]),
    r.getSnapshot !== t || o || Nt !== null && Nt.memoizedState.tag & 1) {
        if (n.flags |= 2048,
        Mu(9, F_.bind(null, n, r, i, t), void 0, null),
        Bt === null)
            throw Error(X(349));
        Ws & 30 || N_(n, t, i)
    }
    return i
}
function N_(e, t, n) {
    e.flags |= 16384,
    e = {
        getSnapshot: t,
        value: n
    },
    t = ct.updateQueue,
    t === null ? (t = {
        lastEffect: null,
        stores: null
    },
    ct.updateQueue = t,
    t.stores = [e]) : (n = t.stores,
    n === null ? t.stores = [e] : n.push(e))
}
function F_(e, t, n, r) {
    t.value = n,
    t.getSnapshot = r,
    B_(t) && z_(e)
}
function $_(e, t, n) {
    return n(function() {
        B_(t) && z_(e)
    })
}
function B_(e) {
    var t = e.getSnapshot;
    e = e.value;
    try {
        var n = t();
        return !Nr(e, n)
    } catch {
        return !0
    }
}
function z_(e) {
    var t = Vi(e, 1);
    t !== null && Ar(t, e, 1, -1)
}
function LE(e) {
    var t = Xr();
    return typeof e == "function" && (e = e()),
    t.memoizedState = t.baseState = e,
    e = {
        pending: null,
        interleaved: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: Tu,
        lastRenderedState: e
    },
    t.queue = e,
    e = e.dispatch = zM.bind(null, ct, e),
    [t.memoizedState, e]
}
function Mu(e, t, n, r) {
    return e = {
        tag: e,
        create: t,
        destroy: n,
        deps: r,
        next: null
    },
    t = ct.updateQueue,
    t === null ? (t = {
        lastEffect: null,
        stores: null
    },
    ct.updateQueue = t,
    t.lastEffect = e.next = e) : (n = t.lastEffect,
    n === null ? t.lastEffect = e.next = e : (r = n.next,
    n.next = e,
    e.next = r,
    t.lastEffect = e)),
    e
}
function H_() {
    return ur().memoizedState
}
function zf(e, t, n, r) {
    var i = Xr();
    ct.flags |= e,
    i.memoizedState = Mu(1 | t, n, void 0, r === void 0 ? null : r)
}
function D1(e, t, n, r) {
    var i = ur();
    r = r === void 0 ? null : r;
    var o = void 0;
    if (St !== null) {
        var s = St.memoizedState;
        if (o = s.destroy,
        r !== null && fv(r, s.deps)) {
            i.memoizedState = Mu(t, n, o, r);
            return
        }
    }
    ct.flags |= e,
    i.memoizedState = Mu(1 | t, n, o, r)
}
function PE(e, t) {
    return zf(8390656, 8, e, t)
}
function mv(e, t) {
    return D1(2048, 8, e, t)
}
function U_(e, t) {
    return D1(4, 2, e, t)
}
function V_(e, t) {
    return D1(4, 4, e, t)
}
function W_(e, t) {
    if (typeof t == "function")
        return e = e(),
        t(e),
        function() {
            t(null)
        }
        ;
    if (t != null)
        return e = e(),
        t.current = e,
        function() {
            t.current = null
        }
}
function G_(e, t, n) {
    return n = n != null ? n.concat([e]) : null,
    D1(4, 4, W_.bind(null, t, e), n)
}
function gv() {}
function j_(e, t) {
    var n = ur();
    t = t === void 0 ? null : t;
    var r = n.memoizedState;
    return r !== null && t !== null && fv(t, r[1]) ? r[0] : (n.memoizedState = [e, t],
    e)
}
function Y_(e, t) {
    var n = ur();
    t = t === void 0 ? null : t;
    var r = n.memoizedState;
    return r !== null && t !== null && fv(t, r[1]) ? r[0] : (e = e(),
    n.memoizedState = [e, t],
    e)
}
function Z_(e, t, n) {
    return Ws & 21 ? (Nr(n, t) || (n = q5(),
    ct.lanes |= n,
    Gs |= n,
    e.baseState = !0),
    t) : (e.baseState && (e.baseState = !1,
    Cn = !0),
    e.memoizedState = n)
}
function $M(e, t) {
    var n = Be;
    Be = n !== 0 && 4 > n ? n : 4,
    e(!0);
    var r = tp.transition;
    tp.transition = {};
    try {
        e(!1),
        t()
    } finally {
        Be = n,
        tp.transition = r
    }
}
function K_() {
    return ur().memoizedState
}
function BM(e, t, n) {
    var r = Oo(e);
    if (n = {
        lane: r,
        action: n,
        hasEagerState: !1,
        eagerState: null,
        next: null
    },
    X_(e))
        q_(t, n);
    else if (n = k_(e, t, n, r),
    n !== null) {
        var i = wn();
        Ar(n, e, r, i),
        Q_(n, t, r)
    }
}
function zM(e, t, n) {
    var r = Oo(e)
      , i = {
        lane: r,
        action: n,
        hasEagerState: !1,
        eagerState: null,
        next: null
    };
    if (X_(e))
        q_(t, i);
    else {
        var o = e.alternate;
        if (e.lanes === 0 && (o === null || o.lanes === 0) && (o = t.lastRenderedReducer,
        o !== null))
            try {
                var s = t.lastRenderedState
                  , a = o(s, n);
                if (i.hasEagerState = !0,
                i.eagerState = a,
                Nr(a, s)) {
                    var l = t.interleaved;
                    l === null ? (i.next = i,
                    av(t)) : (i.next = l.next,
                    l.next = i),
                    t.interleaved = i;
                    return
                }
            } catch {} finally {}
        n = k_(e, t, i, r),
        n !== null && (i = wn(),
        Ar(n, e, r, i),
        Q_(n, t, r))
    }
}
function X_(e) {
    var t = e.alternate;
    return e === ct || t !== null && t === ct
}
function q_(e, t) {
    Gc = Ah = !0;
    var n = e.pending;
    n === null ? t.next = t : (t.next = n.next,
    n.next = t),
    e.pending = t
}
function Q_(e, t, n) {
    if (n & 4194240) {
        var r = t.lanes;
        r &= e.pendingLanes,
        n |= r,
        t.lanes = n,
        Y2(e, n)
    }
}
var Lh = {
    readContext: cr,
    useCallback: qt,
    useContext: qt,
    useEffect: qt,
    useImperativeHandle: qt,
    useInsertionEffect: qt,
    useLayoutEffect: qt,
    useMemo: qt,
    useReducer: qt,
    useRef: qt,
    useState: qt,
    useDebugValue: qt,
    useDeferredValue: qt,
    useTransition: qt,
    useMutableSource: qt,
    useSyncExternalStore: qt,
    useId: qt,
    unstable_isNewReconciler: !1
}
  , HM = {
    readContext: cr,
    useCallback: function(e, t) {
        return Xr().memoizedState = [e, t === void 0 ? null : t],
        e
    },
    useContext: cr,
    useEffect: PE,
    useImperativeHandle: function(e, t, n) {
        return n = n != null ? n.concat([e]) : null,
        zf(4194308, 4, W_.bind(null, t, e), n)
    },
    useLayoutEffect: function(e, t) {
        return zf(4194308, 4, e, t)
    },
    useInsertionEffect: function(e, t) {
        return zf(4, 2, e, t)
    },
    useMemo: function(e, t) {
        var n = Xr();
        return t = t === void 0 ? null : t,
        e = e(),
        n.memoizedState = [e, t],
        e
    },
    useReducer: function(e, t, n) {
        var r = Xr();
        return t = n !== void 0 ? n(t) : t,
        r.memoizedState = r.baseState = t,
        e = {
            pending: null,
            interleaved: null,
            lanes: 0,
            dispatch: null,
            lastRenderedReducer: e,
            lastRenderedState: t
        },
        r.queue = e,
        e = e.dispatch = BM.bind(null, ct, e),
        [r.memoizedState, e]
    },
    useRef: function(e) {
        var t = Xr();
        return e = {
            current: e
        },
        t.memoizedState = e
    },
    useState: LE,
    useDebugValue: gv,
    useDeferredValue: function(e) {
        return Xr().memoizedState = e
    },
    useTransition: function() {
        var e = LE(!1)
          , t = e[0];
        return e = $M.bind(null, e[1]),
        Xr().memoizedState = e,
        [t, e]
    },
    useMutableSource: function() {},
    useSyncExternalStore: function(e, t, n) {
        var r = ct
          , i = Xr();
        if (et) {
            if (n === void 0)
                throw Error(X(407));
            n = n()
        } else {
            if (n = t(),
            Bt === null)
                throw Error(X(349));
            Ws & 30 || N_(r, t, n)
        }
        i.memoizedState = n;
        var o = {
            value: n,
            getSnapshot: t
        };
        return i.queue = o,
        PE($_.bind(null, r, o, e), [e]),
        r.flags |= 2048,
        Mu(9, F_.bind(null, r, o, n, t), void 0, null),
        n
    },
    useId: function() {
        var e = Xr()
          , t = Bt.identifierPrefix;
        if (et) {
            var n = Pi
              , r = Li;
            n = (r & ~(1 << 32 - Mr(r) - 1)).toString(32) + n,
            t = ":" + t + "R" + n,
            n = ku++,
            0 < n && (t += "H" + n.toString(32)),
            t += ":"
        } else
            n = FM++,
            t = ":" + t + "r" + n.toString(32) + ":";
        return e.memoizedState = t
    },
    unstable_isNewReconciler: !1
}
  , UM = {
    readContext: cr,
    useCallback: j_,
    useContext: cr,
    useEffect: mv,
    useImperativeHandle: G_,
    useInsertionEffect: U_,
    useLayoutEffect: V_,
    useMemo: Y_,
    useReducer: np,
    useRef: H_,
    useState: function() {
        return np(Tu)
    },
    useDebugValue: gv,
    useDeferredValue: function(e) {
        var t = ur();
        return Z_(t, St.memoizedState, e)
    },
    useTransition: function() {
        var e = np(Tu)[0]
          , t = ur().memoizedState;
        return [e, t]
    },
    useMutableSource: O_,
    useSyncExternalStore: D_,
    useId: K_,
    unstable_isNewReconciler: !1
}
  , VM = {
    readContext: cr,
    useCallback: j_,
    useContext: cr,
    useEffect: mv,
    useImperativeHandle: G_,
    useInsertionEffect: U_,
    useLayoutEffect: V_,
    useMemo: Y_,
    useReducer: rp,
    useRef: H_,
    useState: function() {
        return rp(Tu)
    },
    useDebugValue: gv,
    useDeferredValue: function(e) {
        var t = ur();
        return St === null ? t.memoizedState = e : Z_(t, St.memoizedState, e)
    },
    useTransition: function() {
        var e = rp(Tu)[0]
          , t = ur().memoizedState;
        return [e, t]
    },
    useMutableSource: O_,
    useSyncExternalStore: D_,
    useId: K_,
    unstable_isNewReconciler: !1
};
function ml(e, t) {
    try {
        var n = ""
          , r = t;
        do
            n += vT(r),
            r = r.return;
        while (r);
        var i = n
    } catch (o) {
        i = `
Error generating stack: ` + o.message + `
` + o.stack
    }
    return {
        value: e,
        source: t,
        stack: i,
        digest: null
    }
}
function ip(e, t, n) {
    return {
        value: e,
        source: null,
        stack: n ?? null,
        digest: t ?? null
    }
}
function Zm(e, t) {
    try {
        console.error(t.value)
    } catch (n) {
        setTimeout(function() {
            throw n
        })
    }
}
var WM = typeof WeakMap == "function" ? WeakMap : Map;
function J_(e, t, n) {
    n = Ri(-1, n),
    n.tag = 3,
    n.payload = {
        element: null
    };
    var r = t.value;
    return n.callback = function() {
        Rh || (Rh = !0,
        ig = r),
        Zm(e, t)
    }
    ,
    n
}
function e8(e, t, n) {
    n = Ri(-1, n),
    n.tag = 3;
    var r = e.type.getDerivedStateFromError;
    if (typeof r == "function") {
        var i = t.value;
        n.payload = function() {
            return r(i)
        }
        ,
        n.callback = function() {
            Zm(e, t)
        }
    }
    var o = e.stateNode;
    return o !== null && typeof o.componentDidCatch == "function" && (n.callback = function() {
        Zm(e, t),
        typeof r != "function" && (Ro === null ? Ro = new Set([this]) : Ro.add(this));
        var s = t.stack;
        this.componentDidCatch(t.value, {
            componentStack: s !== null ? s : ""
        })
    }
    ),
    n
}
function RE(e, t, n) {
    var r = e.pingCache;
    if (r === null) {
        r = e.pingCache = new WM;
        var i = new Set;
        r.set(t, i)
    } else
        i = r.get(t),
        i === void 0 && (i = new Set,
        r.set(t, i));
    i.has(n) || (i.add(n),
    e = iA.bind(null, e, t, n),
    t.then(e, e))
}
function OE(e) {
    do {
        var t;
        if ((t = e.tag === 13) && (t = e.memoizedState,
        t = t !== null ? t.dehydrated !== null : !0),
        t)
            return e;
        e = e.return
    } while (e !== null);
    return null
}
function DE(e, t, n, r, i) {
    return e.mode & 1 ? (e.flags |= 65536,
    e.lanes = i,
    e) : (e === t ? e.flags |= 65536 : (e.flags |= 128,
    n.flags |= 131072,
    n.flags &= -52805,
    n.tag === 1 && (n.alternate === null ? n.tag = 17 : (t = Ri(-1, 1),
    t.tag = 2,
    Po(n, t, 1))),
    n.lanes |= 1),
    e)
}
var GM = Zi.ReactCurrentOwner
  , Cn = !1;
function vn(e, t, n, r) {
    t.child = e === null ? P_(t, null, n, r) : hl(t, e.child, n, r)
}
function NE(e, t, n, r, i) {
    n = n.render;
    var o = t.ref;
    return Ja(t, i),
    r = hv(e, t, n, r, o, i),
    n = pv(),
    e !== null && !Cn ? (t.updateQueue = e.updateQueue,
    t.flags &= -2053,
    e.lanes &= ~i,
    Wi(e, t, i)) : (et && n && tv(t),
    t.flags |= 1,
    vn(e, t, r, i),
    t.child)
}
function FE(e, t, n, r, i) {
    if (e === null) {
        var o = n.type;
        return typeof o == "function" && !Iv(o) && o.defaultProps === void 0 && n.compare === null && n.defaultProps === void 0 ? (t.tag = 15,
        t.type = o,
        t8(e, t, o, r, i)) : (e = Wf(n.type, null, r, t, t.mode, i),
        e.ref = t.ref,
        e.return = t,
        t.child = e)
    }
    if (o = e.child,
    !(e.lanes & i)) {
        var s = o.memoizedProps;
        if (n = n.compare,
        n = n !== null ? n : bu,
        n(s, r) && e.ref === t.ref)
            return Wi(e, t, i)
    }
    return t.flags |= 1,
    e = Do(o, r),
    e.ref = t.ref,
    e.return = t,
    t.child = e
}
function t8(e, t, n, r, i) {
    if (e !== null) {
        var o = e.memoizedProps;
        if (bu(o, r) && e.ref === t.ref)
            if (Cn = !1,
            t.pendingProps = r = o,
            (e.lanes & i) !== 0)
                e.flags & 131072 && (Cn = !0);
            else
                return t.lanes = e.lanes,
                Wi(e, t, i)
    }
    return Km(e, t, n, r, i)
}
function n8(e, t, n) {
    var r = t.pendingProps
      , i = r.children
      , o = e !== null ? e.memoizedState : null;
    if (r.mode === "hidden")
        if (!(t.mode & 1))
            t.memoizedState = {
                baseLanes: 0,
                cachePool: null,
                transitions: null
            },
            je(Ha, Fn),
            Fn |= n;
        else {
            if (!(n & 1073741824))
                return e = o !== null ? o.baseLanes | n : n,
                t.lanes = t.childLanes = 1073741824,
                t.memoizedState = {
                    baseLanes: e,
                    cachePool: null,
                    transitions: null
                },
                t.updateQueue = null,
                je(Ha, Fn),
                Fn |= e,
                null;
            t.memoizedState = {
                baseLanes: 0,
                cachePool: null,
                transitions: null
            },
            r = o !== null ? o.baseLanes : n,
            je(Ha, Fn),
            Fn |= r
        }
    else
        o !== null ? (r = o.baseLanes | n,
        t.memoizedState = null) : r = n,
        je(Ha, Fn),
        Fn |= r;
    return vn(e, t, i, n),
    t.child
}
function r8(e, t) {
    var n = t.ref;
    (e === null && n !== null || e !== null && e.ref !== n) && (t.flags |= 512,
    t.flags |= 2097152)
}
function Km(e, t, n, r, i) {
    var o = An(n) ? Us : ln.current;
    return o = dl(t, o),
    Ja(t, i),
    n = hv(e, t, n, r, o, i),
    r = pv(),
    e !== null && !Cn ? (t.updateQueue = e.updateQueue,
    t.flags &= -2053,
    e.lanes &= ~i,
    Wi(e, t, i)) : (et && r && tv(t),
    t.flags |= 1,
    vn(e, t, n, i),
    t.child)
}
function $E(e, t, n, r, i) {
    if (An(n)) {
        var o = !0;
        xh(t)
    } else
        o = !1;
    if (Ja(t, i),
    t.stateNode === null)
        Hf(e, t),
        A_(t, n, r),
        Ym(t, n, r, i),
        r = !0;
    else if (e === null) {
        var s = t.stateNode
          , a = t.memoizedProps;
        s.props = a;
        var l = s.context
          , c = n.contextType;
        typeof c == "object" && c !== null ? c = cr(c) : (c = An(n) ? Us : ln.current,
        c = dl(t, c));
        var u = n.getDerivedStateFromProps
          , d = typeof u == "function" || typeof s.getSnapshotBeforeUpdate == "function";
        d || typeof s.UNSAFE_componentWillReceiveProps != "function" && typeof s.componentWillReceiveProps != "function" || (a !== r || l !== c) && ME(t, s, r, c),
        co = !1;
        var f = t.memoizedState;
        s.state = f,
        Th(t, r, s, i),
        l = t.memoizedState,
        a !== r || f !== l || Mn.current || co ? (typeof u == "function" && (jm(t, n, u, r),
        l = t.memoizedState),
        (a = co || TE(t, n, a, r, f, l, c)) ? (d || typeof s.UNSAFE_componentWillMount != "function" && typeof s.componentWillMount != "function" || (typeof s.componentWillMount == "function" && s.componentWillMount(),
        typeof s.UNSAFE_componentWillMount == "function" && s.UNSAFE_componentWillMount()),
        typeof s.componentDidMount == "function" && (t.flags |= 4194308)) : (typeof s.componentDidMount == "function" && (t.flags |= 4194308),
        t.memoizedProps = r,
        t.memoizedState = l),
        s.props = r,
        s.state = l,
        s.context = c,
        r = a) : (typeof s.componentDidMount == "function" && (t.flags |= 4194308),
        r = !1)
    } else {
        s = t.stateNode,
        T_(e, t),
        a = t.memoizedProps,
        c = t.type === t.elementType ? a : wr(t.type, a),
        s.props = c,
        d = t.pendingProps,
        f = s.context,
        l = n.contextType,
        typeof l == "object" && l !== null ? l = cr(l) : (l = An(n) ? Us : ln.current,
        l = dl(t, l));
        var h = n.getDerivedStateFromProps;
        (u = typeof h == "function" || typeof s.getSnapshotBeforeUpdate == "function") || typeof s.UNSAFE_componentWillReceiveProps != "function" && typeof s.componentWillReceiveProps != "function" || (a !== d || f !== l) && ME(t, s, r, l),
        co = !1,
        f = t.memoizedState,
        s.state = f,
        Th(t, r, s, i);
        var m = t.memoizedState;
        a !== d || f !== m || Mn.current || co ? (typeof h == "function" && (jm(t, n, h, r),
        m = t.memoizedState),
        (c = co || TE(t, n, c, r, f, m, l) || !1) ? (u || typeof s.UNSAFE_componentWillUpdate != "function" && typeof s.componentWillUpdate != "function" || (typeof s.componentWillUpdate == "function" && s.componentWillUpdate(r, m, l),
        typeof s.UNSAFE_componentWillUpdate == "function" && s.UNSAFE_componentWillUpdate(r, m, l)),
        typeof s.componentDidUpdate == "function" && (t.flags |= 4),
        typeof s.getSnapshotBeforeUpdate == "function" && (t.flags |= 1024)) : (typeof s.componentDidUpdate != "function" || a === e.memoizedProps && f === e.memoizedState || (t.flags |= 4),
        typeof s.getSnapshotBeforeUpdate != "function" || a === e.memoizedProps && f === e.memoizedState || (t.flags |= 1024),
        t.memoizedProps = r,
        t.memoizedState = m),
        s.props = r,
        s.state = m,
        s.context = l,
        r = c) : (typeof s.componentDidUpdate != "function" || a === e.memoizedProps && f === e.memoizedState || (t.flags |= 4),
        typeof s.getSnapshotBeforeUpdate != "function" || a === e.memoizedProps && f === e.memoizedState || (t.flags |= 1024),
        r = !1)
    }
    return Xm(e, t, n, r, o, i)
}
function Xm(e, t, n, r, i, o) {
    r8(e, t);
    var s = (t.flags & 128) !== 0;
    if (!r && !s)
        return i && xE(t, n, !1),
        Wi(e, t, o);
    r = t.stateNode,
    GM.current = t;
    var a = s && typeof n.getDerivedStateFromError != "function" ? null : r.render();
    return t.flags |= 1,
    e !== null && s ? (t.child = hl(t, e.child, null, o),
    t.child = hl(t, null, a, o)) : vn(e, t, a, o),
    t.memoizedState = r.state,
    i && xE(t, n, !0),
    t.child
}
function i8(e) {
    var t = e.stateNode;
    t.pendingContext ? _E(e, t.pendingContext, t.pendingContext !== t.context) : t.context && _E(e, t.context, !1),
    cv(e, t.containerInfo)
}
function BE(e, t, n, r, i) {
    return fl(),
    rv(i),
    t.flags |= 256,
    vn(e, t, n, r),
    t.child
}
var qm = {
    dehydrated: null,
    treeContext: null,
    retryLane: 0
};
function Qm(e) {
    return {
        baseLanes: e,
        cachePool: null,
        transitions: null
    }
}
function o8(e, t, n) {
    var r = t.pendingProps, i = st.current, o = !1, s = (t.flags & 128) !== 0, a;
    if ((a = s) || (a = e !== null && e.memoizedState === null ? !1 : (i & 2) !== 0),
    a ? (o = !0,
    t.flags &= -129) : (e === null || e.memoizedState !== null) && (i |= 1),
    je(st, i & 1),
    e === null)
        return Wm(t),
        e = t.memoizedState,
        e !== null && (e = e.dehydrated,
        e !== null) ? (t.mode & 1 ? e.data === "$!" ? t.lanes = 8 : t.lanes = 1073741824 : t.lanes = 1,
        null) : (s = r.children,
        e = r.fallback,
        o ? (r = t.mode,
        o = t.child,
        s = {
            mode: "hidden",
            children: s
        },
        !(r & 1) && o !== null ? (o.childLanes = 0,
        o.pendingProps = s) : o = $1(s, r, 0, null),
        e = Bs(e, r, n, null),
        o.return = t,
        e.return = t,
        o.sibling = e,
        t.child = o,
        t.child.memoizedState = Qm(n),
        t.memoizedState = qm,
        e) : vv(t, s));
    if (i = e.memoizedState,
    i !== null && (a = i.dehydrated,
    a !== null))
        return jM(e, t, s, r, a, i, n);
    if (o) {
        o = r.fallback,
        s = t.mode,
        i = e.child,
        a = i.sibling;
        var l = {
            mode: "hidden",
            children: r.children
        };
        return !(s & 1) && t.child !== i ? (r = t.child,
        r.childLanes = 0,
        r.pendingProps = l,
        t.deletions = null) : (r = Do(i, l),
        r.subtreeFlags = i.subtreeFlags & 14680064),
        a !== null ? o = Do(a, o) : (o = Bs(o, s, n, null),
        o.flags |= 2),
        o.return = t,
        r.return = t,
        r.sibling = o,
        t.child = r,
        r = o,
        o = t.child,
        s = e.child.memoizedState,
        s = s === null ? Qm(n) : {
            baseLanes: s.baseLanes | n,
            cachePool: null,
            transitions: s.transitions
        },
        o.memoizedState = s,
        o.childLanes = e.childLanes & ~n,
        t.memoizedState = qm,
        r
    }
    return o = e.child,
    e = o.sibling,
    r = Do(o, {
        mode: "visible",
        children: r.children
    }),
    !(t.mode & 1) && (r.lanes = n),
    r.return = t,
    r.sibling = null,
    e !== null && (n = t.deletions,
    n === null ? (t.deletions = [e],
    t.flags |= 16) : n.push(e)),
    t.child = r,
    t.memoizedState = null,
    r
}
function vv(e, t) {
    return t = $1({
        mode: "visible",
        children: t
    }, e.mode, 0, null),
    t.return = e,
    e.child = t
}
function Qd(e, t, n, r) {
    return r !== null && rv(r),
    hl(t, e.child, null, n),
    e = vv(t, t.pendingProps.children),
    e.flags |= 2,
    t.memoizedState = null,
    e
}
function jM(e, t, n, r, i, o, s) {
    if (n)
        return t.flags & 256 ? (t.flags &= -257,
        r = ip(Error(X(422))),
        Qd(e, t, s, r)) : t.memoizedState !== null ? (t.child = e.child,
        t.flags |= 128,
        null) : (o = r.fallback,
        i = t.mode,
        r = $1({
            mode: "visible",
            children: r.children
        }, i, 0, null),
        o = Bs(o, i, s, null),
        o.flags |= 2,
        r.return = t,
        o.return = t,
        r.sibling = o,
        t.child = r,
        t.mode & 1 && hl(t, e.child, null, s),
        t.child.memoizedState = Qm(s),
        t.memoizedState = qm,
        o);
    if (!(t.mode & 1))
        return Qd(e, t, s, null);
    if (i.data === "$!") {
        if (r = i.nextSibling && i.nextSibling.dataset,
        r)
            var a = r.dgst;
        return r = a,
        o = Error(X(419)),
        r = ip(o, r, void 0),
        Qd(e, t, s, r)
    }
    if (a = (s & e.childLanes) !== 0,
    Cn || a) {
        if (r = Bt,
        r !== null) {
            switch (s & -s) {
            case 4:
                i = 2;
                break;
            case 16:
                i = 8;
                break;
            case 64:
            case 128:
            case 256:
            case 512:
            case 1024:
            case 2048:
            case 4096:
            case 8192:
            case 16384:
            case 32768:
            case 65536:
            case 131072:
            case 262144:
            case 524288:
            case 1048576:
            case 2097152:
            case 4194304:
            case 8388608:
            case 16777216:
            case 33554432:
            case 67108864:
                i = 32;
                break;
            case 536870912:
                i = 268435456;
                break;
            default:
                i = 0
            }
            i = i & (r.suspendedLanes | s) ? 0 : i,
            i !== 0 && i !== o.retryLane && (o.retryLane = i,
            Vi(e, i),
            Ar(r, e, i, -1))
        }
        return xv(),
        r = ip(Error(X(421))),
        Qd(e, t, s, r)
    }
    return i.data === "$?" ? (t.flags |= 128,
    t.child = e.child,
    t = oA.bind(null, e),
    i._reactRetry = t,
    null) : (e = o.treeContext,
    $n = Lo(i.nextSibling),
    Un = t,
    et = !0,
    Ir = null,
    e !== null && (tr[nr++] = Li,
    tr[nr++] = Pi,
    tr[nr++] = Vs,
    Li = e.id,
    Pi = e.overflow,
    Vs = t),
    t = vv(t, r.children),
    t.flags |= 4096,
    t)
}
function zE(e, t, n) {
    e.lanes |= t;
    var r = e.alternate;
    r !== null && (r.lanes |= t),
    Gm(e.return, t, n)
}
function op(e, t, n, r, i) {
    var o = e.memoizedState;
    o === null ? e.memoizedState = {
        isBackwards: t,
        rendering: null,
        renderingStartTime: 0,
        last: r,
        tail: n,
        tailMode: i
    } : (o.isBackwards = t,
    o.rendering = null,
    o.renderingStartTime = 0,
    o.last = r,
    o.tail = n,
    o.tailMode = i)
}
function s8(e, t, n) {
    var r = t.pendingProps
      , i = r.revealOrder
      , o = r.tail;
    if (vn(e, t, r.children, n),
    r = st.current,
    r & 2)
        r = r & 1 | 2,
        t.flags |= 128;
    else {
        if (e !== null && e.flags & 128)
            e: for (e = t.child; e !== null; ) {
                if (e.tag === 13)
                    e.memoizedState !== null && zE(e, n, t);
                else if (e.tag === 19)
                    zE(e, n, t);
                else if (e.child !== null) {
                    e.child.return = e,
                    e = e.child;
                    continue
                }
                if (e === t)
                    break e;
                for (; e.sibling === null; ) {
                    if (e.return === null || e.return === t)
                        break e;
                    e = e.return
                }
                e.sibling.return = e.return,
                e = e.sibling
            }
        r &= 1
    }
    if (je(st, r),
    !(t.mode & 1))
        t.memoizedState = null;
    else
        switch (i) {
        case "forwards":
            for (n = t.child,
            i = null; n !== null; )
                e = n.alternate,
                e !== null && Mh(e) === null && (i = n),
                n = n.sibling;
            n = i,
            n === null ? (i = t.child,
            t.child = null) : (i = n.sibling,
            n.sibling = null),
            op(t, !1, i, n, o);
            break;
        case "backwards":
            for (n = null,
            i = t.child,
            t.child = null; i !== null; ) {
                if (e = i.alternate,
                e !== null && Mh(e) === null) {
                    t.child = i;
                    break
                }
                e = i.sibling,
                i.sibling = n,
                n = i,
                i = e
            }
            op(t, !0, n, null, o);
            break;
        case "together":
            op(t, !1, null, null, void 0);
            break;
        default:
            t.memoizedState = null
        }
    return t.child
}
function Hf(e, t) {
    !(t.mode & 1) && e !== null && (e.alternate = null,
    t.alternate = null,
    t.flags |= 2)
}
function Wi(e, t, n) {
    if (e !== null && (t.dependencies = e.dependencies),
    Gs |= t.lanes,
    !(n & t.childLanes))
        return null;
    if (e !== null && t.child !== e.child)
        throw Error(X(153));
    if (t.child !== null) {
        for (e = t.child,
        n = Do(e, e.pendingProps),
        t.child = n,
        n.return = t; e.sibling !== null; )
            e = e.sibling,
            n = n.sibling = Do(e, e.pendingProps),
            n.return = t;
        n.sibling = null
    }
    return t.child
}
function YM(e, t, n) {
    switch (t.tag) {
    case 3:
        i8(t),
        fl();
        break;
    case 5:
        R_(t);
        break;
    case 1:
        An(t.type) && xh(t);
        break;
    case 4:
        cv(t, t.stateNode.containerInfo);
        break;
    case 10:
        var r = t.type._context
          , i = t.memoizedProps.value;
        je(Ch, r._currentValue),
        r._currentValue = i;
        break;
    case 13:
        if (r = t.memoizedState,
        r !== null)
            return r.dehydrated !== null ? (je(st, st.current & 1),
            t.flags |= 128,
            null) : n & t.child.childLanes ? o8(e, t, n) : (je(st, st.current & 1),
            e = Wi(e, t, n),
            e !== null ? e.sibling : null);
        je(st, st.current & 1);
        break;
    case 19:
        if (r = (n & t.childLanes) !== 0,
        e.flags & 128) {
            if (r)
                return s8(e, t, n);
            t.flags |= 128
        }
        if (i = t.memoizedState,
        i !== null && (i.rendering = null,
        i.tail = null,
        i.lastEffect = null),
        je(st, st.current),
        r)
            break;
        return null;
    case 22:
    case 23:
        return t.lanes = 0,
        n8(e, t, n)
    }
    return Wi(e, t, n)
}
var a8, Jm, l8, c8;
a8 = function(e, t) {
    for (var n = t.child; n !== null; ) {
        if (n.tag === 5 || n.tag === 6)
            e.appendChild(n.stateNode);
        else if (n.tag !== 4 && n.child !== null) {
            n.child.return = n,
            n = n.child;
            continue
        }
        if (n === t)
            break;
        for (; n.sibling === null; ) {
            if (n.return === null || n.return === t)
                return;
            n = n.return
        }
        n.sibling.return = n.return,
        n = n.sibling
    }
}
;
Jm = function() {}
;
l8 = function(e, t, n, r) {
    var i = e.memoizedProps;
    if (i !== r) {
        e = t.stateNode,
        Ss(ai.current);
        var o = null;
        switch (n) {
        case "input":
            i = bm(e, i),
            r = bm(e, r),
            o = [];
            break;
        case "select":
            i = dt({}, i, {
                value: void 0
            }),
            r = dt({}, r, {
                value: void 0
            }),
            o = [];
            break;
        case "textarea":
            i = Im(e, i),
            r = Im(e, r),
            o = [];
            break;
        default:
            typeof i.onClick != "function" && typeof r.onClick == "function" && (e.onclick = bh)
        }
        Cm(n, r);
        var s;
        n = null;
        for (c in i)
            if (!r.hasOwnProperty(c) && i.hasOwnProperty(c) && i[c] != null)
                if (c === "style") {
                    var a = i[c];
                    for (s in a)
                        a.hasOwnProperty(s) && (n || (n = {}),
                        n[s] = "")
                } else
                    c !== "dangerouslySetInnerHTML" && c !== "children" && c !== "suppressContentEditableWarning" && c !== "suppressHydrationWarning" && c !== "autoFocus" && (pu.hasOwnProperty(c) ? o || (o = []) : (o = o || []).push(c, null));
        for (c in r) {
            var l = r[c];
            if (a = i != null ? i[c] : void 0,
            r.hasOwnProperty(c) && l !== a && (l != null || a != null))
                if (c === "style")
                    if (a) {
                        for (s in a)
                            !a.hasOwnProperty(s) || l && l.hasOwnProperty(s) || (n || (n = {}),
                            n[s] = "");
                        for (s in l)
                            l.hasOwnProperty(s) && a[s] !== l[s] && (n || (n = {}),
                            n[s] = l[s])
                    } else
                        n || (o || (o = []),
                        o.push(c, n)),
                        n = l;
                else
                    c === "dangerouslySetInnerHTML" ? (l = l ? l.__html : void 0,
                    a = a ? a.__html : void 0,
                    l != null && a !== l && (o = o || []).push(c, l)) : c === "children" ? typeof l != "string" && typeof l != "number" || (o = o || []).push(c, "" + l) : c !== "suppressContentEditableWarning" && c !== "suppressHydrationWarning" && (pu.hasOwnProperty(c) ? (l != null && c === "onScroll" && Ye("scroll", e),
                    o || a === l || (o = [])) : (o = o || []).push(c, l))
        }
        n && (o = o || []).push("style", n);
        var c = o;
        (t.updateQueue = c) && (t.flags |= 4)
    }
}
;
c8 = function(e, t, n, r) {
    n !== r && (t.flags |= 4)
}
;
function ic(e, t) {
    if (!et)
        switch (e.tailMode) {
        case "hidden":
            t = e.tail;
            for (var n = null; t !== null; )
                t.alternate !== null && (n = t),
                t = t.sibling;
            n === null ? e.tail = null : n.sibling = null;
            break;
        case "collapsed":
            n = e.tail;
            for (var r = null; n !== null; )
                n.alternate !== null && (r = n),
                n = n.sibling;
            r === null ? t || e.tail === null ? e.tail = null : e.tail.sibling = null : r.sibling = null
        }
}
function Qt(e) {
    var t = e.alternate !== null && e.alternate.child === e.child
      , n = 0
      , r = 0;
    if (t)
        for (var i = e.child; i !== null; )
            n |= i.lanes | i.childLanes,
            r |= i.subtreeFlags & 14680064,
            r |= i.flags & 14680064,
            i.return = e,
            i = i.sibling;
    else
        for (i = e.child; i !== null; )
            n |= i.lanes | i.childLanes,
            r |= i.subtreeFlags,
            r |= i.flags,
            i.return = e,
            i = i.sibling;
    return e.subtreeFlags |= r,
    e.childLanes = n,
    t
}
function ZM(e, t, n) {
    var r = t.pendingProps;
    switch (nv(t),
    t.tag) {
    case 2:
    case 16:
    case 15:
    case 0:
    case 11:
    case 7:
    case 8:
    case 12:
    case 9:
    case 14:
        return Qt(t),
        null;
    case 1:
        return An(t.type) && _h(),
        Qt(t),
        null;
    case 3:
        return r = t.stateNode,
        pl(),
        qe(Mn),
        qe(ln),
        dv(),
        r.pendingContext && (r.context = r.pendingContext,
        r.pendingContext = null),
        (e === null || e.child === null) && (Xd(t) ? t.flags |= 4 : e === null || e.memoizedState.isDehydrated && !(t.flags & 256) || (t.flags |= 1024,
        Ir !== null && (ag(Ir),
        Ir = null))),
        Jm(e, t),
        Qt(t),
        null;
    case 5:
        uv(t);
        var i = Ss(Cu.current);
        if (n = t.type,
        e !== null && t.stateNode != null)
            l8(e, t, n, r, i),
            e.ref !== t.ref && (t.flags |= 512,
            t.flags |= 2097152);
        else {
            if (!r) {
                if (t.stateNode === null)
                    throw Error(X(166));
                return Qt(t),
                null
            }
            if (e = Ss(ai.current),
            Xd(t)) {
                r = t.stateNode,
                n = t.type;
                var o = t.memoizedProps;
                switch (r[ti] = t,
                r[Iu] = o,
                e = (t.mode & 1) !== 0,
                n) {
                case "dialog":
                    Ye("cancel", r),
                    Ye("close", r);
                    break;
                case "iframe":
                case "object":
                case "embed":
                    Ye("load", r);
                    break;
                case "video":
                case "audio":
                    for (i = 0; i < Ac.length; i++)
                        Ye(Ac[i], r);
                    break;
                case "source":
                    Ye("error", r);
                    break;
                case "img":
                case "image":
                case "link":
                    Ye("error", r),
                    Ye("load", r);
                    break;
                case "details":
                    Ye("toggle", r);
                    break;
                case "input":
                    K3(r, o),
                    Ye("invalid", r);
                    break;
                case "select":
                    r._wrapperState = {
                        wasMultiple: !!o.multiple
                    },
                    Ye("invalid", r);
                    break;
                case "textarea":
                    q3(r, o),
                    Ye("invalid", r)
                }
                Cm(n, o),
                i = null;
                for (var s in o)
                    if (o.hasOwnProperty(s)) {
                        var a = o[s];
                        s === "children" ? typeof a == "string" ? r.textContent !== a && (o.suppressHydrationWarning !== !0 && Kd(r.textContent, a, e),
                        i = ["children", a]) : typeof a == "number" && r.textContent !== "" + a && (o.suppressHydrationWarning !== !0 && Kd(r.textContent, a, e),
                        i = ["children", "" + a]) : pu.hasOwnProperty(s) && a != null && s === "onScroll" && Ye("scroll", r)
                    }
                switch (n) {
                case "input":
                    Hd(r),
                    X3(r, o, !0);
                    break;
                case "textarea":
                    Hd(r),
                    Q3(r);
                    break;
                case "select":
                case "option":
                    break;
                default:
                    typeof o.onClick == "function" && (r.onclick = bh)
                }
                r = i,
                t.updateQueue = r,
                r !== null && (t.flags |= 4)
            } else {
                s = i.nodeType === 9 ? i : i.ownerDocument,
                e === "http://www.w3.org/1999/xhtml" && (e = N5(n)),
                e === "http://www.w3.org/1999/xhtml" ? n === "script" ? (e = s.createElement("div"),
                e.innerHTML = "<script><\/script>",
                e = e.removeChild(e.firstChild)) : typeof r.is == "string" ? e = s.createElement(n, {
                    is: r.is
                }) : (e = s.createElement(n),
                n === "select" && (s = e,
                r.multiple ? s.multiple = !0 : r.size && (s.size = r.size))) : e = s.createElementNS(e, n),
                e[ti] = t,
                e[Iu] = r,
                a8(e, t, !1, !1),
                t.stateNode = e;
                e: {
                    switch (s = km(n, r),
                    n) {
                    case "dialog":
                        Ye("cancel", e),
                        Ye("close", e),
                        i = r;
                        break;
                    case "iframe":
                    case "object":
                    case "embed":
                        Ye("load", e),
                        i = r;
                        break;
                    case "video":
                    case "audio":
                        for (i = 0; i < Ac.length; i++)
                            Ye(Ac[i], e);
                        i = r;
                        break;
                    case "source":
                        Ye("error", e),
                        i = r;
                        break;
                    case "img":
                    case "image":
                    case "link":
                        Ye("error", e),
                        Ye("load", e),
                        i = r;
                        break;
                    case "details":
                        Ye("toggle", e),
                        i = r;
                        break;
                    case "input":
                        K3(e, r),
                        i = bm(e, r),
                        Ye("invalid", e);
                        break;
                    case "option":
                        i = r;
                        break;
                    case "select":
                        e._wrapperState = {
                            wasMultiple: !!r.multiple
                        },
                        i = dt({}, r, {
                            value: void 0
                        }),
                        Ye("invalid", e);
                        break;
                    case "textarea":
                        q3(e, r),
                        i = Im(e, r),
                        Ye("invalid", e);
                        break;
                    default:
                        i = r
                    }
                    Cm(n, i),
                    a = i;
                    for (o in a)
                        if (a.hasOwnProperty(o)) {
                            var l = a[o];
                            o === "style" ? B5(e, l) : o === "dangerouslySetInnerHTML" ? (l = l ? l.__html : void 0,
                            l != null && F5(e, l)) : o === "children" ? typeof l == "string" ? (n !== "textarea" || l !== "") && mu(e, l) : typeof l == "number" && mu(e, "" + l) : o !== "suppressContentEditableWarning" && o !== "suppressHydrationWarning" && o !== "autoFocus" && (pu.hasOwnProperty(o) ? l != null && o === "onScroll" && Ye("scroll", e) : l != null && H2(e, o, l, s))
                        }
                    switch (n) {
                    case "input":
                        Hd(e),
                        X3(e, r, !1);
                        break;
                    case "textarea":
                        Hd(e),
                        Q3(e);
                        break;
                    case "option":
                        r.value != null && e.setAttribute("value", "" + Uo(r.value));
                        break;
                    case "select":
                        e.multiple = !!r.multiple,
                        o = r.value,
                        o != null ? Ka(e, !!r.multiple, o, !1) : r.defaultValue != null && Ka(e, !!r.multiple, r.defaultValue, !0);
                        break;
                    default:
                        typeof i.onClick == "function" && (e.onclick = bh)
                    }
                    switch (n) {
                    case "button":
                    case "input":
                    case "select":
                    case "textarea":
                        r = !!r.autoFocus;
                        break e;
                    case "img":
                        r = !0;
                        break e;
                    default:
                        r = !1
                    }
                }
                r && (t.flags |= 4)
            }
            t.ref !== null && (t.flags |= 512,
            t.flags |= 2097152)
        }
        return Qt(t),
        null;
    case 6:
        if (e && t.stateNode != null)
            c8(e, t, e.memoizedProps, r);
        else {
            if (typeof r != "string" && t.stateNode === null)
                throw Error(X(166));
            if (n = Ss(Cu.current),
            Ss(ai.current),
            Xd(t)) {
                if (r = t.stateNode,
                n = t.memoizedProps,
                r[ti] = t,
                (o = r.nodeValue !== n) && (e = Un,
                e !== null))
                    switch (e.tag) {
                    case 3:
                        Kd(r.nodeValue, n, (e.mode & 1) !== 0);
                        break;
                    case 5:
                        e.memoizedProps.suppressHydrationWarning !== !0 && Kd(r.nodeValue, n, (e.mode & 1) !== 0)
                    }
                o && (t.flags |= 4)
            } else
                r = (n.nodeType === 9 ? n : n.ownerDocument).createTextNode(r),
                r[ti] = t,
                t.stateNode = r
        }
        return Qt(t),
        null;
    case 13:
        if (qe(st),
        r = t.memoizedState,
        e === null || e.memoizedState !== null && e.memoizedState.dehydrated !== null) {
            if (et && $n !== null && t.mode & 1 && !(t.flags & 128))
                C_(),
                fl(),
                t.flags |= 98560,
                o = !1;
            else if (o = Xd(t),
            r !== null && r.dehydrated !== null) {
                if (e === null) {
                    if (!o)
                        throw Error(X(318));
                    if (o = t.memoizedState,
                    o = o !== null ? o.dehydrated : null,
                    !o)
                        throw Error(X(317));
                    o[ti] = t
                } else
                    fl(),
                    !(t.flags & 128) && (t.memoizedState = null),
                    t.flags |= 4;
                Qt(t),
                o = !1
            } else
                Ir !== null && (ag(Ir),
                Ir = null),
                o = !0;
            if (!o)
                return t.flags & 65536 ? t : null
        }
        return t.flags & 128 ? (t.lanes = n,
        t) : (r = r !== null,
        r !== (e !== null && e.memoizedState !== null) && r && (t.child.flags |= 8192,
        t.mode & 1 && (e === null || st.current & 1 ? Tt === 0 && (Tt = 3) : xv())),
        t.updateQueue !== null && (t.flags |= 4),
        Qt(t),
        null);
    case 4:
        return pl(),
        Jm(e, t),
        e === null && _u(t.stateNode.containerInfo),
        Qt(t),
        null;
    case 10:
        return sv(t.type._context),
        Qt(t),
        null;
    case 17:
        return An(t.type) && _h(),
        Qt(t),
        null;
    case 19:
        if (qe(st),
        o = t.memoizedState,
        o === null)
            return Qt(t),
            null;
        if (r = (t.flags & 128) !== 0,
        s = o.rendering,
        s === null)
            if (r)
                ic(o, !1);
            else {
                if (Tt !== 0 || e !== null && e.flags & 128)
                    for (e = t.child; e !== null; ) {
                        if (s = Mh(e),
                        s !== null) {
                            for (t.flags |= 128,
                            ic(o, !1),
                            r = s.updateQueue,
                            r !== null && (t.updateQueue = r,
                            t.flags |= 4),
                            t.subtreeFlags = 0,
                            r = n,
                            n = t.child; n !== null; )
                                o = n,
                                e = r,
                                o.flags &= 14680066,
                                s = o.alternate,
                                s === null ? (o.childLanes = 0,
                                o.lanes = e,
                                o.child = null,
                                o.subtreeFlags = 0,
                                o.memoizedProps = null,
                                o.memoizedState = null,
                                o.updateQueue = null,
                                o.dependencies = null,
                                o.stateNode = null) : (o.childLanes = s.childLanes,
                                o.lanes = s.lanes,
                                o.child = s.child,
                                o.subtreeFlags = 0,
                                o.deletions = null,
                                o.memoizedProps = s.memoizedProps,
                                o.memoizedState = s.memoizedState,
                                o.updateQueue = s.updateQueue,
                                o.type = s.type,
                                e = s.dependencies,
                                o.dependencies = e === null ? null : {
                                    lanes: e.lanes,
                                    firstContext: e.firstContext
                                }),
                                n = n.sibling;
                            return je(st, st.current & 1 | 2),
                            t.child
                        }
                        e = e.sibling
                    }
                o.tail !== null && vt() > gl && (t.flags |= 128,
                r = !0,
                ic(o, !1),
                t.lanes = 4194304)
            }
        else {
            if (!r)
                if (e = Mh(s),
                e !== null) {
                    if (t.flags |= 128,
                    r = !0,
                    n = e.updateQueue,
                    n !== null && (t.updateQueue = n,
                    t.flags |= 4),
                    ic(o, !0),
                    o.tail === null && o.tailMode === "hidden" && !s.alternate && !et)
                        return Qt(t),
                        null
                } else
                    2 * vt() - o.renderingStartTime > gl && n !== 1073741824 && (t.flags |= 128,
                    r = !0,
                    ic(o, !1),
                    t.lanes = 4194304);
            o.isBackwards ? (s.sibling = t.child,
            t.child = s) : (n = o.last,
            n !== null ? n.sibling = s : t.child = s,
            o.last = s)
        }
        return o.tail !== null ? (t = o.tail,
        o.rendering = t,
        o.tail = t.sibling,
        o.renderingStartTime = vt(),
        t.sibling = null,
        n = st.current,
        je(st, r ? n & 1 | 2 : n & 1),
        t) : (Qt(t),
        null);
    case 22:
    case 23:
        return _v(),
        r = t.memoizedState !== null,
        e !== null && e.memoizedState !== null !== r && (t.flags |= 8192),
        r && t.mode & 1 ? Fn & 1073741824 && (Qt(t),
        t.subtreeFlags & 6 && (t.flags |= 8192)) : Qt(t),
        null;
    case 24:
        return null;
    case 25:
        return null
    }
    throw Error(X(156, t.tag))
}
function KM(e, t) {
    switch (nv(t),
    t.tag) {
    case 1:
        return An(t.type) && _h(),
        e = t.flags,
        e & 65536 ? (t.flags = e & -65537 | 128,
        t) : null;
    case 3:
        return pl(),
        qe(Mn),
        qe(ln),
        dv(),
        e = t.flags,
        e & 65536 && !(e & 128) ? (t.flags = e & -65537 | 128,
        t) : null;
    case 5:
        return uv(t),
        null;
    case 13:
        if (qe(st),
        e = t.memoizedState,
        e !== null && e.dehydrated !== null) {
            if (t.alternate === null)
                throw Error(X(340));
            fl()
        }
        return e = t.flags,
        e & 65536 ? (t.flags = e & -65537 | 128,
        t) : null;
    case 19:
        return qe(st),
        null;
    case 4:
        return pl(),
        null;
    case 10:
        return sv(t.type._context),
        null;
    case 22:
    case 23:
        return _v(),
        null;
    case 24:
        return null;
    default:
        return null
    }
}
var Jd = !1
  , rn = !1
  , XM = typeof WeakSet == "function" ? WeakSet : Set
  , se = null;
function za(e, t) {
    var n = e.ref;
    if (n !== null)
        if (typeof n == "function")
            try {
                n(null)
            } catch (r) {
                pt(e, t, r)
            }
        else
            n.current = null
}
function eg(e, t, n) {
    try {
        n()
    } catch (r) {
        pt(e, t, r)
    }
}
var HE = !1;
function qM(e, t) {
    if (Fm = yh,
    e = h_(),
    ev(e)) {
        if ("selectionStart"in e)
            var n = {
                start: e.selectionStart,
                end: e.selectionEnd
            };
        else
            e: {
                n = (n = e.ownerDocument) && n.defaultView || window;
                var r = n.getSelection && n.getSelection();
                if (r && r.rangeCount !== 0) {
                    n = r.anchorNode;
                    var i = r.anchorOffset
                      , o = r.focusNode;
                    r = r.focusOffset;
                    try {
                        n.nodeType,
                        o.nodeType
                    } catch {
                        n = null;
                        break e
                    }
                    var s = 0
                      , a = -1
                      , l = -1
                      , c = 0
                      , u = 0
                      , d = e
                      , f = null;
                    t: for (; ; ) {
                        for (var h; d !== n || i !== 0 && d.nodeType !== 3 || (a = s + i),
                        d !== o || r !== 0 && d.nodeType !== 3 || (l = s + r),
                        d.nodeType === 3 && (s += d.nodeValue.length),
                        (h = d.firstChild) !== null; )
                            f = d,
                            d = h;
                        for (; ; ) {
                            if (d === e)
                                break t;
                            if (f === n && ++c === i && (a = s),
                            f === o && ++u === r && (l = s),
                            (h = d.nextSibling) !== null)
                                break;
                            d = f,
                            f = d.parentNode
                        }
                        d = h
                    }
                    n = a === -1 || l === -1 ? null : {
                        start: a,
                        end: l
                    }
                } else
                    n = null
            }
        n = n || {
            start: 0,
            end: 0
        }
    } else
        n = null;
    for ($m = {
        focusedElem: e,
        selectionRange: n
    },
    yh = !1,
    se = t; se !== null; )
        if (t = se,
        e = t.child,
        (t.subtreeFlags & 1028) !== 0 && e !== null)
            e.return = t,
            se = e;
        else
            for (; se !== null; ) {
                t = se;
                try {
                    var m = t.alternate;
                    if (t.flags & 1024)
                        switch (t.tag) {
                        case 0:
                        case 11:
                        case 15:
                            break;
                        case 1:
                            if (m !== null) {
                                var g = m.memoizedProps
                                  , E = m.memoizedState
                                  , v = t.stateNode
                                  , y = v.getSnapshotBeforeUpdate(t.elementType === t.type ? g : wr(t.type, g), E);
                                v.__reactInternalSnapshotBeforeUpdate = y
                            }
                            break;
                        case 3:
                            var w = t.stateNode.containerInfo;
                            w.nodeType === 1 ? w.textContent = "" : w.nodeType === 9 && w.documentElement && w.removeChild(w.documentElement);
                            break;
                        case 5:
                        case 6:
                        case 4:
                        case 17:
                            break;
                        default:
                            throw Error(X(163))
                        }
                } catch (b) {
                    pt(t, t.return, b)
                }
                if (e = t.sibling,
                e !== null) {
                    e.return = t.return,
                    se = e;
                    break
                }
                se = t.return
            }
    return m = HE,
    HE = !1,
    m
}
function jc(e, t, n) {
    var r = t.updateQueue;
    if (r = r !== null ? r.lastEffect : null,
    r !== null) {
        var i = r = r.next;
        do {
            if ((i.tag & e) === e) {
                var o = i.destroy;
                i.destroy = void 0,
                o !== void 0 && eg(t, n, o)
            }
            i = i.next
        } while (i !== r)
    }
}
function N1(e, t) {
    if (t = t.updateQueue,
    t = t !== null ? t.lastEffect : null,
    t !== null) {
        var n = t = t.next;
        do {
            if ((n.tag & e) === e) {
                var r = n.create;
                n.destroy = r()
            }
            n = n.next
        } while (n !== t)
    }
}
function tg(e) {
    var t = e.ref;
    if (t !== null) {
        var n = e.stateNode;
        switch (e.tag) {
        case 5:
            e = n;
            break;
        default:
            e = n
        }
        typeof t == "function" ? t(e) : t.current = e
    }
}
function u8(e) {
    var t = e.alternate;
    t !== null && (e.alternate = null,
    u8(t)),
    e.child = null,
    e.deletions = null,
    e.sibling = null,
    e.tag === 5 && (t = e.stateNode,
    t !== null && (delete t[ti],
    delete t[Iu],
    delete t[Hm],
    delete t[RM],
    delete t[OM])),
    e.stateNode = null,
    e.return = null,
    e.dependencies = null,
    e.memoizedProps = null,
    e.memoizedState = null,
    e.pendingProps = null,
    e.stateNode = null,
    e.updateQueue = null
}
function d8(e) {
    return e.tag === 5 || e.tag === 3 || e.tag === 4
}
function UE(e) {
    e: for (; ; ) {
        for (; e.sibling === null; ) {
            if (e.return === null || d8(e.return))
                return null;
            e = e.return
        }
        for (e.sibling.return = e.return,
        e = e.sibling; e.tag !== 5 && e.tag !== 6 && e.tag !== 18; ) {
            if (e.flags & 2 || e.child === null || e.tag === 4)
                continue e;
            e.child.return = e,
            e = e.child
        }
        if (!(e.flags & 2))
            return e.stateNode
    }
}
function ng(e, t, n) {
    var r = e.tag;
    if (r === 5 || r === 6)
        e = e.stateNode,
        t ? n.nodeType === 8 ? n.parentNode.insertBefore(e, t) : n.insertBefore(e, t) : (n.nodeType === 8 ? (t = n.parentNode,
        t.insertBefore(e, n)) : (t = n,
        t.appendChild(e)),
        n = n._reactRootContainer,
        n != null || t.onclick !== null || (t.onclick = bh));
    else if (r !== 4 && (e = e.child,
    e !== null))
        for (ng(e, t, n),
        e = e.sibling; e !== null; )
            ng(e, t, n),
            e = e.sibling
}
function rg(e, t, n) {
    var r = e.tag;
    if (r === 5 || r === 6)
        e = e.stateNode,
        t ? n.insertBefore(e, t) : n.appendChild(e);
    else if (r !== 4 && (e = e.child,
    e !== null))
        for (rg(e, t, n),
        e = e.sibling; e !== null; )
            rg(e, t, n),
            e = e.sibling
}
var Vt = null
  , _r = !1;
function to(e, t, n) {
    for (n = n.child; n !== null; )
        f8(e, t, n),
        n = n.sibling
}
function f8(e, t, n) {
    if (si && typeof si.onCommitFiberUnmount == "function")
        try {
            si.onCommitFiberUnmount(T1, n)
        } catch {}
    switch (n.tag) {
    case 5:
        rn || za(n, t);
    case 6:
        var r = Vt
          , i = _r;
        Vt = null,
        to(e, t, n),
        Vt = r,
        _r = i,
        Vt !== null && (_r ? (e = Vt,
        n = n.stateNode,
        e.nodeType === 8 ? e.parentNode.removeChild(n) : e.removeChild(n)) : Vt.removeChild(n.stateNode));
        break;
    case 18:
        Vt !== null && (_r ? (e = Vt,
        n = n.stateNode,
        e.nodeType === 8 ? Q0(e.parentNode, n) : e.nodeType === 1 && Q0(e, n),
        Eu(e)) : Q0(Vt, n.stateNode));
        break;
    case 4:
        r = Vt,
        i = _r,
        Vt = n.stateNode.containerInfo,
        _r = !0,
        to(e, t, n),
        Vt = r,
        _r = i;
        break;
    case 0:
    case 11:
    case 14:
    case 15:
        if (!rn && (r = n.updateQueue,
        r !== null && (r = r.lastEffect,
        r !== null))) {
            i = r = r.next;
            do {
                var o = i
                  , s = o.destroy;
                o = o.tag,
                s !== void 0 && (o & 2 || o & 4) && eg(n, t, s),
                i = i.next
            } while (i !== r)
        }
        to(e, t, n);
        break;
    case 1:
        if (!rn && (za(n, t),
        r = n.stateNode,
        typeof r.componentWillUnmount == "function"))
            try {
                r.props = n.memoizedProps,
                r.state = n.memoizedState,
                r.componentWillUnmount()
            } catch (a) {
                pt(n, t, a)
            }
        to(e, t, n);
        break;
    case 21:
        to(e, t, n);
        break;
    case 22:
        n.mode & 1 ? (rn = (r = rn) || n.memoizedState !== null,
        to(e, t, n),
        rn = r) : to(e, t, n);
        break;
    default:
        to(e, t, n)
    }
}
function VE(e) {
    var t = e.updateQueue;
    if (t !== null) {
        e.updateQueue = null;
        var n = e.stateNode;
        n === null && (n = e.stateNode = new XM),
        t.forEach(function(r) {
            var i = sA.bind(null, e, r);
            n.has(r) || (n.add(r),
            r.then(i, i))
        })
    }
}
function mr(e, t) {
    var n = t.deletions;
    if (n !== null)
        for (var r = 0; r < n.length; r++) {
            var i = n[r];
            try {
                var o = e
                  , s = t
                  , a = s;
                e: for (; a !== null; ) {
                    switch (a.tag) {
                    case 5:
                        Vt = a.stateNode,
                        _r = !1;
                        break e;
                    case 3:
                        Vt = a.stateNode.containerInfo,
                        _r = !0;
                        break e;
                    case 4:
                        Vt = a.stateNode.containerInfo,
                        _r = !0;
                        break e
                    }
                    a = a.return
                }
                if (Vt === null)
                    throw Error(X(160));
                f8(o, s, i),
                Vt = null,
                _r = !1;
                var l = i.alternate;
                l !== null && (l.return = null),
                i.return = null
            } catch (c) {
                pt(i, t, c)
            }
        }
    if (t.subtreeFlags & 12854)
        for (t = t.child; t !== null; )
            h8(t, e),
            t = t.sibling
}
function h8(e, t) {
    var n = e.alternate
      , r = e.flags;
    switch (e.tag) {
    case 0:
    case 11:
    case 14:
    case 15:
        if (mr(t, e),
        Gr(e),
        r & 4) {
            try {
                jc(3, e, e.return),
                N1(3, e)
            } catch (g) {
                pt(e, e.return, g)
            }
            try {
                jc(5, e, e.return)
            } catch (g) {
                pt(e, e.return, g)
            }
        }
        break;
    case 1:
        mr(t, e),
        Gr(e),
        r & 512 && n !== null && za(n, n.return);
        break;
    case 5:
        if (mr(t, e),
        Gr(e),
        r & 512 && n !== null && za(n, n.return),
        e.flags & 32) {
            var i = e.stateNode;
            try {
                mu(i, "")
            } catch (g) {
                pt(e, e.return, g)
            }
        }
        if (r & 4 && (i = e.stateNode,
        i != null)) {
            var o = e.memoizedProps
              , s = n !== null ? n.memoizedProps : o
              , a = e.type
              , l = e.updateQueue;
            if (e.updateQueue = null,
            l !== null)
                try {
                    a === "input" && o.type === "radio" && o.name != null && O5(i, o),
                    km(a, s);
                    var c = km(a, o);
                    for (s = 0; s < l.length; s += 2) {
                        var u = l[s]
                          , d = l[s + 1];
                        u === "style" ? B5(i, d) : u === "dangerouslySetInnerHTML" ? F5(i, d) : u === "children" ? mu(i, d) : H2(i, u, d, c)
                    }
                    switch (a) {
                    case "input":
                        _m(i, o);
                        break;
                    case "textarea":
                        D5(i, o);
                        break;
                    case "select":
                        var f = i._wrapperState.wasMultiple;
                        i._wrapperState.wasMultiple = !!o.multiple;
                        var h = o.value;
                        h != null ? Ka(i, !!o.multiple, h, !1) : f !== !!o.multiple && (o.defaultValue != null ? Ka(i, !!o.multiple, o.defaultValue, !0) : Ka(i, !!o.multiple, o.multiple ? [] : "", !1))
                    }
                    i[Iu] = o
                } catch (g) {
                    pt(e, e.return, g)
                }
        }
        break;
    case 6:
        if (mr(t, e),
        Gr(e),
        r & 4) {
            if (e.stateNode === null)
                throw Error(X(162));
            i = e.stateNode,
            o = e.memoizedProps;
            try {
                i.nodeValue = o
            } catch (g) {
                pt(e, e.return, g)
            }
        }
        break;
    case 3:
        if (mr(t, e),
        Gr(e),
        r & 4 && n !== null && n.memoizedState.isDehydrated)
            try {
                Eu(t.containerInfo)
            } catch (g) {
                pt(e, e.return, g)
            }
        break;
    case 4:
        mr(t, e),
        Gr(e);
        break;
    case 13:
        mr(t, e),
        Gr(e),
        i = e.child,
        i.flags & 8192 && (o = i.memoizedState !== null,
        i.stateNode.isHidden = o,
        !o || i.alternate !== null && i.alternate.memoizedState !== null || (wv = vt())),
        r & 4 && VE(e);
        break;
    case 22:
        if (u = n !== null && n.memoizedState !== null,
        e.mode & 1 ? (rn = (c = rn) || u,
        mr(t, e),
        rn = c) : mr(t, e),
        Gr(e),
        r & 8192) {
            if (c = e.memoizedState !== null,
            (e.stateNode.isHidden = c) && !u && e.mode & 1)
                for (se = e,
                u = e.child; u !== null; ) {
                    for (d = se = u; se !== null; ) {
                        switch (f = se,
                        h = f.child,
                        f.tag) {
                        case 0:
                        case 11:
                        case 14:
                        case 15:
                            jc(4, f, f.return);
                            break;
                        case 1:
                            za(f, f.return);
                            var m = f.stateNode;
                            if (typeof m.componentWillUnmount == "function") {
                                r = f,
                                n = f.return;
                                try {
                                    t = r,
                                    m.props = t.memoizedProps,
                                    m.state = t.memoizedState,
                                    m.componentWillUnmount()
                                } catch (g) {
                                    pt(r, n, g)
                                }
                            }
                            break;
                        case 5:
                            za(f, f.return);
                            break;
                        case 22:
                            if (f.memoizedState !== null) {
                                GE(d);
                                continue
                            }
                        }
                        h !== null ? (h.return = f,
                        se = h) : GE(d)
                    }
                    u = u.sibling
                }
            e: for (u = null,
            d = e; ; ) {
                if (d.tag === 5) {
                    if (u === null) {
                        u = d;
                        try {
                            i = d.stateNode,
                            c ? (o = i.style,
                            typeof o.setProperty == "function" ? o.setProperty("display", "none", "important") : o.display = "none") : (a = d.stateNode,
                            l = d.memoizedProps.style,
                            s = l != null && l.hasOwnProperty("display") ? l.display : null,
                            a.style.display = $5("display", s))
                        } catch (g) {
                            pt(e, e.return, g)
                        }
                    }
                } else if (d.tag === 6) {
                    if (u === null)
                        try {
                            d.stateNode.nodeValue = c ? "" : d.memoizedProps
                        } catch (g) {
                            pt(e, e.return, g)
                        }
                } else if ((d.tag !== 22 && d.tag !== 23 || d.memoizedState === null || d === e) && d.child !== null) {
                    d.child.return = d,
                    d = d.child;
                    continue
                }
                if (d === e)
                    break e;
                for (; d.sibling === null; ) {
                    if (d.return === null || d.return === e)
                        break e;
                    u === d && (u = null),
                    d = d.return
                }
                u === d && (u = null),
                d.sibling.return = d.return,
                d = d.sibling
            }
        }
        break;
    case 19:
        mr(t, e),
        Gr(e),
        r & 4 && VE(e);
        break;
    case 21:
        break;
    default:
        mr(t, e),
        Gr(e)
    }
}
function Gr(e) {
    var t = e.flags;
    if (t & 2) {
        try {
            e: {
                for (var n = e.return; n !== null; ) {
                    if (d8(n)) {
                        var r = n;
                        break e
                    }
                    n = n.return
                }
                throw Error(X(160))
            }
            switch (r.tag) {
            case 5:
                var i = r.stateNode;
                r.flags & 32 && (mu(i, ""),
                r.flags &= -33);
                var o = UE(e);
                rg(e, o, i);
                break;
            case 3:
            case 4:
                var s = r.stateNode.containerInfo
                  , a = UE(e);
                ng(e, a, s);
                break;
            default:
                throw Error(X(161))
            }
        } catch (l) {
            pt(e, e.return, l)
        }
        e.flags &= -3
    }
    t & 4096 && (e.flags &= -4097)
}
function QM(e, t, n) {
    se = e,
    p8(e)
}
function p8(e, t, n) {
    for (var r = (e.mode & 1) !== 0; se !== null; ) {
        var i = se
          , o = i.child;
        if (i.tag === 22 && r) {
            var s = i.memoizedState !== null || Jd;
            if (!s) {
                var a = i.alternate
                  , l = a !== null && a.memoizedState !== null || rn;
                a = Jd;
                var c = rn;
                if (Jd = s,
                (rn = l) && !c)
                    for (se = i; se !== null; )
                        s = se,
                        l = s.child,
                        s.tag === 22 && s.memoizedState !== null ? jE(i) : l !== null ? (l.return = s,
                        se = l) : jE(i);
                for (; o !== null; )
                    se = o,
                    p8(o),
                    o = o.sibling;
                se = i,
                Jd = a,
                rn = c
            }
            WE(e)
        } else
            i.subtreeFlags & 8772 && o !== null ? (o.return = i,
            se = o) : WE(e)
    }
}
function WE(e) {
    for (; se !== null; ) {
        var t = se;
        if (t.flags & 8772) {
            var n = t.alternate;
            try {
                if (t.flags & 8772)
                    switch (t.tag) {
                    case 0:
                    case 11:
                    case 15:
                        rn || N1(5, t);
                        break;
                    case 1:
                        var r = t.stateNode;
                        if (t.flags & 4 && !rn)
                            if (n === null)
                                r.componentDidMount();
                            else {
                                var i = t.elementType === t.type ? n.memoizedProps : wr(t.type, n.memoizedProps);
                                r.componentDidUpdate(i, n.memoizedState, r.__reactInternalSnapshotBeforeUpdate)
                            }
                        var o = t.updateQueue;
                        o !== null && kE(t, o, r);
                        break;
                    case 3:
                        var s = t.updateQueue;
                        if (s !== null) {
                            if (n = null,
                            t.child !== null)
                                switch (t.child.tag) {
                                case 5:
                                    n = t.child.stateNode;
                                    break;
                                case 1:
                                    n = t.child.stateNode
                                }
                            kE(t, s, n)
                        }
                        break;
                    case 5:
                        var a = t.stateNode;
                        if (n === null && t.flags & 4) {
                            n = a;
                            var l = t.memoizedProps;
                            switch (t.type) {
                            case "button":
                            case "input":
                            case "select":
                            case "textarea":
                                l.autoFocus && n.focus();
                                break;
                            case "img":
                                l.src && (n.src = l.src)
                            }
                        }
                        break;
                    case 6:
                        break;
                    case 4:
                        break;
                    case 12:
                        break;
                    case 13:
                        if (t.memoizedState === null) {
                            var c = t.alternate;
                            if (c !== null) {
                                var u = c.memoizedState;
                                if (u !== null) {
                                    var d = u.dehydrated;
                                    d !== null && Eu(d)
                                }
                            }
                        }
                        break;
                    case 19:
                    case 17:
                    case 21:
                    case 22:
                    case 23:
                    case 25:
                        break;
                    default:
                        throw Error(X(163))
                    }
                rn || t.flags & 512 && tg(t)
            } catch (f) {
                pt(t, t.return, f)
            }
        }
        if (t === e) {
            se = null;
            break
        }
        if (n = t.sibling,
        n !== null) {
            n.return = t.return,
            se = n;
            break
        }
        se = t.return
    }
}
function GE(e) {
    for (; se !== null; ) {
        var t = se;
        if (t === e) {
            se = null;
            break
        }
        var n = t.sibling;
        if (n !== null) {
            n.return = t.return,
            se = n;
            break
        }
        se = t.return
    }
}
function jE(e) {
    for (; se !== null; ) {
        var t = se;
        try {
            switch (t.tag) {
            case 0:
            case 11:
            case 15:
                var n = t.return;
                try {
                    N1(4, t)
                } catch (l) {
                    pt(t, n, l)
                }
                break;
            case 1:
                var r = t.stateNode;
                if (typeof r.componentDidMount == "function") {
                    var i = t.return;
                    try {
                        r.componentDidMount()
                    } catch (l) {
                        pt(t, i, l)
                    }
                }
                var o = t.return;
                try {
                    tg(t)
                } catch (l) {
                    pt(t, o, l)
                }
                break;
            case 5:
                var s = t.return;
                try {
                    tg(t)
                } catch (l) {
                    pt(t, s, l)
                }
            }
        } catch (l) {
            pt(t, t.return, l)
        }
        if (t === e) {
            se = null;
            break
        }
        var a = t.sibling;
        if (a !== null) {
            a.return = t.return,
            se = a;
            break
        }
        se = t.return
    }
}
var JM = Math.ceil
  , Ph = Zi.ReactCurrentDispatcher
  , yv = Zi.ReactCurrentOwner
  , or = Zi.ReactCurrentBatchConfig
  , Te = 0
  , Bt = null
  , bt = null
  , Yt = 0
  , Fn = 0
  , Ha = ts(0)
  , Tt = 0
  , Au = null
  , Gs = 0
  , F1 = 0
  , Ev = 0
  , Yc = null
  , Sn = null
  , wv = 0
  , gl = 1 / 0
  , Ci = null
  , Rh = !1
  , ig = null
  , Ro = null
  , ef = !1
  , Eo = null
  , Oh = 0
  , Zc = 0
  , og = null
  , Uf = -1
  , Vf = 0;
function wn() {
    return Te & 6 ? vt() : Uf !== -1 ? Uf : Uf = vt()
}
function Oo(e) {
    return e.mode & 1 ? Te & 2 && Yt !== 0 ? Yt & -Yt : NM.transition !== null ? (Vf === 0 && (Vf = q5()),
    Vf) : (e = Be,
    e !== 0 || (e = window.event,
    e = e === void 0 ? 16 : i_(e.type)),
    e) : 1
}
function Ar(e, t, n, r) {
    if (50 < Zc)
        throw Zc = 0,
        og = null,
        Error(X(185));
    fd(e, n, r),
    (!(Te & 2) || e !== Bt) && (e === Bt && (!(Te & 2) && (F1 |= n),
    Tt === 4 && ho(e, Yt)),
    Ln(e, r),
    n === 1 && Te === 0 && !(t.mode & 1) && (gl = vt() + 500,
    R1 && ns()))
}
function Ln(e, t) {
    var n = e.callbackNode;
    NT(e, t);
    var r = vh(e, e === Bt ? Yt : 0);
    if (r === 0)
        n !== null && tE(n),
        e.callbackNode = null,
        e.callbackPriority = 0;
    else if (t = r & -r,
    e.callbackPriority !== t) {
        if (n != null && tE(n),
        t === 1)
            e.tag === 0 ? DM(YE.bind(null, e)) : x_(YE.bind(null, e)),
            LM(function() {
                !(Te & 6) && ns()
            }),
            n = null;
        else {
            switch (Q5(r)) {
            case 1:
                n = j2;
                break;
            case 4:
                n = K5;
                break;
            case 16:
                n = gh;
                break;
            case 536870912:
                n = X5;
                break;
            default:
                n = gh
            }
            n = _8(n, m8.bind(null, e))
        }
        e.callbackPriority = t,
        e.callbackNode = n
    }
}
function m8(e, t) {
    if (Uf = -1,
    Vf = 0,
    Te & 6)
        throw Error(X(327));
    var n = e.callbackNode;
    if (el() && e.callbackNode !== n)
        return null;
    var r = vh(e, e === Bt ? Yt : 0);
    if (r === 0)
        return null;
    if (r & 30 || r & e.expiredLanes || t)
        t = Dh(e, r);
    else {
        t = r;
        var i = Te;
        Te |= 2;
        var o = v8();
        (Bt !== e || Yt !== t) && (Ci = null,
        gl = vt() + 500,
        $s(e, t));
        do
            try {
                nA();
                break
            } catch (a) {
                g8(e, a)
            }
        while (1);
        ov(),
        Ph.current = o,
        Te = i,
        bt !== null ? t = 0 : (Bt = null,
        Yt = 0,
        t = Tt)
    }
    if (t !== 0) {
        if (t === 2 && (i = Pm(e),
        i !== 0 && (r = i,
        t = sg(e, i))),
        t === 1)
            throw n = Au,
            $s(e, 0),
            ho(e, r),
            Ln(e, vt()),
            n;
        if (t === 6)
            ho(e, r);
        else {
            if (i = e.current.alternate,
            !(r & 30) && !eA(i) && (t = Dh(e, r),
            t === 2 && (o = Pm(e),
            o !== 0 && (r = o,
            t = sg(e, o))),
            t === 1))
                throw n = Au,
                $s(e, 0),
                ho(e, r),
                Ln(e, vt()),
                n;
            switch (e.finishedWork = i,
            e.finishedLanes = r,
            t) {
            case 0:
            case 1:
                throw Error(X(345));
            case 2:
                cs(e, Sn, Ci);
                break;
            case 3:
                if (ho(e, r),
                (r & 130023424) === r && (t = wv + 500 - vt(),
                10 < t)) {
                    if (vh(e, 0) !== 0)
                        break;
                    if (i = e.suspendedLanes,
                    (i & r) !== r) {
                        wn(),
                        e.pingedLanes |= e.suspendedLanes & i;
                        break
                    }
                    e.timeoutHandle = zm(cs.bind(null, e, Sn, Ci), t);
                    break
                }
                cs(e, Sn, Ci);
                break;
            case 4:
                if (ho(e, r),
                (r & 4194240) === r)
                    break;
                for (t = e.eventTimes,
                i = -1; 0 < r; ) {
                    var s = 31 - Mr(r);
                    o = 1 << s,
                    s = t[s],
                    s > i && (i = s),
                    r &= ~o
                }
                if (r = i,
                r = vt() - r,
                r = (120 > r ? 120 : 480 > r ? 480 : 1080 > r ? 1080 : 1920 > r ? 1920 : 3e3 > r ? 3e3 : 4320 > r ? 4320 : 1960 * JM(r / 1960)) - r,
                10 < r) {
                    e.timeoutHandle = zm(cs.bind(null, e, Sn, Ci), r);
                    break
                }
                cs(e, Sn, Ci);
                break;
            case 5:
                cs(e, Sn, Ci);
                break;
            default:
                throw Error(X(329))
            }
        }
    }
    return Ln(e, vt()),
    e.callbackNode === n ? m8.bind(null, e) : null
}
function sg(e, t) {
    var n = Yc;
    return e.current.memoizedState.isDehydrated && ($s(e, t).flags |= 256),
    e = Dh(e, t),
    e !== 2 && (t = Sn,
    Sn = n,
    t !== null && ag(t)),
    e
}
function ag(e) {
    Sn === null ? Sn = e : Sn.push.apply(Sn, e)
}
function eA(e) {
    for (var t = e; ; ) {
        if (t.flags & 16384) {
            var n = t.updateQueue;
            if (n !== null && (n = n.stores,
            n !== null))
                for (var r = 0; r < n.length; r++) {
                    var i = n[r]
                      , o = i.getSnapshot;
                    i = i.value;
                    try {
                        if (!Nr(o(), i))
                            return !1
                    } catch {
                        return !1
                    }
                }
        }
        if (n = t.child,
        t.subtreeFlags & 16384 && n !== null)
            n.return = t,
            t = n;
        else {
            if (t === e)
                break;
            for (; t.sibling === null; ) {
                if (t.return === null || t.return === e)
                    return !0;
                t = t.return
            }
            t.sibling.return = t.return,
            t = t.sibling
        }
    }
    return !0
}
function ho(e, t) {
    for (t &= ~Ev,
    t &= ~F1,
    e.suspendedLanes |= t,
    e.pingedLanes &= ~t,
    e = e.expirationTimes; 0 < t; ) {
        var n = 31 - Mr(t)
          , r = 1 << n;
        e[n] = -1,
        t &= ~r
    }
}
function YE(e) {
    if (Te & 6)
        throw Error(X(327));
    el();
    var t = vh(e, 0);
    if (!(t & 1))
        return Ln(e, vt()),
        null;
    var n = Dh(e, t);
    if (e.tag !== 0 && n === 2) {
        var r = Pm(e);
        r !== 0 && (t = r,
        n = sg(e, r))
    }
    if (n === 1)
        throw n = Au,
        $s(e, 0),
        ho(e, t),
        Ln(e, vt()),
        n;
    if (n === 6)
        throw Error(X(345));
    return e.finishedWork = e.current.alternate,
    e.finishedLanes = t,
    cs(e, Sn, Ci),
    Ln(e, vt()),
    null
}
function bv(e, t) {
    var n = Te;
    Te |= 1;
    try {
        return e(t)
    } finally {
        Te = n,
        Te === 0 && (gl = vt() + 500,
        R1 && ns())
    }
}
function js(e) {
    Eo !== null && Eo.tag === 0 && !(Te & 6) && el();
    var t = Te;
    Te |= 1;
    var n = or.transition
      , r = Be;
    try {
        if (or.transition = null,
        Be = 1,
        e)
            return e()
    } finally {
        Be = r,
        or.transition = n,
        Te = t,
        !(Te & 6) && ns()
    }
}
function _v() {
    Fn = Ha.current,
    qe(Ha)
}
function $s(e, t) {
    e.finishedWork = null,
    e.finishedLanes = 0;
    var n = e.timeoutHandle;
    if (n !== -1 && (e.timeoutHandle = -1,
    AM(n)),
    bt !== null)
        for (n = bt.return; n !== null; ) {
            var r = n;
            switch (nv(r),
            r.tag) {
            case 1:
                r = r.type.childContextTypes,
                r != null && _h();
                break;
            case 3:
                pl(),
                qe(Mn),
                qe(ln),
                dv();
                break;
            case 5:
                uv(r);
                break;
            case 4:
                pl();
                break;
            case 13:
                qe(st);
                break;
            case 19:
                qe(st);
                break;
            case 10:
                sv(r.type._context);
                break;
            case 22:
            case 23:
                _v()
            }
            n = n.return
        }
    if (Bt = e,
    bt = e = Do(e.current, null),
    Yt = Fn = t,
    Tt = 0,
    Au = null,
    Ev = F1 = Gs = 0,
    Sn = Yc = null,
    Is !== null) {
        for (t = 0; t < Is.length; t++)
            if (n = Is[t],
            r = n.interleaved,
            r !== null) {
                n.interleaved = null;
                var i = r.next
                  , o = n.pending;
                if (o !== null) {
                    var s = o.next;
                    o.next = i,
                    r.next = s
                }
                n.pending = r
            }
        Is = null
    }
    return e
}
function g8(e, t) {
    do {
        var n = bt;
        try {
            if (ov(),
            Bf.current = Lh,
            Ah) {
                for (var r = ct.memoizedState; r !== null; ) {
                    var i = r.queue;
                    i !== null && (i.pending = null),
                    r = r.next
                }
                Ah = !1
            }
            if (Ws = 0,
            Nt = St = ct = null,
            Gc = !1,
            ku = 0,
            yv.current = null,
            n === null || n.return === null) {
                Tt = 1,
                Au = t,
                bt = null;
                break
            }
            e: {
                var o = e
                  , s = n.return
                  , a = n
                  , l = t;
                if (t = Yt,
                a.flags |= 32768,
                l !== null && typeof l == "object" && typeof l.then == "function") {
                    var c = l
                      , u = a
                      , d = u.tag;
                    if (!(u.mode & 1) && (d === 0 || d === 11 || d === 15)) {
                        var f = u.alternate;
                        f ? (u.updateQueue = f.updateQueue,
                        u.memoizedState = f.memoizedState,
                        u.lanes = f.lanes) : (u.updateQueue = null,
                        u.memoizedState = null)
                    }
                    var h = OE(s);
                    if (h !== null) {
                        h.flags &= -257,
                        DE(h, s, a, o, t),
                        h.mode & 1 && RE(o, c, t),
                        t = h,
                        l = c;
                        var m = t.updateQueue;
                        if (m === null) {
                            var g = new Set;
                            g.add(l),
                            t.updateQueue = g
                        } else
                            m.add(l);
                        break e
                    } else {
                        if (!(t & 1)) {
                            RE(o, c, t),
                            xv();
                            break e
                        }
                        l = Error(X(426))
                    }
                } else if (et && a.mode & 1) {
                    var E = OE(s);
                    if (E !== null) {
                        !(E.flags & 65536) && (E.flags |= 256),
                        DE(E, s, a, o, t),
                        rv(ml(l, a));
                        break e
                    }
                }
                o = l = ml(l, a),
                Tt !== 4 && (Tt = 2),
                Yc === null ? Yc = [o] : Yc.push(o),
                o = s;
                do {
                    switch (o.tag) {
                    case 3:
                        o.flags |= 65536,
                        t &= -t,
                        o.lanes |= t;
                        var v = J_(o, l, t);
                        CE(o, v);
                        break e;
                    case 1:
                        a = l;
                        var y = o.type
                          , w = o.stateNode;
                        if (!(o.flags & 128) && (typeof y.getDerivedStateFromError == "function" || w !== null && typeof w.componentDidCatch == "function" && (Ro === null || !Ro.has(w)))) {
                            o.flags |= 65536,
                            t &= -t,
                            o.lanes |= t;
                            var b = e8(o, a, t);
                            CE(o, b);
                            break e
                        }
                    }
                    o = o.return
                } while (o !== null)
            }
            E8(n)
        } catch (I) {
            t = I,
            bt === n && n !== null && (bt = n = n.return);
            continue
        }
        break
    } while (1)
}
function v8() {
    var e = Ph.current;
    return Ph.current = Lh,
    e === null ? Lh : e
}
function xv() {
    (Tt === 0 || Tt === 3 || Tt === 2) && (Tt = 4),
    Bt === null || !(Gs & 268435455) && !(F1 & 268435455) || ho(Bt, Yt)
}
function Dh(e, t) {
    var n = Te;
    Te |= 2;
    var r = v8();
    (Bt !== e || Yt !== t) && (Ci = null,
    $s(e, t));
    do
        try {
            tA();
            break
        } catch (i) {
            g8(e, i)
        }
    while (1);
    if (ov(),
    Te = n,
    Ph.current = r,
    bt !== null)
        throw Error(X(261));
    return Bt = null,
    Yt = 0,
    Tt
}
function tA() {
    for (; bt !== null; )
        y8(bt)
}
function nA() {
    for (; bt !== null && !kT(); )
        y8(bt)
}
function y8(e) {
    var t = b8(e.alternate, e, Fn);
    e.memoizedProps = e.pendingProps,
    t === null ? E8(e) : bt = t,
    yv.current = null
}
function E8(e) {
    var t = e;
    do {
        var n = t.alternate;
        if (e = t.return,
        t.flags & 32768) {
            if (n = KM(n, t),
            n !== null) {
                n.flags &= 32767,
                bt = n;
                return
            }
            if (e !== null)
                e.flags |= 32768,
                e.subtreeFlags = 0,
                e.deletions = null;
            else {
                Tt = 6,
                bt = null;
                return
            }
        } else if (n = ZM(n, t, Fn),
        n !== null) {
            bt = n;
            return
        }
        if (t = t.sibling,
        t !== null) {
            bt = t;
            return
        }
        bt = t = e
    } while (t !== null);
    Tt === 0 && (Tt = 5)
}
function cs(e, t, n) {
    var r = Be
      , i = or.transition;
    try {
        or.transition = null,
        Be = 1,
        rA(e, t, n, r)
    } finally {
        or.transition = i,
        Be = r
    }
    return null
}
function rA(e, t, n, r) {
    do
        el();
    while (Eo !== null);
    if (Te & 6)
        throw Error(X(327));
    n = e.finishedWork;
    var i = e.finishedLanes;
    if (n === null)
        return null;
    if (e.finishedWork = null,
    e.finishedLanes = 0,
    n === e.current)
        throw Error(X(177));
    e.callbackNode = null,
    e.callbackPriority = 0;
    var o = n.lanes | n.childLanes;
    if (FT(e, o),
    e === Bt && (bt = Bt = null,
    Yt = 0),
    !(n.subtreeFlags & 2064) && !(n.flags & 2064) || ef || (ef = !0,
    _8(gh, function() {
        return el(),
        null
    })),
    o = (n.flags & 15990) !== 0,
    n.subtreeFlags & 15990 || o) {
        o = or.transition,
        or.transition = null;
        var s = Be;
        Be = 1;
        var a = Te;
        Te |= 4,
        yv.current = null,
        qM(e, n),
        h8(n, e),
        xM($m),
        yh = !!Fm,
        $m = Fm = null,
        e.current = n,
        QM(n),
        TT(),
        Te = a,
        Be = s,
        or.transition = o
    } else
        e.current = n;
    if (ef && (ef = !1,
    Eo = e,
    Oh = i),
    o = e.pendingLanes,
    o === 0 && (Ro = null),
    LT(n.stateNode),
    Ln(e, vt()),
    t !== null)
        for (r = e.onRecoverableError,
        n = 0; n < t.length; n++)
            i = t[n],
            r(i.value, {
                componentStack: i.stack,
                digest: i.digest
            });
    if (Rh)
        throw Rh = !1,
        e = ig,
        ig = null,
        e;
    return Oh & 1 && e.tag !== 0 && el(),
    o = e.pendingLanes,
    o & 1 ? e === og ? Zc++ : (Zc = 0,
    og = e) : Zc = 0,
    ns(),
    null
}
function el() {
    if (Eo !== null) {
        var e = Q5(Oh)
          , t = or.transition
          , n = Be;
        try {
            if (or.transition = null,
            Be = 16 > e ? 16 : e,
            Eo === null)
                var r = !1;
            else {
                if (e = Eo,
                Eo = null,
                Oh = 0,
                Te & 6)
                    throw Error(X(331));
                var i = Te;
                for (Te |= 4,
                se = e.current; se !== null; ) {
                    var o = se
                      , s = o.child;
                    if (se.flags & 16) {
                        var a = o.deletions;
                        if (a !== null) {
                            for (var l = 0; l < a.length; l++) {
                                var c = a[l];
                                for (se = c; se !== null; ) {
                                    var u = se;
                                    switch (u.tag) {
                                    case 0:
                                    case 11:
                                    case 15:
                                        jc(8, u, o)
                                    }
                                    var d = u.child;
                                    if (d !== null)
                                        d.return = u,
                                        se = d;
                                    else
                                        for (; se !== null; ) {
                                            u = se;
                                            var f = u.sibling
                                              , h = u.return;
                                            if (u8(u),
                                            u === c) {
                                                se = null;
                                                break
                                            }
                                            if (f !== null) {
                                                f.return = h,
                                                se = f;
                                                break
                                            }
                                            se = h
                                        }
                                }
                            }
                            var m = o.alternate;
                            if (m !== null) {
                                var g = m.child;
                                if (g !== null) {
                                    m.child = null;
                                    do {
                                        var E = g.sibling;
                                        g.sibling = null,
                                        g = E
                                    } while (g !== null)
                                }
                            }
                            se = o
                        }
                    }
                    if (o.subtreeFlags & 2064 && s !== null)
                        s.return = o,
                        se = s;
                    else
                        e: for (; se !== null; ) {
                            if (o = se,
                            o.flags & 2048)
                                switch (o.tag) {
                                case 0:
                                case 11:
                                case 15:
                                    jc(9, o, o.return)
                                }
                            var v = o.sibling;
                            if (v !== null) {
                                v.return = o.return,
                                se = v;
                                break e
                            }
                            se = o.return
                        }
                }
                var y = e.current;
                for (se = y; se !== null; ) {
                    s = se;
                    var w = s.child;
                    if (s.subtreeFlags & 2064 && w !== null)
                        w.return = s,
                        se = w;
                    else
                        e: for (s = y; se !== null; ) {
                            if (a = se,
                            a.flags & 2048)
                                try {
                                    switch (a.tag) {
                                    case 0:
                                    case 11:
                                    case 15:
                                        N1(9, a)
                                    }
                                } catch (I) {
                                    pt(a, a.return, I)
                                }
                            if (a === s) {
                                se = null;
                                break e
                            }
                            var b = a.sibling;
                            if (b !== null) {
                                b.return = a.return,
                                se = b;
                                break e
                            }
                            se = a.return
                        }
                }
                if (Te = i,
                ns(),
                si && typeof si.onPostCommitFiberRoot == "function")
                    try {
                        si.onPostCommitFiberRoot(T1, e)
                    } catch {}
                r = !0
            }
            return r
        } finally {
            Be = n,
            or.transition = t
        }
    }
    return !1
}
function ZE(e, t, n) {
    t = ml(n, t),
    t = J_(e, t, 1),
    e = Po(e, t, 1),
    t = wn(),
    e !== null && (fd(e, 1, t),
    Ln(e, t))
}
function pt(e, t, n) {
    if (e.tag === 3)
        ZE(e, e, n);
    else
        for (; t !== null; ) {
            if (t.tag === 3) {
                ZE(t, e, n);
                break
            } else if (t.tag === 1) {
                var r = t.stateNode;
                if (typeof t.type.getDerivedStateFromError == "function" || typeof r.componentDidCatch == "function" && (Ro === null || !Ro.has(r))) {
                    e = ml(n, e),
                    e = e8(t, e, 1),
                    t = Po(t, e, 1),
                    e = wn(),
                    t !== null && (fd(t, 1, e),
                    Ln(t, e));
                    break
                }
            }
            t = t.return
        }
}
function iA(e, t, n) {
    var r = e.pingCache;
    r !== null && r.delete(t),
    t = wn(),
    e.pingedLanes |= e.suspendedLanes & n,
    Bt === e && (Yt & n) === n && (Tt === 4 || Tt === 3 && (Yt & 130023424) === Yt && 500 > vt() - wv ? $s(e, 0) : Ev |= n),
    Ln(e, t)
}
function w8(e, t) {
    t === 0 && (e.mode & 1 ? (t = Wd,
    Wd <<= 1,
    !(Wd & 130023424) && (Wd = 4194304)) : t = 1);
    var n = wn();
    e = Vi(e, t),
    e !== null && (fd(e, t, n),
    Ln(e, n))
}
function oA(e) {
    var t = e.memoizedState
      , n = 0;
    t !== null && (n = t.retryLane),
    w8(e, n)
}
function sA(e, t) {
    var n = 0;
    switch (e.tag) {
    case 13:
        var r = e.stateNode
          , i = e.memoizedState;
        i !== null && (n = i.retryLane);
        break;
    case 19:
        r = e.stateNode;
        break;
    default:
        throw Error(X(314))
    }
    r !== null && r.delete(t),
    w8(e, n)
}
var b8;
b8 = function(e, t, n) {
    if (e !== null)
        if (e.memoizedProps !== t.pendingProps || Mn.current)
            Cn = !0;
        else {
            if (!(e.lanes & n) && !(t.flags & 128))
                return Cn = !1,
                YM(e, t, n);
            Cn = !!(e.flags & 131072)
        }
    else
        Cn = !1,
        et && t.flags & 1048576 && I_(t, Sh, t.index);
    switch (t.lanes = 0,
    t.tag) {
    case 2:
        var r = t.type;
        Hf(e, t),
        e = t.pendingProps;
        var i = dl(t, ln.current);
        Ja(t, n),
        i = hv(null, t, r, e, i, n);
        var o = pv();
        return t.flags |= 1,
        typeof i == "object" && i !== null && typeof i.render == "function" && i.$$typeof === void 0 ? (t.tag = 1,
        t.memoizedState = null,
        t.updateQueue = null,
        An(r) ? (o = !0,
        xh(t)) : o = !1,
        t.memoizedState = i.state !== null && i.state !== void 0 ? i.state : null,
        lv(t),
        i.updater = O1,
        t.stateNode = i,
        i._reactInternals = t,
        Ym(t, r, e, n),
        t = Xm(null, t, r, !0, o, n)) : (t.tag = 0,
        et && o && tv(t),
        vn(null, t, i, n),
        t = t.child),
        t;
    case 16:
        r = t.elementType;
        e: {
            switch (Hf(e, t),
            e = t.pendingProps,
            i = r._init,
            r = i(r._payload),
            t.type = r,
            i = t.tag = lA(r),
            e = wr(r, e),
            i) {
            case 0:
                t = Km(null, t, r, e, n);
                break e;
            case 1:
                t = $E(null, t, r, e, n);
                break e;
            case 11:
                t = NE(null, t, r, e, n);
                break e;
            case 14:
                t = FE(null, t, r, wr(r.type, e), n);
                break e
            }
            throw Error(X(306, r, ""))
        }
        return t;
    case 0:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : wr(r, i),
        Km(e, t, r, i, n);
    case 1:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : wr(r, i),
        $E(e, t, r, i, n);
    case 3:
        e: {
            if (i8(t),
            e === null)
                throw Error(X(387));
            r = t.pendingProps,
            o = t.memoizedState,
            i = o.element,
            T_(e, t),
            Th(t, r, null, n);
            var s = t.memoizedState;
            if (r = s.element,
            o.isDehydrated)
                if (o = {
                    element: r,
                    isDehydrated: !1,
                    cache: s.cache,
                    pendingSuspenseBoundaries: s.pendingSuspenseBoundaries,
                    transitions: s.transitions
                },
                t.updateQueue.baseState = o,
                t.memoizedState = o,
                t.flags & 256) {
                    i = ml(Error(X(423)), t),
                    t = BE(e, t, r, n, i);
                    break e
                } else if (r !== i) {
                    i = ml(Error(X(424)), t),
                    t = BE(e, t, r, n, i);
                    break e
                } else
                    for ($n = Lo(t.stateNode.containerInfo.firstChild),
                    Un = t,
                    et = !0,
                    Ir = null,
                    n = P_(t, null, r, n),
                    t.child = n; n; )
                        n.flags = n.flags & -3 | 4096,
                        n = n.sibling;
            else {
                if (fl(),
                r === i) {
                    t = Wi(e, t, n);
                    break e
                }
                vn(e, t, r, n)
            }
            t = t.child
        }
        return t;
    case 5:
        return R_(t),
        e === null && Wm(t),
        r = t.type,
        i = t.pendingProps,
        o = e !== null ? e.memoizedProps : null,
        s = i.children,
        Bm(r, i) ? s = null : o !== null && Bm(r, o) && (t.flags |= 32),
        r8(e, t),
        vn(e, t, s, n),
        t.child;
    case 6:
        return e === null && Wm(t),
        null;
    case 13:
        return o8(e, t, n);
    case 4:
        return cv(t, t.stateNode.containerInfo),
        r = t.pendingProps,
        e === null ? t.child = hl(t, null, r, n) : vn(e, t, r, n),
        t.child;
    case 11:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : wr(r, i),
        NE(e, t, r, i, n);
    case 7:
        return vn(e, t, t.pendingProps, n),
        t.child;
    case 8:
        return vn(e, t, t.pendingProps.children, n),
        t.child;
    case 12:
        return vn(e, t, t.pendingProps.children, n),
        t.child;
    case 10:
        e: {
            if (r = t.type._context,
            i = t.pendingProps,
            o = t.memoizedProps,
            s = i.value,
            je(Ch, r._currentValue),
            r._currentValue = s,
            o !== null)
                if (Nr(o.value, s)) {
                    if (o.children === i.children && !Mn.current) {
                        t = Wi(e, t, n);
                        break e
                    }
                } else
                    for (o = t.child,
                    o !== null && (o.return = t); o !== null; ) {
                        var a = o.dependencies;
                        if (a !== null) {
                            s = o.child;
                            for (var l = a.firstContext; l !== null; ) {
                                if (l.context === r) {
                                    if (o.tag === 1) {
                                        l = Ri(-1, n & -n),
                                        l.tag = 2;
                                        var c = o.updateQueue;
                                        if (c !== null) {
                                            c = c.shared;
                                            var u = c.pending;
                                            u === null ? l.next = l : (l.next = u.next,
                                            u.next = l),
                                            c.pending = l
                                        }
                                    }
                                    o.lanes |= n,
                                    l = o.alternate,
                                    l !== null && (l.lanes |= n),
                                    Gm(o.return, n, t),
                                    a.lanes |= n;
                                    break
                                }
                                l = l.next
                            }
                        } else if (o.tag === 10)
                            s = o.type === t.type ? null : o.child;
                        else if (o.tag === 18) {
                            if (s = o.return,
                            s === null)
                                throw Error(X(341));
                            s.lanes |= n,
                            a = s.alternate,
                            a !== null && (a.lanes |= n),
                            Gm(s, n, t),
                            s = o.sibling
                        } else
                            s = o.child;
                        if (s !== null)
                            s.return = o;
                        else
                            for (s = o; s !== null; ) {
                                if (s === t) {
                                    s = null;
                                    break
                                }
                                if (o = s.sibling,
                                o !== null) {
                                    o.return = s.return,
                                    s = o;
                                    break
                                }
                                s = s.return
                            }
                        o = s
                    }
            vn(e, t, i.children, n),
            t = t.child
        }
        return t;
    case 9:
        return i = t.type,
        r = t.pendingProps.children,
        Ja(t, n),
        i = cr(i),
        r = r(i),
        t.flags |= 1,
        vn(e, t, r, n),
        t.child;
    case 14:
        return r = t.type,
        i = wr(r, t.pendingProps),
        i = wr(r.type, i),
        FE(e, t, r, i, n);
    case 15:
        return t8(e, t, t.type, t.pendingProps, n);
    case 17:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : wr(r, i),
        Hf(e, t),
        t.tag = 1,
        An(r) ? (e = !0,
        xh(t)) : e = !1,
        Ja(t, n),
        A_(t, r, i),
        Ym(t, r, i, n),
        Xm(null, t, r, !0, e, n);
    case 19:
        return s8(e, t, n);
    case 22:
        return n8(e, t, n)
    }
    throw Error(X(156, t.tag))
}
;
function _8(e, t) {
    return Z5(e, t)
}
function aA(e, t, n, r) {
    this.tag = e,
    this.key = n,
    this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null,
    this.index = 0,
    this.ref = null,
    this.pendingProps = t,
    this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null,
    this.mode = r,
    this.subtreeFlags = this.flags = 0,
    this.deletions = null,
    this.childLanes = this.lanes = 0,
    this.alternate = null
}
function rr(e, t, n, r) {
    return new aA(e,t,n,r)
}
function Iv(e) {
    return e = e.prototype,
    !(!e || !e.isReactComponent)
}
function lA(e) {
    if (typeof e == "function")
        return Iv(e) ? 1 : 0;
    if (e != null) {
        if (e = e.$$typeof,
        e === V2)
            return 11;
        if (e === W2)
            return 14
    }
    return 2
}
function Do(e, t) {
    var n = e.alternate;
    return n === null ? (n = rr(e.tag, t, e.key, e.mode),
    n.elementType = e.elementType,
    n.type = e.type,
    n.stateNode = e.stateNode,
    n.alternate = e,
    e.alternate = n) : (n.pendingProps = t,
    n.type = e.type,
    n.flags = 0,
    n.subtreeFlags = 0,
    n.deletions = null),
    n.flags = e.flags & 14680064,
    n.childLanes = e.childLanes,
    n.lanes = e.lanes,
    n.child = e.child,
    n.memoizedProps = e.memoizedProps,
    n.memoizedState = e.memoizedState,
    n.updateQueue = e.updateQueue,
    t = e.dependencies,
    n.dependencies = t === null ? null : {
        lanes: t.lanes,
        firstContext: t.firstContext
    },
    n.sibling = e.sibling,
    n.index = e.index,
    n.ref = e.ref,
    n
}
function Wf(e, t, n, r, i, o) {
    var s = 2;
    if (r = e,
    typeof e == "function")
        Iv(e) && (s = 1);
    else if (typeof e == "string")
        s = 5;
    else
        e: switch (e) {
        case La:
            return Bs(n.children, i, o, t);
        case U2:
            s = 8,
            i |= 8;
            break;
        case vm:
            return e = rr(12, n, t, i | 2),
            e.elementType = vm,
            e.lanes = o,
            e;
        case ym:
            return e = rr(13, n, t, i),
            e.elementType = ym,
            e.lanes = o,
            e;
        case Em:
            return e = rr(19, n, t, i),
            e.elementType = Em,
            e.lanes = o,
            e;
        case L5:
            return $1(n, i, o, t);
        default:
            if (typeof e == "object" && e !== null)
                switch (e.$$typeof) {
                case M5:
                    s = 10;
                    break e;
                case A5:
                    s = 9;
                    break e;
                case V2:
                    s = 11;
                    break e;
                case W2:
                    s = 14;
                    break e;
                case lo:
                    s = 16,
                    r = null;
                    break e
                }
            throw Error(X(130, e == null ? e : typeof e, ""))
        }
    return t = rr(s, n, t, i),
    t.elementType = e,
    t.type = r,
    t.lanes = o,
    t
}
function Bs(e, t, n, r) {
    return e = rr(7, e, r, t),
    e.lanes = n,
    e
}
function $1(e, t, n, r) {
    return e = rr(22, e, r, t),
    e.elementType = L5,
    e.lanes = n,
    e.stateNode = {
        isHidden: !1
    },
    e
}
function sp(e, t, n) {
    return e = rr(6, e, null, t),
    e.lanes = n,
    e
}
function ap(e, t, n) {
    return t = rr(4, e.children !== null ? e.children : [], e.key, t),
    t.lanes = n,
    t.stateNode = {
        containerInfo: e.containerInfo,
        pendingChildren: null,
        implementation: e.implementation
    },
    t
}
function cA(e, t, n, r, i) {
    this.tag = t,
    this.containerInfo = e,
    this.finishedWork = this.pingCache = this.current = this.pendingChildren = null,
    this.timeoutHandle = -1,
    this.callbackNode = this.pendingContext = this.context = null,
    this.callbackPriority = 0,
    this.eventTimes = H0(0),
    this.expirationTimes = H0(-1),
    this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0,
    this.entanglements = H0(0),
    this.identifierPrefix = r,
    this.onRecoverableError = i,
    this.mutableSourceEagerHydrationData = null
}
function Sv(e, t, n, r, i, o, s, a, l) {
    return e = new cA(e,t,n,a,l),
    t === 1 ? (t = 1,
    o === !0 && (t |= 8)) : t = 0,
    o = rr(3, null, null, t),
    e.current = o,
    o.stateNode = e,
    o.memoizedState = {
        element: r,
        isDehydrated: n,
        cache: null,
        transitions: null,
        pendingSuspenseBoundaries: null
    },
    lv(o),
    e
}
function uA(e, t, n) {
    var r = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
    return {
        $$typeof: Aa,
        key: r == null ? null : "" + r,
        children: e,
        containerInfo: t,
        implementation: n
    }
}
function x8(e) {
    if (!e)
        return Vo;
    e = e._reactInternals;
    e: {
        if (ca(e) !== e || e.tag !== 1)
            throw Error(X(170));
        var t = e;
        do {
            switch (t.tag) {
            case 3:
                t = t.stateNode.context;
                break e;
            case 1:
                if (An(t.type)) {
                    t = t.stateNode.__reactInternalMemoizedMergedChildContext;
                    break e
                }
            }
            t = t.return
        } while (t !== null);
        throw Error(X(171))
    }
    if (e.tag === 1) {
        var n = e.type;
        if (An(n))
            return __(e, n, t)
    }
    return t
}
function I8(e, t, n, r, i, o, s, a, l) {
    return e = Sv(n, r, !0, e, i, o, s, a, l),
    e.context = x8(null),
    n = e.current,
    r = wn(),
    i = Oo(n),
    o = Ri(r, i),
    o.callback = t ?? null,
    Po(n, o, i),
    e.current.lanes = i,
    fd(e, i, r),
    Ln(e, r),
    e
}
function B1(e, t, n, r) {
    var i = t.current
      , o = wn()
      , s = Oo(i);
    return n = x8(n),
    t.context === null ? t.context = n : t.pendingContext = n,
    t = Ri(o, s),
    t.payload = {
        element: e
    },
    r = r === void 0 ? null : r,
    r !== null && (t.callback = r),
    e = Po(i, t, s),
    e !== null && (Ar(e, i, s, o),
    $f(e, i, s)),
    s
}
function Nh(e) {
    if (e = e.current,
    !e.child)
        return null;
    switch (e.child.tag) {
    case 5:
        return e.child.stateNode;
    default:
        return e.child.stateNode
    }
}
function KE(e, t) {
    if (e = e.memoizedState,
    e !== null && e.dehydrated !== null) {
        var n = e.retryLane;
        e.retryLane = n !== 0 && n < t ? n : t
    }
}
function Cv(e, t) {
    KE(e, t),
    (e = e.alternate) && KE(e, t)
}
function dA() {
    return null
}
var S8 = typeof reportError == "function" ? reportError : function(e) {
    console.error(e)
}
;
function kv(e) {
    this._internalRoot = e
}
z1.prototype.render = kv.prototype.render = function(e) {
    var t = this._internalRoot;
    if (t === null)
        throw Error(X(409));
    B1(e, t, null, null)
}
;
z1.prototype.unmount = kv.prototype.unmount = function() {
    var e = this._internalRoot;
    if (e !== null) {
        this._internalRoot = null;
        var t = e.containerInfo;
        js(function() {
            B1(null, e, null, null)
        }),
        t[Ui] = null
    }
}
;
function z1(e) {
    this._internalRoot = e
}
z1.prototype.unstable_scheduleHydration = function(e) {
    if (e) {
        var t = t_();
        e = {
            blockedOn: null,
            target: e,
            priority: t
        };
        for (var n = 0; n < fo.length && t !== 0 && t < fo[n].priority; n++)
            ;
        fo.splice(n, 0, e),
        n === 0 && r_(e)
    }
}
;
function Tv(e) {
    return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11)
}
function H1(e) {
    return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11 && (e.nodeType !== 8 || e.nodeValue !== " react-mount-point-unstable "))
}
function XE() {}
function fA(e, t, n, r, i) {
    if (i) {
        if (typeof r == "function") {
            var o = r;
            r = function() {
                var c = Nh(s);
                o.call(c)
            }
        }
        var s = I8(t, r, e, 0, null, !1, !1, "", XE);
        return e._reactRootContainer = s,
        e[Ui] = s.current,
        _u(e.nodeType === 8 ? e.parentNode : e),
        js(),
        s
    }
    for (; i = e.lastChild; )
        e.removeChild(i);
    if (typeof r == "function") {
        var a = r;
        r = function() {
            var c = Nh(l);
            a.call(c)
        }
    }
    var l = Sv(e, 0, !1, null, null, !1, !1, "", XE);
    return e._reactRootContainer = l,
    e[Ui] = l.current,
    _u(e.nodeType === 8 ? e.parentNode : e),
    js(function() {
        B1(t, l, n, r)
    }),
    l
}
function U1(e, t, n, r, i) {
    var o = n._reactRootContainer;
    if (o) {
        var s = o;
        if (typeof i == "function") {
            var a = i;
            i = function() {
                var l = Nh(s);
                a.call(l)
            }
        }
        B1(t, s, e, i)
    } else
        s = fA(n, t, e, i, r);
    return Nh(s)
}
J5 = function(e) {
    switch (e.tag) {
    case 3:
        var t = e.stateNode;
        if (t.current.memoizedState.isDehydrated) {
            var n = Mc(t.pendingLanes);
            n !== 0 && (Y2(t, n | 1),
            Ln(t, vt()),
            !(Te & 6) && (gl = vt() + 500,
            ns()))
        }
        break;
    case 13:
        js(function() {
            var r = Vi(e, 1);
            if (r !== null) {
                var i = wn();
                Ar(r, e, 1, i)
            }
        }),
        Cv(e, 1)
    }
}
;
Z2 = function(e) {
    if (e.tag === 13) {
        var t = Vi(e, 134217728);
        if (t !== null) {
            var n = wn();
            Ar(t, e, 134217728, n)
        }
        Cv(e, 134217728)
    }
}
;
e_ = function(e) {
    if (e.tag === 13) {
        var t = Oo(e)
          , n = Vi(e, t);
        if (n !== null) {
            var r = wn();
            Ar(n, e, t, r)
        }
        Cv(e, t)
    }
}
;
t_ = function() {
    return Be
}
;
n_ = function(e, t) {
    var n = Be;
    try {
        return Be = e,
        t()
    } finally {
        Be = n
    }
}
;
Mm = function(e, t, n) {
    switch (t) {
    case "input":
        if (_m(e, n),
        t = n.name,
        n.type === "radio" && t != null) {
            for (n = e; n.parentNode; )
                n = n.parentNode;
            for (n = n.querySelectorAll("input[name=" + JSON.stringify("" + t) + '][type="radio"]'),
            t = 0; t < n.length; t++) {
                var r = n[t];
                if (r !== e && r.form === e.form) {
                    var i = P1(r);
                    if (!i)
                        throw Error(X(90));
                    R5(r),
                    _m(r, i)
                }
            }
        }
        break;
    case "textarea":
        D5(e, n);
        break;
    case "select":
        t = n.value,
        t != null && Ka(e, !!n.multiple, t, !1)
    }
}
;
U5 = bv;
V5 = js;
var hA = {
    usingClientEntryPoint: !1,
    Events: [pd, Da, P1, z5, H5, bv]
}
  , oc = {
    findFiberByHostInstance: xs,
    bundleType: 0,
    version: "18.2.0",
    rendererPackageName: "react-dom"
}
  , pA = {
    bundleType: oc.bundleType,
    version: oc.version,
    rendererPackageName: oc.rendererPackageName,
    rendererConfig: oc.rendererConfig,
    overrideHookState: null,
    overrideHookStateDeletePath: null,
    overrideHookStateRenamePath: null,
    overrideProps: null,
    overridePropsDeletePath: null,
    overridePropsRenamePath: null,
    setErrorHandler: null,
    setSuspenseHandler: null,
    scheduleUpdate: null,
    currentDispatcherRef: Zi.ReactCurrentDispatcher,
    findHostInstanceByFiber: function(e) {
        return e = j5(e),
        e === null ? null : e.stateNode
    },
    findFiberByHostInstance: oc.findFiberByHostInstance || dA,
    findHostInstancesForRefresh: null,
    scheduleRefresh: null,
    scheduleRoot: null,
    setRefreshHandler: null,
    getCurrentFiber: null,
    reconcilerVersion: "18.2.0-next-9e3b772b8-20220608"
};
if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
    var tf = __REACT_DEVTOOLS_GLOBAL_HOOK__;
    if (!tf.isDisabled && tf.supportsFiber)
        try {
            T1 = tf.inject(pA),
            si = tf
        } catch {}
}
jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = hA;
jn.createPortal = function(e, t) {
    var n = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null;
    if (!Tv(t))
        throw Error(X(200));
    return uA(e, t, null, n)
}
;
jn.createRoot = function(e, t) {
    if (!Tv(e))
        throw Error(X(299));
    var n = !1
      , r = ""
      , i = S8;
    return t != null && (t.unstable_strictMode === !0 && (n = !0),
    t.identifierPrefix !== void 0 && (r = t.identifierPrefix),
    t.onRecoverableError !== void 0 && (i = t.onRecoverableError)),
    t = Sv(e, 1, !1, null, null, n, !1, r, i),
    e[Ui] = t.current,
    _u(e.nodeType === 8 ? e.parentNode : e),
    new kv(t)
}
;
jn.findDOMNode = function(e) {
    if (e == null)
        return null;
    if (e.nodeType === 1)
        return e;
    var t = e._reactInternals;
    if (t === void 0)
        throw typeof e.render == "function" ? Error(X(188)) : (e = Object.keys(e).join(","),
        Error(X(268, e)));
    return e = j5(t),
    e = e === null ? null : e.stateNode,
    e
}
;
jn.flushSync = function(e) {
    return js(e)
}
;
jn.hydrate = function(e, t, n) {
    if (!H1(t))
        throw Error(X(200));
    return U1(null, e, t, !0, n)
}
;
jn.hydrateRoot = function(e, t, n) {
    if (!Tv(e))
        throw Error(X(405));
    var r = n != null && n.hydratedSources || null
      , i = !1
      , o = ""
      , s = S8;
    if (n != null && (n.unstable_strictMode === !0 && (i = !0),
    n.identifierPrefix !== void 0 && (o = n.identifierPrefix),
    n.onRecoverableError !== void 0 && (s = n.onRecoverableError)),
    t = I8(t, null, e, 1, n ?? null, i, !1, o, s),
    e[Ui] = t.current,
    _u(e),
    r)
        for (e = 0; e < r.length; e++)
            n = r[e],
            i = n._getVersion,
            i = i(n._source),
            t.mutableSourceEagerHydrationData == null ? t.mutableSourceEagerHydrationData = [n, i] : t.mutableSourceEagerHydrationData.push(n, i);
    return new z1(t)
}
;
jn.render = function(e, t, n) {
    if (!H1(t))
        throw Error(X(200));
    return U1(null, e, t, !1, n)
}
;
jn.unmountComponentAtNode = function(e) {
    if (!H1(e))
        throw Error(X(40));
    return e._reactRootContainer ? (js(function() {
        U1(null, null, e, !1, function() {
            e._reactRootContainer = null,
            e[Ui] = null
        })
    }),
    !0) : !1
}
;
jn.unstable_batchedUpdates = bv;
jn.unstable_renderSubtreeIntoContainer = function(e, t, n, r) {
    if (!H1(n))
        throw Error(X(200));
    if (e == null || e._reactInternals === void 0)
        throw Error(X(38));
    return U1(e, t, n, !1, r)
}
;
jn.version = "18.2.0-next-9e3b772b8-20220608";
function C8() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
        try {
            __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C8)
        } catch (e) {
            console.error(e)
        }
}
C8(),
I5.exports = jn;
var Vn = I5.exports;
const mA = Al(Vn);
var k8, qE = Vn;
k8 = qE.createRoot,
qE.hydrateRoot;
const gA = ()=>{
    Array.prototype.at || Object.defineProperty(Array.prototype, "at", {
        value: function(e) {
            if (e = Math.trunc(e) || 0,
            e < 0 && (e += this.length),
            !(e < 0 || e >= this.length))
                return this[e]
        },
        writable: !0,
        enumerable: !1,
        configurable: !0
    }),
    Element.prototype.replaceChildren || (Element.prototype.replaceChildren = function(...e) {
        this.innerHTML = "",
        this.append(...e)
    }
    )
}
;
function vA(e, t) {
    if (!(e instanceof t))
        throw new TypeError("Cannot call a class as a function")
}
function Lu(e) {
    "@babel/helpers - typeof";
    return Lu = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t
    }
    : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    }
    ,
    Lu(e)
}
function yA(e, t) {
    if (Lu(e) !== "object" || e === null)
        return e;
    var n = e[Symbol.toPrimitive];
    if (n !== void 0) {
        var r = n.call(e, t || "default");
        if (Lu(r) !== "object")
            return r;
        throw new TypeError("@@toPrimitive must return a primitive value.")
    }
    return (t === "string" ? String : Number)(e)
}
function EA(e) {
    var t = yA(e, "string");
    return Lu(t) === "symbol" ? t : String(t)
}
function QE(e, t) {
    for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1,
        r.configurable = !0,
        "value"in r && (r.writable = !0),
        Object.defineProperty(e, EA(r.key), r)
    }
}
function wA(e, t, n) {
    return t && QE(e.prototype, t),
    n && QE(e, n),
    Object.defineProperty(e, "prototype", {
        writable: !1
    }),
    e
}
var T8 = []
  , bA = T8.forEach
  , _A = T8.slice;
function xA(e) {
    return bA.call(_A.call(arguments, 1), function(t) {
        if (t)
            for (var n in t)
                e[n] === void 0 && (e[n] = t[n])
    }),
    e
}
var JE = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/
  , IA = function(t, n, r) {
    var i = r || {};
    i.path = i.path || "/";
    var o = encodeURIComponent(n)
      , s = t + "=" + o;
    if (i.maxAge > 0) {
        var a = i.maxAge - 0;
        if (isNaN(a))
            throw new Error("maxAge should be a Number");
        s += "; Max-Age=" + Math.floor(a)
    }
    if (i.domain) {
        if (!JE.test(i.domain))
            throw new TypeError("option domain is invalid");
        s += "; Domain=" + i.domain
    }
    if (i.path) {
        if (!JE.test(i.path))
            throw new TypeError("option path is invalid");
        s += "; Path=" + i.path
    }
    if (i.expires) {
        if (typeof i.expires.toUTCString != "function")
            throw new TypeError("option expires is invalid");
        s += "; Expires=" + i.expires.toUTCString()
    }
    if (i.httpOnly && (s += "; HttpOnly"),
    i.secure && (s += "; Secure"),
    i.sameSite) {
        var l = typeof i.sameSite == "string" ? i.sameSite.toLowerCase() : i.sameSite;
        switch (l) {
        case !0:
            s += "; SameSite=Strict";
            break;
        case "lax":
            s += "; SameSite=Lax";
            break;
        case "strict":
            s += "; SameSite=Strict";
            break;
        case "none":
            s += "; SameSite=None";
            break;
        default:
            throw new TypeError("option sameSite is invalid")
        }
    }
    return s
}
  , ew = {
    create: function(t, n, r, i) {
        var o = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {
            path: "/",
            sameSite: "strict"
        };
        r && (o.expires = new Date,
        o.expires.setTime(o.expires.getTime() + r * 60 * 1e3)),
        i && (o.domain = i),
        document.cookie = IA(t, encodeURIComponent(n), o)
    },
    read: function(t) {
        for (var n = t + "=", r = document.cookie.split(";"), i = 0; i < r.length; i++) {
            for (var o = r[i]; o.charAt(0) === " "; )
                o = o.substring(1, o.length);
            if (o.indexOf(n) === 0)
                return o.substring(n.length, o.length)
        }
        return null
    },
    remove: function(t) {
        this.create(t, "", -1)
    }
}
  , SA = {
    name: "cookie",
    lookup: function(t) {
        var n;
        if (t.lookupCookie && typeof document < "u") {
            var r = ew.read(t.lookupCookie);
            r && (n = r)
        }
        return n
    },
    cacheUserLanguage: function(t, n) {
        n.lookupCookie && typeof document < "u" && ew.create(n.lookupCookie, t, n.cookieMinutes, n.cookieDomain, n.cookieOptions)
    }
}
  , CA = {
    name: "querystring",
    lookup: function(t) {
        var n;
        if (typeof window < "u") {
            var r = window.location.search;
            !window.location.search && window.location.hash && window.location.hash.indexOf("?") > -1 && (r = window.location.hash.substring(window.location.hash.indexOf("?")));
            for (var i = r.substring(1), o = i.split("&"), s = 0; s < o.length; s++) {
                var a = o[s].indexOf("=");
                if (a > 0) {
                    var l = o[s].substring(0, a);
                    l === t.lookupQuerystring && (n = o[s].substring(a + 1))
                }
            }
        }
        return n
    }
}
  , sc = null
  , tw = function() {
    if (sc !== null)
        return sc;
    try {
        sc = window !== "undefined" && window.localStorage !== null;
        var t = "i18next.translate.boo";
        window.localStorage.setItem(t, "foo"),
        window.localStorage.removeItem(t)
    } catch {
        sc = !1
    }
    return sc
}
  , kA = {
    name: "localStorage",
    lookup: function(t) {
        var n;
        if (t.lookupLocalStorage && tw()) {
            var r = window.localStorage.getItem(t.lookupLocalStorage);
            r && (n = r)
        }
        return n
    },
    cacheUserLanguage: function(t, n) {
        n.lookupLocalStorage && tw() && window.localStorage.setItem(n.lookupLocalStorage, t)
    }
}
  , ac = null
  , nw = function() {
    if (ac !== null)
        return ac;
    try {
        ac = window !== "undefined" && window.sessionStorage !== null;
        var t = "i18next.translate.boo";
        window.sessionStorage.setItem(t, "foo"),
        window.sessionStorage.removeItem(t)
    } catch {
        ac = !1
    }
    return ac
}
  , TA = {
    name: "sessionStorage",
    lookup: function(t) {
        var n;
        if (t.lookupSessionStorage && nw()) {
            var r = window.sessionStorage.getItem(t.lookupSessionStorage);
            r && (n = r)
        }
        return n
    },
    cacheUserLanguage: function(t, n) {
        n.lookupSessionStorage && nw() && window.sessionStorage.setItem(n.lookupSessionStorage, t)
    }
}
  , MA = {
    name: "navigator",
    lookup: function(t) {
        var n = [];
        if (typeof navigator < "u") {
            if (navigator.languages)
                for (var r = 0; r < navigator.languages.length; r++)
                    n.push(navigator.languages[r]);
            navigator.userLanguage && n.push(navigator.userLanguage),
            navigator.language && n.push(navigator.language)
        }
        return n.length > 0 ? n : void 0
    }
}
  , AA = {
    name: "htmlTag",
    lookup: function(t) {
        var n, r = t.htmlTag || (typeof document < "u" ? document.documentElement : null);
        return r && typeof r.getAttribute == "function" && (n = r.getAttribute("lang")),
        n
    }
}
  , LA = {
    name: "path",
    lookup: function(t) {
        var n;
        if (typeof window < "u") {
            var r = window.location.pathname.match(/\/([a-zA-Z-]*)/g);
            if (r instanceof Array)
                if (typeof t.lookupFromPathIndex == "number") {
                    if (typeof r[t.lookupFromPathIndex] != "string")
                        return;
                    n = r[t.lookupFromPathIndex].replace("/", "")
                } else
                    n = r[0].replace("/", "")
        }
        return n
    }
}
  , PA = {
    name: "subdomain",
    lookup: function(t) {
        var n;
        if (typeof window < "u") {
            var r = window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);
            r instanceof Array && (typeof t.lookupFromSubdomainIndex == "number" ? n = r[t.lookupFromSubdomainIndex].replace("http://", "").replace("https://", "").replace(".", "") : n = r[0].replace("http://", "").replace("https://", "").replace(".", ""))
        }
        return n
    }
};
function RA() {
    return {
        order: ["querystring", "cookie", "localStorage", "sessionStorage", "navigator", "htmlTag"],
        lookupQuerystring: "lng",
        lookupCookie: "i18next",
        lookupLocalStorage: "i18nextLng",
        lookupSessionStorage: "i18nextLng",
        caches: ["localStorage"],
        excludeCacheFor: ["cimode"]
    }
}
var M8 = function() {
    function e(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        vA(this, e),
        this.type = "languageDetector",
        this.detectors = {},
        this.init(t, n)
    }
    return wA(e, [{
        key: "init",
        value: function(n) {
            var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}
              , i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
            this.services = n,
            this.options = xA(r, this.options || {}, RA()),
            this.options.lookupFromUrlIndex && (this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex),
            this.i18nOptions = i,
            this.addDetector(SA),
            this.addDetector(CA),
            this.addDetector(kA),
            this.addDetector(TA),
            this.addDetector(MA),
            this.addDetector(AA),
            this.addDetector(LA),
            this.addDetector(PA)
        }
    }, {
        key: "addDetector",
        value: function(n) {
            this.detectors[n.name] = n
        }
    }, {
        key: "detect",
        value: function(n) {
            var r = this;
            n || (n = this.options.order);
            var i = [];
            return n.forEach(function(o) {
                if (r.detectors[o]) {
                    var s = r.detectors[o].lookup(r.options);
                    s && typeof s == "string" && (s = [s]),
                    s && (i = i.concat(s))
                }
            }),
            this.services.languageUtils.getBestMatchFromCodes ? i : i.length > 0 ? i[0] : null
        }
    }, {
        key: "cacheUserLanguage",
        value: function(n, r) {
            var i = this;
            r || (r = this.options.caches),
            r && (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(n) > -1 || r.forEach(function(o) {
                i.detectors[o] && i.detectors[o].cacheUserLanguage(n, i.options)
            }))
        }
    }]),
    e
}();
M8.type = "languageDetector";
const nt = (e,t,n,r)=>{
    try {
        const i = [];
        if (typeof window > "u" || {}.VITE_WORKER_ID || !i.includes(e))
            return;
        window.sa_event && window.sa_event(t, {
            category: e,
            label: n,
            value: r
        })
    } catch (i) {
        console.error("error during analytics", i)
    }
}
  , OA = "#ffffff"
  , DA = "#000000"
  , NA = ["#f8f9fa", "#f1f3f5", "#e9ecef", "#dee2e6", "#ced4da", "#adb5bd", "#868e96", "#495057", "#343a40", "#212529"]
  , FA = ["#fff5f5", "#ffe3e3", "#ffc9c9", "#ffa8a8", "#ff8787", "#ff6b6b", "#fa5252", "#f03e3e", "#e03131", "#c92a2a"]
  , $A = ["#fff0f6", "#ffdeeb", "#fcc2d7", "#faa2c1", "#f783ac", "#f06595", "#e64980", "#d6336c", "#c2255c", "#a61e4d"]
  , BA = ["#f8f0fc", "#f3d9fa", "#eebefa", "#e599f7", "#da77f2", "#cc5de8", "#be4bdb", "#ae3ec9", "#9c36b5", "#862e9c"]
  , zA = ["#f3f0ff", "#e5dbff", "#d0bfff", "#b197fc", "#9775fa", "#845ef7", "#7950f2", "#7048e8", "#6741d9", "#5f3dc4"]
  , HA = ["#edf2ff", "#dbe4ff", "#bac8ff", "#91a7ff", "#748ffc", "#5c7cfa", "#4c6ef5", "#4263eb", "#3b5bdb", "#364fc7"]
  , UA = ["#e7f5ff", "#d0ebff", "#a5d8ff", "#74c0fc", "#4dabf7", "#339af0", "#228be6", "#1c7ed6", "#1971c2", "#1864ab"]
  , VA = ["#e3fafc", "#c5f6fa", "#99e9f2", "#66d9e8", "#3bc9db", "#22b8cf", "#15aabf", "#1098ad", "#0c8599", "#0b7285"]
  , WA = ["#e6fcf5", "#c3fae8", "#96f2d7", "#63e6be", "#38d9a9", "#20c997", "#12b886", "#0ca678", "#099268", "#087f5b"]
  , GA = ["#ebfbee", "#d3f9d8", "#b2f2bb", "#8ce99a", "#69db7c", "#51cf66", "#40c057", "#37b24d", "#2f9e44", "#2b8a3e"]
  , jA = ["#f4fce3", "#e9fac8", "#d8f5a2", "#c0eb75", "#a9e34b", "#94d82d", "#82c91e", "#74b816", "#66a80f", "#5c940d"]
  , YA = ["#fff9db", "#fff3bf", "#ffec99", "#ffe066", "#ffd43b", "#fcc419", "#fab005", "#f59f00", "#f08c00", "#e67700"]
  , ZA = ["#fff4e6", "#ffe8cc", "#ffd8a8", "#ffc078", "#ffa94d", "#ff922b", "#fd7e14", "#f76707", "#e8590c", "#d9480f"]
  , ot = {
    white: OA,
    black: DA,
    gray: NA,
    red: FA,
    pink: $A,
    grape: BA,
    violet: zA,
    indigo: HA,
    blue: UA,
    cyan: VA,
    teal: WA,
    green: GA,
    lime: jA,
    yellow: YA,
    orange: ZA
}
  , KA = (e,t)=>t.reduce((n,r)=>(r in e && (n[r] = e[r]),
n), {})
  , XA = 5
  , Ca = 5
  , qA = 4
  , Lc = 4
  , Pc = 1
  , gr = [0, 2, 4, 6, 8]
  , vr = (e,t)=>t.map(n=>ot[e][n])
  , ge = {
    transparent: "transparent",
    black: "#1e1e1e",
    white: "#ffffff",
    gray: vr("gray", gr),
    red: vr("red", gr),
    pink: vr("pink", gr),
    grape: vr("grape", gr),
    violet: vr("violet", gr),
    blue: vr("blue", gr),
    cyan: vr("cyan", gr),
    teal: vr("teal", gr),
    green: vr("green", gr),
    yellow: vr("yellow", gr),
    orange: vr("orange", gr),
    bronze: ["#f8f1ee", "#eaddd7", "#d2bab0", "#a18072", "#846358"]
}
  , A8 = KA(ge, ["cyan", "blue", "violet", "grape", "pink", "green", "teal", "yellow", "orange", "red"])
  , L8 = [ge.black, ge.red[Lc], ge.green[Lc], ge.blue[Lc], ge.yellow[Lc]]
  , P8 = [ge.transparent, ge.red[Pc], ge.green[Pc], ge.blue[Pc], ge.yellow[Pc]]
  , R8 = [ge.white, "#f8f9fa", "#f5faff", "#fffce8", "#fdf8f6"]
  , QA = {
    transparent: ge.transparent,
    white: ge.white,
    gray: ge.gray,
    black: ge.black,
    bronze: ge.bronze,
    ...A8
}
  , JA = {
    transparent: ge.transparent,
    white: ge.white,
    gray: ge.gray,
    black: ge.black,
    bronze: ge.bronze,
    ...A8
}
  , eL = e=>[ge.cyan[e], ge.blue[e], ge.violet[e], ge.grape[e], ge.pink[e], ge.green[e], ge.teal[e], ge.yellow[e], ge.orange[e], ge.red[e]]
  , tL = (e,t,n)=>`#${((1 << 24) + (e << 16) + (t << 8) + n).toString(16).slice(1)}`
  , nL = "invert(93%) hue-rotate(180deg)"
  , rL = "302px"
  , O8 = {
    themeFilter: nL,
    rightSidebarWidth: rL
}
  , ui = /Mac|iPod|iPhone|iPad/.test(navigator.platform)
  , D8 = /^Win/.test(navigator.platform)
  , rw = /\b(android)\b/i.test(navigator.userAgent)
  , Mv = "netscape"in window && navigator.userAgent.indexOf("rv:") > 1 && navigator.userAgent.indexOf("Gecko") > 1
  , iL = navigator.userAgent.indexOf("Chrome") !== -1
  , N8 = !iL && navigator.userAgent.indexOf("Safari") !== -1
  , oL = ()=>{
    var e, t;
    return ((t = (e = navigator.brave) == null ? void 0 : e.isBrave) == null ? void 0 : t.name) === "isBrave"
}
  , Oi = "Excalidraw"
  , us = 10
  , Gf = 8
  , sL = 5
  , iw = 1
  , aL = 30
  , Wo = Math.PI / 12
  , De = {
    TEXT: "text",
    CROSSHAIR: "crosshair",
    GRABBING: "grabbing",
    GRAB: "grab",
    POINTER: "pointer",
    MOVE: "move",
    AUTO: ""
}
  , lc = {
    MAIN: 0,
    WHEEL: 1,
    SECONDARY: 2,
    TOUCH: -1
}
  , ds = {
    enabled: "all",
    disabled: "none",
    inheritFromUI: "var(--ui-pointerEvents)"
};
var U = (e=>(e.COPY = "copy",
e.PASTE = "paste",
e.CUT = "cut",
e.KEYDOWN = "keydown",
e.KEYUP = "keyup",
e.MOUSE_MOVE = "mousemove",
e.RESIZE = "resize",
e.UNLOAD = "unload",
e.FOCUS = "focus",
e.BLUR = "blur",
e.DRAG_OVER = "dragover",
e.DROP = "drop",
e.GESTURE_END = "gestureend",
e.BEFORE_UNLOAD = "beforeunload",
e.GESTURE_START = "gesturestart",
e.GESTURE_CHANGE = "gesturechange",
e.POINTER_MOVE = "pointermove",
e.POINTER_DOWN = "pointerdown",
e.POINTER_UP = "pointerup",
e.STATE_CHANGE = "statechange",
e.WHEEL = "wheel",
e.TOUCH_START = "touchstart",
e.TOUCH_END = "touchend",
e.HASHCHANGE = "hashchange",
e.VISIBILITY_CHANGE = "visibilitychange",
e.SCROLL = "scroll",
e.EXCALIDRAW_LINK = "excalidraw-link",
e.MENU_ITEM_SELECT = "menu.itemSelect",
e.MESSAGE = "message",
e))(U || {});
const nf = {
    UNSTARTED: -1,
    ENDED: 0,
    PLAYING: 1,
    PAUSED: 2,
    BUFFERING: 3,
    CUED: 5
}
  , F8 = {
    SHAPE_ACTIONS_MENU: "App-menu__left"
}
  , Lr = {
    Virgil: 1,
    Helvetica: 2,
    Cascadia: 3
}
  , $t = {
    LIGHT: "light",
    DARK: "dark"
}
  , vl = {
    strokeColor: "#bbb",
    strokeWidth: 1,
    strokeStyle: "solid",
    fillStyle: "solid",
    roughness: 0,
    roundness: null,
    backgroundColor: "transparent",
    radius: 8
}
  , ow = "Segoe UI Emoji"
  , Av = 1
  , Ki = 20
  , Xi = Lr.Virgil
  , V1 = "left"
  , Fh = "top"
  , $8 = "{version}"
  , tl = 20
  , Lv = {
    svg: "image/svg+xml",
    png: "image/png",
    jpg: "image/jpeg",
    gif: "image/gif",
    webp: "image/webp",
    bmp: "image/bmp",
    ico: "image/x-icon",
    avif: "image/avif",
    jfif: "image/jfif"
}
  , ve = {
    json: "application/json",
    excalidraw: "application/vnd.excalidraw+json",
    excalidrawlib: "application/vnd.excalidrawlib+json",
    "excalidraw.svg": "image/svg+xml",
    "excalidraw.png": "image/png",
    binary: "application/octet-stream",
    ...Lv
}
  , lp = {
    png: "png",
    svg: "svg",
    clipboard: "clipboard"
}
  , li = {
    excalidraw: "excalidraw",
    excalidrawClipboard: "excalidraw/clipboard",
    excalidrawLibrary: "excalidrawlib",
    excalidrawClipboardWithAPI: "excalidraw-api/clipboard"
}
  , Pv = window.EXCALIDRAW_EXPORT_SOURCE || window.location.origin
  , lL = 500
  , cL = 300
  , uL = 500
  , dL = 1e4
  , fL = 3e4
  , hL = 100
  , Pu = .1
  , B8 = .1
  , pL = 300
  , sw = 6e4
  , aw = 3e3
  , Rv = O8.themeFilter
  , lg = {
    addLibrary: "addLibrary"
}
  , cg = {
    addLibrary: "addLibrary"
}
  , ug = {
    canvasActions: {
        changeViewBackgroundColor: !0,
        clearCanvas: !0,
        export: {
            saveFileToDisk: !0
        },
        loadScene: !0,
        saveToActiveFile: !0,
        toggleTheme: null,
        saveAsImage: !0
    }
}
  , lw = 640
  , cw = 730
  , uw = 1e3
  , dw = 500
  , fw = 1229
  , mL = parseInt(O8.rightSidebarWidth)
  , cc = 2
  , Ov = [1, 2, 3]
  , gd = 10
  , gL = 1440
  , hw = 2 * 1024 * 1024
  , ft = "http://www.w3.org/2000/svg"
  , z8 = 128
  , W1 = {
    excalidraw: 2,
    excalidrawLibrary: 2
}
  , Mt = 5
  , vL = .7
  , yL = 11
  , Bn = {
    TOP: "top",
    MIDDLE: "middle",
    BOTTOM: "bottom"
}
  , Ru = {
    LEFT: "left",
    CENTER: "center",
    RIGHT: "right"
}
  , EL = 20
  , cp = .25
  , wL = 32
  , zt = {
    LEGACY: 1,
    PROPORTIONAL_RADIUS: 2,
    ADAPTIVE_RADIUS: 3
}
  , wo = "__precedingElement__"
  , at = {
    strokeColor: ge.black,
    backgroundColor: ge.transparent,
    fillStyle: "hachure",
    strokeWidth: 1,
    strokeStyle: "solid",
    roughness: 1,
    opacity: 100,
    locked: !1
}
  , Dv = "library"
  , nl = {
    name: "default",
    defaultTab: Dv
}
  , H8 = new Set(["embeddable", "image"])
  , bL = "modulepreload"
  , _L = function(e) {
    return "/" + e
}
  , pw = {}
  , ne = function(t, n, r) {
    if (!n || n.length === 0)
        return t();
    const i = document.getElementsByTagName("link");
    return Promise.all(n.map(o=>{
        if (o = _L(o),
        o in pw)
            return;
        pw[o] = !0;
        const s = o.endsWith(".css")
          , a = s ? '[rel="stylesheet"]' : "";
        if (!!r)
            for (let u = i.length - 1; u >= 0; u--) {
                const d = i[u];
                if (d.href === o && (!s || d.rel === "stylesheet"))
                    return
            }
        else if (document.querySelector(`link[href="${o}"]${a}`))
            return;
        const c = document.createElement("link");
        if (c.rel = s ? "stylesheet" : bL,
        s || (c.as = "script",
        c.crossOrigin = ""),
        c.href = o,
        document.head.appendChild(c),
        s)
            return new Promise((u,d)=>{
                c.addEventListener("load", u),
                c.addEventListener("error", ()=>d(new Error(`Unable to preload CSS for ${o}`)))
            }
            )
    }
    )).then(()=>t()).catch(o=>{
        const s = new Event("vite:preloadError",{
            cancelable: !0
        });
        if (s.payload = o,
        window.dispatchEvent(s),
        !s.defaultPrevented)
            throw o
    }
    )
}
  , xL = (e,t)=>{
    const n = e[t];
    return n ? typeof n == "function" ? n() : Promise.resolve(n) : new Promise((r,i)=>{
        (typeof queueMicrotask == "function" ? queueMicrotask : setTimeout)(i.bind(null, new Error("Unknown variable dynamic import: " + t)))
    }
    )
}
  , U8 = {
    paste: "Paste",
    pasteAsPlaintext: "Paste as plaintext",
    pasteCharts: "Paste charts",
    selectAll: "Select all",
    multiSelect: "Add element to selection",
    moveCanvas: "Move canvas",
    cut: "Cut",
    copy: "Copy",
    copyAsPng: "Copy to clipboard as PNG",
    copyAsSvg: "Copy to clipboard as SVG",
    copyText: "Copy to clipboard as text",
    bringForward: "Bring forward",
    sendToBack: "Send to back",
    bringToFront: "Bring to front",
    sendBackward: "Send backward",
    delete: "Delete",
    copyStyles: "Copy styles",
    pasteStyles: "Paste styles",
    stroke: "Stroke",
    background: "Background",
    fill: "Fill",
    strokeWidth: "Stroke width",
    strokeStyle: "Stroke style",
    strokeStyle_solid: "Solid",
    strokeStyle_dashed: "Dashed",
    strokeStyle_dotted: "Dotted",
    sloppiness: "Sloppiness",
    opacity: "Opacity",
    textAlign: "Text align",
    edges: "Edges",
    sharp: "Sharp",
    round: "Round",
    arrowheads: "Arrowheads",
    arrowhead_none: "None",
    arrowhead_arrow: "Arrow",
    arrowhead_bar: "Bar",
    arrowhead_dot: "Dot",
    arrowhead_triangle: "Triangle",
    fontSize: "Font size",
    fontFamily: "Font family",
    addWatermark: 'Add "Made with Excalidraw"',
    handDrawn: "Hand-drawn",
    normal: "Normal",
    code: "Code",
    small: "Small",
    medium: "Medium",
    large: "Large",
    veryLarge: "Very large",
    solid: "Solid",
    hachure: "Hachure",
    zigzag: "Zigzag",
    crossHatch: "Cross-hatch",
    thin: "Thin",
    bold: "Bold",
    left: "Left",
    center: "Center",
    right: "Right",
    extraBold: "Extra bold",
    architect: "Architect",
    artist: "Artist",
    cartoonist: "Cartoonist",
    fileTitle: "File name",
    colorPicker: "Color picker",
    canvasColors: "Used on canvas",
    canvasBackground: "Canvas background",
    drawingCanvas: "Drawing canvas",
    layers: "Layers",
    actions: "Actions",
    language: "Language",
    liveCollaboration: "Live collaboration...",
    duplicateSelection: "Duplicate",
    untitled: "Untitled",
    name: "Name",
    yourName: "Your name",
    madeWithExcalidraw: "Made with Excalidraw",
    group: "Group selection",
    ungroup: "Ungroup selection",
    collaborators: "Collaborators",
    showGrid: "Show grid",
    addToLibrary: "Add to library",
    removeFromLibrary: "Remove from library",
    libraryLoadingMessage: "Loading library",
    libraries: "Browse libraries",
    loadingScene: "Loading scene",
    align: "Align",
    alignTop: "Align top",
    alignBottom: "Align bottom",
    alignLeft: "Align left",
    alignRight: "Align right",
    centerVertically: "Center vertically",
    centerHorizontally: "Center horizontally",
    distributeHorizontally: "Distribute horizontally",
    distributeVertically: "Distribute vertically",
    flipHorizontal: "Flip horizontal",
    flipVertical: "Flip vertical",
    viewMode: "View mode",
    share: "Share",
    showStroke: "Show stroke color picker",
    showBackground: "Show background color picker",
    toggleTheme: "Toggle theme",
    personalLib: "Personal Library",
    excalidrawLib: "Excalidraw Library",
    decreaseFontSize: "Decrease font size",
    increaseFontSize: "Increase font size",
    unbindText: "Unbind text",
    bindText: "Bind text to the container",
    createContainerFromText: "Wrap text in a container",
    link: {
        edit: "Edit link",
        editEmbed: "Edit link & embed",
        create: "Create link",
        createEmbed: "Create link & embed",
        label: "Link",
        labelEmbed: "Link & embed",
        empty: "No link is set"
    },
    lineEditor: {
        edit: "Edit line",
        exit: "Exit line editor"
    },
    elementLock: {
        lock: "Lock",
        unlock: "Unlock",
        lockAll: "Lock all",
        unlockAll: "Unlock all"
    },
    statusPublished: "Published",
    sidebarLock: "Keep sidebar open",
    selectAllElementsInFrame: "Select all elements in frame",
    removeAllElementsFromFrame: "Remove all elements from frame",
    eyeDropper: "Pick color from canvas"
}
  , V8 = {
    noItems: "No items added yet...",
    hint_emptyLibrary: "Select an item on canvas to add it here, or install a library from the public repository, below.",
    hint_emptyPrivateLibrary: "Select an item on canvas to add it here."
}
  , W8 = {
    clearReset: "Reset the canvas",
    exportJSON: "Export to file",
    exportImage: "Export image...",
    export: "Save to...",
    copyToClipboard: "Copy to clipboard",
    save: "Save to current file",
    saveAs: "Save as",
    load: "Open",
    getShareableLink: "Get shareable link",
    close: "Close",
    selectLanguage: "Select language",
    scrollBackToContent: "Scroll back to content",
    zoomIn: "Zoom in",
    zoomOut: "Zoom out",
    resetZoom: "Reset zoom",
    menu: "Menu",
    done: "Done",
    edit: "Edit",
    undo: "Undo",
    redo: "Redo",
    resetLibrary: "Reset library",
    createNewRoom: "Create new room",
    fullScreen: "Full screen",
    darkMode: "Dark mode",
    lightMode: "Light mode",
    zenMode: "Zen mode",
    objectsSnapMode: "Snap to objects",
    exitZenMode: "Exit zen mode",
    cancel: "Cancel",
    clear: "Clear",
    remove: "Remove",
    embed: "Toggle embedding",
    publishLibrary: "Publish",
    submit: "Submit",
    confirm: "Confirm",
    embeddableInteractionButton: "Click to interact"
}
  , G8 = {
    clearReset: "This will clear the whole canvas. Are you sure?",
    couldNotCreateShareableLink: "Couldn't create shareable link.",
    couldNotCreateShareableLinkTooBig: "Couldn't create shareable link: the scene is too big",
    couldNotLoadInvalidFile: "Couldn't load invalid file",
    importBackendFailed: "Importing from backend failed.",
    cannotExportEmptyCanvas: "Cannot export empty canvas.",
    couldNotCopyToClipboard: "Couldn't copy to clipboard.",
    decryptFailed: "Couldn't decrypt data.",
    uploadedSecurly: "The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",
    loadSceneOverridePrompt: "Loading external drawing will replace your existing content. Do you wish to continue?",
    collabStopOverridePrompt: `Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,
    errorAddingToLibrary: "Couldn't add item to the library",
    errorRemovingFromLibrary: "Couldn't remove item from the library",
    confirmAddLibrary: "This will add {{numShapes}} shape(s) to your library. Are you sure?",
    imageDoesNotContainScene: "This image does not seem to contain any scene data. Have you enabled scene embedding during export?",
    cannotRestoreFromImage: "Scene couldn't be restored from this image file",
    invalidSceneUrl: "Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",
    resetLibrary: "This will clear your library. Are you sure?",
    removeItemsFromsLibrary: "Delete {{count}} item(s) from library?",
    invalidEncryptionKey: "Encryption key must be of 22 characters. Live collaboration is disabled.",
    collabOfflineWarning: `No internet connection available.
Your changes will not be saved!`
}
  , j8 = {
    unsupportedFileType: "Unsupported file type.",
    imageInsertError: "Couldn't insert image. Try again later...",
    fileTooBig: "File is too big. Maximum allowed size is {{maxSize}}.",
    svgImageInsertError: "Couldn't insert SVG image. The SVG markup looks invalid.",
    invalidSVGString: "Invalid SVG.",
    cannotResolveCollabServer: "Couldn't connect to the collab server. Please reload the page and try again.",
    importLibraryError: "Couldn't load library",
    collabSaveFailed: "Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",
    collabSaveFailed_sizeExceeded: "Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",
    brave_measure_text_error: {
        line1: "Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",
        line2: "This could result in breaking the <bold>Text Elements</bold> in your drawings.",
        line3: "We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",
        line4: "If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"
    },
    libraryElementTypeError: {
        embeddable: "Embeddable elements cannot be added to the library.",
        image: "Support for adding images to the library coming soon!"
    }
}
  , Y8 = {
    selection: "Selection",
    image: "Insert image",
    rectangle: "Rectangle",
    diamond: "Diamond",
    ellipse: "Ellipse",
    arrow: "Arrow",
    line: "Line",
    freedraw: "Draw",
    text: "Text",
    library: "Library",
    lock: "Keep selected tool active after drawing",
    penMode: "Pen mode - prevent touch",
    link: "Add/ Update link for a selected shape",
    eraser: "Eraser",
    frame: "Frame tool",
    embeddable: "Web Embed",
    laser: "Laser pointer",
    hand: "Hand (panning tool)",
    extraTools: "More tools"
}
  , Z8 = {
    canvasActions: "Canvas actions",
    selectedShapeActions: "Selected shape actions",
    shapes: "Shapes"
}
  , K8 = {
    canvasPanning: "To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",
    linearElement: "Click to start multiple points, drag for single line",
    freeDraw: "Click and drag, release when you're finished",
    text: "Tip: you can also add text by double-clicking anywhere with the selection tool",
    embeddable: "Click-drag to create a website embed",
    text_selected: "Double-click or press ENTER to edit text",
    text_editing: "Press Escape or CtrlOrCmd+ENTER to finish editing",
    linearElementMulti: "Click on last point or press Escape or Enter to finish",
    lockAngle: "You can constrain angle by holding SHIFT",
    resize: `You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,
    resizeImage: `You can resize freely by holding SHIFT,
hold ALT to resize from the center`,
    rotate: "You can constrain angles by holding SHIFT while rotating",
    lineEditor_info: "Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",
    lineEditor_pointSelected: `Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,
    lineEditor_nothingSelected: `Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,
    placeImage: "Click to place the image, or click and drag to set its size manually",
    publishLibrary: "Publish your own library",
    bindTextToElement: "Press enter to add text",
    deepBoxSelect: "Hold CtrlOrCmd to deep select, and to prevent dragging",
    eraserRevert: "Hold Alt to revert the elements marked for deletion",
    firefox_clipboard_write: 'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',
    disableSnapping: "Hold CtrlOrCmd to disable snapping"
}
  , X8 = {
    cannotShowPreview: "Cannot show preview",
    canvasTooBig: "The canvas may be too big.",
    canvasTooBigTip: "Tip: try moving the farthest elements a bit closer together."
}
  , q8 = {
    headingMain: "Encountered an error. Try <button>reloading the page</button>.",
    clearCanvasMessage: "If reloading doesn't work, try <button>clearing the canvas</button>.",
    clearCanvasCaveat: " This will result in loss of work ",
    trackedToSentry: "The error with identifier {{eventId}} was tracked on our system.",
    openIssueMessage: "We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",
    sceneContent: "Scene content:"
}
  , Q8 = {
    desc_intro: "You can invite people to your current scene to collaborate with you.",
    desc_privacy: "Don't worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.",
    button_startSession: "Start session",
    button_stopSession: "Stop session",
    desc_inProgressIntro: "Live-collaboration session is now in progress.",
    desc_shareLink: "Share this link with anyone you want to collaborate with:",
    desc_exitSession: "Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",
    shareTitle: "Join a live collaboration session on Excalidraw"
}
  , J8 = {
    title: "Error"
}
  , ex = {
    disk_title: "Save to disk",
    disk_details: "Export the scene data to a file from which you can import later.",
    disk_button: "Save to file",
    link_title: "Shareable link",
    link_details: "Export as a read-only link.",
    link_button: "Export to Link",
    excalidrawplus_description: "Save the scene to your Excalidraw+ workspace.",
    excalidrawplus_button: "Export",
    excalidrawplus_exportError: "Couldn't export to Excalidraw+ at this moment..."
}
  , tx = {
    blog: "Read our blog",
    click: "click",
    deepSelect: "Deep select",
    deepBoxSelect: "Deep select within box, and prevent dragging",
    curvedArrow: "Curved arrow",
    curvedLine: "Curved line",
    documentation: "Documentation",
    doubleClick: "double-click",
    drag: "drag",
    editor: "Editor",
    editLineArrowPoints: "Edit line/arrow points",
    editText: "Edit text / add label",
    github: "Found an issue? Submit",
    howto: "Follow our guides",
    or: "or",
    preventBinding: "Prevent arrow binding",
    tools: "Tools",
    shortcuts: "Keyboard shortcuts",
    textFinish: "Finish editing (text editor)",
    textNewLine: "Add new line (text editor)",
    title: "Help",
    view: "View",
    zoomToFit: "Zoom to fit all elements",
    zoomToSelection: "Zoom to selection",
    toggleElementLock: "Lock/unlock selection",
    movePageUpDown: "Move page up/down",
    movePageLeftRight: "Move page left/right"
}
  , nx = {
    title: "Clear canvas"
}
  , rx = {
    title: "Publish library",
    itemName: "Item name",
    authorName: "Author name",
    githubUsername: "GitHub username",
    twitterUsername: "Twitter username",
    libraryName: "Library name",
    libraryDesc: "Library description",
    website: "Website",
    placeholder: {
        authorName: "Your name or username",
        libraryName: "Name of your library",
        libraryDesc: "Description of your library to help people understand its usage",
        githubHandle: "GitHub handle (optional), so you can edit the library once submitted for review",
        twitterHandle: "Twitter username (optional), so we know who to credit when promoting over Twitter",
        website: "Link to your personal website or elsewhere (optional)"
    },
    errors: {
        required: "Required",
        website: "Enter a valid URL"
    },
    noteDescription: "Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",
    noteGuidelines: "The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",
    noteLicense: "By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",
    noteItems: "Each library item must have its own name so it's filterable. The following library items will be included:",
    atleastOneLibItem: "Please select at least one library item to get started",
    republishWarning: "Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."
}
  , ix = {
    title: "Library submitted",
    content: "Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"
}
  , ox = {
    resetLibrary: "Reset library",
    removeItemsFromLib: "Remove selected items from library"
}
  , sx = {
    header: "Export image",
    label: {
        withBackground: "Background",
        onlySelected: "Only selected",
        darkMode: "Dark mode",
        embedScene: "Embed scene",
        scale: "Scale",
        padding: "Padding"
    },
    tooltip: {
        embedScene: `Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`
    },
    title: {
        exportToPng: "Export to PNG",
        exportToSvg: "Export to SVG",
        copyPngToClipboard: "Copy PNG to clipboard"
    },
    button: {
        exportToPng: "PNG",
        exportToSvg: "SVG",
        copyPngToClipboard: "Copy to clipboard"
    }
}
  , ax = {
    tooltip: "Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",
    link: "Blog post on end-to-end encryption in Excalidraw"
}
  , lx = {
    angle: "Angle",
    element: "Element",
    elements: "Elements",
    height: "Height",
    scene: "Scene",
    selected: "Selected",
    storage: "Storage",
    title: "Stats for nerds",
    total: "Total",
    version: "Version",
    versionCopy: "Click to copy",
    versionNotAvailable: "Version not available",
    width: "Width"
}
  , cx = {
    addedToLibrary: "Added to library",
    copyStyles: "Copied styles.",
    copyToClipboard: "Copied to clipboard.",
    copyToClipboardAsPng: `Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,
    fileSaved: "File saved.",
    fileSavedToFilename: "Saved to {filename}",
    canvas: "canvas",
    selection: "selection",
    pasteAsSingleElement: `Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,
    unableToEmbed: "Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",
    unrecognizedLinkFormat: "The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site"
}
  , ux = {
    transparent: "Transparent",
    black: "Black",
    white: "White",
    red: "Red",
    pink: "Pink",
    grape: "Grape",
    violet: "Violet",
    gray: "Gray",
    blue: "Blue",
    cyan: "Cyan",
    teal: "Teal",
    green: "Green",
    yellow: "Yellow",
    orange: "Orange",
    bronze: "Bronze"
}
  , dx = {
    app: {
        center_heading: "All your data is saved locally in your browser.",
        center_heading_plus: "Did you want to go to the Excalidraw+ instead?",
        menuHint: "Export, preferences, languages, ..."
    },
    defaults: {
        menuHint: "Export, preferences, and more...",
        center_heading: "Diagrams. Made. Simple.",
        toolbarHint: "Pick a tool & Start drawing!",
        helpHint: "Shortcuts & help"
    }
}
  , fx = {
    mostUsedCustomColors: "Most used custom colors",
    colors: "Colors",
    shades: "Shades",
    hexCode: "Hex code",
    noShades: "No shades available for this color"
}
  , hx = {
    action: {
        exportToImage: {
            title: "Export as image",
            button: "Export as image",
            description: "Export the scene data as an image from which you can import later."
        },
        saveToDisk: {
            title: "Save to disk",
            button: "Save to disk",
            description: "Export the scene data to a file from which you can import later."
        },
        excalidrawPlus: {
            title: "Excalidraw+",
            button: "Export to Excalidraw+",
            description: "Save the scene to your Excalidraw+ workspace."
        }
    },
    modal: {
        loadFromFile: {
            title: "Load from file",
            button: "Load from file",
            description: "Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."
        },
        shareableLink: {
            title: "Load from link",
            button: "Replace my content",
            description: "Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."
        }
    }
}
  , Nv = {
    labels: U8,
    library: V8,
    buttons: W8,
    alerts: G8,
    errors: j8,
    toolBar: Y8,
    headings: Z8,
    hints: K8,
    canvasError: X8,
    errorSplash: q8,
    roomDialog: Q8,
    errorDialog: J8,
    exportDialog: ex,
    helpDialog: tx,
    clearCanvasDialog: nx,
    publishDialog: rx,
    publishSuccessDialog: ix,
    confirmDialog: ox,
    imageExportDialog: sx,
    encrypted: ax,
    stats: lx,
    toast: cx,
    colors: ux,
    welcomeScreen: dx,
    colorPicker: fx,
    overwriteConfirm: hx
}
  , IL = Object.freeze(Object.defineProperty({
    __proto__: null,
    alerts: G8,
    buttons: W8,
    canvasError: X8,
    clearCanvasDialog: nx,
    colorPicker: fx,
    colors: ux,
    confirmDialog: ox,
    default: Nv,
    encrypted: ax,
    errorDialog: J8,
    errorSplash: q8,
    errors: j8,
    exportDialog: ex,
    headings: Z8,
    helpDialog: tx,
    hints: K8,
    imageExportDialog: sx,
    labels: U8,
    library: V8,
    overwriteConfirm: hx,
    publishDialog: rx,
    publishSuccessDialog: ix,
    roomDialog: Q8,
    stats: lx,
    toast: cx,
    toolBar: Y8,
    welcomeScreen: dx
}, Symbol.toStringTag, {
    value: "Module"
}))
  , px = 100
  , mx = 18
  , gx = {
    "ar-SA": 79,
    "az-AZ": 20,
    "bg-BG": 54,
    "bn-BD": 59,
    "ca-ES": 87,
    "cs-CZ": 98,
    "da-DK": 33,
    "de-DE": 100,
    "el-GR": 92,
    en: px,
    "es-ES": 88,
    "eu-ES": 100,
    "fa-IR": 88,
    "fi-FI": 87,
    "fr-FR": 88,
    "gl-ES": 88,
    "he-IL": 86,
    "hi-IN": 77,
    "hu-HU": 76,
    "id-ID": 94,
    "it-IT": 98,
    "ja-JP": 88,
    kaa: mx,
    "kab-KAB": 87,
    "kk-KZ": 21,
    "km-KH": 94,
    "ko-KR": 100,
    "ku-TR": 100,
    "lt-LT": 55,
    "lv-LV": 88,
    "mr-IN": 95,
    "my-MM": 40,
    "nb-NO": 100,
    "nl-NL": 83,
    "nn-NO": 76,
    "oc-FR": 86,
    "pa-IN": 89,
    "pl-PL": 98,
    "pt-BR": 98,
    "pt-PT": 94,
    "ro-RO": 98,
    "ru-RU": 98,
    "si-LK": 9,
    "sk-SK": 98,
    "sl-SI": 100,
    "sv-SE": 100,
    "ta-IN": 84,
    "th-TH": 38,
    "tr-TR": 86,
    "uk-UA": 96,
    "vi-VN": 56,
    "zh-CN": 100,
    "zh-HK": 25,
    "zh-TW": 100
}
  , SL = Object.freeze(Object.defineProperty({
    __proto__: null,
    default: gx,
    en: px,
    kaa: mx
}, Symbol.toStringTag, {
    value: "Module"
}));
let CL = 0;
function kL(e, t) {
    const n = `atom ${++CL}`
      , r = {
        toString: ()=>n
    };
    return typeof e == "function" ? r.read = e : (r.init = e,
    r.read = i=>i(r),
    r.write = (i,o,s)=>o(r, typeof s == "function" ? s(i(r)) : s)),
    t && (r.write = t),
    r
}
const Go = Symbol()
  , dg = e=>!!e[Go]
  , rf = e=>!e[Go].c
  , uc = e=>{
    var t;
    const {b: n, c: r} = e[Go];
    r && (r(),
    (t = ML.get(n)) == null || t())
}
  , jf = (e,t)=>{
    const n = e[Go].o
      , r = t[Go].o;
    return n === r || e === r || dg(n) && jf(n, t)
}
  , fg = (e,t)=>{
    const n = {
        b: e,
        o: t,
        c: null
    }
      , r = new Promise(i=>{
        n.c = ()=>{
            n.c = null,
            i()
        }
        ,
        t.finally(n.c)
    }
    );
    return r[Go] = n,
    r
}
  , TL = e=>fg(e[Go].b, e[Go].o)
  , ML = new WeakMap
  , of = e=>"init"in e
  , Ou = "r"
  , $h = "w"
  , Du = "c"
  , Bh = "s"
  , mw = "h"
  , AL = "n"
  , LL = "l"
  , PL = "a"
  , RL = "m"
  , vx = e=>{
    const t = new WeakMap
      , n = new WeakMap
      , r = new Map;
    let i, o;
    if (({
        VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
        VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
        VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
        VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
        VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
        VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
        VITE_APP_PLUS_APP: "https://app.excalidraw.com",
        VITE_APP_WS_SERVER_URL: "",
        VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
        VITE_APP_DISABLE_TRACKING: "",
        VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
        BASE_URL: "/",
        MODE: "production",
        DEV: !1,
        PROD: !0,
        SSR: !1
    } && "production") !== "production" && (i = new Set,
    o = new Set),
    e)
        for (const [D,F] of e) {
            const B = {
                v: F,
                r: 0,
                y: !0,
                d: new Map
            };
            ({
                VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
                VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
                VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
                VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
                VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
                VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
                VITE_APP_PLUS_APP: "https://app.excalidraw.com",
                VITE_APP_WS_SERVER_URL: "",
                VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
                VITE_APP_DISABLE_TRACKING: "",
                VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
                BASE_URL: "/",
                MODE: "production",
                DEV: !1,
                PROD: !0,
                SSR: !1
            } && "production") !== "production" && (Object.freeze(B),
            of(D) || console.warn("Found initial value for derived atom which can cause unexpected behavior", D)),
            t.set(D, B)
        }
    const s = new WeakMap
      , a = (D,F,B)=>{
        let Y = s.get(F);
        Y || (Y = new Map,
        s.set(F, Y)),
        B.then(()=>{
            Y.get(D) === B && (Y.delete(D),
            Y.size || s.delete(F))
        }
        ),
        Y.set(D, B)
    }
      , l = D=>{
        const F = new Set
          , B = s.get(D);
        return B && (s.delete(D),
        B.forEach((Y,G)=>{
            uc(Y),
            F.add(G)
        }
        )),
        F
    }
      , c = new WeakMap
      , u = D=>{
        let F = c.get(D);
        return F || (F = new Map,
        c.set(D, F)),
        F
    }
      , d = (D,F)=>{
        if (D) {
            const B = u(D);
            let Y = B.get(F);
            return Y || (Y = d(D.p, F),
            Y && "p"in Y && rf(Y.p) && (Y = void 0),
            Y && B.set(F, Y)),
            Y
        }
        return t.get(F)
    }
      , f = (D,F,B)=>{
        if (({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && Object.freeze(B),
        D)
            u(D).set(F, B);
        else {
            const Y = t.get(F);
            t.set(F, B),
            r.has(F) || r.set(F, Y)
        }
    }
      , h = (D,F=new Map,B)=>{
        if (!B)
            return F;
        const Y = new Map;
        let G = !1;
        return B.forEach(K=>{
            var q;
            const oe = ((q = d(D, K)) == null ? void 0 : q.r) || 0;
            Y.set(K, oe),
            F.get(K) !== oe && (G = !0)
        }
        ),
        F.size === Y.size && !G ? F : Y
    }
      , m = (D,F,B,Y,G)=>{
        const K = d(D, F);
        if (K) {
            if (G && (!("p"in K) || !jf(K.p, G)))
                return K;
            "p"in K && uc(K.p)
        }
        const q = {
            v: B,
            r: (K == null ? void 0 : K.r) || 0,
            y: !0,
            d: h(D, K == null ? void 0 : K.d, Y)
        };
        let oe = !(K != null && K.y);
        return !K || !("v"in K) || !Object.is(K.v, B) ? (oe = !0,
        ++q.r,
        q.d.has(F) && (q.d = new Map(q.d).set(F, q.r))) : q.d !== K.d && (q.d.size !== K.d.size || !Array.from(q.d.keys()).every($e=>K.d.has($e))) && (oe = !0,
        Promise.resolve().then(()=>{
            V(D)
        }
        )),
        K && !oe ? K : (f(D, F, q),
        q)
    }
      , g = (D,F,B,Y,G)=>{
        const K = d(D, F);
        if (K) {
            if (G && (!("p"in K) || !jf(K.p, G)))
                return K;
            "p"in K && uc(K.p)
        }
        const q = {
            e: B,
            r: ((K == null ? void 0 : K.r) || 0) + 1,
            y: !0,
            d: h(D, K == null ? void 0 : K.d, Y)
        };
        return f(D, F, q),
        q
    }
      , E = (D,F,B,Y)=>{
        const G = d(D, F);
        if (G && "p"in G) {
            if (jf(G.p, B) && !rf(G.p))
                return G.y ? G : {
                    ...G,
                    y: !0
                };
            uc(G.p)
        }
        a(D, F, B);
        const K = {
            p: B,
            r: ((G == null ? void 0 : G.r) || 0) + 1,
            y: !0,
            d: h(D, G == null ? void 0 : G.d, Y)
        };
        return f(D, F, K),
        K
    }
      , v = (D,F,B,Y)=>{
        if (B instanceof Promise) {
            const G = fg(B, B.then(K=>{
                m(D, F, K, Y, G)
            }
            ).catch(K=>{
                if (K instanceof Promise)
                    return dg(K) ? K.then(()=>{
                        w(D, F, !0)
                    }
                    ) : K;
                g(D, F, K, Y, G)
            }
            ));
            return E(D, F, G, Y)
        }
        return m(D, F, B, Y)
    }
      , y = (D,F)=>{
        const B = d(D, F);
        if (B) {
            const Y = {
                ...B,
                y: !1
            };
            f(D, F, Y)
        } else
            ({
                VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
                VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
                VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
                VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
                VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
                VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
                VITE_APP_PLUS_APP: "https://app.excalidraw.com",
                VITE_APP_WS_SERVER_URL: "",
                VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
                VITE_APP_DISABLE_TRACKING: "",
                VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
                BASE_URL: "/",
                MODE: "production",
                DEV: !1,
                PROD: !0,
                SSR: !1
            } && "production") !== "production" && console.warn("[Bug] could not invalidate non existing atom", F)
    }
      , w = (D,F,B)=>{
        if (!B) {
            const G = d(D, F);
            if (G) {
                if (G.y && "p"in G && !rf(G.p))
                    return G;
                if (G.d.forEach((K,q)=>{
                    if (q !== F)
                        if (!n.has(q))
                            w(D, q);
                        else {
                            const oe = d(D, q);
                            oe && !oe.y && w(D, q)
                        }
                }
                ),
                Array.from(G.d).every(([K,q])=>{
                    const oe = d(D, K);
                    return oe && !("p"in oe) && oe.r === q
                }
                ))
                    return G.y ? G : {
                        ...G,
                        y: !0
                    }
            }
        }
        const Y = new Set;
        try {
            const G = F.read(K=>{
                Y.add(K);
                const q = K === F ? d(D, K) : w(D, K);
                if (q) {
                    if ("e"in q)
                        throw q.e;
                    if ("p"in q)
                        throw q.p;
                    return q.v
                }
                if (of(K))
                    return K.init;
                throw new Error("no atom init")
            }
            );
            return v(D, F, G, Y)
        } catch (G) {
            if (G instanceof Promise) {
                const K = dg(G) && rf(G) ? TL(G) : fg(G, G);
                return E(D, F, K, Y)
            }
            return g(D, F, G, Y)
        }
    }
      , b = (D,F)=>w(F, D)
      , I = (D,F)=>{
        let B = n.get(F);
        return B || (B = O(D, F)),
        B
    }
      , S = (D,F)=>!F.l.size && (!F.t.size || F.t.size === 1 && F.t.has(D))
      , C = (D,F)=>{
        const B = n.get(F);
        B && S(F, B) && N(D, F)
    }
      , T = (D,F)=>{
        const B = n.get(F);
        B == null || B.t.forEach(Y=>{
            Y !== F && (y(D, Y),
            T(D, Y))
        }
        )
    }
      , L = (D,F,B)=>{
        let Y = !0;
        const G = (oe,$e)=>{
            const Ie = w(D, oe);
            if ("e"in Ie)
                throw Ie.e;
            if ("p"in Ie) {
                if ($e != null && $e.unstable_promise)
                    return Ie.p.then(()=>{
                        const Se = d(D, oe);
                        return Se && "p"in Se && Se.p === Ie.p ? new Promise(Ce=>setTimeout(Ce)).then(()=>G(oe, $e)) : G(oe, $e)
                    }
                    );
                throw ({
                    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
                    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
                    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
                    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
                    VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
                    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
                    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
                    VITE_APP_WS_SERVER_URL: "",
                    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
                    VITE_APP_DISABLE_TRACKING: "",
                    VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
                    BASE_URL: "/",
                    MODE: "production",
                    DEV: !1,
                    PROD: !0,
                    SSR: !1
                } && "production") !== "production" && console.info("Reading pending atom state in write operation. We throw a promise for now.", oe),
                Ie.p
            }
            if ("v"in Ie)
                return Ie.v;
            throw ({
                VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
                VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
                VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
                VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
                VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
                VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
                VITE_APP_PLUS_APP: "https://app.excalidraw.com",
                VITE_APP_WS_SERVER_URL: "",
                VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
                VITE_APP_DISABLE_TRACKING: "",
                VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
                BASE_URL: "/",
                MODE: "production",
                DEV: !1,
                PROD: !0,
                SSR: !1
            } && "production") !== "production" && console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.", oe),
            new Error("no value found")
        }
          , K = (oe,$e)=>{
            let Ie;
            if (oe === F) {
                if (!of(oe))
                    throw new Error("atom not writable");
                l(oe).forEach(dn=>{
                    dn !== D && v(dn, oe, $e)
                }
                );
                const Ce = d(D, oe)
                  , ze = v(D, oe, $e);
                Ce !== ze && T(D, oe)
            } else
                Ie = L(D, oe, $e);
            return Y || V(D),
            Ie
        }
          , q = F.write(G, K, B);
        return Y = !1,
        q
    }
      , A = (D,F,B)=>{
        const Y = L(B, D, F);
        return V(B),
        Y
    }
      , P = D=>!!D.write
      , O = (D,F,B)=>{
        const Y = {
            t: new Set(B && [B]),
            l: new Set
        };
        if (n.set(F, Y),
        ({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && o.add(F),
        w(void 0, F).d.forEach((K,q)=>{
            const oe = n.get(q);
            oe ? oe.t.add(F) : q !== F && O(D, q, F)
        }
        ),
        P(F) && F.onMount) {
            const K = oe=>A(F, oe, D)
              , q = F.onMount(K);
            D = void 0,
            q && (Y.u = q)
        }
        return Y
    }
      , N = (D,F)=>{
        var B;
        const Y = (B = n.get(F)) == null ? void 0 : B.u;
        Y && Y(),
        n.delete(F),
        ({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && o.delete(F);
        const G = d(D, F);
        G ? ("p"in G && uc(G.p),
        G.d.forEach((K,q)=>{
            if (q !== F) {
                const oe = n.get(q);
                oe && (oe.t.delete(F),
                S(q, oe) && N(D, q))
            }
        }
        )) : ({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && console.warn("[Bug] could not find atom state to unmount", F)
    }
      , $ = (D,F,B,Y)=>{
        const G = new Set(B.d.keys());
        Y == null || Y.forEach((K,q)=>{
            if (G.has(q)) {
                G.delete(q);
                return
            }
            const oe = n.get(q);
            oe && (oe.t.delete(F),
            S(q, oe) && N(D, q))
        }
        ),
        G.forEach(K=>{
            const q = n.get(K);
            q ? q.t.add(F) : n.has(F) && O(D, K, F)
        }
        )
    }
      , V = D=>{
        if (D) {
            u(D).forEach((B,Y)=>{
                const G = t.get(Y);
                if (B !== G) {
                    const K = n.get(Y);
                    K == null || K.l.forEach(q=>q(D))
                }
            }
            );
            return
        }
        for (; r.size; ) {
            const F = Array.from(r);
            r.clear(),
            F.forEach(([B,Y])=>{
                const G = d(void 0, B);
                if (G && G.d !== (Y == null ? void 0 : Y.d) && $(void 0, B, G, Y == null ? void 0 : Y.d),
                Y && !Y.y && (G != null && G.y))
                    return;
                const K = n.get(B);
                K == null || K.l.forEach(q=>q())
            }
            )
        }
        ({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && i.forEach(F=>F())
    }
      , te = D=>{
        u(D).forEach((B,Y)=>{
            const G = t.get(Y);
            (!G || B.r > G.r || B.y !== G.y || B.r === G.r && B.d !== G.d) && (t.set(Y, B),
            B.d !== (G == null ? void 0 : G.d) && $(D, Y, B, G == null ? void 0 : G.d))
        }
        )
    }
      , Z = (D,F)=>{
        F && te(F),
        V(void 0)
    }
      , z = (D,F,B)=>{
        const G = I(B, D).l;
        return G.add(F),
        ()=>{
            G.delete(F),
            C(B, D)
        }
    }
      , W = (D,F)=>{
        for (const [B,Y] of D)
            of(B) && (v(F, B, Y),
            T(F, B));
        V(F)
    }
    ;
    return ({
        VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
        VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
        VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
        VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
        VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
        VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
        VITE_APP_PLUS_APP: "https://app.excalidraw.com",
        VITE_APP_WS_SERVER_URL: "",
        VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
        VITE_APP_DISABLE_TRACKING: "",
        VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
        BASE_URL: "/",
        MODE: "production",
        DEV: !1,
        PROD: !0,
        SSR: !1
    } && "production") !== "production" ? {
        [Ou]: b,
        [$h]: A,
        [Du]: Z,
        [Bh]: z,
        [mw]: W,
        [AL]: D=>(i.add(D),
        ()=>{
            i.delete(D)
        }
        ),
        [LL]: ()=>o.values(),
        [PL]: D=>t.get(D),
        [RL]: D=>n.get(D)
    } : {
        [Ou]: b,
        [$h]: A,
        [Du]: Z,
        [Bh]: z,
        [mw]: W
    }
}
  , yx = e=>{
    const t = vx(e)
      , n = s=>{
        const a = t[Ou](s);
        if ("e"in a)
            throw a.e;
        if (!("p"in a))
            return a.v
    }
      , r = s=>new Promise((a,l)=>{
        const c = t[Ou](s);
        "e"in c ? l(c.e) : "p"in c ? a(c.p.then(()=>r(s))) : a(c.v)
    }
    );
    return {
        get: n,
        asyncGet: r,
        set: (s,a)=>t[$h](s, a),
        sub: (s,a)=>t[Bh](s, a),
        SECRET_INTERNAL_store: t
    }
}
  , Ex = (e,t)=>({
    s: t ? t(e).SECRET_INTERNAL_store : vx(e)
})
  , up = new Map
  , Fv = e=>(up.has(e) || up.set(e, x.createContext(Ex())),
up.get(e))
  , $v = ({children: e, initialValues: t, scope: n, unstable_createStore: r, unstable_enableVersionedWrite: i})=>{
    const [o,s] = x.useState({});
    x.useEffect(()=>{
        const c = a.current;
        c.w && (c.s[Du](null, o),
        delete o.p,
        c.v = o)
    }
    , [o]);
    const a = x.useRef();
    if (!a.current) {
        const c = Ex(t, r);
        if (i) {
            let u = 0;
            c.w = d=>{
                s(f=>{
                    const h = u ? f : {
                        p: f
                    };
                    return d(h),
                    h
                }
                )
            }
            ,
            c.v = o,
            c.r = d=>{
                ++u,
                d(),
                --u
            }
        }
        a.current = c
    }
    const l = Fv(n);
    return x.createElement(l.Provider, {
        value: a.current
    }, e)
}
;
function un(e, t) {
    return kL(e, t)
}
function G1(e, t) {
    const n = Fv(t)
      , r = x.useContext(n)
      , {s: i, v: o} = r
      , s = f=>{
        const h = i[Ou](e, f);
        if (({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && !h.y)
            throw new Error("should not be invalidated");
        if ("e"in h)
            throw h.e;
        if ("p"in h)
            throw h.p;
        if ("v"in h)
            return h.v;
        throw new Error("no atom value")
    }
      , [[a,l,c],u] = x.useReducer((f,h)=>{
        const m = s(h);
        return Object.is(f[1], m) && f[2] === e ? f : [h, m, e]
    }
    , o, f=>{
        const h = s(f);
        return [f, h, e]
    }
    );
    let d = l;
    return c !== e && (u(a),
    d = s(a)),
    x.useEffect(()=>{
        const {v: f} = r;
        f && i[Du](e, f);
        const h = i[Bh](e, u, f);
        return u(f),
        h
    }
    , [i, e, r]),
    x.useEffect(()=>{
        i[Du](e, a)
    }
    ),
    x.useDebugValue(d),
    d
}
function Ol(e, t) {
    const n = Fv(t)
      , {s: r, w: i} = x.useContext(n);
    return x.useCallback(s=>{
        if (({
            VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
            VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
            VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
            VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
            VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
            VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
            VITE_APP_PLUS_APP: "https://app.excalidraw.com",
            VITE_APP_WS_SERVER_URL: "",
            VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
            VITE_APP_DISABLE_TRACKING: "",
            VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
            BASE_URL: "/",
            MODE: "production",
            DEV: !1,
            PROD: !0,
            SSR: !1
        } && "production") !== "production" && !("write"in e))
            throw new Error("not writable atom");
        const a = l=>r[$h](e, s, l);
        return i ? i(a) : a()
    }
    , [r, i, e])
}
function ut(e, t) {
    return "scope"in e && (console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),
    t = e.scope),
    [G1(e, t), Ol(e, t)]
}
const Kt = Symbol()
  , Di = yx()
  , OL = (e,t)=>{
    const [n,r] = ut(e);
    return x.useLayoutEffect(()=>{
        r(typeof t == "function" ? t() : t)
    }
    , []),
    [n, r]
}
  , DL = 85
  , rs = {
    code: "en",
    label: "English"
}
  , Bv = [rs, ...[{
    code: "ar-SA",
    label: "",
    rtl: !0
}, {
    code: "bg-BG",
    label: ""
}, {
    code: "ca-ES",
    label: "Catal"
}, {
    code: "cs-CZ",
    label: "esky"
}, {
    code: "de-DE",
    label: "Deutsch"
}, {
    code: "el-GR",
    label: ""
}, {
    code: "es-ES",
    label: "Espaol"
}, {
    code: "eu-ES",
    label: "Euskara"
}, {
    code: "fa-IR",
    label: "",
    rtl: !0
}, {
    code: "fi-FI",
    label: "Suomi"
}, {
    code: "fr-FR",
    label: "Franais"
}, {
    code: "gl-ES",
    label: "Galego"
}, {
    code: "he-IL",
    label: "",
    rtl: !0
}, {
    code: "hi-IN",
    label: ""
}, {
    code: "hu-HU",
    label: "Magyar"
}, {
    code: "id-ID",
    label: "Bahasa Indonesia"
}, {
    code: "it-IT",
    label: "Italiano"
}, {
    code: "ja-JP",
    label: ""
}, {
    code: "kab-KAB",
    label: "Taqbaylit"
}, {
    code: "kk-KZ",
    label: " "
}, {
    code: "ko-KR",
    label: ""
}, {
    code: "ku-TR",
    label: "Kurd"
}, {
    code: "lt-LT",
    label: "Lietuvi"
}, {
    code: "lv-LV",
    label: "Latvieu"
}, {
    code: "my-MM",
    label: "Burmese"
}, {
    code: "nb-NO",
    label: "Norsk bokml"
}, {
    code: "nl-NL",
    label: "Nederlands"
}, {
    code: "nn-NO",
    label: "Norsk nynorsk"
}, {
    code: "oc-FR",
    label: "Occitan"
}, {
    code: "pa-IN",
    label: ""
}, {
    code: "pl-PL",
    label: "Polski"
}, {
    code: "pt-BR",
    label: "Portugus Brasileiro"
}, {
    code: "pt-PT",
    label: "Portugus"
}, {
    code: "ro-RO",
    label: "Romn"
}, {
    code: "ru-RU",
    label: ""
}, {
    code: "sk-SK",
    label: "Slovenina"
}, {
    code: "sv-SE",
    label: "Svenska"
}, {
    code: "sl-SI",
    label: "Slovenina"
}, {
    code: "tr-TR",
    label: "Trke"
}, {
    code: "uk-UA",
    label: ""
}, {
    code: "zh-CN",
    label: ""
}, {
    code: "zh-TW",
    label: ""
}, {
    code: "vi-VN",
    label: "Ting Vit"
}, {
    code: "mr-IN",
    label: ""
}].filter(e=>gx[e.code] >= DL).sort((e,t)=>e.label > t.label ? 1 : -1)]
  , wx = "__test__";
let Ua = rs
  , Yf = {};
const bx = async e=>{
    if (Ua = e,
    document.documentElement.dir = Ua.rtl ? "rtl" : "ltr",
    document.documentElement.lang = Ua.code,
    e.code.startsWith(wx))
        Yf = {};
    else
        try {
            Yf = await xL(Object.assign({
                "./locales/ar-SA.json": ()=>ne(()=>import("./locales/ar-SA.json-ca044cff.js"), []),
                "./locales/az-AZ.json": ()=>ne(()=>import("./locales/az-AZ.json-8f63ce10.js"), []),
                "./locales/bg-BG.json": ()=>ne(()=>import("./locales/bg-BG.json-b9f319ef.js"), []),
                "./locales/bn-BD.json": ()=>ne(()=>import("./locales/bn-BD.json-c2da4b15.js"), []),
                "./locales/ca-ES.json": ()=>ne(()=>import("./locales/ca-ES.json-55208f1e.js"), []),
                "./locales/cs-CZ.json": ()=>ne(()=>import("./locales/cs-CZ.json-5a5dc3ce.js"), []),
                "./locales/da-DK.json": ()=>ne(()=>import("./locales/da-DK.json-da6557ff.js"), []),
                "./locales/de-DE.json": ()=>ne(()=>import("./locales/de-DE.json-620e14ae.js"), []),
                "./locales/el-GR.json": ()=>ne(()=>import("./locales/el-GR.json-631c09ea.js"), []),
                "./locales/en.json": ()=>ne(()=>Promise.resolve().then(()=>IL), void 0),
                "./locales/es-ES.json": ()=>ne(()=>import("./locales/es-ES.json-9a787dc9.js"), []),
                "./locales/eu-ES.json": ()=>ne(()=>import("./locales/eu-ES.json-edf3edf1.js"), []),
                "./locales/fa-IR.json": ()=>ne(()=>import("./locales/fa-IR.json-5a03701c.js"), []),
                "./locales/fi-FI.json": ()=>ne(()=>import("./locales/fi-FI.json-6c4af9ec.js"), []),
                "./locales/fr-FR.json": ()=>ne(()=>import("./locales/fr-FR.json-ede018c9.js"), []),
                "./locales/gl-ES.json": ()=>ne(()=>import("./locales/gl-ES.json-943aad60.js"), []),
                "./locales/he-IL.json": ()=>ne(()=>import("./locales/he-IL.json-f912fd42.js"), []),
                "./locales/hi-IN.json": ()=>ne(()=>import("./locales/hi-IN.json-01ec57d5.js"), []),
                "./locales/hu-HU.json": ()=>ne(()=>import("./locales/hu-HU.json-35333915.js"), []),
                "./locales/id-ID.json": ()=>ne(()=>import("./locales/id-ID.json-01c5d01c.js"), []),
                "./locales/it-IT.json": ()=>ne(()=>import("./locales/it-IT.json-634aaf5f.js"), []),
                "./locales/ja-JP.json": ()=>ne(()=>import("./locales/ja-JP.json-b7c9214e.js"), []),
                "./locales/kaa.json": ()=>ne(()=>import("./locales/kaa.json-6f7112d5.js"), []),
                "./locales/kab-KAB.json": ()=>ne(()=>import("./locales/kab-KAB.json-0710c3cf.js"), []),
                "./locales/kk-KZ.json": ()=>ne(()=>import("./locales/kk-KZ.json-8255c4ce.js"), []),
                "./locales/km-KH.json": ()=>ne(()=>import("./locales/km-KH.json-a9eceb8f.js"), []),
                "./locales/ko-KR.json": ()=>ne(()=>import("./locales/ko-KR.json-b062902a.js"), []),
                "./locales/ku-TR.json": ()=>ne(()=>import("./locales/ku-TR.json-b7e19aba.js"), []),
                "./locales/lt-LT.json": ()=>ne(()=>import("./locales/lt-LT.json-99f12306.js"), []),
                "./locales/lv-LV.json": ()=>ne(()=>import("./locales/lv-LV.json-bdef9dab.js"), []),
                "./locales/mr-IN.json": ()=>ne(()=>import("./locales/mr-IN.json-e804885d.js"), []),
                "./locales/my-MM.json": ()=>ne(()=>import("./locales/my-MM.json-ef09c8cf.js"), []),
                "./locales/nb-NO.json": ()=>ne(()=>import("./locales/nb-NO.json-ee78fa68.js"), []),
                "./locales/nl-NL.json": ()=>ne(()=>import("./locales/nl-NL.json-6c1d69b7.js"), []),
                "./locales/nn-NO.json": ()=>ne(()=>import("./locales/nn-NO.json-311e5c85.js"), []),
                "./locales/oc-FR.json": ()=>ne(()=>import("./locales/oc-FR.json-a2e43d98.js"), []),
                "./locales/pa-IN.json": ()=>ne(()=>import("./locales/pa-IN.json-b6672b07.js"), []),
                "./locales/percentages.json": ()=>ne(()=>Promise.resolve().then(()=>SL), void 0),
                "./locales/pl-PL.json": ()=>ne(()=>import("./locales/pl-PL.json-edc3c1d9.js"), []),
                "./locales/pt-BR.json": ()=>ne(()=>import("./locales/pt-BR.json-f743325f.js"), []),
                "./locales/pt-PT.json": ()=>ne(()=>import("./locales/pt-PT.json-7685b2f3.js"), []),
                "./locales/ro-RO.json": ()=>ne(()=>import("./locales/ro-RO.json-4b8919ca.js"), []),
                "./locales/ru-RU.json": ()=>ne(()=>import("./locales/ru-RU.json-168aeaa3.js"), []),
                "./locales/si-LK.json": ()=>ne(()=>import("./locales/si-LK.json-4afa51a8.js"), []),
                "./locales/sk-SK.json": ()=>ne(()=>import("./locales/sk-SK.json-f5fe7700.js"), []),
                "./locales/sl-SI.json": ()=>ne(()=>import("./locales/sl-SI.json-a24464d5.js"), []),
                "./locales/sv-SE.json": ()=>ne(()=>import("./locales/sv-SE.json-217ddac6.js"), []),
                "./locales/ta-IN.json": ()=>ne(()=>import("./locales/ta-IN.json-6c14ca50.js"), []),
                "./locales/th-TH.json": ()=>ne(()=>import("./locales/th-TH.json-c2a8e4d8.js"), []),
                "./locales/tr-TR.json": ()=>ne(()=>import("./locales/tr-TR.json-2eebdeb4.js"), []),
                "./locales/uk-UA.json": ()=>ne(()=>import("./locales/uk-UA.json-7c767b9c.js"), []),
                "./locales/vi-VN.json": ()=>ne(()=>import("./locales/vi-VN.json-f308d345.js"), []),
                "./locales/zh-CN.json": ()=>ne(()=>import("./locales/zh-CN.json-71b72b80.js"), []),
                "./locales/zh-HK.json": ()=>ne(()=>import("./locales/zh-HK.json-1dcfe927.js"), []),
                "./locales/zh-TW.json": ()=>ne(()=>import("./locales/zh-TW.json-c0d78f1f.js"), [])
            }), `./locales/${Ua.code}.json`)
        } catch (t) {
            console.error(`Failed to load language ${e.code}:`, t.message),
            Yf = Nv
        }
    Di.set(_x, e.code)
}
  , vd = ()=>Ua
  , gw = (e,t)=>{
    for (let n = 0; n < t.length; ++n) {
        const r = t[n];
        if (e[r] === void 0)
            return;
        e = e[r]
    }
    if (typeof e == "string")
        return e
}
  , _ = (e,t,n)=>{
    if (Ua.code.startsWith(wx))
        return `[[${t ? `${e}(${JSON.stringify(t).slice(1, -1)})` : e}]]`;
    const r = e.split(".");
    let i = gw(Yf, r) || gw(Nv, r) || n;
    if (i === void 0) {
        const o = `Can't find translation for ${e}`;
        return console.warn(o),
        ""
    }
    if (t)
        for (const o in t)
            i = i.replace(`{{${o}}}`, String(t[o]));
    return i
}
  , _x = un(rs.code)
  , Ot = ()=>{
    const e = G1(_x, Kt);
    return {
        t: _,
        langCode: e
    }
}
  , NL = ()=>{
    const e = new Date
      , t = e.getFullYear()
      , n = `${e.getMonth() + 1}`.padStart(2, "0")
      , r = `${e.getDate()}`.padStart(2, "0")
      , i = `${e.getHours()}`.padStart(2, "0")
      , o = `${e.getMinutes()}`.padStart(2, "0");
    return `${t}-${n}-${r}-${i}${o}`
}
  , oo = e=>e.charAt(0).toUpperCase() + e.slice(1)
  , FL = e=>e instanceof HTMLElement && e.className.includes("ToolIcon")
  , xx = e=>e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLInputElement || e instanceof HTMLTextAreaElement || e instanceof HTMLSelectElement
  , $L = e=>xx(e) || e instanceof Element && !!e.closest("label, button")
  , vs = e=>e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLTextAreaElement || e instanceof HTMLInputElement && (e.type === "text" || e.type === "number")
  , zv = ({fontFamily: e})=>{
    for (const [t,n] of Object.entries(Lr))
        if (n === e)
            return `${t}, ${ow}`;
    return ow
}
  , xt = ({fontSize: e, fontFamily: t})=>`${e}px ${zv({
    fontFamily: t
})}`
  , yl = (e,t)=>{
    let n = 0
      , r = null;
    const i = (...o)=>{
        r = o,
        clearTimeout(n),
        n = window.setTimeout(()=>{
            r = null,
            e(...o)
        }
        , t)
    }
    ;
    return i.flush = ()=>{
        if (clearTimeout(n),
        r) {
            const o = r;
            r = null,
            e(...o)
        }
    }
    ,
    i.cancel = ()=>{
        r = null,
        clearTimeout(n)
    }
    ,
    i
}
  , Hv = (e,t)=>{
    let n = null
      , r = null
      , i = null;
    const o = a=>{
        n = window.requestAnimationFrame(()=>{
            n = null,
            e(...a),
            r = null,
            i && (r = i,
            i = null,
            o(r))
        }
        )
    }
      , s = (...a)=>{
        r = a,
        n === null ? o(r) : t != null && t.trailing && (i = a)
    }
    ;
    return s.flush = ()=>{
        n !== null && (cancelAnimationFrame(n),
        n = null),
        r && (e(...i || r),
        r = i = null)
    }
    ,
    s.cancel = ()=>{
        r = i = null,
        n !== null && (cancelAnimationFrame(n),
        n = null)
    }
    ,
    s
}
  , Uv = e=>1 - Math.pow(1 - e, 4)
  , vw = (e,t,n)=>(t - e) * Uv(n) + e
  , BL = ({fromValues: e, toValues: t, onStep: n, duration: r=250, interpolateValue: i, onStart: o, onEnd: s, onCancel: a})=>{
    let l = !1, c = 0, u;
    function d(f) {
        if (l)
            return;
        u === void 0 && (u = f,
        o == null || o());
        const h = Math.min(f - u, r)
          , m = Uv(h / r)
          , g = {};
        if (Object.keys(e).forEach(E=>{
            const v = E
              , y = (t[v] - e[v]) * m + e[v];
            g[v] = y
        }
        ),
        n(g),
        h < r) {
            const E = h / r
              , v = {};
            Object.keys(e).forEach(y=>{
                const w = y
                  , b = e[w]
                  , I = t[w];
                let S;
                S = i ? i(b, I, E, w) : vw(b, I, E),
                S == null && (S = vw(b, I, E)),
                v[w] = S
            }
            ),
            n(v),
            c = window.requestAnimationFrame(d)
        } else
            n(t),
            s == null || s()
    }
    return c = window.requestAnimationFrame(d),
    ()=>{
        a == null || a(),
        l = !0,
        window.cancelAnimationFrame(c)
    }
}
  , zL = (e,t)=>{
    if (!e.length || t < 1)
        return [];
    let n = 0
      , r = 0;
    const i = Array(Math.ceil(e.length / t));
    for (; n < e.length; )
        i[r++] = e.slice(n, n += t);
    return i
}
  , on = (e,t)=>Math.abs(e - t)
  , Ct = (e,t)=>t.type === "custom" ? {
    ...e.activeTool,
    type: "custom",
    customType: t.customType
} : {
    ...e.activeTool,
    lastActiveTool: t.lastActiveToolBeforeEraser === void 0 ? e.activeTool.lastActiveTool : t.lastActiveToolBeforeEraser,
    type: t.type,
    customType: null
}
  , dp = ()=>{
    var e;
    return ((e = document.fullscreenElement) == null ? void 0 : e.nodeName) === "HTML"
}
  , HL = ()=>document.documentElement.requestFullscreen()
  , UL = ()=>document.exitFullscreen()
  , j = e=>(e = e.replace(/\bAlt\b/i, "Alt").replace(/\bShift\b/i, "Shift").replace(/\b(Enter|Return)\b/i, "Enter"),
ui ? e.replace(/\bCtrlOrCmd\b/gi, "Cmd").replace(/\bAlt\b/i, "Option") : e.replace(/\bCtrlOrCmd\b/gi, "Ctrl"))
  , Ke = ({clientX: e, clientY: t},{zoom: n, offsetLeft: r, offsetTop: i, scrollX: o, scrollY: s})=>{
    const a = (e - r) / n.value - o
      , l = (t - i) / n.value - s;
    return {
        x: a,
        y: l
    }
}
  , Cr = ({sceneX: e, sceneY: t},{zoom: n, offsetLeft: r, offsetTop: i, scrollX: o, scrollY: s})=>{
    const a = (e + o) * n.value + r
      , l = (t + s) * n.value + i;
    return {
        x: a,
        y: l
    }
}
  , sf = e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`)
  , VL = "A-Za-z--------"
  , WL = "---"
  , GL = new RegExp(`^[^${VL}]*[${WL}]`)
  , Ix = e=>GL.test(e)
  , bo = e=>{
    const [t,n] = e;
    return {
        x: t,
        y: n
    }
}
  , Sx = e=>{
    if ((e == null ? void 0 : e.name) === "AbortError") {
        console.warn(e);
        return
    }
    throw e
}
  , jL = (e,t,n=0)=>{
    n < 0 && (n = e.length + n),
    n = Math.min(e.length, Math.max(n, 0));
    let r = n - 1;
    for (; ++r < e.length; )
        if (t(e[r], r, e))
            return r;
    return -1
}
  , YL = (e,t,n=e.length - 1)=>{
    n < 0 && (n = e.length + n),
    n = Math.min(e.length - 1, Math.max(n, 0));
    let r = n + 1;
    for (; --r > -1; )
        if (t(e[r], r, e))
            return r;
    return -1
}
  , Ys = e=>{
    const t = e.length === 5 && e.substr(4, 1) === "0"
      , n = e.length === 9 && e.substr(7, 2) === "00";
    return t || n || e === ge.transparent
}
  , Vv = ()=>{
    let e, t;
    const n = new Promise((r,i)=>{
        e = r,
        t = i
    }
    );
    return n.resolve = e,
    n.reject = t,
    n
}
  , Ze = e=>t=>{
    Vn.unstable_batchedUpdates(e, t)
}
  , fp = e=>Hv(t=>{
    Vn.unstable_batchedUpdates(e, t)
}
)
  , yw = (e,t)=>{
    const n = [{
        value: 1,
        symbol: "b"
    }, {
        value: 1e3,
        symbol: "k"
    }, {
        value: 1e6,
        symbol: "M"
    }, {
        value: 1e9,
        symbol: "G"
    }]
      , r = /\.0+$|(\.[0-9]*[1-9])0+$/;
    let i;
    for (i = n.length - 1; i > 0 && !(e >= n[i].value); i--)
        ;
    return (e / n[i].value).toFixed(t).replace(r, "$1") + n[i].symbol
}
  , hg = ()=>{
    var e;
    return ((e = document.querySelector('meta[name="version"]')) == null ? void 0 : e.content) || $8
}
  , ZL = e=>{
    let t = e.parentElement;
    for (; t; ) {
        if (t === document.body)
            return document;
        const {overflowY: n} = window.getComputedStyle(t);
        if (t.scrollHeight > t.clientHeight && (n === "auto" || n === "scroll" || n === "overlay"))
            return t;
        t = t.parentElement
    }
    return document
}
  , KL = e=>{
    let t = e.parentElement;
    for (; t; ) {
        if (t.tabIndex > -1) {
            t.focus();
            return
        }
        t = t.parentElement
    }
}
  , Cx = e=>{
    e.preventDefault(),
    e.returnValue = ""
}
  , kx = e=>Array.from(e).map(t=>`0 ${t.toString(16)}`.slice(-2)).join("")
  , Dl = ()=>Date.now()
  , Rt = e=>e.reduce((t,n)=>(t.set(typeof n == "string" ? n : n.id, n),
t), new Map)
  , Tx = e=>e.reduce((t,n,r)=>(t.set(n.id, [n, r]),
t), new Map)
  , XL = ()=>!1
  , Mx = (e,t)=>new CustomEvent(e,{
    detail: {
        nativeEvent: t
    },
    cancelable: !0
})
  , Zf = (e,t)=>{
    let n = !1;
    for (const r in t) {
        const i = t[r];
        if (typeof i < "u") {
            if (e[r] === i && (typeof i != "object" || i === null))
                continue;
            n = !0
        }
    }
    return n ? {
        ...e,
        ...t
    } : e
}
  , yd = ()=>{
    try {
        return window.self === window.top ? "top" : "iframe"
    } catch {
        return "iframe"
    }
}
  , qL = ()=>yd() === "iframe"
  , QL = e=>!!e && typeof e == "object" && "then"in e && "catch"in e && "finally"in e
  , pg = e=>{
    const t = e == null ? void 0 : e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");
    return t ? Array.from(t).filter(n=>n.tabIndex > -1 && !n.disabled) : []
}
  , Tr = (e,t,n,r=!1)=>{
    const i = Object.keys(e)
      , o = Object.keys(t);
    return i.length !== o.length ? !1 : i.every(s=>{
        const a = n == null ? void 0 : n[s]
          , l = a ? a(e[s], t[s]) : e[s] === t[s];
        return !l && r && console.info(`%cisShallowEqual: ${s} not equal ->`, "color: #8B4000", e[s], t[s]),
        l
    }
    )
}
  , j1 = (e,t,{checkForDefaultPrevented: n=!0}={})=>function(i) {
    if (e == null || e(i),
    !n || !i.defaultPrevented)
        return t == null ? void 0 : t(i)
}
  , Nu = e=>{
    const t = e.filter(n=>n.type === "frame");
    return t.length === 1 && e.every(n=>n.type === "frame" || n.frameId === t[0].id)
}
  , zh = (e,t,n)=>{
    if (n)
        return console.error(t),
        e;
    throw new Error(t)
}
  , JL = e=>{
    let t, n;
    const r = function(i) {
        const o = Object.entries(i);
        if (t) {
            let a = !0;
            for (const [l,c] of o)
                if (t.get(l) !== c) {
                    a = !1;
                    break
                }
            if (a)
                return n
        }
        const s = e(i);
        return t = new Map(o),
        n = s,
        s
    };
    return r.clear = ()=>{
        t = void 0,
        n = void 0
    }
    ,
    r
}
  , Ax = (()=>{
    let e;
    try {
        const n = ee.version.split(".");
        e = Number(n[0]) > 17
    } catch {
        e = !1
    }
    let t = !1;
    return ()=>window.EXCALIDRAW_THROTTLE_RENDER === !0 ? e ? !0 : (t || (t = !0,
    console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),
    !1) : !1
}
)()
  , eP = Ov.includes(devicePixelRatio) ? devicePixelRatio : 1
  , di = ()=>({
    showWelcomeScreen: !1,
    theme: $t.LIGHT,
    collaborators: new Map,
    currentChartType: "bar",
    currentItemBackgroundColor: at.backgroundColor,
    currentItemEndArrowhead: "arrow",
    currentItemFillStyle: at.fillStyle,
    currentItemFontFamily: Xi,
    currentItemFontSize: Ki,
    currentItemOpacity: at.opacity,
    currentItemRoughness: at.roughness,
    currentItemStartArrowhead: null,
    currentItemStrokeColor: at.strokeColor,
    currentItemRoundness: "round",
    currentItemStrokeStyle: at.strokeStyle,
    currentItemStrokeWidth: at.strokeWidth,
    currentItemTextAlign: V1,
    cursorButton: "up",
    activeEmbeddable: null,
    draggingElement: null,
    editingElement: null,
    editingGroupId: null,
    editingLinearElement: null,
    activeTool: {
        type: "selection",
        customType: null,
        locked: at.locked,
        lastActiveTool: null
    },
    penMode: !1,
    penDetected: !1,
    errorMessage: null,
    exportBackground: !0,
    exportScale: eP,
    exportEmbedScene: !1,
    exportWithDarkMode: !1,
    fileHandle: null,
    gridSize: null,
    isBindingEnabled: !0,
    defaultSidebarDockedPreference: !1,
    isLoading: !1,
    isResizing: !1,
    isRotating: !1,
    lastPointerDownWith: "mouse",
    multiElement: null,
    name: `${_("labels.untitled")}-${NL()}`,
    contextMenu: null,
    openMenu: null,
    openPopup: null,
    openSidebar: null,
    openDialog: null,
    pasteDialog: {
        shown: !1,
        data: null
    },
    previousSelectedElementIds: {},
    resizingElement: null,
    scrolledOutside: !1,
    scrollX: 0,
    scrollY: 0,
    selectedElementIds: {},
    selectedGroupIds: {},
    selectedElementsAreBeingDragged: !1,
    selectionElement: null,
    shouldCacheIgnoreZoom: !1,
    showStats: !1,
    startBoundElement: null,
    suggestedBindings: [],
    frameRendering: {
        enabled: !0,
        clip: !0,
        name: !0,
        outline: !0
    },
    frameToHighlight: null,
    editingFrame: null,
    elementsToHighlight: null,
    toast: null,
    viewBackgroundColor: ge.white,
    zenModeEnabled: !1,
    zoom: {
        value: 1
    },
    viewModeEnabled: !1,
    pendingImageElementId: null,
    showHyperlinkPopup: !1,
    selectedLinearElement: null,
    snapLines: [],
    originSnapOffset: {
        x: 0,
        y: 0
    },
    objectsSnapModeEnabled: !1
})
  , tP = (e=>e)({
    showWelcomeScreen: {
        browser: !0,
        export: !1,
        server: !1
    },
    theme: {
        browser: !0,
        export: !1,
        server: !1
    },
    collaborators: {
        browser: !1,
        export: !1,
        server: !1
    },
    currentChartType: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemBackgroundColor: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemEndArrowhead: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemFillStyle: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemFontFamily: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemFontSize: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemRoundness: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemOpacity: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemRoughness: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStartArrowhead: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStrokeColor: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStrokeStyle: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStrokeWidth: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemTextAlign: {
        browser: !0,
        export: !1,
        server: !1
    },
    cursorButton: {
        browser: !0,
        export: !1,
        server: !1
    },
    activeEmbeddable: {
        browser: !1,
        export: !1,
        server: !1
    },
    draggingElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    editingElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    editingGroupId: {
        browser: !0,
        export: !1,
        server: !1
    },
    editingLinearElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    activeTool: {
        browser: !0,
        export: !1,
        server: !1
    },
    penMode: {
        browser: !0,
        export: !1,
        server: !1
    },
    penDetected: {
        browser: !0,
        export: !1,
        server: !1
    },
    errorMessage: {
        browser: !1,
        export: !1,
        server: !1
    },
    exportBackground: {
        browser: !0,
        export: !1,
        server: !1
    },
    exportEmbedScene: {
        browser: !0,
        export: !1,
        server: !1
    },
    exportScale: {
        browser: !0,
        export: !1,
        server: !1
    },
    exportWithDarkMode: {
        browser: !0,
        export: !1,
        server: !1
    },
    fileHandle: {
        browser: !1,
        export: !1,
        server: !1
    },
    gridSize: {
        browser: !0,
        export: !0,
        server: !0
    },
    height: {
        browser: !1,
        export: !1,
        server: !1
    },
    isBindingEnabled: {
        browser: !1,
        export: !1,
        server: !1
    },
    defaultSidebarDockedPreference: {
        browser: !0,
        export: !1,
        server: !1
    },
    isLoading: {
        browser: !1,
        export: !1,
        server: !1
    },
    isResizing: {
        browser: !1,
        export: !1,
        server: !1
    },
    isRotating: {
        browser: !1,
        export: !1,
        server: !1
    },
    lastPointerDownWith: {
        browser: !0,
        export: !1,
        server: !1
    },
    multiElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    name: {
        browser: !0,
        export: !1,
        server: !1
    },
    offsetLeft: {
        browser: !1,
        export: !1,
        server: !1
    },
    offsetTop: {
        browser: !1,
        export: !1,
        server: !1
    },
    contextMenu: {
        browser: !1,
        export: !1,
        server: !1
    },
    openMenu: {
        browser: !0,
        export: !1,
        server: !1
    },
    openPopup: {
        browser: !1,
        export: !1,
        server: !1
    },
    openSidebar: {
        browser: !0,
        export: !1,
        server: !1
    },
    openDialog: {
        browser: !1,
        export: !1,
        server: !1
    },
    pasteDialog: {
        browser: !1,
        export: !1,
        server: !1
    },
    previousSelectedElementIds: {
        browser: !0,
        export: !1,
        server: !1
    },
    resizingElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    scrolledOutside: {
        browser: !0,
        export: !1,
        server: !1
    },
    scrollX: {
        browser: !0,
        export: !1,
        server: !1
    },
    scrollY: {
        browser: !0,
        export: !1,
        server: !1
    },
    selectedElementIds: {
        browser: !0,
        export: !1,
        server: !1
    },
    selectedGroupIds: {
        browser: !0,
        export: !1,
        server: !1
    },
    selectedElementsAreBeingDragged: {
        browser: !1,
        export: !1,
        server: !1
    },
    selectionElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    shouldCacheIgnoreZoom: {
        browser: !0,
        export: !1,
        server: !1
    },
    showStats: {
        browser: !0,
        export: !1,
        server: !1
    },
    startBoundElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    suggestedBindings: {
        browser: !1,
        export: !1,
        server: !1
    },
    frameRendering: {
        browser: !1,
        export: !1,
        server: !1
    },
    frameToHighlight: {
        browser: !1,
        export: !1,
        server: !1
    },
    editingFrame: {
        browser: !1,
        export: !1,
        server: !1
    },
    elementsToHighlight: {
        browser: !1,
        export: !1,
        server: !1
    },
    toast: {
        browser: !1,
        export: !1,
        server: !1
    },
    viewBackgroundColor: {
        browser: !0,
        export: !0,
        server: !0
    },
    width: {
        browser: !1,
        export: !1,
        server: !1
    },
    zenModeEnabled: {
        browser: !0,
        export: !1,
        server: !1
    },
    zoom: {
        browser: !0,
        export: !1,
        server: !1
    },
    viewModeEnabled: {
        browser: !1,
        export: !1,
        server: !1
    },
    pendingImageElementId: {
        browser: !1,
        export: !1,
        server: !1
    },
    showHyperlinkPopup: {
        browser: !1,
        export: !1,
        server: !1
    },
    selectedLinearElement: {
        browser: !0,
        export: !1,
        server: !1
    },
    snapLines: {
        browser: !1,
        export: !1,
        server: !1
    },
    originSnapOffset: {
        browser: !1,
        export: !1,
        server: !1
    },
    objectsSnapModeEnabled: {
        browser: !0,
        export: !1,
        server: !1
    }
})
  , Wv = (e,t)=>{
    const n = {};
    for (const r of Object.keys(e)) {
        const i = tP[r];
        if (i != null && i[t]) {
            const o = e[r];
            n[r] = o
        }
    }
    return n
}
  , Lx = e=>Wv(e, "browser")
  , Px = e=>Wv(e, "export")
  , nP = e=>Wv(e, "server")
  , Cs = ({activeTool: e})=>e.type === "eraser"
  , El = ({activeTool: e})=>e.type === "hand";
function Rx(e) {
    var t, n, r = "";
    if (typeof e == "string" || typeof e == "number")
        r += e;
    else if (typeof e == "object")
        if (Array.isArray(e))
            for (t = 0; t < e.length; t++)
                e[t] && (n = Rx(e[t])) && (r && (r += " "),
                r += n);
        else
            for (t in e)
                e[t] && (r && (r += " "),
                r += t);
    return r
}
function le() {
    for (var e = 0, t, n, r = ""; e < arguments.length; )
        (t = arguments[e++]) && (n = Rx(t)) && (r && (r += " "),
        r += n);
    return r
}
const Ox = ()=>{
    const [e,t] = x.useState(null)
      , n = x.useCallback(r=>t(r), []);
    return [e, n]
}
;
function mg(e, t, n) {
    if (e && e.length) {
        const [r,i] = t
          , o = Math.PI / 180 * n
          , s = Math.cos(o)
          , a = Math.sin(o);
        e.forEach(l=>{
            const [c,u] = l;
            l[0] = (c - r) * s - (u - i) * a + r,
            l[1] = (c - r) * a + (u - i) * s + i
        }
        )
    }
}
function rP(e, t, n) {
    const r = [];
    e.forEach(i=>r.push(...i)),
    mg(r, t, n)
}
function Y1(e) {
    const t = e[0]
      , n = e[1];
    return Math.sqrt(Math.pow(t[0] - n[0], 2) + Math.pow(t[1] - n[1], 2))
}
function Ed(e, t) {
    const n = t.hachureAngle + 90;
    let r = t.hachureGap;
    r < 0 && (r = t.strokeWidth * 4),
    r = Math.max(r, .1);
    const i = [0, 0];
    if (n)
        for (const s of e)
            mg(s, i, n);
    const o = iP(e, r);
    if (n) {
        for (const s of e)
            mg(s, i, -n);
        rP(o, i, -n)
    }
    return o
}
function iP(e, t) {
    const n = [];
    for (const a of e) {
        const l = [...a];
        l[0].join(",") !== l[l.length - 1].join(",") && l.push([l[0][0], l[0][1]]),
        l.length > 2 && n.push(l)
    }
    const r = [];
    t = Math.max(t, .1);
    const i = [];
    for (const a of n)
        for (let l = 0; l < a.length - 1; l++) {
            const c = a[l]
              , u = a[l + 1];
            if (c[1] !== u[1]) {
                const d = Math.min(c[1], u[1]);
                i.push({
                    ymin: d,
                    ymax: Math.max(c[1], u[1]),
                    x: d === c[1] ? c[0] : u[0],
                    islope: (u[0] - c[0]) / (u[1] - c[1])
                })
            }
        }
    if (i.sort((a,l)=>a.ymin < l.ymin ? -1 : a.ymin > l.ymin ? 1 : a.x < l.x ? -1 : a.x > l.x ? 1 : a.ymax === l.ymax ? 0 : (a.ymax - l.ymax) / Math.abs(a.ymax - l.ymax)),
    !i.length)
        return r;
    let o = []
      , s = i[0].ymin;
    for (; o.length || i.length; ) {
        if (i.length) {
            let a = -1;
            for (let c = 0; c < i.length && !(i[c].ymin > s); c++)
                a = c;
            i.splice(0, a + 1).forEach(c=>{
                o.push({
                    s,
                    edge: c
                })
            }
            )
        }
        if (o = o.filter(a=>!(a.edge.ymax <= s)),
        o.sort((a,l)=>a.edge.x === l.edge.x ? 0 : (a.edge.x - l.edge.x) / Math.abs(a.edge.x - l.edge.x)),
        o.length > 1)
            for (let a = 0; a < o.length; a = a + 2) {
                const l = a + 1;
                if (l >= o.length)
                    break;
                const c = o[a].edge
                  , u = o[l].edge;
                r.push([[Math.round(c.x), s], [Math.round(u.x), s]])
            }
        s += t,
        o.forEach(a=>{
            a.edge.x = a.edge.x + t * a.edge.islope
        }
        )
    }
    return r
}
class Gv {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        return this._fillPolygons(t, n)
    }
    _fillPolygons(t, n) {
        const r = Ed(t, n);
        return {
            type: "fillSketch",
            ops: this.renderLines(r, n)
        }
    }
    renderLines(t, n) {
        const r = [];
        for (const i of t)
            r.push(...this.helper.doubleLineOps(i[0][0], i[0][1], i[1][0], i[1][1], n));
        return r
    }
}
class oP extends Gv {
    fillPolygons(t, n) {
        let r = n.hachureGap;
        r < 0 && (r = n.strokeWidth * 4),
        r = Math.max(r, .1);
        const i = Object.assign({}, n, {
            hachureGap: r
        })
          , o = Ed(t, i)
          , s = Math.PI / 180 * n.hachureAngle
          , a = []
          , l = r * .5 * Math.cos(s)
          , c = r * .5 * Math.sin(s);
        for (const [d,f] of o)
            Y1([d, f]) && a.push([[d[0] - l, d[1] + c], [...f]], [[d[0] + l, d[1] - c], [...f]]);
        return {
            type: "fillSketch",
            ops: this.renderLines(a, n)
        }
    }
}
class sP extends Gv {
    fillPolygons(t, n) {
        const r = this._fillPolygons(t, n)
          , i = Object.assign({}, n, {
            hachureAngle: n.hachureAngle + 90
        })
          , o = this._fillPolygons(t, i);
        return r.ops = r.ops.concat(o.ops),
        r
    }
}
class aP {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        n = Object.assign({}, n, {
            hachureAngle: 0
        });
        const r = Ed(t, n);
        return this.dotsOnLines(r, n)
    }
    dotsOnLines(t, n) {
        const r = [];
        let i = n.hachureGap;
        i < 0 && (i = n.strokeWidth * 4),
        i = Math.max(i, .1);
        let o = n.fillWeight;
        o < 0 && (o = n.strokeWidth / 2);
        const s = i / 4;
        for (const a of t) {
            const l = Y1(a)
              , c = l / i
              , u = Math.ceil(c) - 1
              , d = l - u * i
              , f = (a[0][0] + a[1][0]) / 2 - i / 4
              , h = Math.min(a[0][1], a[1][1]);
            for (let m = 0; m < u; m++) {
                const g = h + d + m * i
                  , E = f - s + Math.random() * 2 * s
                  , v = g - s + Math.random() * 2 * s
                  , y = this.helper.ellipse(E, v, o, o, n);
                r.push(...y.ops)
            }
        }
        return {
            type: "fillSketch",
            ops: r
        }
    }
}
class lP {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        const r = Ed(t, n);
        return {
            type: "fillSketch",
            ops: this.dashedLine(r, n)
        }
    }
    dashedLine(t, n) {
        const r = n.dashOffset < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashOffset
          , i = n.dashGap < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashGap
          , o = [];
        return t.forEach(s=>{
            const a = Y1(s)
              , l = Math.floor(a / (r + i))
              , c = (a + i - l * (r + i)) / 2;
            let u = s[0]
              , d = s[1];
            u[0] > d[0] && (u = s[1],
            d = s[0]);
            const f = Math.atan((d[1] - u[1]) / (d[0] - u[0]));
            for (let h = 0; h < l; h++) {
                const m = h * (r + i)
                  , g = m + r
                  , E = [u[0] + m * Math.cos(f) + c * Math.cos(f), u[1] + m * Math.sin(f) + c * Math.sin(f)]
                  , v = [u[0] + g * Math.cos(f) + c * Math.cos(f), u[1] + g * Math.sin(f) + c * Math.sin(f)];
                o.push(...this.helper.doubleLineOps(E[0], E[1], v[0], v[1], n))
            }
        }
        ),
        o
    }
}
class cP {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        const r = n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap
          , i = n.zigzagOffset < 0 ? r : n.zigzagOffset;
        n = Object.assign({}, n, {
            hachureGap: r + i
        });
        const o = Ed(t, n);
        return {
            type: "fillSketch",
            ops: this.zigzagLines(o, i, n)
        }
    }
    zigzagLines(t, n, r) {
        const i = [];
        return t.forEach(o=>{
            const s = Y1(o)
              , a = Math.round(s / (2 * n));
            let l = o[0]
              , c = o[1];
            l[0] > c[0] && (l = o[1],
            c = o[0]);
            const u = Math.atan((c[1] - l[1]) / (c[0] - l[0]));
            for (let d = 0; d < a; d++) {
                const f = d * 2 * n
                  , h = (d + 1) * 2 * n
                  , m = Math.sqrt(2 * Math.pow(n, 2))
                  , g = [l[0] + f * Math.cos(u), l[1] + f * Math.sin(u)]
                  , E = [l[0] + h * Math.cos(u), l[1] + h * Math.sin(u)]
                  , v = [g[0] + m * Math.cos(u + Math.PI / 4), g[1] + m * Math.sin(u + Math.PI / 4)];
                i.push(...this.helper.doubleLineOps(g[0], g[1], v[0], v[1], r), ...this.helper.doubleLineOps(v[0], v[1], E[0], E[1], r))
            }
        }
        ),
        i
    }
}
const xn = {};
function uP(e, t) {
    let n = e.fillStyle || "hachure";
    if (!xn[n])
        switch (n) {
        case "zigzag":
            xn[n] || (xn[n] = new oP(t));
            break;
        case "cross-hatch":
            xn[n] || (xn[n] = new sP(t));
            break;
        case "dots":
            xn[n] || (xn[n] = new aP(t));
            break;
        case "dashed":
            xn[n] || (xn[n] = new lP(t));
            break;
        case "zigzag-line":
            xn[n] || (xn[n] = new cP(t));
            break;
        case "hachure":
        default:
            n = "hachure",
            xn[n] || (xn[n] = new Gv(t));
            break
        }
    return xn[n]
}
function dP() {
    return Math.floor(Math.random() * 2 ** 31)
}
class Dx {
    constructor(t) {
        this.seed = t
    }
    next() {
        return this.seed ? (2 ** 31 - 1 & (this.seed = Math.imul(48271, this.seed))) / 2 ** 31 : Math.random()
    }
}
const fP = 0
  , gg = 1
  , Nx = 2
  , af = {
    A: 7,
    a: 7,
    C: 6,
    c: 6,
    H: 1,
    h: 1,
    L: 2,
    l: 2,
    M: 2,
    m: 2,
    Q: 4,
    q: 4,
    S: 4,
    s: 4,
    T: 2,
    t: 2,
    V: 1,
    v: 1,
    Z: 0,
    z: 0
};
function hP(e) {
    const t = new Array;
    for (; e !== ""; )
        if (e.match(/^([ \t\r\n,]+)/))
            e = e.substr(RegExp.$1.length);
        else if (e.match(/^([aAcChHlLmMqQsStTvVzZ])/))
            t[t.length] = {
                type: fP,
                text: RegExp.$1
            },
            e = e.substr(RegExp.$1.length);
        else if (e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))
            t[t.length] = {
                type: gg,
                text: `${parseFloat(RegExp.$1)}`
            },
            e = e.substr(RegExp.$1.length);
        else
            return [];
    return t[t.length] = {
        type: Nx,
        text: ""
    },
    t
}
function hp(e, t) {
    return e.type === t
}
function jv(e) {
    const t = []
      , n = hP(e);
    let r = "BOD"
      , i = 0
      , o = n[i];
    for (; !hp(o, Nx); ) {
        let s = 0;
        const a = [];
        if (r === "BOD")
            if (o.text === "M" || o.text === "m")
                i++,
                s = af[o.text],
                r = o.text;
            else
                return jv("M0,0" + e);
        else
            hp(o, gg) ? s = af[r] : (i++,
            s = af[o.text],
            r = o.text);
        if (i + s < n.length) {
            for (let l = i; l < i + s; l++) {
                const c = n[l];
                if (hp(c, gg))
                    a[a.length] = +c.text;
                else
                    throw new Error("Param not a number: " + r + "," + c.text)
            }
            if (typeof af[r] == "number") {
                const l = {
                    key: r,
                    data: a
                };
                t.push(l),
                i += s,
                o = n[i],
                r === "M" && (r = "L"),
                r === "m" && (r = "l")
            } else
                throw new Error("Bad segment: " + r)
        } else
            throw new Error("Path data ended short")
    }
    return t
}
function Fx(e) {
    let t = 0
      , n = 0
      , r = 0
      , i = 0;
    const o = [];
    for (const {key: s, data: a} of e)
        switch (s) {
        case "M":
            o.push({
                key: "M",
                data: [...a]
            }),
            [t,n] = a,
            [r,i] = a;
            break;
        case "m":
            t += a[0],
            n += a[1],
            o.push({
                key: "M",
                data: [t, n]
            }),
            r = t,
            i = n;
            break;
        case "L":
            o.push({
                key: "L",
                data: [...a]
            }),
            [t,n] = a;
            break;
        case "l":
            t += a[0],
            n += a[1],
            o.push({
                key: "L",
                data: [t, n]
            });
            break;
        case "C":
            o.push({
                key: "C",
                data: [...a]
            }),
            t = a[4],
            n = a[5];
            break;
        case "c":
            {
                const l = a.map((c,u)=>u % 2 ? c + n : c + t);
                o.push({
                    key: "C",
                    data: l
                }),
                t = l[4],
                n = l[5];
                break
            }
        case "Q":
            o.push({
                key: "Q",
                data: [...a]
            }),
            t = a[2],
            n = a[3];
            break;
        case "q":
            {
                const l = a.map((c,u)=>u % 2 ? c + n : c + t);
                o.push({
                    key: "Q",
                    data: l
                }),
                t = l[2],
                n = l[3];
                break
            }
        case "A":
            o.push({
                key: "A",
                data: [...a]
            }),
            t = a[5],
            n = a[6];
            break;
        case "a":
            t += a[5],
            n += a[6],
            o.push({
                key: "A",
                data: [a[0], a[1], a[2], a[3], a[4], t, n]
            });
            break;
        case "H":
            o.push({
                key: "H",
                data: [...a]
            }),
            t = a[0];
            break;
        case "h":
            t += a[0],
            o.push({
                key: "H",
                data: [t]
            });
            break;
        case "V":
            o.push({
                key: "V",
                data: [...a]
            }),
            n = a[0];
            break;
        case "v":
            n += a[0],
            o.push({
                key: "V",
                data: [n]
            });
            break;
        case "S":
            o.push({
                key: "S",
                data: [...a]
            }),
            t = a[2],
            n = a[3];
            break;
        case "s":
            {
                const l = a.map((c,u)=>u % 2 ? c + n : c + t);
                o.push({
                    key: "S",
                    data: l
                }),
                t = l[2],
                n = l[3];
                break
            }
        case "T":
            o.push({
                key: "T",
                data: [...a]
            }),
            t = a[0],
            n = a[1];
            break;
        case "t":
            t += a[0],
            n += a[1],
            o.push({
                key: "T",
                data: [t, n]
            });
            break;
        case "Z":
        case "z":
            o.push({
                key: "Z",
                data: []
            }),
            t = r,
            n = i;
            break
        }
    return o
}
function $x(e) {
    const t = [];
    let n = ""
      , r = 0
      , i = 0
      , o = 0
      , s = 0
      , a = 0
      , l = 0;
    for (const {key: c, data: u} of e) {
        switch (c) {
        case "M":
            t.push({
                key: "M",
                data: [...u]
            }),
            [r,i] = u,
            [o,s] = u;
            break;
        case "C":
            t.push({
                key: "C",
                data: [...u]
            }),
            r = u[4],
            i = u[5],
            a = u[2],
            l = u[3];
            break;
        case "L":
            t.push({
                key: "L",
                data: [...u]
            }),
            [r,i] = u;
            break;
        case "H":
            r = u[0],
            t.push({
                key: "L",
                data: [r, i]
            });
            break;
        case "V":
            i = u[0],
            t.push({
                key: "L",
                data: [r, i]
            });
            break;
        case "S":
            {
                let d = 0
                  , f = 0;
                n === "C" || n === "S" ? (d = r + (r - a),
                f = i + (i - l)) : (d = r,
                f = i),
                t.push({
                    key: "C",
                    data: [d, f, ...u]
                }),
                a = u[0],
                l = u[1],
                r = u[2],
                i = u[3];
                break
            }
        case "T":
            {
                const [d,f] = u;
                let h = 0
                  , m = 0;
                n === "Q" || n === "T" ? (h = r + (r - a),
                m = i + (i - l)) : (h = r,
                m = i);
                const g = r + 2 * (h - r) / 3
                  , E = i + 2 * (m - i) / 3
                  , v = d + 2 * (h - d) / 3
                  , y = f + 2 * (m - f) / 3;
                t.push({
                    key: "C",
                    data: [g, E, v, y, d, f]
                }),
                a = h,
                l = m,
                r = d,
                i = f;
                break
            }
        case "Q":
            {
                const [d,f,h,m] = u
                  , g = r + 2 * (d - r) / 3
                  , E = i + 2 * (f - i) / 3
                  , v = h + 2 * (d - h) / 3
                  , y = m + 2 * (f - m) / 3;
                t.push({
                    key: "C",
                    data: [g, E, v, y, h, m]
                }),
                a = d,
                l = f,
                r = h,
                i = m;
                break
            }
        case "A":
            {
                const d = Math.abs(u[0])
                  , f = Math.abs(u[1])
                  , h = u[2]
                  , m = u[3]
                  , g = u[4]
                  , E = u[5]
                  , v = u[6];
                d === 0 || f === 0 ? (t.push({
                    key: "C",
                    data: [r, i, E, v, E, v]
                }),
                r = E,
                i = v) : (r !== E || i !== v) && (Bx(r, i, E, v, d, f, h, m, g).forEach(function(w) {
                    t.push({
                        key: "C",
                        data: w
                    })
                }),
                r = E,
                i = v);
                break
            }
        case "Z":
            t.push({
                key: "Z",
                data: []
            }),
            r = o,
            i = s;
            break
        }
        n = c
    }
    return t
}
function pP(e) {
    return Math.PI * e / 180
}
function dc(e, t, n) {
    const r = e * Math.cos(n) - t * Math.sin(n)
      , i = e * Math.sin(n) + t * Math.cos(n);
    return [r, i]
}
function Bx(e, t, n, r, i, o, s, a, l, c) {
    const u = pP(s);
    let d = []
      , f = 0
      , h = 0
      , m = 0
      , g = 0;
    if (c)
        [f,h,m,g] = c;
    else {
        [e,t] = dc(e, t, -u),
        [n,r] = dc(n, r, -u);
        const O = (e - n) / 2
          , N = (t - r) / 2;
        let $ = O * O / (i * i) + N * N / (o * o);
        $ > 1 && ($ = Math.sqrt($),
        i = $ * i,
        o = $ * o);
        const V = a === l ? -1 : 1
          , te = i * i
          , Z = o * o
          , z = te * Z - te * N * N - Z * O * O
          , W = te * N * N + Z * O * O
          , D = V * Math.sqrt(Math.abs(z / W));
        m = D * i * N / o + (e + n) / 2,
        g = D * -o * O / i + (t + r) / 2,
        f = Math.asin(parseFloat(((t - g) / o).toFixed(9))),
        h = Math.asin(parseFloat(((r - g) / o).toFixed(9))),
        e < m && (f = Math.PI - f),
        n < m && (h = Math.PI - h),
        f < 0 && (f = Math.PI * 2 + f),
        h < 0 && (h = Math.PI * 2 + h),
        l && f > h && (f = f - Math.PI * 2),
        !l && h > f && (h = h - Math.PI * 2)
    }
    let E = h - f;
    if (Math.abs(E) > Math.PI * 120 / 180) {
        const O = h
          , N = n
          , $ = r;
        l && h > f ? h = f + Math.PI * 120 / 180 * 1 : h = f + Math.PI * 120 / 180 * -1,
        n = m + i * Math.cos(h),
        r = g + o * Math.sin(h),
        d = Bx(n, r, N, $, i, o, s, 0, l, [h, O, m, g])
    }
    E = h - f;
    const v = Math.cos(f)
      , y = Math.sin(f)
      , w = Math.cos(h)
      , b = Math.sin(h)
      , I = Math.tan(E / 4)
      , S = 4 / 3 * i * I
      , C = 4 / 3 * o * I
      , T = [e, t]
      , L = [e + S * y, t - C * v]
      , A = [n + S * b, r - C * w]
      , P = [n, r];
    if (L[0] = 2 * T[0] - L[0],
    L[1] = 2 * T[1] - L[1],
    c)
        return [L, A, P].concat(d);
    {
        d = [L, A, P].concat(d);
        const O = [];
        for (let N = 0; N < d.length; N += 3) {
            const $ = dc(d[N][0], d[N][1], u)
              , V = dc(d[N + 1][0], d[N + 1][1], u)
              , te = dc(d[N + 2][0], d[N + 2][1], u);
            O.push([$[0], $[1], V[0], V[1], te[0], te[1]])
        }
        return O
    }
}
const mP = {
    randOffset: _P,
    randOffsetWithRange: xP,
    ellipse: EP,
    doubleLineOps: IP
};
function zx(e, t, n, r, i) {
    return {
        type: "path",
        ops: Gi(e, t, n, r, i)
    }
}
function Kf(e, t, n) {
    const r = (e || []).length;
    if (r > 2) {
        const i = [];
        for (let o = 0; o < r - 1; o++)
            i.push(...Gi(e[o][0], e[o][1], e[o + 1][0], e[o + 1][1], n));
        return t && i.push(...Gi(e[r - 1][0], e[r - 1][1], e[0][0], e[0][1], n)),
        {
            type: "path",
            ops: i
        }
    } else if (r === 2)
        return zx(e[0][0], e[0][1], e[1][0], e[1][1], n);
    return {
        type: "path",
        ops: []
    }
}
function gP(e, t) {
    return Kf(e, !0, t)
}
function vP(e, t, n, r, i) {
    const o = [[e, t], [e + n, t], [e + n, t + r], [e, t + r]];
    return gP(o, i)
}
function yP(e, t) {
    let n = bw(e, 1 * (1 + t.roughness * .2), t);
    if (!t.disableMultiStroke) {
        const r = bw(e, 1.5 * (1 + t.roughness * .22), SP(t));
        n = n.concat(r)
    }
    return {
        type: "path",
        ops: n
    }
}
function EP(e, t, n, r, i) {
    const o = Hx(n, r, i);
    return vg(e, t, i, o).opset
}
function Hx(e, t, n) {
    const r = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(e / 2, 2) + Math.pow(t / 2, 2)) / 2))
      , i = Math.ceil(Math.max(n.curveStepCount, n.curveStepCount / Math.sqrt(200) * r))
      , o = Math.PI * 2 / i;
    let s = Math.abs(e / 2)
      , a = Math.abs(t / 2);
    const l = 1 - n.curveFitting;
    return s += de(s * l, n),
    a += de(a * l, n),
    {
        increment: o,
        rx: s,
        ry: a
    }
}
function vg(e, t, n, r) {
    const [i,o] = _w(r.increment, e, t, r.rx, r.ry, 1, r.increment * Hh(.1, Hh(.4, 1, n), n), n);
    let s = Uh(i, null, n);
    if (!n.disableMultiStroke && n.roughness !== 0) {
        const [a] = _w(r.increment, e, t, r.rx, r.ry, 1.5, 0, n)
          , l = Uh(a, null, n);
        s = s.concat(l)
    }
    return {
        estimatedPoints: o,
        opset: {
            type: "path",
            ops: s
        }
    }
}
function Ew(e, t, n, r, i, o, s, a, l) {
    const c = e
      , u = t;
    let d = Math.abs(n / 2)
      , f = Math.abs(r / 2);
    d += de(d * .01, l),
    f += de(f * .01, l);
    let h = i
      , m = o;
    for (; h < 0; )
        h += Math.PI * 2,
        m += Math.PI * 2;
    m - h > Math.PI * 2 && (h = 0,
    m = Math.PI * 2);
    const g = Math.PI * 2 / l.curveStepCount
      , E = Math.min(g / 2, (m - h) / 2)
      , v = xw(E, c, u, d, f, h, m, 1, l);
    if (!l.disableMultiStroke) {
        const y = xw(E, c, u, d, f, h, m, 1.5, l);
        v.push(...y)
    }
    return s && (a ? v.push(...Gi(c, u, c + d * Math.cos(h), u + f * Math.sin(h), l), ...Gi(c, u, c + d * Math.cos(m), u + f * Math.sin(m), l)) : v.push({
        op: "lineTo",
        data: [c, u]
    }, {
        op: "lineTo",
        data: [c + d * Math.cos(h), u + f * Math.sin(h)]
    })),
    {
        type: "path",
        ops: v
    }
}
function wP(e, t) {
    const n = $x(Fx(jv(e)))
      , r = [];
    let i = [0, 0]
      , o = [0, 0];
    for (const {key: s, data: a} of n)
        switch (s) {
        case "M":
            {
                const l = 1 * (t.maxRandomnessOffset || 0)
                  , c = t.preserveVertices;
                r.push({
                    op: "move",
                    data: a.map(u=>u + (c ? 0 : de(l, t)))
                }),
                o = [a[0], a[1]],
                i = [a[0], a[1]];
                break
            }
        case "L":
            r.push(...Gi(o[0], o[1], a[0], a[1], t)),
            o = [a[0], a[1]];
            break;
        case "C":
            {
                const [l,c,u,d,f,h] = a;
                r.push(...CP(l, c, u, d, f, h, o, t)),
                o = [f, h];
                break
            }
        case "Z":
            r.push(...Gi(o[0], o[1], i[0], i[1], t)),
            o = [i[0], i[1]];
            break
        }
    return {
        type: "path",
        ops: r
    }
}
function lf(e, t) {
    const n = [];
    for (const r of e)
        if (r.length) {
            const i = t.maxRandomnessOffset || 0
              , o = r.length;
            if (o > 2) {
                n.push({
                    op: "move",
                    data: [r[0][0] + de(i, t), r[0][1] + de(i, t)]
                });
                for (let s = 1; s < o; s++)
                    n.push({
                        op: "lineTo",
                        data: [r[s][0] + de(i, t), r[s][1] + de(i, t)]
                    })
            }
        }
    return {
        type: "fillPath",
        ops: n
    }
}
function ka(e, t) {
    return uP(t, mP).fillPolygons(e, t)
}
function bP(e, t, n, r, i, o, s) {
    const a = e
      , l = t;
    let c = Math.abs(n / 2)
      , u = Math.abs(r / 2);
    c += de(c * .01, s),
    u += de(u * .01, s);
    let d = i
      , f = o;
    for (; d < 0; )
        d += Math.PI * 2,
        f += Math.PI * 2;
    f - d > Math.PI * 2 && (d = 0,
    f = Math.PI * 2);
    const h = (f - d) / s.curveStepCount
      , m = [];
    for (let g = d; g <= f; g = g + h)
        m.push([a + c * Math.cos(g), l + u * Math.sin(g)]);
    return m.push([a + c * Math.cos(f), l + u * Math.sin(f)]),
    m.push([a, l]),
    ka([m], s)
}
function _P(e, t) {
    return de(e, t)
}
function xP(e, t, n) {
    return Hh(e, t, n)
}
function IP(e, t, n, r, i) {
    return Gi(e, t, n, r, i, !0)
}
function SP(e) {
    const t = Object.assign({}, e);
    return t.randomizer = void 0,
    e.seed && (t.seed = e.seed + 1),
    t
}
function Ux(e) {
    return e.randomizer || (e.randomizer = new Dx(e.seed || 0)),
    e.randomizer.next()
}
function Hh(e, t, n, r=1) {
    return n.roughness * r * (Ux(n) * (t - e) + e)
}
function de(e, t, n=1) {
    return Hh(-e, e, t, n)
}
function Gi(e, t, n, r, i, o=!1) {
    const s = o ? i.disableMultiStrokeFill : i.disableMultiStroke
      , a = ww(e, t, n, r, i, !0, !1);
    if (s)
        return a;
    const l = ww(e, t, n, r, i, !0, !0);
    return a.concat(l)
}
function ww(e, t, n, r, i, o, s) {
    const a = Math.pow(e - n, 2) + Math.pow(t - r, 2)
      , l = Math.sqrt(a);
    let c = 1;
    l < 200 ? c = 1 : l > 500 ? c = .4 : c = -.0016668 * l + 1.233334;
    let u = i.maxRandomnessOffset || 0;
    u * u * 100 > a && (u = l / 10);
    const d = u / 2
      , f = .2 + Ux(i) * .2;
    let h = i.bowing * i.maxRandomnessOffset * (r - t) / 200
      , m = i.bowing * i.maxRandomnessOffset * (e - n) / 200;
    h = de(h, i, c),
    m = de(m, i, c);
    const g = []
      , E = ()=>de(d, i, c)
      , v = ()=>de(u, i, c)
      , y = i.preserveVertices;
    return o && (s ? g.push({
        op: "move",
        data: [e + (y ? 0 : E()), t + (y ? 0 : E())]
    }) : g.push({
        op: "move",
        data: [e + (y ? 0 : de(u, i, c)), t + (y ? 0 : de(u, i, c))]
    })),
    s ? g.push({
        op: "bcurveTo",
        data: [h + e + (n - e) * f + E(), m + t + (r - t) * f + E(), h + e + 2 * (n - e) * f + E(), m + t + 2 * (r - t) * f + E(), n + (y ? 0 : E()), r + (y ? 0 : E())]
    }) : g.push({
        op: "bcurveTo",
        data: [h + e + (n - e) * f + v(), m + t + (r - t) * f + v(), h + e + 2 * (n - e) * f + v(), m + t + 2 * (r - t) * f + v(), n + (y ? 0 : v()), r + (y ? 0 : v())]
    }),
    g
}
function bw(e, t, n) {
    const r = [];
    r.push([e[0][0] + de(t, n), e[0][1] + de(t, n)]),
    r.push([e[0][0] + de(t, n), e[0][1] + de(t, n)]);
    for (let i = 1; i < e.length; i++)
        r.push([e[i][0] + de(t, n), e[i][1] + de(t, n)]),
        i === e.length - 1 && r.push([e[i][0] + de(t, n), e[i][1] + de(t, n)]);
    return Uh(r, null, n)
}
function Uh(e, t, n) {
    const r = e.length
      , i = [];
    if (r > 3) {
        const o = []
          , s = 1 - n.curveTightness;
        i.push({
            op: "move",
            data: [e[1][0], e[1][1]]
        });
        for (let a = 1; a + 2 < r; a++) {
            const l = e[a];
            o[0] = [l[0], l[1]],
            o[1] = [l[0] + (s * e[a + 1][0] - s * e[a - 1][0]) / 6, l[1] + (s * e[a + 1][1] - s * e[a - 1][1]) / 6],
            o[2] = [e[a + 1][0] + (s * e[a][0] - s * e[a + 2][0]) / 6, e[a + 1][1] + (s * e[a][1] - s * e[a + 2][1]) / 6],
            o[3] = [e[a + 1][0], e[a + 1][1]],
            i.push({
                op: "bcurveTo",
                data: [o[1][0], o[1][1], o[2][0], o[2][1], o[3][0], o[3][1]]
            })
        }
        if (t && t.length === 2) {
            const a = n.maxRandomnessOffset;
            i.push({
                op: "lineTo",
                data: [t[0] + de(a, n), t[1] + de(a, n)]
            })
        }
    } else
        r === 3 ? (i.push({
            op: "move",
            data: [e[1][0], e[1][1]]
        }),
        i.push({
            op: "bcurveTo",
            data: [e[1][0], e[1][1], e[2][0], e[2][1], e[2][0], e[2][1]]
        })) : r === 2 && i.push(...Gi(e[0][0], e[0][1], e[1][0], e[1][1], n));
    return i
}
function _w(e, t, n, r, i, o, s, a) {
    const l = a.roughness === 0
      , c = []
      , u = [];
    if (l) {
        e = e / 4,
        u.push([t + r * Math.cos(-e), n + i * Math.sin(-e)]);
        for (let d = 0; d <= Math.PI * 2; d = d + e) {
            const f = [t + r * Math.cos(d), n + i * Math.sin(d)];
            c.push(f),
            u.push(f)
        }
        u.push([t + r * Math.cos(0), n + i * Math.sin(0)]),
        u.push([t + r * Math.cos(e), n + i * Math.sin(e)])
    } else {
        const d = de(.5, a) - Math.PI / 2;
        u.push([de(o, a) + t + .9 * r * Math.cos(d - e), de(o, a) + n + .9 * i * Math.sin(d - e)]);
        const f = Math.PI * 2 + d - .01;
        for (let h = d; h < f; h = h + e) {
            const m = [de(o, a) + t + r * Math.cos(h), de(o, a) + n + i * Math.sin(h)];
            c.push(m),
            u.push(m)
        }
        u.push([de(o, a) + t + r * Math.cos(d + Math.PI * 2 + s * .5), de(o, a) + n + i * Math.sin(d + Math.PI * 2 + s * .5)]),
        u.push([de(o, a) + t + .98 * r * Math.cos(d + s), de(o, a) + n + .98 * i * Math.sin(d + s)]),
        u.push([de(o, a) + t + .9 * r * Math.cos(d + s * .5), de(o, a) + n + .9 * i * Math.sin(d + s * .5)])
    }
    return [u, c]
}
function xw(e, t, n, r, i, o, s, a, l) {
    const c = o + de(.1, l)
      , u = [];
    u.push([de(a, l) + t + .9 * r * Math.cos(c - e), de(a, l) + n + .9 * i * Math.sin(c - e)]);
    for (let d = c; d <= s; d = d + e)
        u.push([de(a, l) + t + r * Math.cos(d), de(a, l) + n + i * Math.sin(d)]);
    return u.push([t + r * Math.cos(s), n + i * Math.sin(s)]),
    u.push([t + r * Math.cos(s), n + i * Math.sin(s)]),
    Uh(u, null, l)
}
function CP(e, t, n, r, i, o, s, a) {
    const l = []
      , c = [a.maxRandomnessOffset || 1, (a.maxRandomnessOffset || 1) + .3];
    let u = [0, 0];
    const d = a.disableMultiStroke ? 1 : 2
      , f = a.preserveVertices;
    for (let h = 0; h < d; h++)
        h === 0 ? l.push({
            op: "move",
            data: [s[0], s[1]]
        }) : l.push({
            op: "move",
            data: [s[0] + (f ? 0 : de(c[0], a)), s[1] + (f ? 0 : de(c[0], a))]
        }),
        u = f ? [i, o] : [i + de(c[h], a), o + de(c[h], a)],
        l.push({
            op: "bcurveTo",
            data: [e + de(c[h], a), t + de(c[h], a), n + de(c[h], a), r + de(c[h], a), u[0], u[1]]
        });
    return l
}
function fc(e) {
    return [...e]
}
function kP(e, t=0) {
    const n = e.length;
    if (n < 3)
        throw new Error("A curve must have at least three points.");
    const r = [];
    if (n === 3)
        r.push(fc(e[0]), fc(e[1]), fc(e[2]), fc(e[2]));
    else {
        const i = [];
        i.push(e[0], e[0]);
        for (let a = 1; a < e.length; a++)
            i.push(e[a]),
            a === e.length - 1 && i.push(e[a]);
        const o = []
          , s = 1 - t;
        r.push(fc(i[0]));
        for (let a = 1; a + 2 < i.length; a++) {
            const l = i[a];
            o[0] = [l[0], l[1]],
            o[1] = [l[0] + (s * i[a + 1][0] - s * i[a - 1][0]) / 6, l[1] + (s * i[a + 1][1] - s * i[a - 1][1]) / 6],
            o[2] = [i[a + 1][0] + (s * i[a][0] - s * i[a + 2][0]) / 6, i[a + 1][1] + (s * i[a][1] - s * i[a + 2][1]) / 6],
            o[3] = [i[a + 1][0], i[a + 1][1]],
            r.push(o[1], o[2], o[3])
        }
    }
    return r
}
function TP(e, t) {
    return Math.sqrt(Xf(e, t))
}
function Xf(e, t) {
    return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2)
}
function MP(e, t, n) {
    const r = Xf(t, n);
    if (r === 0)
        return Xf(e, t);
    let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / r;
    return i = Math.max(0, Math.min(1, i)),
    Xf(e, fs(t, n, i))
}
function fs(e, t, n) {
    return [e[0] + (t[0] - e[0]) * n, e[1] + (t[1] - e[1]) * n]
}
function AP(e, t) {
    const n = e[t + 0]
      , r = e[t + 1]
      , i = e[t + 2]
      , o = e[t + 3];
    let s = 3 * r[0] - 2 * n[0] - o[0];
    s *= s;
    let a = 3 * r[1] - 2 * n[1] - o[1];
    a *= a;
    let l = 3 * i[0] - 2 * o[0] - n[0];
    l *= l;
    let c = 3 * i[1] - 2 * o[1] - n[1];
    return c *= c,
    s < l && (s = l),
    a < c && (a = c),
    s + a
}
function yg(e, t, n, r) {
    const i = r || [];
    if (AP(e, t) < n) {
        const o = e[t + 0];
        i.length ? TP(i[i.length - 1], o) > 1 && i.push(o) : i.push(o),
        i.push(e[t + 3])
    } else {
        const s = e[t + 0]
          , a = e[t + 1]
          , l = e[t + 2]
          , c = e[t + 3]
          , u = fs(s, a, .5)
          , d = fs(a, l, .5)
          , f = fs(l, c, .5)
          , h = fs(u, d, .5)
          , m = fs(d, f, .5)
          , g = fs(h, m, .5);
        yg([s, u, h, g], 0, n, i),
        yg([g, m, f, c], 0, n, i)
    }
    return i
}
function LP(e, t) {
    return Vh(e, 0, e.length, t)
}
function Vh(e, t, n, r, i) {
    const o = i || []
      , s = e[t]
      , a = e[n - 1];
    let l = 0
      , c = 1;
    for (let u = t + 1; u < n - 1; ++u) {
        const d = MP(e[u], s, a);
        d > l && (l = d,
        c = u)
    }
    return Math.sqrt(l) > r ? (Vh(e, t, c + 1, r, o),
    Vh(e, c, n, r, o)) : (o.length || o.push(s),
    o.push(a)),
    o
}
function Yv(e, t=.15, n) {
    const r = []
      , i = (e.length - 1) / 3;
    for (let o = 0; o < i; o++) {
        const s = o * 3;
        yg(e, s, t, r)
    }
    return n && n > 0 ? Vh(r, 0, r.length, n) : r
}
function PP(e, t, n) {
    const r = jv(e)
      , i = $x(Fx(r))
      , o = [];
    let s = []
      , a = [0, 0]
      , l = [];
    const c = ()=>{
        l.length >= 4 && s.push(...Yv(l, t)),
        l = []
    }
      , u = ()=>{
        c(),
        s.length && (o.push(s),
        s = [])
    }
    ;
    for (const {key: f, data: h} of i)
        switch (f) {
        case "M":
            u(),
            a = [h[0], h[1]],
            s.push(a);
            break;
        case "L":
            c(),
            s.push([h[0], h[1]]);
            break;
        case "C":
            if (!l.length) {
                const m = s.length ? s[s.length - 1] : a;
                l.push([m[0], m[1]])
            }
            l.push([h[0], h[1]]),
            l.push([h[2], h[3]]),
            l.push([h[4], h[5]]);
            break;
        case "Z":
            c(),
            s.push([a[0], a[1]]);
            break
        }
    if (u(),
    !n)
        return o;
    const d = [];
    for (const f of o) {
        const h = LP(f, n);
        h.length && d.push(h)
    }
    return d
}
const Dn = "none";
class Fu {
    constructor(t) {
        this.defaultOptions = {
            maxRandomnessOffset: 2,
            roughness: 1,
            bowing: 1,
            stroke: "#000",
            strokeWidth: 1,
            curveTightness: 0,
            curveFitting: .95,
            curveStepCount: 9,
            fillStyle: "hachure",
            fillWeight: -1,
            hachureAngle: -41,
            hachureGap: -1,
            dashOffset: -1,
            dashGap: -1,
            zigzagOffset: -1,
            seed: 0,
            disableMultiStroke: !1,
            disableMultiStrokeFill: !1,
            preserveVertices: !1
        },
        this.config = t || {},
        this.config.options && (this.defaultOptions = this._o(this.config.options))
    }
    static newSeed() {
        return dP()
    }
    _o(t) {
        return t ? Object.assign({}, this.defaultOptions, t) : this.defaultOptions
    }
    _d(t, n, r) {
        return {
            shape: t,
            sets: n || [],
            options: r || this.defaultOptions
        }
    }
    line(t, n, r, i, o) {
        const s = this._o(o);
        return this._d("line", [zx(t, n, r, i, s)], s)
    }
    rectangle(t, n, r, i, o) {
        const s = this._o(o)
          , a = []
          , l = vP(t, n, r, i, s);
        if (s.fill) {
            const c = [[t, n], [t + r, n], [t + r, n + i], [t, n + i]];
            s.fillStyle === "solid" ? a.push(lf([c], s)) : a.push(ka([c], s))
        }
        return s.stroke !== Dn && a.push(l),
        this._d("rectangle", a, s)
    }
    ellipse(t, n, r, i, o) {
        const s = this._o(o)
          , a = []
          , l = Hx(r, i, s)
          , c = vg(t, n, s, l);
        if (s.fill)
            if (s.fillStyle === "solid") {
                const u = vg(t, n, s, l).opset;
                u.type = "fillPath",
                a.push(u)
            } else
                a.push(ka([c.estimatedPoints], s));
        return s.stroke !== Dn && a.push(c.opset),
        this._d("ellipse", a, s)
    }
    circle(t, n, r, i) {
        const o = this.ellipse(t, n, r, r, i);
        return o.shape = "circle",
        o
    }
    linearPath(t, n) {
        const r = this._o(n);
        return this._d("linearPath", [Kf(t, !1, r)], r)
    }
    arc(t, n, r, i, o, s, a=!1, l) {
        const c = this._o(l)
          , u = []
          , d = Ew(t, n, r, i, o, s, a, !0, c);
        if (a && c.fill)
            if (c.fillStyle === "solid") {
                const f = Object.assign({}, c);
                f.disableMultiStroke = !0;
                const h = Ew(t, n, r, i, o, s, !0, !1, f);
                h.type = "fillPath",
                u.push(h)
            } else
                u.push(bP(t, n, r, i, o, s, c));
        return c.stroke !== Dn && u.push(d),
        this._d("arc", u, c)
    }
    curve(t, n) {
        const r = this._o(n)
          , i = []
          , o = yP(t, r);
        if (r.fill && r.fill !== Dn && t.length >= 3) {
            const s = kP(t)
              , a = Yv(s, 10, (1 + r.roughness) / 2);
            r.fillStyle === "solid" ? i.push(lf([a], r)) : i.push(ka([a], r))
        }
        return r.stroke !== Dn && i.push(o),
        this._d("curve", i, r)
    }
    polygon(t, n) {
        const r = this._o(n)
          , i = []
          , o = Kf(t, !0, r);
        return r.fill && (r.fillStyle === "solid" ? i.push(lf([t], r)) : i.push(ka([t], r))),
        r.stroke !== Dn && i.push(o),
        this._d("polygon", i, r)
    }
    path(t, n) {
        const r = this._o(n)
          , i = [];
        if (!t)
            return this._d("path", i, r);
        t = (t || "").replace(/\n/g, " ").replace(/(-\s)/g, "-").replace("/(ss)/g", " ");
        const o = r.fill && r.fill !== "transparent" && r.fill !== Dn
          , s = r.stroke !== Dn
          , a = !!(r.simplification && r.simplification < 1)
          , l = a ? 4 - 4 * r.simplification : (1 + r.roughness) / 2
          , c = PP(t, 1, l);
        return o && (r.fillStyle === "solid" ? i.push(lf(c, r)) : i.push(ka(c, r))),
        s && (a ? c.forEach(u=>{
            i.push(Kf(u, !1, r))
        }
        ) : i.push(wP(t, r))),
        this._d("path", i, r)
    }
    opsToPath(t, n) {
        let r = "";
        for (const i of t.ops) {
            const o = typeof n == "number" && n >= 0 ? i.data.map(s=>+s.toFixed(n)) : i.data;
            switch (i.op) {
            case "move":
                r += `M ${o[0]} ${o[1]} `;
                break;
            case "bcurveTo":
                r += `C ${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;
                break;
            case "lineTo":
                r += `L ${o[0]} ${o[1]} `;
                break
            }
        }
        return r.trim()
    }
    toPaths(t) {
        const n = t.sets || []
          , r = t.options || this.defaultOptions
          , i = [];
        for (const o of n) {
            let s = null;
            switch (o.type) {
            case "path":
                s = {
                    d: this.opsToPath(o),
                    stroke: r.stroke,
                    strokeWidth: r.strokeWidth,
                    fill: Dn
                };
                break;
            case "fillPath":
                s = {
                    d: this.opsToPath(o),
                    stroke: Dn,
                    strokeWidth: 0,
                    fill: r.fill || Dn
                };
                break;
            case "fillSketch":
                s = this.fillSketch(o, r);
                break
            }
            s && i.push(s)
        }
        return i
    }
    fillSketch(t, n) {
        let r = n.fillWeight;
        return r < 0 && (r = n.strokeWidth / 2),
        {
            d: this.opsToPath(t),
            stroke: n.fill || Dn,
            strokeWidth: r,
            fill: Dn
        }
    }
}
class RP {
    constructor(t, n) {
        this.canvas = t,
        this.ctx = this.canvas.getContext("2d"),
        this.gen = new Fu(n)
    }
    draw(t) {
        const n = t.sets || []
          , r = t.options || this.getDefaultOptions()
          , i = this.ctx
          , o = t.options.fixedDecimalPlaceDigits;
        for (const s of n)
            switch (s.type) {
            case "path":
                i.save(),
                i.strokeStyle = r.stroke === "none" ? "transparent" : r.stroke,
                i.lineWidth = r.strokeWidth,
                r.strokeLineDash && i.setLineDash(r.strokeLineDash),
                r.strokeLineDashOffset && (i.lineDashOffset = r.strokeLineDashOffset),
                this._drawToContext(i, s, o),
                i.restore();
                break;
            case "fillPath":
                {
                    i.save(),
                    i.fillStyle = r.fill || "";
                    const a = t.shape === "curve" || t.shape === "polygon" || t.shape === "path" ? "evenodd" : "nonzero";
                    this._drawToContext(i, s, o, a),
                    i.restore();
                    break
                }
            case "fillSketch":
                this.fillSketch(i, s, r);
                break
            }
    }
    fillSketch(t, n, r) {
        let i = r.fillWeight;
        i < 0 && (i = r.strokeWidth / 2),
        t.save(),
        r.fillLineDash && t.setLineDash(r.fillLineDash),
        r.fillLineDashOffset && (t.lineDashOffset = r.fillLineDashOffset),
        t.strokeStyle = r.fill || "",
        t.lineWidth = i,
        this._drawToContext(t, n, r.fixedDecimalPlaceDigits),
        t.restore()
    }
    _drawToContext(t, n, r, i="nonzero") {
        t.beginPath();
        for (const o of n.ops) {
            const s = typeof r == "number" && r >= 0 ? o.data.map(a=>+a.toFixed(r)) : o.data;
            switch (o.op) {
            case "move":
                t.moveTo(s[0], s[1]);
                break;
            case "bcurveTo":
                t.bezierCurveTo(s[0], s[1], s[2], s[3], s[4], s[5]);
                break;
            case "lineTo":
                t.lineTo(s[0], s[1]);
                break
            }
        }
        n.type === "fillPath" ? t.fill(i) : t.stroke()
    }
    get generator() {
        return this.gen
    }
    getDefaultOptions() {
        return this.gen.defaultOptions
    }
    line(t, n, r, i, o) {
        const s = this.gen.line(t, n, r, i, o);
        return this.draw(s),
        s
    }
    rectangle(t, n, r, i, o) {
        const s = this.gen.rectangle(t, n, r, i, o);
        return this.draw(s),
        s
    }
    ellipse(t, n, r, i, o) {
        const s = this.gen.ellipse(t, n, r, i, o);
        return this.draw(s),
        s
    }
    circle(t, n, r, i) {
        const o = this.gen.circle(t, n, r, i);
        return this.draw(o),
        o
    }
    linearPath(t, n) {
        const r = this.gen.linearPath(t, n);
        return this.draw(r),
        r
    }
    polygon(t, n) {
        const r = this.gen.polygon(t, n);
        return this.draw(r),
        r
    }
    arc(t, n, r, i, o, s, a=!1, l) {
        const c = this.gen.arc(t, n, r, i, o, s, a, l);
        return this.draw(c),
        c
    }
    curve(t, n) {
        const r = this.gen.curve(t, n);
        return this.draw(r),
        r
    }
    path(t, n) {
        const r = this.gen.path(t, n);
        return this.draw(r),
        r
    }
}
const cf = "http://www.w3.org/2000/svg";
class OP {
    constructor(t, n) {
        this.svg = t,
        this.gen = new Fu(n)
    }
    draw(t) {
        const n = t.sets || []
          , r = t.options || this.getDefaultOptions()
          , i = this.svg.ownerDocument || window.document
          , o = i.createElementNS(cf, "g")
          , s = t.options.fixedDecimalPlaceDigits;
        for (const a of n) {
            let l = null;
            switch (a.type) {
            case "path":
                {
                    l = i.createElementNS(cf, "path"),
                    l.setAttribute("d", this.opsToPath(a, s)),
                    l.setAttribute("stroke", r.stroke),
                    l.setAttribute("stroke-width", r.strokeWidth + ""),
                    l.setAttribute("fill", "none"),
                    r.strokeLineDash && l.setAttribute("stroke-dasharray", r.strokeLineDash.join(" ").trim()),
                    r.strokeLineDashOffset && l.setAttribute("stroke-dashoffset", `${r.strokeLineDashOffset}`);
                    break
                }
            case "fillPath":
                {
                    l = i.createElementNS(cf, "path"),
                    l.setAttribute("d", this.opsToPath(a, s)),
                    l.setAttribute("stroke", "none"),
                    l.setAttribute("stroke-width", "0"),
                    l.setAttribute("fill", r.fill || ""),
                    (t.shape === "curve" || t.shape === "polygon") && l.setAttribute("fill-rule", "evenodd");
                    break
                }
            case "fillSketch":
                {
                    l = this.fillSketch(i, a, r);
                    break
                }
            }
            l && o.appendChild(l)
        }
        return o
    }
    fillSketch(t, n, r) {
        let i = r.fillWeight;
        i < 0 && (i = r.strokeWidth / 2);
        const o = t.createElementNS(cf, "path");
        return o.setAttribute("d", this.opsToPath(n, r.fixedDecimalPlaceDigits)),
        o.setAttribute("stroke", r.fill || ""),
        o.setAttribute("stroke-width", i + ""),
        o.setAttribute("fill", "none"),
        r.fillLineDash && o.setAttribute("stroke-dasharray", r.fillLineDash.join(" ").trim()),
        r.fillLineDashOffset && o.setAttribute("stroke-dashoffset", `${r.fillLineDashOffset}`),
        o
    }
    get generator() {
        return this.gen
    }
    getDefaultOptions() {
        return this.gen.defaultOptions
    }
    opsToPath(t, n) {
        return this.gen.opsToPath(t, n)
    }
    line(t, n, r, i, o) {
        const s = this.gen.line(t, n, r, i, o);
        return this.draw(s)
    }
    rectangle(t, n, r, i, o) {
        const s = this.gen.rectangle(t, n, r, i, o);
        return this.draw(s)
    }
    ellipse(t, n, r, i, o) {
        const s = this.gen.ellipse(t, n, r, i, o);
        return this.draw(s)
    }
    circle(t, n, r, i) {
        const o = this.gen.circle(t, n, r, i);
        return this.draw(o)
    }
    linearPath(t, n) {
        const r = this.gen.linearPath(t, n);
        return this.draw(r)
    }
    polygon(t, n) {
        const r = this.gen.polygon(t, n);
        return this.draw(r)
    }
    arc(t, n, r, i, o, s, a=!1, l) {
        const c = this.gen.arc(t, n, r, i, o, s, a, l);
        return this.draw(c)
    }
    curve(t, n) {
        const r = this.gen.curve(t, n);
        return this.draw(r)
    }
    path(t, n) {
        const r = this.gen.path(t, n);
        return this.draw(r)
    }
}
const is = {
    canvas(e, t) {
        return new RP(e,t)
    },
    svg(e, t) {
        return new OP(e,t)
    },
    generator(e) {
        return new Fu(e)
    },
    newSeed() {
        return Fu.newSeed()
    }
};
let Z1 = (e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n &= 63,
n < 36 ? t += n.toString(36) : n < 62 ? t += (n - 26).toString(36).toUpperCase() : n > 62 ? t += "-" : t += "_",
t), "");
const At = e=>!!e && e.type === "image" && !!e.fileId
  , Ni = e=>!!e && e.type === "image"
  , ht = e=>!!e && e.type === "embeddable"
  , ue = e=>e != null && e.type === "text"
  , cn = e=>e != null && e.type === "frame"
  , Gn = e=>e != null && DP(e.type)
  , DP = e=>e === "freedraw"
  , ye = e=>e != null && Zv(e.type)
  , rt = e=>e != null && e.type === "arrow"
  , Zv = e=>e === "arrow" || e === "line"
  , sn = (e,t=!0)=>e != null && (!e.locked || t === !0) && Vx(e.type)
  , Vx = e=>e === "arrow"
  , $u = (e,t=!0)=>e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || e.type === "image" || e.type === "embeddable" || e.type === "frame" || e.type === "text" && !e.containerId)
  , zs = (e,t=!0)=>e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || rt(e))
  , NP = e=>(e == null ? void 0 : e.type) === "text" || (e == null ? void 0 : e.type) === "diamond" || (e == null ? void 0 : e.type) === "rectangle" || (e == null ? void 0 : e.type) === "embeddable" || (e == null ? void 0 : e.type) === "ellipse" || (e == null ? void 0 : e.type) === "arrow" || (e == null ? void 0 : e.type) === "freedraw" || (e == null ? void 0 : e.type) === "line"
  , jo = e=>{
    var t;
    return zs(e) && !!((t = e.boundElements) != null && t.some(({type: n})=>n === "text"))
}
  , _t = e=>e !== null && "containerId"in e && e.containerId !== null && ue(e)
  , Nl = e=>e === "rectangle" || e === "embeddable"
  , Wx = e=>e === "line" || e === "arrow" || e === "diamond"
  , FP = (e,t)=>!!((e === zt.ADAPTIVE_RADIUS || e === zt.LEGACY) && Nl(t.type) || e === zt.PROPORTIONAL_RADIUS && Wx(t.type))
  , $P = e=>Wx(e.type) ? {
    type: zt.PROPORTIONAL_RADIUS
} : Nl(e.type) ? {
    type: zt.ADAPTIVE_RADIUS
} : null;
function Iw(e, t, n, r=i=>i) {
    return e * r(.5 - t * (.5 - n))
}
function BP(e) {
    return [-e[0], -e[1]]
}
function br(e, t) {
    return [e[0] + t[0], e[1] + t[1]]
}
function Jn(e, t) {
    return [e[0] - t[0], e[1] - t[1]]
}
function yr(e, t) {
    return [e[0] * t, e[1] * t]
}
function zP(e, t) {
    return [e[0] / t, e[1] / t]
}
function hc(e) {
    return [e[1], -e[0]]
}
function Sw(e, t) {
    return e[0] * t[0] + e[1] * t[1]
}
function HP(e, t) {
    return e[0] === t[0] && e[1] === t[1]
}
function UP(e) {
    return Math.hypot(e[0], e[1])
}
function VP(e) {
    return e[0] * e[0] + e[1] * e[1]
}
function Cw(e, t) {
    return VP(Jn(e, t))
}
function Gx(e) {
    return zP(e, UP(e))
}
function WP(e, t) {
    return Math.hypot(e[1] - t[1], e[0] - t[0])
}
function pc(e, t, n) {
    let r = Math.sin(n)
      , i = Math.cos(n)
      , o = e[0] - t[0]
      , s = e[1] - t[1]
      , a = o * i - s * r
      , l = o * r + s * i;
    return [a + t[0], l + t[1]]
}
function Eg(e, t, n) {
    return br(e, yr(Jn(t, e), n))
}
function kw(e, t, n) {
    return br(e, yr(t, n))
}
var {min: ya, PI: GP} = Math
  , Tw = .275
  , mc = GP + 1e-4;
function jP(e, t={}) {
    let {size: n=16, smoothing: r=.5, thinning: i=.5, simulatePressure: o=!0, easing: s=Z=>Z, start: a={}, end: l={}, last: c=!1} = t
      , {cap: u=!0, easing: d=Z=>Z * (2 - Z)} = a
      , {cap: f=!0, easing: h=Z=>--Z * Z * Z + 1} = l;
    if (e.length === 0 || n <= 0)
        return [];
    let m = e[e.length - 1].runningLength, g = a.taper === !1 ? 0 : a.taper === !0 ? Math.max(n, m) : a.taper, E = l.taper === !1 ? 0 : l.taper === !0 ? Math.max(n, m) : l.taper, v = Math.pow(n * r, 2), y = [], w = [], b = e.slice(0, 10).reduce((Z,z)=>{
        let W = z.pressure;
        if (o) {
            let D = ya(1, z.distance / n)
              , F = ya(1, 1 - D);
            W = ya(1, Z + (F - Z) * (D * Tw))
        }
        return (Z + W) / 2
    }
    , e[0].pressure), I = Iw(n, i, e[e.length - 1].pressure, s), S, C = e[0].vector, T = e[0].point, L = T, A = T, P = L, O = !1;
    for (let Z = 0; Z < e.length; Z++) {
        let {pressure: z} = e[Z]
          , {point: W, vector: D, distance: F, runningLength: B} = e[Z];
        if (Z < e.length - 1 && m - B < 3)
            continue;
        if (i) {
            if (o) {
                let Se = ya(1, F / n)
                  , Ce = ya(1, 1 - Se);
                z = ya(1, b + (Ce - b) * (Se * Tw))
            }
            I = Iw(n, i, z, s)
        } else
            I = n / 2;
        S === void 0 && (S = I);
        let Y = B < g ? d(B / g) : 1
          , G = m - B < E ? h((m - B) / E) : 1;
        I = Math.max(.01, I * Math.min(Y, G));
        let K = (Z < e.length - 1 ? e[Z + 1] : e[Z]).vector
          , q = Z < e.length - 1 ? Sw(D, K) : 1
          , oe = Sw(D, C) < 0 && !O
          , $e = q !== null && q < 0;
        if (oe || $e) {
            let Se = yr(hc(C), I);
            for (let Ce = 1 / 13, ze = 0; ze <= 1; ze += Ce)
                A = pc(Jn(W, Se), W, mc * ze),
                y.push(A),
                P = pc(br(W, Se), W, mc * -ze),
                w.push(P);
            T = A,
            L = P,
            $e && (O = !0);
            continue
        }
        if (O = !1,
        Z === e.length - 1) {
            let Se = yr(hc(D), I);
            y.push(Jn(W, Se)),
            w.push(br(W, Se));
            continue
        }
        let Ie = yr(hc(Eg(K, D, q)), I);
        A = Jn(W, Ie),
        (Z <= 1 || Cw(T, A) > v) && (y.push(A),
        T = A),
        P = br(W, Ie),
        (Z <= 1 || Cw(L, P) > v) && (w.push(P),
        L = P),
        b = z,
        C = D
    }
    let N = e[0].point.slice(0, 2)
      , $ = e.length > 1 ? e[e.length - 1].point.slice(0, 2) : br(e[0].point, [1, 1])
      , V = []
      , te = [];
    if (e.length === 1) {
        if (!(g || E) || c) {
            let Z = kw(N, Gx(hc(Jn(N, $))), -(S || I))
              , z = [];
            for (let W = 1 / 13, D = W; D <= 1; D += W)
                z.push(pc(Z, N, mc * 2 * D));
            return z
        }
    } else {
        if (!(g || E && e.length === 1))
            if (u)
                for (let z = 1 / 13, W = z; W <= 1; W += z) {
                    let D = pc(w[0], N, mc * W);
                    V.push(D)
                }
            else {
                let z = Jn(y[0], w[0])
                  , W = yr(z, .5)
                  , D = yr(z, .51);
                V.push(Jn(N, W), Jn(N, D), br(N, D), br(N, W))
            }
        let Z = hc(BP(e[e.length - 1].vector));
        if (E || g && e.length === 1)
            te.push($);
        else if (f) {
            let z = kw($, Z, I);
            for (let W = 1 / 29, D = W; D < 1; D += W)
                te.push(pc(z, $, mc * 3 * D))
        } else
            te.push(br($, yr(Z, I)), br($, yr(Z, I * .99)), Jn($, yr(Z, I * .99)), Jn($, yr(Z, I)))
    }
    return y.concat(te, w.reverse(), V)
}
function YP(e, t={}) {
    var n;
    let {streamline: r=.5, size: i=16, last: o=!1} = t;
    if (e.length === 0)
        return [];
    let s = .15 + (1 - r) * .85
      , a = Array.isArray(e[0]) ? e : e.map(({x: h, y: m, pressure: g=.5})=>[h, m, g]);
    if (a.length === 2) {
        let h = a[1];
        a = a.slice(0, -1);
        for (let m = 1; m < 5; m++)
            a.push(Eg(a[0], h, m / 4))
    }
    a.length === 1 && (a = [...a, [...br(a[0], [1, 1]), ...a[0].slice(2)]]);
    let l = [{
        point: [a[0][0], a[0][1]],
        pressure: a[0][2] >= 0 ? a[0][2] : .25,
        vector: [1, 1],
        distance: 0,
        runningLength: 0
    }]
      , c = !1
      , u = 0
      , d = l[0]
      , f = a.length - 1;
    for (let h = 1; h < a.length; h++) {
        let m = o && h === f ? a[h].slice(0, 2) : Eg(d.point, a[h], s);
        if (HP(d.point, m))
            continue;
        let g = WP(m, d.point);
        if (u += g,
        h < f && !c) {
            if (u < i)
                continue;
            c = !0
        }
        d = {
            point: m,
            pressure: a[h][2] >= 0 ? a[h][2] : .5,
            vector: Gx(Jn(d.point, m)),
            distance: g,
            runningLength: u
        },
        l.push(d)
    }
    return l[0].vector = ((n = l[1]) == null ? void 0 : n.vector) || [0, 0],
    l
}
function ZP(e, t={}) {
    return jP(YP(e, t), t)
}
const yn = (e,t)=>[0, 0, 0, 0, t, e, 1, 0]
  , jx = (e,t)=>[0, 0, 0, 0, t, e, 0, 0]
  , ua = (e=0,t=0)=>{
    const n = [0, 0, 0, 0, 0, 0, 0, 0];
    if (t < 0 || t > 7)
        throw new Error(`Expected \`index\` between 0 and 7, got \`${t}\``);
    return e !== 0 && (n[t] = e),
    n
}
  , K1 = e=>[e[0], e[1], e[2], e[3], -e[4], -e[5], -e[6], -e[7]]
  , KP = (e,t)=>Kv(t) ? [e[0] + t, e[1], e[2], e[3], e[4], e[5], e[6], e[7]] : [e[0] + t[0], e[1] + t[1], e[2] + t[2], e[3] + t[3], e[4] + t[4], e[5] + t[5], e[6] + t[6], e[7] + t[7]]
  , Wh = (e,t)=>Kv(t) ? [e[0] - t, e[1], e[2], e[3], e[4], e[5], e[6], e[7]] : [e[0] - t[0], e[1] - t[1], e[2] - t[2], e[3] - t[3], e[4] - t[4], e[5] - t[5], e[6] - t[6], e[7] - t[7]]
  , wl = (e,t)=>Kv(t) ? [e[0] * t, e[1] * t, e[2] * t, e[3] * t, e[4] * t, e[5] * t, e[6] * t, e[7] * t] : [XP(e, t), t[1] * e[0] + t[0] * e[1] - t[4] * e[2] + t[5] * e[3] + t[2] * e[4] - t[3] * e[5] - t[7] * e[6] - t[6] * e[7], t[2] * e[0] + t[0] * e[2] - t[6] * e[3] + t[3] * e[6], t[3] * e[0] + t[6] * e[2] + t[0] * e[3] - t[2] * e[6], t[4] * e[0] + t[2] * e[1] - t[1] * e[2] + t[7] * e[3] + t[0] * e[4] + t[6] * e[5] - t[5] * e[6] + t[3] * e[7], t[5] * e[0] - t[3] * e[1] + t[7] * e[2] + t[1] * e[3] - t[6] * e[4] + t[0] * e[5] + t[4] * e[6] + t[2] * e[7], t[6] * e[0] + t[3] * e[2] - t[2] * e[3] + t[0] * e[6], t[7] * e[0] + t[6] * e[1] + t[5] * e[2] + t[4] * e[3] + t[3] * e[4] + t[2] * e[5] + t[1] * e[6] + t[0] * e[7]]
  , XP = (e,t)=>t[0] * e[0] + t[2] * e[2] + t[3] * e[3] - t[6] * e[6]
  , qP = (e,t)=>[t[0] * e[0], t[1] * e[0] + t[0] * e[1], t[2] * e[0] + t[0] * e[2], t[3] * e[0] + t[0] * e[3], t[4] * e[0] + t[2] * e[1] - t[1] * e[2] + t[0] * e[4], t[5] * e[0] - t[3] * e[1] + t[1] * e[3] + t[0] * e[5], t[6] * e[0] + t[3] * e[2] - t[2] * e[3] + t[0] * e[6], t[7] * e[0] + t[6] * e[1] + t[5] * e[2] + t[4] * e[3] + t[3] * e[4] + t[2] * e[5] + t[1] * e[6]]
  , Yx = (e,t)=>[Zx(e, t), e[1] * t[7] + e[4] * t[5] - e[5] * t[4] + e[7] * t[1], e[2] * t[7] - e[4] * t[6] + e[6] * t[4] + e[7] * t[2], e[3] * t[7] + e[5] * t[6] - e[6] * t[5] + e[7] * t[3], e[4] * t[7] + e[7] * t[4], e[5] * t[7] + e[7] * t[5], e[6] * t[7] + e[7] * t[6], e[7] * t[7]]
  , Zx = (e,t)=>e[0] * t[7] + e[1] * t[6] + e[2] * t[5] + e[3] * t[4] + e[4] * t[3] + e[5] * t[2] + e[6] * t[1] + e[7] * t[0]
  , QP = (e,t)=>[t[0] * e[0] + t[2] * e[2] + t[3] * e[3] - t[6] * e[6], t[1] * e[0] + t[0] * e[1] - t[4] * e[2] + t[5] * e[3] + t[2] * e[4] - t[3] * e[5] - t[7] * e[6] - t[6] * e[7], t[2] * e[0] + t[0] * e[2] - t[6] * e[3] + t[3] * e[6], t[3] * e[0] + t[6] * e[2] + t[0] * e[3] - t[2] * e[6], t[4] * e[0] + t[7] * e[3] + t[0] * e[4] + t[3] * e[7], t[5] * e[0] + t[7] * e[2] + t[0] * e[5] + t[2] * e[7], t[6] * e[0] + t[0] * e[6], t[7] * e[0] + t[0] * e[7]]
  , Kx = e=>Math.sqrt(Math.abs(e[0] * e[0] - e[2] * e[2] - e[3] * e[3] + e[6] * e[6]))
  , JP = e=>Math.sqrt(Math.abs(e[7] * e[7] - e[5] * e[5] - e[4] * e[4] + e[1] * e[1]))
  , X1 = e=>{
    const t = Kx(e);
    if (t === 0 || t === 1)
        return e;
    const n = e[6] < 0 ? -1 : 1;
    return wl(e, n / t)
}
  , eR = e=>{
    const t = JP(e);
    return t === 0 || t === 1 ? e : wl(e, 1 / t)
}
  , Kv = e=>typeof e == "number";
ua(1, 1);
ua(1, 2);
ua(1, 3);
ua(1, 4);
ua(1, 5);
ua(1, 6);
ua(1, 7);
const Zs = (e,t,n)=>X1([0, n, e, t, 0, 0, 0, 0])
  , wd = (e,t)=>X1(Yx(t, e))
  , tR = (e,t)=>QP(e, t)
  , nR = (e,t)=>tR(wd(e, t), t)
  , rR = e=>Math.sign(e[1])
  , Ks = ([e,t])=>[0, 0, 0, 0, t, e, 1, 0]
  , Xs = e=>[e[5], e[4]]
  , Xx = e=>[0, 0, 0, 0, Math.abs(e[4]), Math.abs(e[5]), 1, 0]
  , iR = (e,t)=>X1(qP(e, t))
  , Mw = (e,t)=>Kx(Yx(e, t))
  , Fr = (e,t)=>Zx(e, t)
  , Xv = e=>[0, 0, 0, 0, e[4], e[5], 0, 0]
  , oR = (e,t)=>eR([0, 0, 0, 0, t[4] - e[4], t[5] - e[5], 0, 0])
  , qv = (e,t)=>KP(wl(e, Math.sin(t / 2)), Math.cos(t / 2))
  , sR = e=>[1, 0, 0, 0, -(.5 * e[5]), .5 * e[4], 0, 0]
  , aR = (e,t)=>{
    const n = .5 * t;
    return [1, 0, 0, 0, n * e[4], n * e[5], 0, 0]
}
  , lR = (e,t)=>wl(t, e)
  , Pr = (e,t)=>X1(wl(wl(e, t), K1(e)))
  , Aw = (e,t,n,r,i,o,s)=>{
    e.beginPath(),
    e.moveTo(t + o, n),
    e.lineTo(t + r - o, n),
    e.quadraticCurveTo(t + r, n, t + r, n + o),
    e.lineTo(t + r, n + i - o),
    e.quadraticCurveTo(t + r, n + i, t + r - o, n + i),
    e.lineTo(t + o, n + i),
    e.quadraticCurveTo(t, n + i, t, n + i - o),
    e.lineTo(t, n + o),
    e.quadraticCurveTo(t, n, t + o, n),
    e.closePath(),
    e.fill(),
    s && (e.strokeStyle = s),
    e.stroke()
}
;
function cR(e) {
    let t = 0;
    if (e.length === 0)
        return t;
    for (let n = 0; n < e.length; n++) {
        const r = e.charCodeAt(n);
        t = (t << 5) - t + r
    }
    return t
}
const Gh = e=>`hsl(${Math.abs(cR(e)) % 37 * 10}, 100%, 83%)`
  , uR = e=>{
    var n;
    const t = (n = e == null ? void 0 : e.trim()) == null ? void 0 : n.codePointAt(0);
    return (t ? String.fromCodePoint(t) : "?").toUpperCase()
}
  , qx = (e,t,n)=>{
    const r = n.reduce((i,o)=>(o.groupIds.includes(e) && (i[o.id] = !0),
    i), {});
    return Object.keys(r).length < 2 ? t.selectedGroupIds[e] || t.editingGroupId === e ? {
        selectedElementIds: t.selectedElementIds,
        selectedGroupIds: {
            ...t.selectedGroupIds,
            [e]: !1
        },
        editingGroupId: null
    } : t : {
        editingGroupId: t.editingGroupId,
        selectedGroupIds: {
            ...t.selectedGroupIds,
            [e]: !0
        },
        selectedElementIds: {
            ...t.selectedElementIds,
            ...r
        }
    }
}
  , Nn = function() {
    let e = null
      , t = null
      , n = null;
    const r = (o,s,a,l)=>{
        if (n !== void 0 && s === t && o === e && a.editingGroupId === (n == null ? void 0 : n.editingGroupId))
            return n;
        const c = {};
        for (const f of o) {
            let h = f.groupIds;
            if (a.editingGroupId) {
                const m = h.indexOf(a.editingGroupId);
                m > -1 && (h = h.slice(0, m))
            }
            if (h.length > 0) {
                const m = h[h.length - 1];
                c[m] = !0
            }
        }
        const u = {}
          , d = s.reduce((f,h)=>{
            const m = h.groupIds.find(g=>c[g]);
            return m && (f[h.id] = !0,
            Array.isArray(u[m]) ? u[m].push(h.id) : u[m] = [h.id]),
            f
        }
        , {});
        for (const f of Object.keys(u))
            u[f].length < 2 && c[f] && (c[f] = !1);
        return t = s,
        e = o,
        n = {
            editingGroupId: a.editingGroupId,
            selectedGroupIds: c,
            selectedElementIds: Oe({
                ...a.selectedElementIds,
                ...d
            }, l)
        },
        n
    }
      , i = (o,s,a,l)=>{
        const c = l ? l.scene.getSelectedElements({
            selectedElementIds: o.selectedElementIds,
            elements: s
        }) : it(s, o);
        return c.length ? r(c, s, o, a) : {
            selectedGroupIds: {},
            editingGroupId: null,
            selectedElementIds: Oe(o.selectedElementIds, a)
        }
    }
    ;
    return i.clearCache = ()=>{
        t = null,
        e = null,
        n = null
    }
    ,
    i
}()
  , Qv = (e,t)=>Qx(e, t) != null
  , Qx = (e,t)=>t.groupIds.filter(n=>n !== e.editingGroupId).find(n=>e.selectedGroupIds[n])
  , rl = e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t)
  , Jx = (e,t)=>{
    let n = {
        ...t,
        selectedGroupIds: {}
    };
    for (const r of e) {
        let i = r.groupIds;
        if (t.editingGroupId) {
            const o = i.indexOf(t.editingGroupId);
            o > -1 && (i = i.slice(0, o))
        }
        if (i.length > 0) {
            const o = i[i.length - 1];
            n = {
                ...n,
                ...qx(o, n, e)
            }
        }
    }
    return n.selectedGroupIds
}
  , dR = (e,t)=>({
    ...e,
    editingGroupId: t.groupIds.length ? t.groupIds[0] : null,
    selectedGroupIds: {},
    selectedElementIds: {
        [t.id]: !0
    }
})
  , Bu = (e,t)=>e.groupIds.includes(t)
  , Ft = (e,t)=>e.filter(n=>Bu(n, t))
  , fR = (e,t)=>e.groupIds.find(n=>t[n])
  , hR = (e,t,n)=>{
    const r = [...e]
      , i = t ? e.indexOf(t) : -1
      , o = i > -1 ? i : e.length;
    for (let s = 0; s < o; s++)
        r[s] = n(r[s]);
    return r
}
  , pR = (e,t,n)=>{
    const r = [...e]
      , i = n ? r.indexOf(n) : -1
      , o = i > -1 ? i : r.length;
    return r.splice(o, 0, t),
    r
}
  , mR = (e,t)=>e.filter(n=>!t[n])
  , q1 = e=>{
    const t = new Map;
    return e.forEach(n=>{
        const r = n.groupIds.length === 0 ? n.id : n.groupIds[n.groupIds.length - 1]
          , i = t.get(r) || []
          , o = Ae(n);
        o && i.push(o),
        t.set(r, [...i, n])
    }
    ),
    Array.from(t.values())
}
;
var ks = (e=>(e.ACTIVE = "active",
e.AWAY = "away",
e.IDLE = "idle",
e))(ks || {});
let wg = [];
const J = e=>(wg = wg.concat(e),
e)
  , e7 = '<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">'
  , gR = '<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>'
  , t7 = '<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>'
  , vR = `data:${ve.svg},${encodeURIComponent(`${e7}${t7}</svg>`)}`
  , yR = `data:${ve.svg},${encodeURIComponent(`${e7}${gR}${t7}</svg>`)}`
  , Er = e=>{
    e && (e.style.cursor = "")
}
  , Re = (e,t)=>{
    e && (e.style.cursor = t)
}
;
let jr, Lw;
const n7 = (e,t)=>{
    const r = ()=>{
        const i = t === $t.DARK;
        jr = document.createElement("canvas"),
        jr.theme = t,
        jr.height = 20,
        jr.width = 20;
        const o = jr.getContext("2d");
        o.lineWidth = 1,
        o.beginPath(),
        o.arc(jr.width / 2, jr.height / 2, 5, 0, 2 * Math.PI),
        o.fillStyle = i ? ot.black : ot.white,
        o.fill(),
        o.strokeStyle = i ? ot.white : ot.black,
        o.stroke(),
        Lw = jr.toDataURL(ve.svg)
    }
    ;
    (!jr || jr.theme !== t) && r(),
    Re(e, `url(${Lw}) ${20 / 2} ${20 / 2}, auto`)
}
  , ki = (e,t)=>{
    if (e)
        if (t.activeTool.type === "selection")
            Er(e);
        else if (El(t))
            e.style.cursor = De.GRAB;
        else if (Cs(t))
            n7(e, t.theme);
        else if (t.activeTool.type === "laser") {
            const n = t.theme === $t.LIGHT ? vR : yR;
            e.style.cursor = `url(${n}), auto`
        } else
            ["image", "custom"].includes(t.activeTool.type) || (e.style.cursor = De.CROSSHAIR)
}
;
let ER = new Dx(Date.now());
const os = ()=>Math.floor(ER.next() * 2 ** 31)
  , $r = ()=>Z1()
  , da = (e,{x: t, y: n, strokeColor: r=at.strokeColor, backgroundColor: i=at.backgroundColor, fillStyle: o=at.fillStyle, strokeWidth: s=at.strokeWidth, strokeStyle: a=at.strokeStyle, roughness: l=at.roughness, opacity: c=at.opacity, width: u=0, height: d=0, angle: f=0, groupIds: h=[], frameId: m=null, roundness: g=null, boundElements: E=null, link: v=null, locked: y=at.locked, ...w})=>({
    id: w.id || $r(),
    type: e,
    x: t,
    y: n,
    width: u,
    height: d,
    angle: f,
    strokeColor: r,
    backgroundColor: i,
    fillStyle: o,
    strokeWidth: s,
    strokeStyle: a,
    roughness: l,
    opacity: c,
    groupIds: h,
    frameId: m,
    roundness: g,
    seed: w.seed ?? os(),
    version: w.version || 1,
    versionNonce: w.versionNonce ?? 0,
    isDeleted: !1,
    boundElements: E,
    updated: Dl(),
    link: v,
    locked: y
})
  , Yo = e=>da(e.type, e)
  , Pw = e=>({
    ...da("embeddable", e),
    validated: e.validated
})
  , wR = e=>fe({
    ...da("frame", e),
    type: "frame",
    name: null
}, {})
  , r7 = (e,t)=>({
    x: e.textAlign === "center" ? t.width / 2 : e.textAlign === "right" ? t.width : 0,
    y: e.verticalAlign === "middle" ? t.height / 2 : 0
})
  , Br = e=>{
    const t = e.fontFamily || Xi
      , n = e.fontSize || Ki
      , r = e.lineHeight || ea(t)
      , i = Ku(e.text)
      , o = Yi(i, xt({
        fontFamily: t,
        fontSize: n
    }), r)
      , s = e.textAlign || V1
      , a = e.verticalAlign || Fh
      , l = r7({
        textAlign: s,
        verticalAlign: a
    }, o);
    return fe({
        ...da("text", e),
        text: i,
        fontSize: n,
        fontFamily: t,
        textAlign: s,
        verticalAlign: a,
        x: e.x - l.x,
        y: e.y - l.y,
        width: o.width,
        height: o.height,
        baseline: o.baseline,
        containerId: e.containerId || null,
        originalText: i,
        lineHeight: r
    }, {})
}
  , bR = (e,t)=>{
    const {width: n, height: r, baseline: i} = Yi(t, xt(e), e.lineHeight)
      , {textAlign: o, verticalAlign: s} = e;
    let a, l;
    if (o === "center" && s === Bn.MIDDLE && !e.containerId) {
        const c = Yi(e.text, xt(e), e.lineHeight)
          , u = r7(e, {
            width: n - c.width,
            height: r - c.height
        });
        a = e.x - u.x,
        l = e.y - u.y
    } else {
        const [c,u,d,f] = me(e)
          , [h,m,g,E] = nu(e, n, r, !1)
          , v = (c - h) / 2
          , y = (u - m) / 2
          , w = (d - g) / 2
          , b = (f - E) / 2;
        [a,l] = aS({
            s: !0,
            e: o === "center" || o === "left",
            w: o === "center" || o === "right"
        }, e.x, e.y, e.angle, v, y, w, b)
    }
    return {
        width: n,
        height: r,
        baseline: i,
        x: Number.isFinite(a) ? a : e.x,
        y: Number.isFinite(l) ? l : e.y
    }
}
  , Jv = (e,t=e.text)=>{
    if (e.isDeleted)
        return;
    const n = Lt(e);
    n && (t = Md(t, xt(e), pi(n)));
    const r = bR(e, t);
    return {
        text: t,
        ...r
    }
}
  , _R = (e,{text: t, isDeleted: n, originalText: r})=>fe(e, {
    originalText: r,
    isDeleted: n ?? e.isDeleted,
    ...Jv(e, r)
})
  , xR = e=>({
    ...da(e.type, e),
    points: e.points || [],
    pressures: [],
    simulatePressure: e.simulatePressure,
    lastCommittedPoint: null
})
  , No = e=>({
    ...da(e.type, e),
    points: e.points || [],
    lastCommittedPoint: null,
    startBinding: null,
    endBinding: null,
    startArrowhead: e.startArrowhead || null,
    endArrowhead: e.endArrowhead || null
})
  , i7 = e=>({
    ...da("image", e),
    strokeColor: "transparent",
    status: e.status ?? "pending",
    fileId: e.fileId ?? null,
    scale: e.scale ?? [1, 1]
})
  , jh = (e,t=0)=>{
    if (e == null || typeof e != "object")
        return e;
    if (Object.prototype.toString.call(e) === "[object Object]") {
        const r = typeof e.constructor == "function" ? Object.create(Object.getPrototypeOf(e)) : {};
        for (const i in e)
            if (e.hasOwnProperty(i)) {
                if (t === 0 && (i === "shape" || i === "canvas"))
                    continue;
                r[i] = jh(e[i], t + 1)
            }
        return r
    }
    if (Array.isArray(e)) {
        let r = e.length;
        const i = new Array(r);
        for (; r--; )
            i[r] = jh(e[r], t + 1);
        return i
    }
    return e
}
  , bd = e=>jh(e)
  , Yh = e=>$r()
  , o7 = (e,t,n,r)=>{
    let i = bd(n);
    return i.id = Yh(i.id),
    i.boundElements = null,
    i.updated = Dl(),
    i.seed = os(),
    i.groupIds = hR(i.groupIds, e, o=>(t.has(o) || t.set(o, Yh()),
    t.get(o))),
    r && (i = Object.assign(i, r)),
    i
}
  , ey = (e,t)=>{
    const n = []
      , r = Rt(e)
      , i = new Map
      , o = a=>{
        if (i.has(a))
            return i.get(a);
        if (r.has(a)) {
            const l = Yh();
            return i.set(a, l),
            l
        }
        return null
    }
      , s = new Map;
    for (const a of e) {
        const l = jh(a);
        if (l.id = o(a.id),
        t != null && t.randomizeSeed && (l.seed = os(),
        Wl(l)),
        l.groupIds && (l.groupIds = l.groupIds.map(c=>(s.has(c) || s.set(c, Yh()),
        s.get(c)))),
        "containerId"in l && l.containerId) {
            const c = o(l.containerId);
            l.containerId = c
        }
        if ("boundElements"in l && l.boundElements && (l.boundElements = l.boundElements.reduce((c,u)=>{
            const d = o(u.id);
            return d && c.push({
                ...u,
                id: d
            }),
            c
        }
        , [])),
        "endBinding"in l && l.endBinding) {
            const c = o(l.endBinding.elementId);
            l.endBinding = c ? {
                ...l.endBinding,
                elementId: c
            } : null
        }
        if ("startBinding"in l && l.startBinding) {
            const c = o(l.startBinding.elementId);
            l.startBinding = c ? {
                ...l.startBinding,
                elementId: c
            } : null
        }
        l.frameId && (l.frameId = o(l.frameId)),
        n.push(l)
    }
    return n
}
  , Ei = new Map
  , IR = /^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/
  , SR = /^(?:http(?:s)?:\/\/)?(?:(?:w){3}.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/
  , CR = /^https:\/\/(?:www\.)?figma\.com/
  , kR = /^https:\/\/gist\.github\.com/
  , TR = /^<script[\s\S]*?\ssrc=["'](https:\/\/gist.github.com\/.*?)\.js["']/i
  , MR = /(?:http(?:s)?:\/\/)?(?:(?:w){3}.)?twitter.com/
  , AR = /^<blockquote[\s\S]*?\shref=["'](https:\/\/twitter.com\/[^"']*)/i
  , LR = /^https:\/\/(?:www\.)?val.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/
  , PR = /^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i
  , bg = new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "link.excalidraw.com", "gist.github.com", "twitter.com", "*.simplepdf.eu", "stackblitz.com", "val.town"])
  , uf = e=>`<html><body>${e}</body></html>`
  , Va = e=>{
    if (!e)
        return null;
    if (Ei.has(e))
        return Ei.get(e);
    const t = e;
    let n = "generic"
      , r = {
        w: 560,
        h: 840
    };
    const i = e.match(IR);
    if (i != null && i[2]) {
        const l = i[3] ? `&start=${i[3]}` : ""
          , c = e.includes("shorts");
        switch (n = "video",
        i[1]) {
        case "embed/":
        case "watch?v=":
        case "shorts/":
            e = `https://www.youtube.com/embed/${i[2]}?enablejsapi=1 ${l}`;
            break;
        case "playlist?list=":
        case "embed/videoseries?list=":
            e = `https://www.youtube.com/embed/videoseries?list=${i[2]}&enablejsapi=1 ${l}`;
            break;
        default:
            e = `https://www.youtube.com/embed/${i[2]}?enablejsapi=1 ${l}`;
            break
        }
        return r = c ? {
            w: 315,
            h: 560
        } : {
            w: 560,
            h: 315
        },
        Ei.set(t, {
            link: e,
            aspectRatio: r,
            type: n
        }),
        {
            link: e,
            aspectRatio: r,
            type: n
        }
    }
    const o = e.match(SR);
    if (o != null && o[1]) {
        const l = o == null ? void 0 : o[1]
          , c = /^\d+$/.test(l) ? void 0 : _("toast.unrecognizedLinkFormat");
        return n = "video",
        e = `https://player.vimeo.com/video/${l}?api=1`,
        r = {
            w: 560,
            h: 315
        },
        Ei.set(t, {
            link: e,
            aspectRatio: r,
            type: n
        }),
        {
            link: e,
            aspectRatio: r,
            type: n,
            warning: c
        }
    }
    if (e.match(CR))
        return n = "generic",
        e = `https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,
        r = {
            w: 550,
            h: 550
        },
        Ei.set(t, {
            link: e,
            aspectRatio: r,
            type: n
        }),
        {
            link: e,
            aspectRatio: r,
            type: n
        };
    const a = e.match(LR);
    if (a)
        return e = a[1] === "embed" ? a[0] : a[0].replace("/v", "/embed"),
        Ei.set(t, {
            link: e,
            aspectRatio: r,
            type: n
        }),
        {
            link: e,
            aspectRatio: r,
            type: n
        };
    if (MR.test(e)) {
        let l;
        if (/<blockquote/.test(e)) {
            const c = uf(e);
            l = {
                type: "document",
                srcdoc: ()=>c,
                aspectRatio: {
                    w: 480,
                    h: 480
                }
            }
        } else
            l = {
                type: "document",
                srcdoc: c=>uf(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${c}"><a href="${e}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),
                aspectRatio: {
                    w: 480,
                    h: 480
                }
            };
        return Ei.set(t, l),
        l
    }
    if (kR.test(e)) {
        let l;
        if (/<script>/.test(e)) {
            const c = uf(e);
            l = {
                type: "document",
                srcdoc: ()=>c,
                aspectRatio: {
                    w: 550,
                    h: 720
                }
            }
        } else
            l = {
                type: "document",
                srcdoc: ()=>uf(`
          <script src="${e}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),
                aspectRatio: {
                    w: 550,
                    h: 720
                }
            };
        return Ei.set(e, l),
        l
    }
    return Ei.set(e, {
        link: e,
        aspectRatio: r,
        type: n
    }),
    {
        link: e,
        aspectRatio: r,
        type: n
    }
}
  , _g = e=>{
    if (ht(e))
        return !0;
    if (e.type === "text") {
        const t = Lt(e);
        if (t && ht(t))
            return !0
    }
    return !1
}
  , s7 = e=>{
    const t = !e.link || (e == null ? void 0 : e.link) === "" ? "Empty Web-Embed" : e.link
      , n = Math.max(Math.min(e.width / 2, e.width / t.length), e.width / 30)
      , r = Lr.Helvetica
      , i = xt({
        fontSize: n,
        fontFamily: r
    });
    return Br({
        x: e.x + e.width / 2,
        y: e.y + e.height / 2,
        strokeColor: e.strokeColor !== "transparent" ? e.strokeColor : "black",
        backgroundColor: "transparent",
        fontFamily: r,
        fontSize: n,
        text: Md(t, i, e.width - 20),
        textAlign: "center",
        verticalAlign: Bn.MIDDLE,
        angle: e.angle ?? 0
    })
}
;
J({
    name: "setEmbeddableAsActiveTool",
    trackEvent: {
        category: "toolbar"
    },
    perform: (e,t,n,r)=>{
        const i = Ct(t, {
            type: "embeddable"
        });
        return ki(r.canvas, {
            ...t,
            activeTool: i
        }),
        {
            elements: e,
            appState: {
                ...t,
                activeTool: Ct(t, {
                    type: "embeddable"
                })
            },
            commitToHistory: !1
        }
    }
});
const Rw = (e,t)=>{
    try {
        const {hostname: n} = new URL(e)
          , r = n.replace(/^www\./, "")
          , i = r.replace(/^([^.]+)/, "*");
        if (t instanceof Set)
            return bg.has(r) || bg.has(i);
        if (r === t.replace(/^www\./, ""))
            return !0
    } catch {}
    return !1
}
  , RR = e=>{
    const t = e.match(AR);
    if (t && t.length === 2)
        return t[1];
    const n = e.match(TR);
    if (n && n.length === 2)
        return n[1];
    const r = e.match(PR);
    return r && r.length === 2 ? r[1] : e
}
  , qf = (e,t)=>{
    if (!e)
        return !1;
    if (t != null)
        if (typeof t == "function") {
            const n = t(e);
            if (typeof n == "boolean")
                return n
        } else {
            if (typeof t == "boolean")
                return t;
            if (t instanceof RegExp)
                return t.test(e);
            if (Array.isArray(t)) {
                for (const n of t)
                    if (n instanceof RegExp) {
                        if (e.match(n))
                            return !0
                    } else if (Rw(e, n))
                        return !0;
                return !1
            }
        }
    return Rw(e, bg)
}
;
class OR extends Error {
    constructor(t="Couldn't export canvas.", n="CANVAS_ERROR") {
        super(),
        this.name = n,
        this.message = t
    }
}
class zu extends DOMException {
    constructor(t="Request Aborted") {
        super(t, "AbortError")
    }
}
const bl = ({size: e="1em", circleWidth: t=8, synchronized: n=!1})=>{
    const i = -(ee.useRef(Date.now()).current % 1600);
    return p("div", {
        className: "Spinner",
        children: p("svg", {
            viewBox: "0 0 100 100",
            style: {
                width: e,
                height: e,
                "--spinner-delay": n ? `${i}ms` : 0
            },
            children: p("circle", {
                cx: "50",
                cy: "50",
                r: 50 - t / 2,
                strokeWidth: t,
                fill: "none",
                strokeMiterlimit: "10"
            })
        })
    })
}
  , Ee = ee.forwardRef((e,t)=>{
    const {id: n} = eo()
      , r = ee.useRef(null);
    ee.useImperativeHandle(t, ()=>r.current);
    const i = `ToolIcon_size_ ${e.size}`
      , [o,s] = x.useState(!1)
      , a = x.useRef(!0)
      , l = async u=>{
        var f;
        const d = "onClick"in e && ((f = e.onClick) == null ? void 0 : f.call(e, u));
        if (d && "then"in d)
            try {
                s(!0),
                await d
            } catch (h) {
                if (h instanceof zu)
                    console.warn(h);
                else
                    throw h
            } finally {
                a.current && s(!1)
            }
    }
    ;
    x.useEffect(()=>()=>{
        a.current = !1
    }
    , []);
    const c = x.useRef(null);
    if (e.type === "button" || e.type === "icon" || e.type === "submit") {
        const u = e.type === "icon" ? "button" : e.type;
        return k("button", {
            className: le("ToolIcon_type_button", i, e.className, e.visible && !e.hidden ? "ToolIcon_type_button--show" : "ToolIcon_type_button--hide", {
                ToolIcon: !e.hidden,
                "ToolIcon--selected": e.selected,
                "ToolIcon--plain": e.type === "icon"
            }),
            style: e.style,
            "data-testid": e["data-testid"],
            hidden: e.hidden,
            title: e.title,
            "aria-label": e["aria-label"],
            type: u,
            onClick: l,
            ref: r,
            disabled: o || e.isLoading,
            children: [(e.icon || e.label) && k("div", {
                className: "ToolIcon__icon",
                "aria-hidden": "true",
                children: [e.icon || e.label, e.keyBindingLabel && p("span", {
                    className: "ToolIcon__keybinding",
                    children: e.keyBindingLabel
                }), e.isLoading && p(bl, {})]
            }), e.showAriaLabel && k("div", {
                className: "ToolIcon__label",
                children: [e["aria-label"], " ", o && p(bl, {})]
            }), e.children]
        })
    }
    return k("label", {
        className: le("ToolIcon", e.className),
        title: e.title,
        onPointerDown: u=>{
            var d;
            c.current = u.pointerType || null,
            (d = e.onPointerDown) == null || d.call(e, {
                pointerType: u.pointerType || null
            })
        }
        ,
        onPointerUp: ()=>{
            requestAnimationFrame(()=>{
                c.current = null
            }
            )
        }
        ,
        children: [p("input", {
            className: `ToolIcon_type_radio ${i}`,
            type: "radio",
            name: e.name,
            "aria-label": e["aria-label"],
            "aria-keyshortcuts": e["aria-keyshortcuts"],
            "data-testid": e["data-testid"],
            id: `${n}-${e.id}`,
            onChange: ()=>{
                var u;
                (u = e.onChange) == null || u.call(e, {
                    pointerType: c.current
                })
            }
            ,
            checked: e.checked,
            ref: r
        }), k("div", {
            className: "ToolIcon__icon",
            children: [e.icon, e.keyBindingLabel && p("span", {
                className: "ToolIcon__keybinding",
                children: e.keyBindingLabel
            })]
        })]
    })
}
);
Ee.defaultProps = {
    visible: !0,
    className: "",
    size: "medium"
};
Ee.displayName = "ToolButton";
const kr = e=>"var(--icon-fill-color)"
  , a7 = e=>e === $t.LIGHT ? ot.white : "#1e1e1e"
  , H = (e,t=512)=>{
    const {width: n=512, height: r=n, mirror: i, style: o, ...s} = typeof t == "number" ? {
        width: t
    } : t;
    return p("svg", {
        "aria-hidden": "true",
        focusable: "false",
        role: "img",
        viewBox: `0 0 ${n} ${r}`,
        className: le({
            "rtl-mirror": i
        }),
        style: o,
        ...s,
        children: typeof e == "string" ? p("path", {
            fill: "currentColor",
            d: e
        }) : e
    })
}
  , we = {
    width: 24,
    height: 24,
    fill: "none",
    strokeWidth: 2,
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}
  , he = {
    width: 20,
    height: 20,
    fill: "none",
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}
  , l7 = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("rect", {
        x: 3,
        y: 8,
        width: 18,
        height: 4,
        rx: 1
    }), p("line", {
        x1: 12,
        y1: 8,
        x2: 12,
        y2: 21
    }), p("path", {
        d: "M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"
    }), p("path", {
        d: "M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"
    })]
}), we)
  , DR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"
    }), p("path", {
        d: "M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"
    }), p("line", {
        x1: "3",
        y1: "6",
        x2: "3",
        y2: "19"
    }), p("line", {
        x1: "12",
        y1: "6",
        x2: "12",
        y2: "19"
    }), p("line", {
        x1: "21",
        y1: "6",
        x2: "21",
        y2: "19"
    })]
}), we)
  , NR = H(k("svg", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "12",
        y1: "5",
        x2: "12",
        y2: "19"
    }), p("line", {
        x1: "5",
        y1: "12",
        x2: "19",
        y2: "12"
    })]
}), we)
  , FR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("circle", {
        cx: "12",
        cy: "12",
        r: "1"
    }), p("circle", {
        cx: "12",
        cy: "19",
        r: "1"
    }), p("circle", {
        cx: "12",
        cy: "5",
        r: "1"
    })]
}), we)
  , $R = H(k("svg", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M9 4v6l-2 4v2h10v-2l-2 -4v-6"
    }), p("line", {
        x1: "12",
        y1: "16",
        x2: "12",
        y2: "21"
    }), p("line", {
        x1: "8",
        y1: "4",
        x2: "16",
        y2: "4"
    })]
}), we)
  , BR = H(k("g", {
    children: [p("path", {
        d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",
        stroke: "currentColor",
        strokeWidth: "1.25"
    }), p("path", {
        d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",
        stroke: "currentColor",
        strokeWidth: "1.25"
    }), p("mask", {
        id: "UnlockedIcon",
        style: {
            maskType: "alpha"
        },
        maskUnits: "userSpaceOnUse",
        x: 6,
        y: 1,
        width: 9,
        height: 9,
        children: p("path", {
            stroke: "none",
            d: "M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",
            fill: "#fff"
        })
    }), p("g", {
        mask: "url(#UnlockedIcon)",
        children: p("path", {
            stroke: "none",
            d: "M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",
            fill: "currentColor"
        })
    })]
}), he)
  , zR = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"
    }), p("path", {
        d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"
    }), p("path", {
        d: "M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"
    })]
}), he)
  , HR = H(k(re, {
    children: [p("path", {
        d: "M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    }), p("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",
        fill: "currentColor"
    }), p("path", {
        d: "M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    })]
}), {
    width: 41,
    height: 94,
    fill: "none"
})
  , UR = H(k(re, {
    children: [p("path", {
        d: "M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    }), p("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",
        fill: "currentColor"
    }), p("path", {
        d: "M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    })]
}), {
    width: 85,
    height: 71,
    fill: "none"
})
  , VR = H(k(re, {
    children: [p("path", {
        d: "M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    }), p("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",
        fill: "currentColor"
    }), p("path", {
        d: "M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    })]
}), {
    width: 38,
    height: 78,
    fill: "none"
});
H(p("g", {
    fill: "currentColor",
    children: p("path", {
        d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",
        fill: "currentColor"
    })
}), {
    width: 40,
    height: 40,
    fill: "none"
});
const WR = H(k("g", {
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"
    }), p("path", {
        d: "M13.5 13.5l4.5 4.5"
    })]
}), {
    fill: "none",
    width: 22,
    height: 22,
    strokeWidth: 1.25
})
  , GR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("rect", {
        x: "4",
        y: "4",
        width: "16",
        height: "16",
        rx: "2"
    })]
}), we)
  , jR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"
    })]
}), we)
  , YR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("circle", {
        cx: "12",
        cy: "12",
        r: "9"
    })]
}), we)
  , ZR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "5",
        y1: "12",
        x2: "19",
        y2: "12"
    }), p("line", {
        x1: "15",
        y1: "16",
        x2: "19",
        y2: "12"
    }), p("line", {
        x1: "15",
        y1: "8",
        x2: "19",
        y2: "12"
    })]
}), we)
  , KR = H(p("path", {
    d: "M4.167 10h11.666",
    strokeWidth: "1.5"
}), he)
  , XR = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"
    }), p("path", {
        d: "M16 7h4"
    }), p("path", {
        d: "M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"
    })]
}), we)
  , ty = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        clipRule: "evenodd",
        d: "m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"
    }), p("path", {
        d: "m11.25 5.417 3.333 3.333"
    })]
}), he)
  , qR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "20",
        x2: "7",
        y2: "20"
    }), p("line", {
        x1: "14",
        y1: "20",
        x2: "21",
        y2: "20"
    }), p("line", {
        x1: "6.9",
        y1: "15",
        x2: "13.8",
        y2: "15"
    }), p("line", {
        x1: "10.2",
        y1: "6.3",
        x2: "16",
        y2: "20"
    }), p("polyline", {
        points: "5 20 11 4 13 4 20 20"
    })]
}), we)
  , QR = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M12.5 6.667h.01"
    }), p("path", {
        d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"
    }), p("path", {
        d: "m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"
    }), p("path", {
        d: "m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"
    })]
}), he)
  , JR = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"
    }), p("path", {
        d: "M18 13.3l-6.3 -6.3"
    })]
}), we)
  , eO = H(p("path", {
    strokeWidth: "1.25",
    d: "M10 4.167v11.666M4.167 10h11.666"
}), he)
  , tO = H(p("path", {
    d: "M5 10h10",
    strokeWidth: "1.25"
}), he)
  , Q1 = H(p("path", {
    strokeWidth: "1.25",
    d: "M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"
}), he)
  , Ow = H(k("g", {
    strokeWidth: "1.25",
    children: [p("polyline", {
        points: "12 16 18 10 12 4"
    }), p("polyline", {
        points: "8 4 2 10 8 16"
    })]
}), he)
  , nO = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"
    }), p("path", {
        clipRule: "evenodd",
        d: "M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"
    })]
}), he)
  , rO = H(p("path", {
    clipRule: "evenodd",
    d: "M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",
    stroke: "currentColor"
}), he)
  , iO = H(p("g", {
    stroke: "currentColor",
    strokeWidth: "1.25",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: p("path", {
        d: "M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"
    })
}), he)
  , c7 = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "6",
        x2: "20",
        y2: "6"
    }), p("line", {
        x1: "4",
        y1: "12",
        x2: "20",
        y2: "12"
    }), p("line", {
        x1: "4",
        y1: "18",
        x2: "20",
        y2: "18"
    })]
}), we)
  , u7 = H(p("path", {
    strokeWidth: "1.25",
    d: "M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"
}), he)
  , ny = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("circle", {
        cx: "12",
        cy: "12",
        r: "9"
    }), p("line", {
        x1: "12",
        y1: "17",
        x2: "12",
        y2: "17.01"
    }), p("path", {
        d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"
    })]
}), we)
  , pp = H(p("path", {
    strokeWidth: "1.25",
    d: "M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"
}), he)
  , oO = H(p("path", {
    d: "M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",
    strokeWidth: "1.25"
}), he)
  , sO = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"
    }), p("path", {
        d: "M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"
    })]
}), he)
  , aO = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"
    })]
}), we)
  , lO = H(p("polyline", {
    fill: "none",
    stroke: "currentColor",
    points: "20 6 9 17 4 12"
}), {
    width: 24,
    height: 24
})
  , d7 = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"
    }), p("path", {
        d: "M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"
    })]
}), he)
  , cO = H("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z", {
    width: 448,
    height: 512
})
  , uO = H("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z", {
    width: 448,
    height: 512
})
  , ry = H(p("path", {
    d: "m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",
    strokeWidth: "1.25"
}), he);
H("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z", {
    width: 384,
    height: 512
});
const dO = H("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z")
  , fO = H(k("g", {
    strokeWidth: "1.25",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M15 8h.01"
    }), p("path", {
        d: "M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"
    }), p("path", {
        d: "M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"
    }), p("path", {
        d: "M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"
    }), p("path", {
        d: "M19 16v6"
    }), p("path", {
        d: "M22 19l-3 3l-3 -3"
    })]
}), we)
  , hO = H("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z", {
    width: 512,
    height: 512
});
H("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", {
    width: 448,
    height: 512
});
H("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", {
    width: 448,
    height: 512
});
const pO = H("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");
H("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");
const mO = H(p("path", {
    d: "M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",
    strokeWidth: "1.25"
}), he)
  , gO = H(p("path", {
    d: "M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",
    strokeWidth: "1.25"
}), he)
  , vO = H("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z", {
    mirror: !0
})
  , yO = H(p("path", {
    d: "M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",
    strokeWidth: "1.5"
}), he)
  , EO = H("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z", {
    width: 24,
    height: 24
})
  , wO = H(k(re, {
    children: [p("path", {
        fill: "currentColor",
        d: "M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"
    }), p("path", {
        stroke: "currentColor",
        fill: "currentColor",
        d: "M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"
    })]
}), {
    width: 64,
    height: 64
});
H(p("path", {
    stroke: "currentColor",
    strokeWidth: "40",
    fill: "currentColor",
    d: "M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"
}), {
    width: 1024
});
const bO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: [p("path", {
            d: "M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z",
            fill: "currentColor"
        }), p("path", {
            d: "M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , _O = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: [p("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388",
            fill: "currentColor"
        }), p("path", {
            d: "M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , xO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z",
            fill: "currentColor"
        }), p("path", {
            d: "M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , IO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        children: [p("path", {
            d: "M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        }), p("path", {
            d: "M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        }), p("mask", {
            id: "SendToBackIcon",
            fill: "#fff",
            children: p("path", {
                fillRule: "evenodd",
                clipRule: "evenodd",
                d: "M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z"
            })
        }), p("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z",
            fill: "currentColor"
        }), p("path", {
            d: "M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z",
            fill: "currentColor",
            mask: "url(#SendToBackIcon)"
        }), p("path", {
            d: "M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , SO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M3.333 3.333h13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), p("path", {
            d: "M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , CO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M3.333 16.667h13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), p("path", {
            d: "M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , kO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M3.333 3.333v13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), p("path", {
            d: "M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , TO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M16.667 3.333v13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), p("path", {
            d: "M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , MO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M16.667 3.333v13.334M3.333 3.333v13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), p("path", {
            d: "M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , AO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [p("path", {
            d: "M3.333 3.333h13.334M3.333 16.667h13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), p("path", {
            d: "M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , LO = H(k("g", {
    stroke: "currentColor",
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M1.667 10h2.916",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), p("path", {
        d: "M8.333 10h3.334",
        strokeLinejoin: "round"
    }), p("path", {
        d: "M15.417 10h2.916",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), p("path", {
        d: "M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"
    })]
}), he)
  , PO = H(k("g", {
    stroke: "currentColor",
    strokeWidth: "1.25",
    children: [p("path", {
        d: "M10 18.333v-2.916",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), p("path", {
        d: "M10 11.667V8.333",
        strokeLinejoin: "round"
    }), p("path", {
        d: "M10 4.583V1.667",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), p("path", {
        d: "M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"
    })]
}), he)
  , iy = H(k("g", {
    strokeWidth: "1.5",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("circle", {
        cx: "9",
        cy: "7",
        r: "4"
    }), p("path", {
        d: "M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"
    }), p("path", {
        d: "M16 3.13a4 4 0 0 1 0 7.75"
    }), p("path", {
        d: "M21 21v-2a4 4 0 0 0 -3 -3.85"
    })]
}), we);
H("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");
H("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");
const _d = H(k(re, {
    children: [p("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: p("path", {
            d: "M15 5 5 15M5 5l10 10"
        })
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , RO = H("M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z", {
    width: 320,
    height: 512,
    style: {
        marginLeft: "-0.2rem"
    },
    mirror: !0
});
H("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z", {
    mirror: !0
});
const OO = H("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z", {
    width: 24
});
H("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z", {
    width: 384,
    height: 512
});
const DO = ee.memo(({theme: e})=>H(k(re, {
    children: [p("path", {
        d: "M25 26H111V111H25",
        fill: kr()
    }), p("path", {
        d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",
        stroke: kr(),
        strokeWidth: "2"
    }), p("path", {
        d: "M100 100H160V160H100",
        fill: kr()
    }), p("path", {
        d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",
        stroke: kr(),
        strokeWidth: "2"
    }), k("g", {
        fill: a7(e),
        stroke: kr(),
        strokeWidth: "6",
        children: [p("rect", {
            x: "2.5",
            y: "2.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "2.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "147.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "147.5",
            y: "2.5",
            width: "30",
            height: "30"
        })]
    })]
}), {
    width: 182,
    height: 182,
    mirror: !0
}))
  , NO = ee.memo(({theme: e})=>H(k(re, {
    children: [p("path", {
        d: "M25 26H111V111H25",
        fill: kr()
    }), p("path", {
        d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",
        stroke: kr(),
        strokeWidth: "2"
    }), p("path", {
        d: "M100 100H160V160H100",
        fill: kr()
    }), p("path", {
        d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",
        stroke: kr(),
        strokeWidth: "2"
    }), k("g", {
        fill: a7(e),
        stroke: kr(),
        strokeWidth: "6",
        children: [p("rect", {
            x: "2.5",
            y: "2.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "78.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "147.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "147.5",
            y: "78.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "105.5",
            y: "2.5",
            width: "30",
            height: "30"
        }), p("rect", {
            x: "2.5",
            y: "102.5",
            width: "30",
            height: "30"
        })]
    })]
}), {
    width: 182,
    height: 182,
    mirror: !0
}))
  , FO = H(p("g", {
    strokeWidth: 1.25,
    children: p("path", {
        d: "M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"
    })
}), he)
  , $O = H(k(re, {
    children: [p("path", {
        d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",
        stroke: "currentColor",
        strokeWidth: "1.25"
    }), p("mask", {
        id: "FillHachureIcon",
        style: {
            maskType: "alpha"
        },
        maskUnits: "userSpaceOnUse",
        x: 2,
        y: 2,
        width: 16,
        height: 16,
        children: p("path", {
            d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",
            fill: "currentColor",
            stroke: "currentColor",
            strokeWidth: "1.25"
        })
    }), p("g", {
        mask: "url(#FillHachureIcon)",
        children: p("path", {
            d: "M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    })]
}), he)
  , BO = H(k(re, {
    children: [k("g", {
        clipPath: "url(#a)",
        children: [p("path", {
            d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        }), p("mask", {
            id: "FillCrossHatchIcon",
            style: {
                maskType: "alpha"
            },
            maskUnits: "userSpaceOnUse",
            x: -1,
            y: -1,
            width: 22,
            height: 22,
            children: p("path", {
                d: "M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",
                stroke: "currentColor",
                strokeWidth: "1.25",
                strokeLinecap: "round",
                strokeLinejoin: "round"
            })
        }), p("g", {
            mask: "url(#FillCrossHatchIcon)",
            children: p("path", {
                d: "M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",
                fill: "currentColor"
            })
        })]
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , zO = H(k(re, {
    children: [p("g", {
        clipPath: "url(#a)",
        children: p("path", {
            d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        })
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), {
    ...he,
    fill: "currentColor"
})
  , f7 = H(p(re, {
    children: p("path", {
        d: "M4.167 10h11.666",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    })
}), he)
  , HO = H(p("path", {
    d: "M5 10h10",
    stroke: "currentColor",
    strokeWidth: "2.5",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}), he)
  , UO = H(p("path", {
    d: "M5 10h10",
    stroke: "currentColor",
    strokeWidth: "3.75",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}), he);
ee.memo(({theme: e})=>H(p("path", {
    d: "M6 10H34",
    stroke: kr(),
    strokeWidth: 2,
    fill: "none",
    strokeLinecap: "round"
}), {
    width: 40,
    height: 20
}));
const VO = H(k("g", {
    strokeWidth: "2",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M5 12h2"
    }), p("path", {
        d: "M17 12h2"
    }), p("path", {
        d: "M11 12h2"
    })]
}), we)
  , WO = H(k("g", {
    strokeWidth: "2",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M4 12v.01"
    }), p("path", {
        d: "M8 12v.01"
    }), p("path", {
        d: "M12 12v.01"
    }), p("path", {
        d: "M16 12v.01"
    }), p("path", {
        d: "M20 12v.01"
    })]
}), we)
  , GO = H(p("path", {
    d: "M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",
    strokeWidth: "1.25"
}), he)
  , jO = H(p("path", {
    d: "M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",
    strokeWidth: "1.25"
}), he)
  , YO = H(p("path", {
    d: "M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",
    strokeWidth: "1.25"
}), he)
  , ZO = H(k("svg", {
    strokeWidth: "1.5",
    children: [p("path", {
        d: "M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"
    }), p("path", {
        d: "M13.3333 3.33331V3.34331"
    }), p("path", {
        d: "M16.6667 3.33331V3.34331"
    }), p("path", {
        d: "M16.6667 6.66669V6.67669"
    }), p("path", {
        d: "M16.6667 10V10.01"
    }), p("path", {
        d: "M3.33334 13.3333V13.3433"
    }), p("path", {
        d: "M16.6667 13.3333V13.3433"
    }), p("path", {
        d: "M3.33334 16.6667V16.6767"
    }), p("path", {
        d: "M6.66666 16.6667V16.6767"
    }), p("path", {
        d: "M10 16.6667V16.6767"
    }), p("path", {
        d: "M13.3333 16.6667V16.6767"
    }), p("path", {
        d: "M16.6667 16.6667V16.6767"
    })]
}), he)
  , KO = H(k("g", {
    strokeWidth: "1.5",
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M4 12v-4a4 4 0 0 1 4 -4h4"
    }), p("line", {
        x1: "16",
        y1: "4",
        x2: "16",
        y2: "4.01"
    }), p("line", {
        x1: "20",
        y1: "4",
        x2: "20",
        y2: "4.01"
    }), p("line", {
        x1: "20",
        y1: "8",
        x2: "20",
        y2: "8.01"
    }), p("line", {
        x1: "20",
        y1: "12",
        x2: "20",
        y2: "12.01"
    }), p("line", {
        x1: "4",
        y1: "16",
        x2: "4",
        y2: "16.01"
    }), p("line", {
        x1: "20",
        y1: "16",
        x2: "20",
        y2: "16.01"
    }), p("line", {
        x1: "4",
        y1: "20",
        x2: "4",
        y2: "20.01"
    }), p("line", {
        x1: "8",
        y1: "20",
        x2: "8",
        y2: "20.01"
    }), p("line", {
        x1: "12",
        y1: "20",
        x2: "12",
        y2: "20.01"
    }), p("line", {
        x1: "16",
        y1: "20",
        x2: "16",
        y2: "20.01"
    }), p("line", {
        x1: "20",
        y1: "20",
        x2: "20",
        y2: "20.01"
    })]
}), we)
  , Dw = H(p("path", {
    d: "M6 10H34",
    stroke: "currentColor",
    strokeWidth: 2,
    fill: "none"
}), {
    width: 40,
    height: 20
})
  , Nw = ee.memo(({flip: e=!1})=>H(k("g", {
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    stroke: "currentColor",
    strokeWidth: 2,
    fill: "none",
    children: [p("path", {
        d: "M34 10H6M34 10L27 5M34 10L27 15"
    }), p("path", {
        d: "M27.5 5L34.5 10L27.5 15"
    })]
}), {
    width: 40,
    height: 20
}))
  , Fw = ee.memo(({flip: e=!1})=>H(k("g", {
    stroke: "currentColor",
    fill: "currentColor",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    children: [p("path", {
        d: "M32 10L6 10",
        strokeWidth: 2
    }), p("circle", {
        r: "4",
        transform: "matrix(-1 0 0 1 30 10)"
    })]
}), {
    width: 40,
    height: 20
}))
  , $w = ee.memo(({flip: e=!1})=>H(p("g", {
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    children: p("path", {
        d: "M34 10H5.99996M34 10L34 5M34 10L34 15",
        stroke: "currentColor",
        strokeWidth: 2,
        fill: "none"
    })
}), {
    width: 40,
    height: 20
}))
  , Bw = ee.memo(({flip: e=!1})=>H(k("g", {
    stroke: "currentColor",
    fill: "currentColor",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    children: [p("path", {
        d: "M32 10L6 10",
        strokeWidth: 2
    }), p("path", {
        d: "M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"
    })]
}), {
    width: 40,
    height: 20
}))
  , XO = H(k(re, {
    children: [p("g", {
        clipPath: "url(#a)",
        children: p("path", {
            d: "M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , qO = H(k(re, {
    children: [p("g", {
        clipPath: "url(#a)",
        children: p("path", {
            d: "M5 16.667V3.333L10 15l5-11.667v13.334",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , QO = H(k(re, {
    children: [p("g", {
        clipPath: "url(#a)",
        children: p("path", {
            d: "M5.833 3.333v13.334h8.334",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , JO = H(p(re, {
    children: p("path", {
        d: "m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    })
}), he)
  , eD = H(p(re, {
    children: p("g", {
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: p("path", {
            d: "M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"
        })
    })
}), he)
  , tD = H(k(re, {
    children: [p("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: p("path", {
            d: "M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"
        })
    }), p("defs", {
        children: p("clipPath", {
            id: "a",
            children: p("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), he)
  , nD = H(k("g", {
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "8",
        x2: "20",
        y2: "8"
    }), p("line", {
        x1: "4",
        y1: "12",
        x2: "12",
        y2: "12"
    }), p("line", {
        x1: "4",
        y1: "16",
        x2: "16",
        y2: "16"
    })]
}), we)
  , rD = H(k("g", {
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "8",
        x2: "20",
        y2: "8"
    }), p("line", {
        x1: "8",
        y1: "12",
        x2: "16",
        y2: "12"
    }), p("line", {
        x1: "6",
        y1: "16",
        x2: "18",
        y2: "16"
    })]
}), we)
  , iD = H(k("g", {
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "8",
        x2: "20",
        y2: "8"
    }), p("line", {
        x1: "10",
        y1: "12",
        x2: "20",
        y2: "12"
    }), p("line", {
        x1: "8",
        y1: "16",
        x2: "20",
        y2: "16"
    })]
}), we)
  , oD = ee.memo(({theme: e})=>H(k("g", {
    strokeWidth: "1.5",
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "4",
        x2: "20",
        y2: "4"
    }), p("rect", {
        x: "9",
        y: "8",
        width: "6",
        height: "12",
        rx: "2"
    })]
}), we))
  , sD = ee.memo(({theme: e})=>H(k("g", {
    strokeWidth: "2",
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "20",
        x2: "20",
        y2: "20"
    }), p("rect", {
        x: "9",
        y: "4",
        width: "6",
        height: "12",
        rx: "2"
    })]
}), we))
  , aD = ee.memo(({theme: e})=>H(k("g", {
    strokeWidth: "1.5",
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("line", {
        x1: "4",
        y1: "12",
        x2: "9",
        y2: "12"
    }), p("line", {
        x1: "15",
        y1: "12",
        x2: "20",
        y2: "12"
    }), p("rect", {
        x: "9",
        y: "6",
        width: "6",
        height: "12",
        rx: "2"
    })]
}), we))
  , lD = H(p("path", {
    d: "M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",
    fill: "currentColor"
}), {
    width: 640,
    height: 512
});
H(p("path", {
    d: "M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"
}));
const cD = H(k("g", {
    strokeWidth: 1.25,
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"
    }), p("path", {
        d: "M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"
    }), p("path", {
        d: "M14 5.5a1.5 1.5 0 0 1 3 0v6.5"
    }), p("path", {
        d: "M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"
    })]
}), we)
  , zw = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"
    }), p("path", {
        d: "M7 11l5 5l5 -5"
    }), p("path", {
        d: "M12 4l0 12"
    })]
}), we)
  , oy = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"
    }), p("path", {
        d: "M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"
    })]
}), we)
  , uD = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"
    }), p("path", {
        d: "M12 17l0 .01"
    }), p("path", {
        d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"
    })]
}), we)
  , dD = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M7 4v16l13 -8z"
    })]
}), we)
  , fD = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",
        strokeWidth: "0",
        fill: "currentColor"
    })]
}), we)
  , h7 = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M5 12l5 5l10 -10"
    })]
}), we)
  , hD = H(k(re, {
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"
    }), p("path", {
        d: "M12 9v4"
    }), p("path", {
        d: "M12 17h.01"
    })]
}), we)
  , pD = H(k("g", {
    strokeWidth: 1.25,
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M11 7l6 6"
    }), p("path", {
        d: "M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"
    })]
}), we)
  , mD = H(k("g", {
    strokeWidth: 1.5,
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M12 3l-4 7h8z"
    }), p("path", {
        d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"
    }), p("path", {
        d: "M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"
    })]
}), we)
  , Hw = H(k("g", {
    strokeWidth: 1.5,
    children: [p("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), p("path", {
        d: "M4 7l16 0"
    }), p("path", {
        d: "M4 17l16 0"
    }), p("path", {
        d: "M7 4l0 16"
    }), p("path", {
        d: "M17 4l0 16"
    })]
}), we)
  , p7 = H(k("g", {
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "1.25",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    transform: "rotate(90 10 10)",
    children: [p("path", {
        clipRule: "evenodd",
        d: "m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"
    }), p("path", {
        d: "m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"
    })]
}), 20)
  , Me = {
    EQUAL: "Equal",
    MINUS: "Minus",
    NUM_ADD: "NumpadAdd",
    NUM_SUBTRACT: "NumpadSubtract",
    NUM_ZERO: "Numpad0",
    BRACKET_RIGHT: "BracketRight",
    BRACKET_LEFT: "BracketLeft",
    ONE: "Digit1",
    TWO: "Digit2",
    THREE: "Digit3",
    NINE: "Digit9",
    QUOTE: "Quote",
    ZERO: "Digit0",
    SLASH: "Slash",
    C: "KeyC",
    D: "KeyD",
    H: "KeyH",
    V: "KeyV",
    Z: "KeyZ",
    R: "KeyR",
    S: "KeyS"
}
  , R = {
    ARROW_DOWN: "ArrowDown",
    ARROW_LEFT: "ArrowLeft",
    ARROW_RIGHT: "ArrowRight",
    ARROW_UP: "ArrowUp",
    PAGE_UP: "PageUp",
    PAGE_DOWN: "PageDown",
    BACKSPACE: "Backspace",
    ALT: "Alt",
    CTRL_OR_CMD: ui ? "metaKey" : "ctrlKey",
    DELETE: "Delete",
    ENTER: "Enter",
    ESCAPE: "Escape",
    QUESTION_MARK: "?",
    SPACE: " ",
    TAB: "Tab",
    CHEVRON_LEFT: "<",
    CHEVRON_RIGHT: ">",
    PERIOD: ".",
    COMMA: ",",
    SUBTRACT: "-",
    A: "a",
    C: "c",
    D: "d",
    E: "e",
    F: "f",
    G: "g",
    H: "h",
    I: "i",
    L: "l",
    O: "o",
    P: "p",
    Q: "q",
    R: "r",
    S: "s",
    T: "t",
    V: "v",
    X: "x",
    Y: "y",
    Z: "z",
    K: "k",
    W: "w",
    0: "0",
    1: "1",
    2: "2",
    3: "3",
    4: "4",
    5: "5",
    6: "6",
    7: "7",
    8: "8",
    9: "9"
}
  , Qf = e=>e === R.ARROW_LEFT || e === R.ARROW_RIGHT || e === R.ARROW_DOWN || e === R.ARROW_UP
  , mp = e=>e.altKey
  , gc = e=>e.shiftKey
  , Kc = e=>e.shiftKey;
const Xc = ()=>{
    const e = document.querySelector(".excalidraw-tooltip");
    if (e)
        return e;
    const t = document.createElement("div");
    return document.body.appendChild(t),
    t.classList.add("excalidraw-tooltip"),
    t
}
  , m7 = (e,t,n="bottom")=>{
    const r = e.getBoundingClientRect()
      , i = window.innerWidth
      , o = window.innerHeight
      , s = 5;
    let a = t.left + t.width / 2 - r.width / 2;
    a < 0 ? a = s : a + r.width >= i && (a = i - r.width - s);
    let l;
    n === "bottom" ? (l = t.top + t.height + s,
    l + r.height >= o && (l = t.top - r.height - s)) : (l = t.top - r.height - s,
    l < 0 && (l = t.top + t.height + s)),
    Object.assign(e.style, {
        top: `${l}px`,
        left: `${a}px`
    })
}
  , gD = (e,t,n,r)=>{
    t.classList.add("excalidraw-tooltip--visible"),
    t.style.minWidth = r ? "50ch" : "10ch",
    t.style.maxWidth = r ? "50ch" : "15ch",
    t.textContent = n;
    const i = e.getBoundingClientRect();
    m7(t, i)
}
  , Zo = ({children: e, label: t, long: n=!1, style: r})=>(x.useEffect(()=>()=>Xc().classList.remove("excalidraw-tooltip--visible"), []),
p("div", {
    className: "excalidraw-tooltip-wrapper",
    onPointerEnter: i=>gD(i.currentTarget, Xc(), t, n),
    onPointerLeave: ()=>Xc().classList.remove("excalidraw-tooltip--visible"),
    style: r,
    children: e
}));
var sy = {};
Object.defineProperty(sy, "__esModule", {
    value: !0
});
var g7 = sy.sanitizeUrl = void 0
  , vD = /^([^\w]*)(javascript|data|vbscript)/im
  , yD = /&#(\w+)(^\w|;)?/g
  , ED = /&(newline|tab);/gi
  , wD = /[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim
  , bD = /^.+(:|&colon;)/gim
  , _D = [".", "/"];
function xD(e) {
    return _D.indexOf(e[0]) > -1
}
function ID(e) {
    return e.replace(yD, function(t, n) {
        return String.fromCharCode(n)
    })
}
function SD(e) {
    var t = ID(e || "").replace(ED, "").replace(wD, "").trim();
    if (!t)
        return "about:blank";
    if (xD(t))
        return t;
    var n = t.match(bD);
    if (!n)
        return t;
    var r = n[0];
    return vD.test(r) ? "about:blank" : t
}
g7 = sy.sanitizeUrl = SD;
const ci = e=>(e = e.trim(),
e && g7(e))
  , v7 = e=>!!(e != null && e.includes(location.origin) || e != null && e.startsWith("/"))
  , y7 = e=>{
    if (e = ci(e),
    e.startsWith("/"))
        return `${location.origin}${e}`;
    try {
        new URL(e)
    } catch {
        return "about:blank"
    }
    return e
}
;
const Jt = class Jt {
}
;
M(Jt, "rg", new Fu),
M(Jt, "cache", new WeakMap),
M(Jt, "get", t=>Jt.cache.get(t)),
M(Jt, "set", (t,n)=>Jt.cache.set(t, n)),
M(Jt, "delete", t=>Jt.cache.delete(t)),
M(Jt, "destroy", ()=>{
    Jt.cache = new WeakMap
}
),
M(Jt, "generateElementShape", (t,n=!1)=>{
    const r = n ? void 0 : Jt.get(t);
    if (r !== void 0)
        return r;
    Gg.delete(t);
    const i = Iz(t, Jt.rg, n);
    return Jt.cache.set(t, i),
    i
}
);
let We = Jt;
const ay = 320
  , E7 = 85
  , xg = 5
  , CD = 42
  , kD = 500
  , w7 = document.createElement("img");
w7.src = `data:${ve.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;
let Ig = !1;
const df = new Map
  , TD = ({element: e, setAppState: t, onLinkOpen: n, setToast: r})=>{
    const i = jk()
      , o = M0()
      , s = e.link || ""
      , [a,l] = x.useState(s)
      , c = x.useRef(null)
      , u = i.showHyperlinkPopup === "editor"
      , d = x.useCallback(()=>{
        var v;
        if (!c.current)
            return;
        const E = ci(c.current.value) || null;
        if (!e.link && E && nt("hyperlink", "create"),
        ht(e)) {
            if (((v = i.activeEmbeddable) == null ? void 0 : v.element) === e && t({
                activeEmbeddable: null
            }),
            !E) {
                Q(e, {
                    validated: !1,
                    link: null
                });
                return
            }
            if (!qf(E, o.validateEmbeddable))
                E && r({
                    message: _("toast.unableToEmbed"),
                    closable: !0
                }),
                e.link && df.set(e.id, e.link),
                Q(e, {
                    validated: !1,
                    link: E
                }),
                We.delete(e);
            else {
                const {width: y, height: w} = e
                  , b = Va(E);
                b != null && b.warning && r({
                    message: b.warning,
                    closable: !0
                });
                const I = b ? b.aspectRatio.w / b.aspectRatio.h : 1
                  , S = df.get(e.id) !== e.link;
                Q(e, {
                    ...S ? {
                        width: (b == null ? void 0 : b.type) === "video" ? y > w ? y : w * I : y,
                        height: (b == null ? void 0 : b.type) === "video" && y > w ? y / I : w
                    } : {},
                    validated: !0,
                    link: E
                }),
                We.delete(e),
                df.has(e.id) && df.delete(e.id)
            }
        } else
            Q(e, {
                link: E
            })
    }
    , [e, r, o.validateEmbeddable, i.activeEmbeddable, t]);
    x.useLayoutEffect(()=>()=>{
        d()
    }
    , [d]),
    x.useEffect(()=>{
        let E = null;
        const v = y=>{
            if (u)
                return;
            E && clearTimeout(E),
            RD(e, i, [y.clientX, y.clientY]) && (E = window.setTimeout(()=>{
                t({
                    showHyperlinkPopup: !1
                })
            }
            , kD))
        }
        ;
        return window.addEventListener(U.POINTER_MOVE, v, !1),
        ()=>{
            window.removeEventListener(U.POINTER_MOVE, v, !1),
            E && clearTimeout(E)
        }
    }
    , [i, e, u, t]);
    const f = x.useCallback(()=>{
        nt("hyperlink", "delete"),
        Q(e, {
            link: null
        }),
        u && (c.current.value = ""),
        t({
            showHyperlinkPopup: !1
        })
    }
    , [t, e, u])
      , h = ()=>{
        nt("hyperlink", "edit", "popup-ui"),
        t({
            showHyperlinkPopup: "editor"
        })
    }
      , {x: m, y: g} = b7(e, i);
    return i.draggingElement || i.resizingElement || i.isRotating || i.openMenu || i.viewModeEnabled ? null : k("div", {
        className: "excalidraw-hyperlinkContainer",
        style: {
            top: `${g}px`,
            left: `${m}px`,
            width: ay,
            padding: xg
        },
        onClick: ()=>{
            !e.link && !u && t({
                showHyperlinkPopup: "editor"
            })
        }
        ,
        children: [u ? p("input", {
            className: le("excalidraw-hyperlinkContainer-input"),
            placeholder: "Type or paste your link here",
            ref: c,
            value: a,
            onChange: E=>l(E.target.value),
            autoFocus: !0,
            onKeyDown: E=>{
                E.stopPropagation(),
                E[R.CTRL_OR_CMD] && E.key === R.K && E.preventDefault(),
                (E.key === R.ENTER || E.key === R.ESCAPE) && (d(),
                t({
                    showHyperlinkPopup: "info"
                }))
            }
        }) : e.link ? p("a", {
            href: ci(e.link || ""),
            className: "excalidraw-hyperlinkContainer-link",
            target: v7(e.link) ? "_self" : "_blank",
            onClick: E=>{
                if (e.link && n) {
                    const v = Mx(U.EXCALIDRAW_LINK, E.nativeEvent);
                    n({
                        ...e,
                        link: ci(e.link)
                    }, v),
                    v.defaultPrevented && E.preventDefault()
                }
            }
            ,
            rel: "noopener noreferrer",
            children: e.link
        }) : p("div", {
            className: "excalidraw-hyperlinkContainer-link",
            children: _("labels.link.empty")
        }), k("div", {
            className: "excalidraw-hyperlinkContainer__buttons",
            children: [!u && p(Ee, {
                type: "button",
                title: _("buttons.edit"),
                "aria-label": _("buttons.edit"),
                label: _("buttons.edit"),
                onClick: h,
                className: "excalidraw-hyperlinkContainer--edit",
                icon: ty
            }), s && !ht(e) && p(Ee, {
                type: "button",
                title: _("buttons.remove"),
                "aria-label": _("buttons.remove"),
                label: _("buttons.remove"),
                onClick: f,
                className: "excalidraw-hyperlinkContainer--remove",
                icon: Q1
            })]
        })]
    })
}
  , b7 = (e,t)=>{
    const [n,r] = me(e)
      , {x: i, y: o} = Cr({
        sceneX: n + e.width / 2,
        sceneY: r
    }, t)
      , s = i - t.offsetLeft - ay / 2
      , a = o - t.offsetTop - E7;
    return {
        x: s,
        y: a
    }
}
  , MD = J({
    name: "hyperlink",
    perform: (e,t)=>t.showHyperlinkPopup === "editor" ? !1 : {
        elements: e,
        appState: {
            ...t,
            showHyperlinkPopup: "editor",
            openMenu: null
        },
        commitToHistory: !0
    },
    trackEvent: {
        category: "hyperlink",
        action: "click"
    },
    keyTest: e=>e[R.CTRL_OR_CMD] && e.key === R.K,
    contextItemLabel: (e,t)=>Uw(e, t),
    predicate: (e,t)=>it(e, t).length === 1,
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = it(e, t);
        return p(Ee, {
            type: "button",
            icon: d7,
            "aria-label": _(Uw(e, t)),
            title: `${ht(e[0]) ? _("labels.link.labelEmbed") : _("labels.link.label")} - ${j("CtrlOrCmd+K")}`,
            onClick: ()=>n(null),
            selected: r.length === 1 && !!r[0].link
        })
    }
})
  , Uw = (e,t)=>{
    const n = it(e, t);
    return n[0].link ? ht(n[0]) ? "labels.link.editEmbed" : "labels.link.edit" : ht(n[0]) ? "labels.link.createEmbed" : "labels.link.create"
}
  , ly = ([e,t,n,r],i,o)=>{
    const s = gz
      , a = s / o.zoom.value
      , l = s / o.zoom.value
      , c = s / o.zoom.value
      , u = (e + n) / 2
      , d = (t + r) / 2
      , f = (s - 8) / (2 * o.zoom.value)
      , h = 4 / o.zoom.value
      , m = n + h - f
      , g = t - h - c + f
      , [E,v] = be(m + a / 2, g + l / 2, u, d, i);
    return [E - a / 2, v - l / 2, a, l]
}
  , _7 = (e,t,[n,r])=>{
    const i = 4 / t.zoom.value
      , [o,s,a,l] = me(e)
      , [c,u,d,f] = ly([o, s, a, l], e.angle, t);
    return n > c - i && n < c + i + d && r > u - i && r < u + f + i
}
  , gp = (e,t,[n,r],i)=>{
    if (!e.link || t.selectedElementIds[e.id])
        return !1;
    const o = 4 / t.zoom.value;
    return !i && t.viewModeEnabled && e0(e, [n, r], o, null) ? !0 : _7(e, t, [n, r])
}
;
let qc = null;
const AD = (e,t)=>{
    qc && clearTimeout(qc),
    qc = window.setTimeout(()=>LD(e, t), pL)
}
  , LD = (e,t)=>{
    if (!e.link)
        return;
    const n = Xc();
    n.classList.add("excalidraw-tooltip--visible"),
    n.style.maxWidth = "20rem",
    n.textContent = e.link;
    const [r,i,o,s] = me(e)
      , [a,l,c,u] = ly([r, i, o, s], e.angle, t)
      , d = Cr({
        sceneX: a,
        sceneY: l
    }, t);
    m7(n, {
        left: d.x,
        top: d.y,
        width: c,
        height: u
    }, "top"),
    nt("hyperlink", "tooltip", "link-icon"),
    Ig = !0
}
  , PD = ()=>{
    qc && clearTimeout(qc),
    Ig && (Ig = !1,
    Xc().classList.remove("excalidraw-tooltip--visible"))
}
  , RD = (e,t,[n,r])=>{
    const {x: i, y: o} = Ke({
        clientX: n,
        clientY: r
    }, t)
      , s = 15 / t.zoom.value;
    if (e0(e, [i, o], s, null))
        return !1;
    const [a,l,c] = me(e);
    if (i >= a && i <= c && o >= l - E7 && o <= l)
        return !1;
    const {x: u, y: d} = b7(e, t);
    return !(n >= u - s && n <= u + ay + xg * 2 + s && r >= d - s && r <= d + s + xg * 2 + CD)
}
  , OD = "#ff6b6b"
  , DD = "#ff0000"
  , Vw = 1
  , Ww = 2
  , ND = (e,t)=>{
    if (!t.snapLines.length)
        return;
    const n = t.theme === "light" || t.zenModeEnabled ? OD : DD
      , r = (t.zenModeEnabled ? Vw * 1.5 : Vw) / t.zoom.value;
    e.save(),
    e.translate(t.scrollX, t.scrollY);
    for (const i of t.snapLines)
        i.type === "pointer" ? (e.lineWidth = r,
        e.strokeStyle = n,
        $D(i, e, t)) : i.type === "gap" ? (e.lineWidth = r,
        e.strokeStyle = n,
        BD(i.points[0], i.points[1], i.direction, t, e)) : i.type === "points" && (e.lineWidth = r,
        e.strokeStyle = n,
        FD(i, e, t));
    e.restore()
}
  , FD = (e,t,n)=>{
    if (!n.zenModeEnabled) {
        const r = e.points[0]
          , i = e.points[e.points.length - 1];
        qn(r, i, t)
    }
    for (const r of e.points)
        x7(r, n, t)
}
  , $D = (e,t,n)=>{
    x7(e.points[0], n, t),
    n.zenModeEnabled || qn(e.points[0], e.points[1], t)
}
  , x7 = ([e,t],n,r)=>{
    r.save();
    const i = (n.zenModeEnabled ? Ww * 1.5 : Ww) / n.zoom.value;
    r.beginPath(),
    r.moveTo(e - i, t - i),
    r.lineTo(e + i, t + i),
    r.moveTo(e + i, t - i),
    r.lineTo(e - i, t + i),
    r.stroke(),
    r.restore()
}
  , qn = (e,t,n)=>{
    n.beginPath(),
    n.lineTo(...e),
    n.lineTo(...t),
    n.stroke()
}
  , BD = (e,t,n,r,i)=>{
    const o = 8 / r.zoom.value
      , s = o / 2
      , a = o / 4;
    if (n === "horizontal") {
        const l = [(e[0] + t[0]) / 2, e[1]];
        r.zenModeEnabled || qn([e[0], e[1] - o], [e[0], e[1] + o], i),
        qn([l[0] - a, l[1] - s], [l[0] - a, l[1] + s], i),
        qn([l[0] + a, l[1] - s], [l[0] + a, l[1] + s], i),
        r.zenModeEnabled || (qn([t[0], t[1] - o], [t[0], t[1] + o], i),
        qn(e, t, i))
    } else {
        const l = [e[0], (e[1] + t[1]) / 2];
        r.zenModeEnabled || qn([e[0] - o, e[1]], [e[0] + o, e[1]], i),
        qn([l[0] - s, l[1] - a], [l[0] + s, l[1] - a], i),
        qn([l[0] - s, l[1] + a], [l[0] + s, l[1] + a], i),
        r.zenModeEnabled || (qn([t[0] - o, t[1]], [t[0] + o, t[1]], i),
        qn(e, t, i))
    }
}
;
(()=>{
    var r, i, o;
    (r = Path2D.prototype).roundRect ?? (r.roundRect = e),
    globalThis.CanvasRenderingContext2D && ((i = globalThis.CanvasRenderingContext2D.prototype).roundRect ?? (i.roundRect = e)),
    globalThis.OffscreenCanvasRenderingContext2D && ((o = globalThis.OffscreenCanvasRenderingContext2D.prototype).roundRect ?? (o.roundRect = e));
    function e(s, a, l, c, u) {
        if (![s, a, l, c].every(S=>Number.isFinite(S)))
            return;
        u = y(u);
        let d, f, h, m;
        if (u.length === 4)
            d = b(u[0]),
            f = b(u[1]),
            h = b(u[2]),
            m = b(u[3]);
        else if (u.length === 3)
            d = b(u[0]),
            f = b(u[1]),
            m = b(u[1]),
            h = b(u[2]);
        else if (u.length === 2)
            d = b(u[0]),
            h = b(u[0]),
            f = b(u[1]),
            m = b(u[1]);
        else if (u.length === 1)
            d = b(u[0]),
            f = b(u[0]),
            h = b(u[0]),
            m = b(u[0]);
        else
            throw new RangeError(`${t(this)} ${u.length} is not a valid size for radii sequence.`);
        const g = [d, f, h, m]
          , E = g.find(({x: S, y: C})=>S < 0 || C < 0);
        if ((E == null ? void 0 : E.x) < 0 ? E.x : E == null || E.y,
        g.some(({x: S, y: C})=>!Number.isFinite(S) || !Number.isFinite(C)))
            return;
        if (E)
            throw new RangeError(`${t(this)} Radius value ${E} is negative.`);
        I(g),
        l < 0 && c < 0 ? (this.moveTo(s - d.x, a),
        this.ellipse(s + l + f.x, a - f.y, f.x, f.y, 0, -Math.PI * 1.5, -Math.PI),
        this.ellipse(s + l + h.x, a + c + h.y, h.x, h.y, 0, -Math.PI, -Math.PI / 2),
        this.ellipse(s - m.x, a + c + m.y, m.x, m.y, 0, -Math.PI / 2, 0),
        this.ellipse(s - d.x, a - d.y, d.x, d.y, 0, 0, -Math.PI / 2)) : l < 0 ? (this.moveTo(s - d.x, a),
        this.ellipse(s + l + f.x, a + f.y, f.x, f.y, 0, -Math.PI / 2, -Math.PI, 1),
        this.ellipse(s + l + h.x, a + c - h.y, h.x, h.y, 0, -Math.PI, -Math.PI * 1.5, 1),
        this.ellipse(s - m.x, a + c - m.y, m.x, m.y, 0, Math.PI / 2, 0, 1),
        this.ellipse(s - d.x, a + d.y, d.x, d.y, 0, 0, -Math.PI / 2, 1)) : c < 0 ? (this.moveTo(s + d.x, a),
        this.ellipse(s + l - f.x, a - f.y, f.x, f.y, 0, Math.PI / 2, 0, 1),
        this.ellipse(s + l - h.x, a + c + h.y, h.x, h.y, 0, 0, -Math.PI / 2, 1),
        this.ellipse(s + m.x, a + c + m.y, m.x, m.y, 0, -Math.PI / 2, -Math.PI, 1),
        this.ellipse(s + d.x, a - d.y, d.x, d.y, 0, -Math.PI, -Math.PI * 1.5, 1)) : (this.moveTo(s + d.x, a),
        this.ellipse(s + l - f.x, a + f.y, f.x, f.y, 0, -Math.PI / 2, 0),
        this.ellipse(s + l - h.x, a + c - h.y, h.x, h.y, 0, 0, Math.PI / 2),
        this.ellipse(s + m.x, a + c - m.y, m.x, m.y, 0, Math.PI / 2, Math.PI),
        this.ellipse(s + d.x, a + d.y, d.x, d.y, 0, Math.PI, Math.PI * 1.5)),
        this.closePath(),
        this.moveTo(s, a);
        function v(S) {
            const {x: C, y: T, z: L, w: A} = S;
            return {
                x: C,
                y: T,
                z: L,
                w: A
            }
        }
        function y(S) {
            const C = typeof S;
            return C === "undefined" || S === null ? [0] : C === "function" ? [NaN] : C === "object" ? typeof S[Symbol.iterator] == "function" ? [...S].map(T=>{
                const L = typeof T;
                return L === "undefined" || T === null ? 0 : L === "function" ? NaN : L === "object" ? v(T) : w(T)
            }
            ) : [v(S)] : [w(S)]
        }
        function w(S) {
            return +S
        }
        function b(S) {
            const C = w(S);
            return Number.isFinite(C) ? {
                x: C,
                y: C
            } : Object(S) === S ? {
                x: w(S.x ?? 0),
                y: w(S.y ?? 0)
            } : {
                x: NaN,
                y: NaN
            }
        }
        function I(S) {
            const [C,T,L,A] = S
              , P = [Math.abs(l) / (C.x + T.x), Math.abs(c) / (T.y + L.y), Math.abs(l) / (L.x + A.x), Math.abs(c) / (C.y + A.y)]
              , O = Math.min(...P);
            if (O <= 1)
                for (const N of S)
                    N.x *= O,
                    N.y *= O
        }
    }
    function t(s) {
        return `Failed to execute 'roundRect' on '${n(s)}':`
    }
    function n(s) {
        return Object(s) === s && s instanceof Path2D ? "Path2D" : s instanceof (globalThis == null ? void 0 : globalThis.CanvasRenderingContext2D) ? "CanvasRenderingContext2D" : s instanceof (globalThis == null ? void 0 : globalThis.OffscreenCanvasRenderingContext2D) ? "OffscreenCanvasRenderingContext2D" : (s == null ? void 0 : s.constructor.name) || s
    }
}
)();
const Hu = 2
  , xd = (e,t,n,r,i,o,s,a,l=!1,c=0)=>{
    e.save(),
    e.translate(o, s),
    e.rotate(a),
    l && e.fillRect(t - o, n - s, r, i),
    c && e.roundRect ? (e.beginPath(),
    e.roundRect(t - o, n - s, r, i, c),
    e.stroke(),
    e.closePath()) : e.strokeRect(t - o, n - s, r, i),
    e.restore()
}
  , zD = (e,t,n,r,i,o)=>{
    e.save(),
    e.translate(r, i),
    e.rotate(o),
    e.beginPath(),
    e.moveTo(0, n / 2),
    e.lineTo(t / 2, 0),
    e.lineTo(0, -n / 2),
    e.lineTo(-t / 2, 0),
    e.closePath(),
    e.stroke(),
    e.restore()
}
  , HD = (e,t,n,r,i,o)=>{
    e.beginPath(),
    e.ellipse(r, i, t / 2, n / 2, o, 0, Math.PI * 2),
    e.stroke()
}
  , J1 = (e,t,n,r,i=!0)=>{
    e.beginPath(),
    e.arc(t, n, r, 0, Math.PI * 2),
    e.fill(),
    i && e.stroke()
}
  , UD = (e,t,n,r,i,o,s)=>{
    let l;
    (m=>{
        m.Bold = "#cccccc",
        m.Regular = "#e5e5e5"
    }
    )(l || (l = {}));
    const c = -Math.round(i.value / t) * t + n % t
      , u = -Math.round(i.value / t) * t + r % t
      , d = Math.min(1 / i.value, 1)
      , f = 1 / i.value
      , h = [d * 3, f + (d + f)];
    e.save(),
    e.lineWidth = d;
    for (let m = c; m < c + o + t * 2; m += t) {
        const g = Math.round(m - n) % (5 * t) === 0;
        e.beginPath(),
        e.setLineDash(g ? [] : h),
        e.strokeStyle = g ? "#cccccc" : "#e5e5e5",
        e.moveTo(m, u - t),
        e.lineTo(m, u + s + t * 2),
        e.stroke()
    }
    for (let m = u; m < u + s + t * 2; m += t) {
        const g = Math.round(m - r) % (5 * t) === 0;
        e.beginPath(),
        e.setLineDash(g ? [] : h),
        e.strokeStyle = g ? "#cccccc" : "#e5e5e5",
        e.moveTo(c - t, m),
        e.lineTo(c + o + t * 2, m),
        e.stroke()
    }
    e.restore()
}
  , ff = (e,t,n,r,i,o=!1)=>{
    e.strokeStyle = "#5e5ad8",
    e.setLineDash([]),
    e.fillStyle = "rgba(255, 255, 255, 0.9)",
    i ? e.fillStyle = "rgba(134, 131, 226, 0.9)" : o && (e.fillStyle = "rgba(177, 151, 252, 0.7)"),
    J1(e, n[0], n[1], r / t.zoom.value, !o)
}
  , vp = (e,t,n)=>{
    if (!t.selectedLinearElement)
        return;
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    e.lineWidth = 1 / t.zoom.value;
    const r = ce.getPointsGlobalCoordinates(n)
      , {POINT_HANDLE_SIZE: i} = ce
      , o = t.editingLinearElement ? i : i / 2;
    r.forEach((a,l)=>{
        var u, d;
        const c = !!((d = (u = t.editingLinearElement) == null ? void 0 : u.selectedPointsIndices) != null && d.includes(l));
        ff(e, t, a, o, c)
    }
    ),
    ce.getEditorMidPoints(n, t).filter(a=>a !== null).forEach(a=>{
        var l;
        (l = t == null ? void 0 : t.selectedLinearElement) != null && l.segmentMidPointHoveredCoords && ce.arePointsEqual(a, t.selectedLinearElement.segmentMidPointHoveredCoords) ? t.editingLinearElement ? (ff(e, t, a, o, !1),
        Sg(a, e, t)) : (Sg(a, e, t),
        ff(e, t, a, o, !1)) : (t.editingLinearElement || r.length === 2) && ff(e, t, a, i / 2, !1, !0)
    }
    ),
    e.restore()
}
  , Sg = (e,t,n)=>{
    t.fillStyle = "rgba(105, 101, 219, 0.4)",
    J1(t, e[0], e[1], ce.POINT_HANDLE_SIZE / n.zoom.value, !1)
}
  , VD = (e,t)=>{
    var s, a;
    const {elementId: n, hoverPointIndex: r} = t.selectedLinearElement;
    if ((a = (s = t.editingLinearElement) == null ? void 0 : s.selectedPointsIndices) != null && a.includes(r))
        return;
    const i = ce.getElement(n);
    if (!i)
        return;
    const o = ce.getPointAtIndexGlobalCoordinates(i, r);
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    Sg(o, e, t),
    e.restore()
}
  , Gw = (e,t,n,r)=>{
    t.translate(e.x + r.scrollX, e.y + r.scrollY),
    t.beginPath(),
    t.roundRect && !n.isExporting ? t.roundRect(0, 0, e.width, e.height, vl.radius / r.zoom.value) : t.rect(0, 0, e.width, e.height),
    t.clip(),
    t.translate(-(e.x + r.scrollX), -(e.y + r.scrollY))
}
  , I7 = (e,t)=>[e.width / t, e.height / t]
  , S7 = ({canvas: e, scale: t, normalizedWidth: n, normalizedHeight: r, theme: i, isExporting: o, viewBackgroundColor: s})=>{
    const a = e.getContext("2d");
    return a.setTransform(1, 0, 0, 1, 0, 0),
    a.scale(t, t),
    o && i === "dark" && (a.filter = Rv),
    typeof s == "string" ? ((s === "transparent" || s.length === 5 || s.length === 9 || /(hsla|rgba)\(/.test(s)) && a.clearRect(0, 0, n, r),
    a.save(),
    a.fillStyle = s,
    a.fillRect(0, 0, n, r),
    a.restore()) : a.clearRect(0, 0, n, r),
    a
}
  , C7 = ({canvas: e, elements: t, visibleElements: n, selectedElements: r, scale: i, appState: o, renderConfig: s})=>{
    var h, m;
    if (e === null)
        return {
            atLeastOneVisibleElement: !1,
            elements: t
        };
    const [a,l] = I7(e, i)
      , c = S7({
        canvas: e,
        scale: i,
        normalizedWidth: a,
        normalizedHeight: l
    });
    c.save(),
    c.scale(o.zoom.value, o.zoom.value);
    let u;
    if (n.forEach(g=>{
        var E;
        ((E = o.editingLinearElement) == null ? void 0 : E.elementId) === g.id && g && (u = g)
    }
    ),
    u && vp(c, o, u),
    o.selectionElement)
        try {
            yz(o.selectionElement, c, o)
        } catch (g) {
            console.error(g)
        }
    o.isBindingEnabled && o.suggestedBindings.filter(g=>g != null).forEach(g=>{
        jD(c, o, g)
    }
    ),
    o.frameToHighlight && ZD(c, o, o.frameToHighlight),
    o.elementsToHighlight && KD(c, o, o.elementsToHighlight);
    const d = r.some(g=>cn(g));
    if (r.length === 1 && ((h = o.editingLinearElement) == null ? void 0 : h.elementId) === r[0].id && vp(c, o, r[0]),
    o.selectedLinearElement && o.selectedLinearElement.hoverPointIndex >= 0 && VD(c, o),
    !o.multiElement && !o.editingLinearElement) {
        const g = uy(r, o);
        r.length === 1 && ye(r[0]) && ((m = o.selectedLinearElement) == null ? void 0 : m.elementId) === r[0].id && !r[0].locked && vp(c, o, r[0]);
        const v = s.selectionColor || ot.black;
        if (g) {
            const y = r.reduce((I,S)=>(I[S.id] = !0,
            I), {})
              , w = t.reduce((I,S)=>{
                var T;
                const C = [];
                if (y[S.id] && !Qv(o, S) && C.push(v),
                s.remoteSelectedElementIds[S.id] && C.push(...s.remoteSelectedElementIds[S.id].map(L=>Gh(L))),
                C.length) {
                    const [L,A,P,O,N,$] = me(S, !0);
                    I.push({
                        angle: S.angle,
                        elementX1: L,
                        elementY1: A,
                        elementX2: P,
                        elementY2: O,
                        selectionColors: C,
                        dashed: !!s.remoteSelectedElementIds[S.id],
                        cx: N,
                        cy: $,
                        activeEmbeddable: ((T = o.activeEmbeddable) == null ? void 0 : T.element) === S && o.activeEmbeddable.state === "active"
                    })
                }
                return I
            }
            , [])
              , b = I=>{
                const S = Ft(t, I)
                  , [C,T,L,A] = mt(S);
                w.push({
                    angle: 0,
                    elementX1: C,
                    elementX2: L,
                    elementY1: T,
                    elementY2: A,
                    selectionColors: [ot.black],
                    dashed: !0,
                    cx: C + (L - C) / 2,
                    cy: T + (A - T) / 2,
                    activeEmbeddable: !1
                })
            }
            ;
            for (const I of rl(o))
                b(I);
            o.editingGroupId && b(o.editingGroupId),
            w.forEach(I=>L7(c, o, I))
        }
        if (c.save(),
        c.translate(o.scrollX, o.scrollY),
        r.length === 1) {
            c.fillStyle = ot.white;
            const y = R7(r[0], o.zoom, "mouse");
            !o.viewModeEnabled && g && jw(c, s, o, y, r[0].angle)
        } else if (r.length > 1 && !o.isRotating) {
            const y = Hu * 2 / o.zoom.value;
            c.fillStyle = ot.white;
            const [w,b,I,S] = mt(r)
              , C = c.getLineDash();
            c.setLineDash([2 / o.zoom.value]);
            const T = c.lineWidth;
            c.lineWidth = 1 / o.zoom.value,
            c.strokeStyle = v,
            xd(c, w - y, b - y, I - w + y * 2, S - b + y * 2, (w + I) / 2, (b + S) / 2, 0),
            c.lineWidth = T,
            c.setLineDash(C);
            const L = cy([w, b, I, S, (w + I) / 2, (b + S) / 2], 0, o.zoom, "mouse", d ? JD : P7);
            r.some(A=>!A.locked) && jw(c, s, o, L, 0)
        }
        c.restore()
    }
    ND(c, o),
    c.restore();
    for (const g in s.remotePointerViewportCoords) {
        let {x: E, y: v} = s.remotePointerViewportCoords[g];
        E -= o.offsetLeft,
        v -= o.offsetTop;
        const y = 11
          , w = 14
          , b = E < 0 || E > a - y || v < 0 || v > l - w;
        E = Math.max(E, 0),
        E = Math.min(E, a - y),
        v = Math.max(v, 0),
        v = Math.min(v, l - w);
        const I = Gh(g);
        c.save(),
        c.strokeStyle = I,
        c.fillStyle = I;
        const S = s.remotePointerUserStates[g]
          , C = b || S === ks.IDLE || S === ks.AWAY;
        C && (c.globalAlpha = .3),
        s.remotePointerButton && s.remotePointerButton[g] === "down" && (c.beginPath(),
        c.arc(E, v, 15, 0, 2 * Math.PI, !1),
        c.lineWidth = 3,
        c.strokeStyle = "#ffffff88",
        c.stroke(),
        c.closePath(),
        c.beginPath(),
        c.arc(E, v, 15, 0, 2 * Math.PI, !1),
        c.lineWidth = 1,
        c.strokeStyle = I,
        c.stroke(),
        c.closePath()),
        c.fillStyle = ot.white,
        c.strokeStyle = ot.white,
        c.lineWidth = 6,
        c.lineJoin = "round",
        c.beginPath(),
        c.moveTo(E, v),
        c.lineTo(E + 0, v + 14),
        c.lineTo(E + 4, v + 9),
        c.lineTo(E + 11, v + 8),
        c.closePath(),
        c.stroke(),
        c.fill(),
        c.fillStyle = I,
        c.strokeStyle = I,
        c.lineWidth = 2,
        c.lineJoin = "round",
        c.beginPath(),
        C ? (c.moveTo(E - 1, v - 1),
        c.lineTo(E - 1, v + 15),
        c.lineTo(E + 5, v + 10),
        c.lineTo(E + 12, v + 9),
        c.closePath(),
        c.fill()) : (c.moveTo(E, v),
        c.lineTo(E + 0, v + 14),
        c.lineTo(E + 4, v + 9),
        c.lineTo(E + 11, v + 8),
        c.closePath(),
        c.fill(),
        c.stroke());
        const T = s.remotePointerUsernames[g] || "";
        if (!b && T) {
            c.font = "600 12px sans-serif";
            const L = E + y / 2
              , A = v + w + 2
              , P = 5
              , O = 3
              , N = c.measureText(T)
              , $ = N.actualBoundingBoxDescent + N.actualBoundingBoxAscent
              , V = Math.max($, 12)
              , te = L - 1
              , Z = A - 1
              , z = N.width + 2 + P * 2 + 2
              , W = V + 2 + O * 2 + 2;
            c.roundRect ? (c.beginPath(),
            c.roundRect(te, Z, z, W, 8),
            c.fillStyle = I,
            c.fill(),
            c.strokeStyle = ot.white,
            c.stroke()) : Aw(c, te, Z, z, W, 8, ot.white),
            c.fillStyle = ot.black,
            c.fillText(T, L + P + 1, A + O + N.actualBoundingBoxAscent + Math.floor((V - $) / 2) + 2)
        }
        c.restore(),
        c.closePath()
    }
    let f;
    return s.renderScrollbars && (f = hH(t, a, l, o),
    c.save(),
    c.fillStyle = fH,
    c.strokeStyle = "rgba(255,255,255,0.8)",
    [f.horizontal, f.vertical].forEach(g=>{
        g && Aw(c, g.x, g.y, g.width, g.height, Io / 2)
    }
    ),
    c.restore()),
    {
        scrollBars: f,
        atLeastOneVisibleElement: n.length > 0,
        elements: t
    }
}
  , k7 = ({canvas: e, rc: t, elements: n, visibleElements: r, scale: i, appState: o, renderConfig: s})=>{
    if (e === null)
        return;
    const {renderGrid: a=!0, isExporting: l} = s
      , [c,u] = I7(e, i)
      , d = S7({
        canvas: e,
        scale: i,
        normalizedWidth: c,
        normalizedHeight: u,
        theme: o.theme,
        isExporting: l,
        viewBackgroundColor: o.viewBackgroundColor
    });
    d.scale(o.zoom.value, o.zoom.value),
    a && o.gridSize && UD(d, o.gridSize, o.scrollX, o.scrollY, o.zoom, c / o.zoom.value, u / o.zoom.value);
    const f = new Set;
    r.forEach(h=>{
        h.groupIds.length > 0 && o.frameToHighlight && o.selectedElementIds[h.id] && (Xu(h, o.frameToHighlight) || h.groupIds.find(m=>f.has(m))) && h.groupIds.forEach(m=>f.add(m))
    }
    ),
    r.filter(h=>!_g(h)).forEach(h=>{
        var m;
        try {
            if ((h.frameId || ((m = o.frameToHighlight) == null ? void 0 : m.id)) && (s.isExporting && Nu(n) || !s.isExporting && o.frameRendering.enabled && o.frameRendering.clip)) {
                d.save();
                const E = Xg(h, o);
                E && qu(h, n, o) && Gw(E, d, s, o),
                Ef(h, t, d, s, o),
                d.restore()
            } else
                Ef(h, t, d, s, o);
            l || Yw(h, d, o)
        } catch (g) {
            console.error(g)
        }
    }
    ),
    r.filter(h=>_g(h)).forEach(h=>{
        var m;
        try {
            const g = ()=>{
                if (Ef(h, t, d, s, o),
                ht(h) && (l || !h.validated) && h.width && h.height) {
                    const v = s7(h);
                    Ef(v, t, d, s, o)
                }
                l || Yw(h, d, o)
            }
            ;
            if ((h.frameId || ((m = o.frameToHighlight) == null ? void 0 : m.id)) && (s.isExporting && Nu(n) || !s.isExporting && o.frameRendering.enabled && o.frameRendering.clip)) {
                d.save();
                const v = Xg(h, o);
                v && qu(h, n, o) && Gw(v, d, s, o),
                g(),
                d.restore()
            } else
                g()
        } catch (g) {
            console.error(g)
        }
    }
    )
}
  , T7 = Hv(e=>{
    var n;
    const t = C7(e);
    (n = e.callback) == null || n.call(e, t)
}
, {
    trailing: !0
})
  , WD = (e,t)=>{
    if (t) {
        T7(e);
        return
    }
    const n = C7(e);
    return e.callback(n),
    n
}
  , M7 = Hv(e=>{
    k7(e)
}
, {
    trailing: !0
})
  , A7 = (e,t)=>{
    if (t) {
        M7(e);
        return
    }
    k7(e)
}
  , GD = ()=>{
    T7.cancel(),
    M7.cancel()
}
  , jw = (e,t,n,r,i)=>{
    Object.keys(r).forEach(o=>{
        const s = r[o];
        if (s !== void 0) {
            const [a,l,c,u] = s;
            e.save(),
            e.lineWidth = 1 / n.zoom.value,
            t.selectionColor && (e.strokeStyle = t.selectionColor),
            o === "rotation" ? J1(e, a + c / 2, l + u / 2, c / 2) : e.roundRect ? (e.beginPath(),
            e.roundRect(a, l, c, u, 2 / n.zoom.value),
            e.fill(),
            e.stroke()) : xd(e, a, l, c, u, a + c / 2, l + u / 2, i, !0),
            e.restore()
        }
    }
    )
}
  , L7 = (e,t,n,r=Hu * 2)=>{
    const {angle: i, elementX1: o, elementY1: s, elementX2: a, elementY2: l, selectionColors: c, cx: u, cy: d, dashed: f, activeEmbeddable: h} = n
      , m = a - o
      , g = l - s
      , E = r / t.zoom.value
      , v = 8 / t.zoom.value
      , y = 4 / t.zoom.value;
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    e.lineWidth = (h ? 4 : 1) / t.zoom.value;
    const w = c.length;
    for (let b = 0; b < w; ++b)
        e.strokeStyle = c[b],
        f && e.setLineDash([v, y + (v + y) * (w - 1)]),
        e.lineDashOffset = (v + y) * b,
        xd(e, o - E, s - E, m + E * 2, g + E * 2, u, d, i);
    e.restore()
}
  , jD = (e,t,n)=>{
    const r = Array.isArray(n) ? XD : YD;
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    r(e, n),
    e.restore()
}
  , YD = (e,t)=>{
    const [n,r,i,o] = me(t)
      , s = i - n
      , a = o - r
      , l = t0(t, s, a)
      , c = 4;
    e.strokeStyle = "rgba(0,0,0,.05)",
    e.lineWidth = l - c;
    const u = c / 2 + l / 2;
    switch (t.type) {
    case "rectangle":
    case "text":
    case "image":
    case "embeddable":
    case "frame":
        xd(e, n - u, r - u, s + u * 2, a + u * 2, n + s / 2, r + a / 2, t.angle);
        break;
    case "diamond":
        const d = Math.hypot(s, a)
          , f = u * d / a
          , h = u * d / s;
        zD(e, s + f * 2, a + h * 2, n + s / 2, r + a / 2, t.angle);
        break;
    case "ellipse":
        HD(e, s + u * 2, a + u * 2, n + s / 2, r + a / 2, t.angle);
        break
    }
}
  , ZD = (e,t,n)=>{
    const [r,i,o,s] = me(n)
      , a = o - r
      , l = s - i;
    e.strokeStyle = "rgb(0,118,255)",
    e.lineWidth = vl.strokeWidth * 2 / t.zoom.value,
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    xd(e, r, i, a, l, r + a / 2, i + l / 2, n.angle, !1, vl.radius / t.zoom.value),
    e.restore()
}
  , KD = (e,t,n)=>{
    const r = n.filter(a=>a.groupIds.length === 0)
      , i = n.filter(a=>a.groupIds.length > 0)
      , o = a=>{
        const [l,c,u,d] = mt(a);
        return {
            angle: 0,
            elementX1: l,
            elementX2: u,
            elementY1: c,
            elementY2: d,
            selectionColors: ["rgb(0,118,255)"],
            dashed: !1,
            cx: l + (u - l) / 2,
            cy: c + (d - c) / 2,
            activeEmbeddable: !1
        }
    }
      , s = a=>{
        const l = Ft(n, a);
        return o(l)
    }
    ;
    Object.entries(Jx(i, t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>s(a)).concat(r.map(a=>o([a]))).forEach(a=>L7(e, t, a))
}
  , XD = (e,t)=>{
    const [n,r,i] = t
      , o = t0(i, i.width, i.height);
    e.strokeStyle = "rgba(0,0,0,0)",
    e.fillStyle = "rgba(0,0,0,.05)",
    (r === "both" ? [0, -1] : r === "start" ? [0] : [-1]).forEach(a=>{
        const [l,c] = ce.getPointAtIndexGlobalCoordinates(n, a);
        J1(e, l, c, o)
    }
    )
}
;
let wi;
const Yw = (e,t,n)=>{
    if (e.link && !n.selectedElementIds[e.id]) {
        const [r,i,o,s] = me(e)
          , [a,l,c,u] = ly([r, i, o, s], e.angle, n)
          , d = a + c / 2
          , f = l + u / 2;
        if (t.save(),
        t.translate(n.scrollX + d, n.scrollY + f),
        t.rotate(e.angle),
        !wi || wi.zoom !== n.zoom.value) {
            wi = document.createElement("canvas"),
            wi.zoom = n.zoom.value,
            wi.width = c * window.devicePixelRatio * n.zoom.value,
            wi.height = u * window.devicePixelRatio * n.zoom.value;
            const h = wi.getContext("2d");
            h.scale(window.devicePixelRatio * n.zoom.value, window.devicePixelRatio * n.zoom.value),
            h.fillStyle = "#fff",
            h.fillRect(0, 0, c, u),
            h.drawImage(w7, 0, 0, c, u),
            h.restore(),
            t.drawImage(wi, a - d, l - f, c, u)
        } else
            t.drawImage(wi, a - d, l - f, c, u);
        t.restore()
    }
}
  , qD = (e,t,n,r,{offsetX: i=0, offsetY: o=0, exportWithDarkMode: s=!1, exportingFrameId: a=null, renderEmbeddables: l}={})=>{
    n && (e.filter(c=>!_g(c)).forEach(c=>{
        if (!c.isDeleted)
            try {
                jg(c, t, n, r, c.x + i, c.y + o, s, a, l)
            } catch (u) {
                console.error(u)
            }
    }
    ),
    e.filter(c=>ht(c)).forEach(c=>{
        if (!c.isDeleted)
            try {
                jg(c, t, n, r, c.x + i, c.y + o, s, a, l)
            } catch (u) {
                console.error(u)
            }
    }
    ))
}
  , Zw = {
    mouse: 8,
    pen: 16,
    touch: 28
}
  , QD = 16
  , P7 = {
    e: !0,
    s: !0,
    n: !0,
    w: !0
}
  , JD = {
    e: !0,
    s: !0,
    n: !0,
    w: !0,
    rotation: !0
}
  , eN = {
    e: !0,
    s: !0,
    n: !0,
    w: !0
}
  , Kw = {
    e: !0,
    s: !0,
    n: !0,
    w: !0,
    nw: !0,
    se: !0
}
  , yp = {
    e: !0,
    s: !0,
    n: !0,
    w: !0
}
  , bi = (e,t,n,r,i,o,s)=>{
    const [a,l] = be(e + n / 2, t + r / 2, i, o, s);
    return [a - n / 2, l - r / 2, n, r]
}
  , cy = ([e,t,n,r,i,o],s,a,l,c={},u=4)=>{
    const d = Zw[l]
      , f = d / a.value
      , h = d / a.value
      , m = d / a.value
      , g = d / a.value
      , E = n - e
      , v = r - t
      , y = u / a.value
      , w = (d - Hu * 2) / (2 * a.value)
      , b = {
        nw: c.nw ? void 0 : bi(e - y - m + w, t - y - g + w, f, h, i, o, s),
        ne: c.ne ? void 0 : bi(n + y - w, t - y - g + w, f, h, i, o, s),
        sw: c.sw ? void 0 : bi(e - y - m + w, r + y - w, f, h, i, o, s),
        se: c.se ? void 0 : bi(n + y - w, r + y - w, f, h, i, o, s),
        rotation: c.rotation ? void 0 : bi(e + E / 2 - f / 2, t - y - g + w - QD / a.value, f, h, i, o, s)
    }
      , I = 5 * Zw.mouse / a.value;
    return Math.abs(E) > I && (c.n || (b.n = bi(e + E / 2 - f / 2, t - y - g + w, f, h, i, o, s)),
    c.s || (b.s = bi(e + E / 2 - f / 2, r + y - w, f, h, i, o, s))),
    Math.abs(v) > I && (c.w || (b.w = bi(e - y - m + w, t + v / 2 - h / 2, f, h, i, o, s)),
    c.e || (b.e = bi(n + y - w, t + v / 2 - h / 2, f, h, i, o, s))),
    b
}
  , R7 = (e,t,n="mouse")=>{
    if (e.locked)
        return {};
    let r = {};
    if (e.type === "freedraw" || ye(e)) {
        if (e.points.length === 2) {
            const [,o] = e.points;
            o[0] === 0 || o[1] === 0 ? r = yp : o[0] > 0 && o[1] < 0 ? r = Kw : o[0] > 0 && o[1] > 0 ? r = yp : o[0] < 0 && o[1] > 0 ? r = Kw : o[0] < 0 && o[1] < 0 && (r = yp)
        }
    } else
        ue(e) ? r = eN : cn(e) && (r = {
            rotation: !0
        });
    const i = ye(e) ? Hu + 8 : Hu;
    return cy(me(e, !0), e.angle, t, n, r, i)
}
  , uy = (e,t)=>{
    if (t.editingLinearElement)
        return !1;
    if (e.length > 1)
        return !0;
    const n = e[0];
    return ye(n) ? n.points.length > 2 : !0
}
  , tN = e=>{
    if (e.type === "arrow")
        return !1;
    if (e.type === "freedraw")
        return !0;
    const t = !Ys(e.backgroundColor) || jo(e) || ht(e);
    return e.type === "line" ? t && qo(e.points) : t || Ni(e)
}
  , Zh = (e,t,n,r,i)=>{
    const o = 10 / t.zoom.value
      , s = [r, i];
    if (nN(t, e) && uy([e], t))
        return e0(e, s, o, n);
    const a = Ae(e);
    return a && Zh(a, t, n, r, i) ? !0 : Uu(e, t, n, s)
}
  , Ep = (e,t,n,r,i)=>{
    const o = 10 / t.zoom.value
      , s = Ae(e);
    return s && Zh(s, t, n, r, i) ? !1 : !Uu(e, t, n, [r, i]) && e0(e, [r, i], o, n)
}
  , Uu = (e,t,n,r)=>{
    const i = 10 / t.zoom.value
      , o = ue(e) ? rN : tN(e) ? Qc : iN;
    return dy({
        element: e,
        point: r,
        threshold: i,
        check: o,
        frameNameBoundsCache: n
    })
}
  , nN = (e,t)=>e.selectedElementIds[t.id]
  , e0 = (e,[t,n],r,i)=>{
    if (e.type === "frame")
        return dy({
            element: e,
            point: [t, n],
            threshold: r,
            check: Qc,
            frameNameBoundsCache: i
        });
    const [o,s,a,l] = me(e)
      , c = (o + a) / 2
      , u = (s + l) / 2
      , [d,f] = be(t, n, c, u, -e.angle);
    return d > o - r && d < a + r && f > s - r && f < l + r
}
  , O7 = (e,{x: t, y: n})=>{
    const r = t0(e, e.width, e.height);
    return dy({
        element: e,
        point: [t, n],
        threshold: r,
        check: oN,
        frameNameBoundsCache: null
    })
}
  , t0 = (e,t,n)=>{
    const i = (e.type === "diamond" ? 1 / Math.sqrt(2) : 1) * Math.min(t, n);
    return Math.max(16, Math.min(.25 * i, 32))
}
  , dy = e=>{
    var t;
    switch (e.element.type) {
    case "rectangle":
    case "embeddable":
    case "image":
    case "text":
    case "diamond":
    case "ellipse":
        const n = Cg(e.element, e.point);
        return e.check(n, e.threshold);
    case "freedraw":
        return e.check(D7(e.element, e.point), e.threshold) ? uN(e.element, e.point, e.threshold) : !1;
    case "arrow":
    case "line":
        return dN(e);
    case "selection":
        return console.warn("This should not happen, we need to investigate why it does."),
        !1;
    case "frame":
        {
            if (e.check(Cg(e.element, e.point), e.threshold))
                return !0;
            const r = (t = e.frameNameBoundsCache) == null ? void 0 : t.get(e.element);
            return r ? e.check(sN(r, e.point), e.threshold) : !1
        }
    }
}
  , Cg = (e,t)=>{
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "embeddable":
    case "frame":
        return D7(e, t);
    case "diamond":
        return aN(e, t);
    case "ellipse":
        return lN(e, t)
    }
}
  , rN = (e,t)=>e < 0
  , Qc = (e,t)=>e < t
  , iN = (e,t)=>Math.abs(e) < t
  , oN = (e,t)=>0 <= e && e < t
  , D7 = (e,t)=>{
    const [,n,r,i] = n0(e, t);
    return Math.max(Fr(n, Zs(0, 1, -i)), Fr(n, Zs(1, 0, -r)))
}
  , sN = (e,t)=>{
    const [,n,r,i] = fN(t, e);
    return Math.max(Fr(n, Zs(0, 1, -i)), Fr(n, Zs(1, 0, -r)))
}
  , aN = (e,t)=>{
    const [,n,r,i] = n0(e, t)
      , o = Zs(i, r, -i * r);
    return Fr(n, o)
}
  , lN = (e,t)=>{
    const [n,r] = cN(e, t);
    return -rR(r) * Fr(n, r)
}
  , cN = (e,t)=>{
    const [,n,r,i] = n0(e, t)
      , [o,s] = Xs(n);
    let a = .707
      , l = .707;
    const c = r
      , u = i;
    [0, 1, 2, 3].forEach(h=>{
        const m = c * a
          , g = u * l
          , E = (c * c - u * u) * a ** 3 / c
          , v = (u * u - c * c) * l ** 3 / u
          , y = m - E
          , w = g - v
          , b = o - E
          , I = s - v
          , S = Math.hypot(w, y)
          , C = Math.hypot(I, b);
        a = Math.min(1, Math.max(0, (b * S / C + E) / c)),
        l = Math.min(1, Math.max(0, (I * S / C + v) / u));
        const T = Math.hypot(l, a);
        a /= T,
        l /= T
    }
    );
    const d = yn(c * a, u * l)
      , f = nR(n, d);
    return [n, f]
}
  , uN = (e,t,n)=>{
    let r, i;
    if (e.angle === 0)
        r = t[0] - e.x,
        i = t[1] - e.y;
    else {
        const [c,u,d,f] = me(e)
          , h = lt(t, [c + (d - c) / 2, u + (f - u) / 2], -e.angle);
        r = h[0] - e.x,
        i = h[1] - e.y
    }
    let[o,s] = e.points, a;
    if (wt(o[0], o[1], r, i) < n || wt(s[0], s[1], r, i) < n)
        return !0;
    for (let c = 0; c < e.points.length; c++) {
        const u = [s[0] - o[0], s[1] - o[1]]
          , d = Math.hypot(u[1], u[0])
          , f = [u[0] / d, u[1] / d]
          , h = [r - o[0], i - o[1]]
          , m = (h[0] * f[0] + h[1] * f[1]) / Math.hypot(f[1], f[0]);
        a = [o[0] + f[0] * m, o[1] + f[1] * m];
        const g = wt(a[0], a[1], o[0], o[1])
          , E = wt(a[0], a[1], s[0], s[1]);
        if (a = E < g && g > d ? s : g < E && E > d ? o : a,
        Math.hypot(i - a[1], r - a[0]) < n)
            return !0;
        o = s,
        s = e.points[c + 1]
    }
    const l = We.get(e);
    return l && l.sets.length ? $7(l, r, i, n) : !1
}
  , dN = e=>{
    const {element: t, threshold: n} = e;
    if (!We.get(t))
        return !1;
    const [r,i,o,s] = n0(e.element, e.point)
      , a = Zs(0, 1, -s)
      , l = Zs(1, 0, -o);
    if (!Qc(Fr(i, a), n) || !Qc(Fr(i, l), n))
        return !1;
    const [c,u] = Xs(r)
      , d = We.get(t);
    return d ? e.check === Qc && d.some(h=>F7(h, c, u, t.roundness ? "round" : "sharp")) ? !0 : d.some(f=>$7(f, c, u, n)) : !1
}
  , n0 = (e,t)=>{
    const n = Ks(t)
      , [r,i,o,s] = me(e)
      , a = r0(r, i, o, s)
      , l = qv(a, e.angle)
      , c = Pr(l, n)
      , u = Wh(c, Xv(a))
      , d = Xx(u)
      , f = jx(e.x, e.y)
      , h = Wh(c, f)
      , m = (o - r) / 2
      , g = (s - i) / 2;
    return [h, d, m, g]
}
  , fN = (e,t)=>{
    const n = Ks(e)
      , [r,i,o,s] = Cz(t)
      , a = r0(r, i, o, s)
      , l = qv(a, t.angle)
      , c = Pr(l, n)
      , u = Wh(c, Xv(a))
      , d = Xx(u)
      , f = jx(t.x, t.y)
      , h = Wh(c, f)
      , m = (o - r) / 2
      , g = (s - i) / 2;
    return [h, d, m, g]
}
  , fy = e=>{
    const [t,n,r,i] = me(e)
      , o = r0(t, n, r, i)
      , s = qv(o, e.angle)
      , a = K1(sR(Xv(o)));
    return lR(s, a)
}
  , r0 = (e,t,n,r)=>yn((e + n) / 2, (t + r) / 2)
  , hN = (e,t,n)=>{
    const r = fy(e)
      , i = Pr(r, Ks(t))
      , o = Pr(r, Ks(n))
      , s = wd(i, o)
      , a = e.height / e.width
      , l = e.width / 2
      , c = e.height / 2
      , u = s[2]
      , d = s[3]
      , f = s[1]
      , h = Math.abs(d)
      , m = Math.abs(u);
    let g;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "embeddable":
    case "frame":
        g = f / (l * (m + a * h));
        break;
    case "diamond":
        g = h < m ? f / (m * l) : f / (h * c);
        break;
    case "ellipse":
        g = f / (l * Math.sqrt(u ** 2 + a ** 2 * d ** 2));
        break
    }
    return g || 0
}
  , pN = (e,t,n)=>{
    if (t === 0) {
        const [a,l,c,u] = me(e)
          , d = r0(a, l, c, u);
        return Xs(d)
    }
    const r = fy(e)
      , i = Pr(r, Ks(n))
      , o = K1(r);
    let s;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "diamond":
    case "embeddable":
    case "frame":
        s = _N(e, t, i);
        break;
    case "ellipse":
        s = bN(e, t, i);
        break
    }
    return Xs(Pr(o, s))
}
  , mN = (e,t,n,r=0)=>{
    const i = fy(e)
      , o = Pr(i, Ks(t))
      , s = Pr(i, Ks(n))
      , a = wd(o, s)
      , l = K1(i);
    return gN(e, a, o, r).map(u=>Xs(Pr(l, u)))
}
  , gN = (e,t,n,r=0)=>{
    let i;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "diamond":
    case "embeddable":
    case "frame":
        const s = N7(e);
        i = s.flatMap((a,l)=>{
            const c = [a, s[(l + 1) % 4]];
            return vN(t, yN(c, r))
        }
        ).concat(s.flatMap(a=>wN(a, r, t)));
        break;
    case "ellipse":
        i = EN(e, r, t);
        break
    }
    if (i.length < 2)
        return [];
    const o = i.sort((s,a)=>Mw(s, n) - Mw(a, n));
    return [o[0], o[o.length - 1]]
}
  , N7 = (e,t=1)=>{
    const n = t * e.width / 2
      , r = t * e.height / 2;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "embeddable":
    case "frame":
        return [yn(n, r), yn(n, -r), yn(-n, -r), yn(-n, r)];
    case "diamond":
        return [yn(0, r), yn(n, 0), yn(0, -r), yn(-n, 0)]
    }
}
  , vN = (e,t)=>{
    const [n,r] = t
      , i = Fr(n, e)
      , o = Fr(r, e);
    return i * o >= 0 ? [] : [iR(e, wd(n, r))]
}
  , yN = (e,t)=>{
    const [n,r] = e
      , i = aR(oR(n, r), t);
    return [Pr(i, n), Pr(i, r)]
}
  , EN = (e,t,n)=>{
    const r = e.width / 2 + t
      , i = e.height / 2 + t
      , o = n[2]
      , s = n[3]
      , a = n[1]
      , l = r * r * o * o + i * i * s * s
      , c = l - a * a;
    if (l === 0 || c <= 0)
        return [];
    const u = Math.sqrt(c)
      , d = -r * r * o * a
      , f = -i * i * s * a;
    return [yn((d + r * i * s * u) / l, (f - r * i * o * u) / l), yn((d - r * i * s * u) / l, (f + r * i * o * u) / l)]
}
  , wN = (e,t,n)=>{
    if (t === 0)
        return Fr(n, e) === 0 ? [e] : [];
    const r = n[2]
      , i = n[3]
      , o = n[1]
      , [s,a] = Xs(e)
      , l = t
      , c = r * r + i * i
      , u = l * l * c - (r * s + i * a + o) ** 2;
    if (c === 0 || u <= 0)
        return [];
    const d = Math.sqrt(u)
      , f = s * i * i - a * r * i - r * o
      , h = a * r * r - s * r * i - i * o;
    return [yn((f + i * d) / c, (h - r * d) / c), yn((f - i * d) / c, (h + r * d) / c)]
}
  , bN = (e,t,n)=>{
    const r = Math.abs(t)
      , i = e.width * r / 2
      , o = e.height * r / 2
      , s = Math.sign(t)
      , [a,l] = Xs(n)
      , c = l === 0 ? 1e-4 : l
      , u = a ** 2 * o ** 2 + c ** 2 * i ** 2
      , d = (-a * o ** 2 + s * c * Math.sqrt(Math.max(0, u - i ** 2 * o ** 2))) / u;
    let f = (-d * a - 1) / c;
    f === 0 && (f = (Object.is(f, -0) ? -1 : 1) * .01);
    const h = -(i ** 2 * d) / (f ** 2 * o ** 2 + d ** 2 * i ** 2);
    return yn(h, (-d * h - 1) / f)
}
  , _N = (e,t,n)=>{
    const r = Math.abs(t)
      , i = Math.sign(t)
      , o = N7(e, r);
    let s = 0
      , a = null;
    return o.forEach(l=>{
        const c = i * wd(n, l)[1];
        c > s && (s = c,
        a = l)
    }
    ),
    a
}
  , xN = (e,t,n,r,[i,o],s)=>{
    const a = (c,u)=>Math.pow(1 - c, 3) * r[u] + 3 * c * Math.pow(1 - c, 2) * n[u] + 3 * Math.pow(c, 2) * (1 - c) * t[u] + e[u] * Math.pow(c, 3);
    let l = 0;
    for (; l <= 1; ) {
        const c = a(l, 0)
          , u = a(l, 1);
        if (Math.sqrt(Math.pow(c - i, 2) + Math.pow(u - o, 2)) < s)
            return !0;
        l += .01
    }
    return !1
}
  , F7 = (e,t,n,r)=>{
    const i = ss(e)
      , o = [];
    let s = !1;
    for (const a of i)
        a.op === "move" ? (s = !s,
        s && o.push([a.data[0], a.data[1]])) : a.op === "bcurveTo" ? s && (o.push([a.data[0], a.data[1]]),
        o.push([a.data[2], a.data[3]]),
        o.push([a.data[4], a.data[5]])) : a.op === "lineTo" && s && o.push([a.data[0], a.data[1]]);
    if (o.length >= 4) {
        if (r === "sharp")
            return q6(o, t, n);
        const a = Yv(o, 10, 5);
        return q6(a, t, n)
    }
    return !1
}
  , $7 = (e,t,n,r)=>{
    const i = ss(e);
    let o = [0, 0];
    return i.some(({op: s, data: a},l)=>{
        if (s === "move")
            o = a;
        else if (s === "bcurveTo") {
            const c = [a[0], a[1]]
              , u = [a[2], a[3]]
              , d = [a[4], a[5]]
              , f = o;
            return o = d,
            xN(f, c, u, d, [t, n], r)
        } else {
            if (s === "lineTo")
                return F7(e, t, n, "sharp");
            s === "qcurveTo" && console.warn("qcurveTo is not implemented yet")
        }
        return !1
    }
    )
}
  , IN = e=>!e[R.CTRL_OR_CMD]
  , Ts = e=>e.isBindingEnabled
  , B7 = (e,t)=>{
    const n = [];
    return t.forEach(r=>{
        const i = e.getNonDeletedElement(r);
        i != null && n.push(i)
    }
    ),
    n
}
  , Fl = (e,t,n)=>{
    const r = new Set
      , i = new Set;
    Xw(e, t, n, "start", r, i),
    Xw(e, n, t, "end", r, i);
    const o = Array.from(i).filter(s=>!r.has(s));
    B7(Fe.getScene(e), o).forEach(s=>{
        var a;
        Q(s, {
            boundElements: (a = s.boundElements) == null ? void 0 : a.filter(l=>l.type !== "arrow" || l.id !== e.id)
        })
    }
    )
}
  , Xw = (e,t,n,r,i,o)=>{
    if (t !== "keep")
        if (t != null)
            (n == null || (n === "keep" ? !hy(e, t, r) : r === "start" || n.id !== t.id)) && (Vu(e, t, r),
            i.add(t.id));
        else {
            const s = CN(e, r);
            s != null && o.add(s)
        }
}
  , kg = e=>{
    e.forEach(t=>{
        sn(t) ? Fl(t, Kh(t, "start"), Kh(t, "end")) : $u(t) && SN(t)
    }
    )
}
  , SN = e=>{
    U7(e).forEach(([t,n])=>Fl(t, n === "end" ? "keep" : e, n === "start" ? "keep" : e))
}
  , Tg = (e,t,n,r)=>{
    t.startBoundElement != null && Vu(e, t.startBoundElement, "start");
    const i = _o(r, n);
    i != null && !hy(e, i, "end") && Vu(e, i, "end")
}
  , Vu = (e,t,n)=>{
    Q(e, {
        [n === "start" ? "startBinding" : "endBinding"]: {
            elementId: t.id,
            ...kN(e, t, n)
        }
    }),
    Rt(t.boundElements || []).has(e.id) || Q(t, {
        boundElements: (t.boundElements || []).concat({
            id: e.id,
            type: "arrow"
        })
    })
}
  , hy = (e,t,n)=>{
    const r = e[n === "start" ? "endBinding" : "startBinding"];
    return z7(e, r == null ? void 0 : r.elementId, t)
}
  , z7 = (e,t,n)=>t === n.id && e.points.length < 3
  , Mg = e=>{
    e.forEach(t=>{
        sn(t) && Fl(t, null, null)
    }
    )
}
  , CN = (e,t)=>{
    const n = t === "start" ? "startBinding" : "endBinding"
      , r = e[n];
    return r == null ? null : (Q(e, {
        [n]: null
    }),
    r.elementId)
}
  , _o = (e,t)=>dB(t.getNonDeletedElements(), r=>$u(r, !1) && O7(r, e))
  , kN = (e,t,n)=>{
    const r = n === "start" ? -1 : 1
      , i = r === -1 ? 0 : e.points.length - 1
      , o = i - r
      , s = ce.getPointAtIndexGlobalCoordinates(e, i)
      , a = ce.getPointAtIndexGlobalCoordinates(e, o);
    return {
        focus: hN(t, a, s),
        gap: Math.max(1, Cg(t, s))
    }
}
  , Ko = (e,t)=>{
    const n = (e.boundElements ?? []).filter(s=>s.type === "arrow");
    if (n.length === 0)
        return;
    const {newSize: r, simultaneouslyUpdated: i} = t ?? {}
      , o = MN(i);
    B7(Fe.getScene(e), n.map(s=>s.id)).forEach(s=>{
        if (!ye(s))
            return;
        const a = e;
        if (!TN(s, a))
            return;
        const l = Qw(a, s.startBinding, r)
          , c = Qw(a, s.endBinding, r);
        if (o.has(s.id)) {
            Q(s, {
                startBinding: l,
                endBinding: c
            });
            return
        }
        qw(s, "start", l, e),
        qw(s, "end", c, e),
        Ae(s) && f0(s, !1)
    }
    )
}
  , TN = (e,t)=>{
    var n, r;
    return ((n = e.startBinding) == null ? void 0 : n.elementId) === t.id || ((r = e.endBinding) == null ? void 0 : r.elementId) === t.id
}
  , MN = e=>new Set((e || []).map(t=>t.id))
  , qw = (e,t,n,r)=>{
    if (n == null || n.elementId !== r.id && e.points.length > 2)
        return;
    const i = Fe.getScene(e).getElement(n.elementId);
    if (i == null)
        return;
    const o = t === "start" ? -1 : 1
      , s = o === -1 ? 0 : e.points.length - 1
      , a = s - o
      , l = ce.getPointAtIndexGlobalCoordinates(e, a)
      , c = pN(i, n.focus, l);
    let u;
    if (n.gap === 0)
        u = c;
    else {
        const d = mN(i, l, c, n.gap);
        d.length === 0 ? u = c : u = d[0]
    }
    ce.movePoints(e, [{
        index: s,
        point: ce.pointFromAbsoluteCoords(e, u)
    }], {
        [t === "start" ? "startBinding" : "endBinding"]: n
    })
}
  , Qw = (e,t,n)=>{
    if (t == null || n == null)
        return t;
    const {gap: r, focus: i, elementId: o} = t
      , {width: s, height: a} = n
      , {width: l, height: c} = e
      , u = Math.max(1, Math.min(t0(e, s, a), r * (s < a ? s / l : a / c)));
    return {
        elementId: o,
        gap: u,
        focus: i
    }
}
  , AN = e=>{
    const t = new Set(e.map(({id: n})=>n));
    return e.flatMap(n=>sn(n, !1) ? LN(n).filter(r=>!t.has(r.id)) : $u(n, !1) ? U7(n).filter(r=>!t.has(r[0].id)) : [])
}
  , LN = e=>[Kh(e, "start"), Kh(e, "end")].filter(t=>t != null)
  , Kh = (e,t)=>_o(H7(e, t), Fe.getScene(e))
  , H7 = (e,t)=>{
    const n = t === "start" ? 0 : -1;
    return bo(ce.getPointAtIndexGlobalCoordinates(e, n))
}
  , U7 = e=>Fe.getScene(e).getNonDeletedElements().map(t=>{
    if (!sn(t, !1))
        return null;
    const n = Jw(t, "start", e)
      , r = Jw(t, "end", e);
    return !n && !r ? null : [t, n && r ? "both" : n ? "start" : "end", e]
}
).filter(t=>t != null)
  , Jw = (e,t,n)=>e[t === "start" ? "startBinding" : "endBinding"] == null && !hy(e, n, t) && O7(n, H7(e, t))
  , V7 = (e,t,n,r)=>{
    const i = new Set
      , o = new Set
      , s = r === "duplicatesServeAsOld";
    t.forEach(a=>{
        const {boundElements: l} = a;
        if (l != null && l.length > 0 && (l.forEach(c=>{
            s && !n.has(c.id) && i.add(c.id)
        }
        ),
        o.add(n.get(a.id))),
        sn(a)) {
            if (a.startBinding != null) {
                const {elementId: c} = a.startBinding;
                s && !n.has(c) && o.add(c)
            }
            if (a.endBinding != null) {
                const {elementId: c} = a.endBinding;
                s && !n.has(c) && o.add(c)
            }
            (a.startBinding != null || a.endBinding != null) && i.add(n.get(a.id))
        }
    }
    ),
    e.filter(({id: a})=>i.has(a)).forEach(a=>{
        const {startBinding: l, endBinding: c} = a;
        Q(a, {
            startBinding: e6(l, n),
            endBinding: e6(c, n)
        })
    }
    ),
    e.filter(({id: a})=>o.has(a)).forEach(a=>{
        const {boundElements: l} = a;
        l != null && l.length > 0 && Q(a, {
            boundElements: l.map(c=>n.has(c.id) ? {
                id: n.get(c.id),
                type: c.type
            } : c)
        })
    }
    )
}
  , e6 = (e,t)=>{
    if (e == null)
        return null;
    const {elementId: n, focus: r, gap: i} = e;
    return {
        focus: r,
        gap: i,
        elementId: t.get(n) ?? n
    }
}
  , py = (e,t)=>{
    const n = new Set(t.map(i=>i.id))
      , r = new Set;
    t.forEach(i=>{
        var o;
        $u(i) ? (o = i.boundElements) == null || o.forEach(s=>{
            n.has(s.id) || r.add(s.id)
        }
        ) : sn(i) && (i.startBinding && r.add(i.startBinding.elementId),
        i.endBinding && r.add(i.endBinding.elementId))
    }
    ),
    e.filter(({id: i})=>r.has(i)).forEach(i=>{
        $u(i) ? Q(i, {
            boundElements: PN(i.boundElements, n)
        }) : sn(i) && Q(i, {
            startBinding: t6(i.startBinding, n),
            endBinding: t6(i.endBinding, n)
        })
    }
    )
}
  , t6 = (e,t)=>e == null || t.has(e.elementId) ? null : e
  , PN = (e,t)=>e ? e.filter(n=>!t.has(n.id)) : null
  , _i = {
    version: null,
    points: [],
    zoom: null
}
  , ae = class ae {
    constructor(t, n) {
        M(this, "elementId");
        M(this, "selectedPointsIndices");
        M(this, "pointerDownState");
        M(this, "isDragging");
        M(this, "lastUncommittedPoint");
        M(this, "pointerOffset");
        M(this, "startBindingElement");
        M(this, "endBindingElement");
        M(this, "hoverPointIndex");
        M(this, "segmentMidPointHoveredCoords");
        this.elementId = t.id,
        Fe.mapElementToScene(this.elementId, n),
        ae.normalizePoints(t),
        this.selectedPointsIndices = null,
        this.lastUncommittedPoint = null,
        this.isDragging = !1,
        this.pointerOffset = {
            x: 0,
            y: 0
        },
        this.startBindingElement = "keep",
        this.endBindingElement = "keep",
        this.pointerDownState = {
            prevSelectedPointsIndices: null,
            lastClickedPoint: -1,
            origin: null,
            segmentMidpoint: {
                value: null,
                index: null,
                added: !1
            }
        },
        this.hoverPointIndex = -1,
        this.segmentMidPointHoveredCoords = null
    }
    static getElement(t) {
        var r;
        const n = (r = Fe.getScene(t)) == null ? void 0 : r.getNonDeletedElement(t);
        return n || null
    }
    static handleBoxSelection(t, n, r) {
        var m;
        if (!n.editingLinearElement || ((m = n.draggingElement) == null ? void 0 : m.type) !== "selection")
            return !1;
        const {editingLinearElement: i} = n
          , {selectedPointsIndices: o, elementId: s} = i
          , a = ae.getElement(s);
        if (!a)
            return !1;
        const [l,c,u,d] = me(n.draggingElement)
          , h = ae.getPointsGlobalCoordinates(a).reduce((g,E,v)=>((E[0] >= l && E[0] <= u && E[1] >= c && E[1] <= d || t.shiftKey && (o != null && o.includes(v))) && g.push(v),
        g), []);
        r({
            editingLinearElement: {
                ...i,
                selectedPointsIndices: h.length ? h : null
            }
        })
    }
    static handlePointDragging(t, n, r, i, o, s) {
        if (!s)
            return !1;
        const {selectedPointsIndices: a, elementId: l} = s
          , c = ae.getElement(l);
        if (!c)
            return !1;
        const u = c.points[s.pointerDownState.lastClickedPoint];
        if (a && u) {
            if (Kc(t) && a.length === 1 && c.points.length > 1) {
                const f = a[0]
                  , h = c.points[f === 0 ? 1 : f - 1]
                  , [m,g] = ae._getShiftLockedDelta(c, h, [r, i], t[R.CTRL_OR_CMD] ? null : n.gridSize);
                ae.movePoints(c, [{
                    index: f,
                    point: [m + h[0], g + h[1]],
                    isDragging: f === s.pointerDownState.lastClickedPoint
                }])
            } else {
                const f = ae.createPointAt(c, r - s.pointerOffset.x, i - s.pointerOffset.y, t[R.CTRL_OR_CMD] ? null : n.gridSize)
                  , h = f[0] - u[0]
                  , m = f[1] - u[1];
                ae.movePoints(c, a.map(g=>{
                    const E = g === s.pointerDownState.lastClickedPoint ? ae.createPointAt(c, r - s.pointerOffset.x, i - s.pointerOffset.y, t[R.CTRL_OR_CMD] ? null : n.gridSize) : [c.points[g][0] + h, c.points[g][1] + m];
                    return {
                        index: g,
                        point: E,
                        isDragging: g === s.pointerDownState.lastClickedPoint
                    }
                }
                ))
            }
            if (Ae(c) && f0(c, !1),
            sn(c, !1)) {
                const f = [];
                a[0] === 0 && f.push(bo(ae.getPointGlobalCoordinates(c, c.points[0])));
                const m = a[a.length - 1];
                m === c.points.length - 1 && f.push(bo(ae.getPointGlobalCoordinates(c, c.points[m]))),
                f.length && o(c, f)
            }
            return !0
        }
        return !1
    }
    static handlePointerUp(t, n, r) {
        var u;
        const {elementId: i, selectedPointsIndices: o, isDragging: s, pointerDownState: a} = n
          , l = ae.getElement(i);
        if (!l)
            return n;
        const c = {};
        if (s && o) {
            for (const d of o)
                if (d === 0 || d === l.points.length - 1) {
                    qo(l.points, r.zoom.value) && ae.movePoints(l, [{
                        index: d,
                        point: d === 0 ? l.points[l.points.length - 1] : l.points[0]
                    }]);
                    const f = Ts(r) ? _o(bo(ae.getPointAtIndexGlobalCoordinates(l, d)), Fe.getScene(l)) : null;
                    c[d === 0 ? "startBindingElement" : "endBindingElement"] = f
                }
        }
        return {
            ...n,
            ...c,
            selectedPointsIndices: s || t.shiftKey ? !s && t.shiftKey && ((u = a.prevSelectedPointsIndices) != null && u.includes(a.lastClickedPoint)) ? o && o.filter(d=>d !== a.lastClickedPoint) : o : o != null && o.includes(a.lastClickedPoint) ? [a.lastClickedPoint] : o,
            isDragging: !1,
            pointerOffset: {
                x: 0,
                y: 0
            }
        }
    }
    static isSegmentTooShort(t, n, r, i) {
        let o = wt(n[0], n[1], r[0], r[1]);
        return t.points.length > 2 && t.roundness && (o = Nz(t, r)),
        o * i.value < ae.POINT_HANDLE_SIZE * 4
    }
    static getSegmentMidPoint(t, n, r, i) {
        let o = Zg(n, r);
        if (t.points.length > 2 && t.roundness) {
            const s = lS(t, t.points[i]);
            if (s) {
                const a = Fz(t, t.points[i], .5)
                  , [l,c] = cS(s[0], s[1], s[2], s[3], a);
                o = ae.getPointGlobalCoordinates(t, [l, c])
            }
        }
        return o
    }
    static getSegmentMidPointIndex(t, n, r) {
        const i = ae.getElement(t.elementId);
        if (!i)
            return -1;
        const o = ae.getEditorMidPoints(i, n);
        let s = 0;
        for (; s < o.length; ) {
            if (ae.arePointsEqual(r, o[s]))
                return s + 1;
            s++
        }
        return -1
    }
    static handlePointerDown(t, n, r, i, o) {
        var b;
        const s = {
            didAddPoint: !1,
            hitElement: null,
            linearElementEditor: null
        };
        if (!o)
            return s;
        const {elementId: a} = o
          , l = ae.getElement(a);
        if (!l)
            return s;
        const c = ae.getSegmentMidpointHitCoords(o, i, n);
        let u = null;
        if (c && (u = ae.getSegmentMidPointIndex(o, n, c)),
        t.altKey && n.editingLinearElement)
            return o.lastUncommittedPoint == null && (Q(l, {
                points: [...l.points, ae.createPointAt(l, i.x, i.y, t[R.CTRL_OR_CMD] ? null : n.gridSize)]
            }),
            s.didAddPoint = !0),
            r.resumeRecording(),
            s.linearElementEditor = {
                ...o,
                pointerDownState: {
                    prevSelectedPointsIndices: o.selectedPointsIndices,
                    lastClickedPoint: -1,
                    origin: {
                        x: i.x,
                        y: i.y
                    },
                    segmentMidpoint: {
                        value: c,
                        index: u,
                        added: !1
                    }
                },
                selectedPointsIndices: [l.points.length - 1],
                lastUncommittedPoint: null,
                endBindingElement: _o(i, Fe.getScene(l))
            },
            s.didAddPoint = !0,
            s;
        const d = ae.getPointIndexUnderCursor(l, n.zoom, i.x, i.y);
        if (d >= 0 || c)
            s.hitElement = l;
        else {
            const {startBindingElement: I, endBindingElement: S} = o;
            Ts(n) && sn(l) && Fl(l, I, S)
        }
        const [f,h,m,g] = me(l)
          , E = (f + m) / 2
          , v = (h + g) / 2
          , y = d > -1 && be(l.x + l.points[d][0], l.y + l.points[d][1], E, v, l.angle)
          , w = d > -1 || t.shiftKey ? t.shiftKey || (b = o.selectedPointsIndices) != null && b.includes(d) ? RN([...o.selectedPointsIndices || [], d]) : [d] : null;
        return s.linearElementEditor = {
            ...o,
            pointerDownState: {
                prevSelectedPointsIndices: o.selectedPointsIndices,
                lastClickedPoint: d,
                origin: {
                    x: i.x,
                    y: i.y
                },
                segmentMidpoint: {
                    value: c,
                    index: u,
                    added: !1
                }
            },
            selectedPointsIndices: w,
            pointerOffset: y ? {
                x: i.x - y[0],
                y: i.y - y[1]
            } : {
                x: 0,
                y: 0
            }
        },
        s
    }
    static arePointsEqual(t, n) {
        return !t && !n ? !0 : !t || !n ? !1 : dS(t, n)
    }
    static handlePointerMove(t, n, r, i) {
        if (!i.editingLinearElement)
            return null;
        const {elementId: o, lastUncommittedPoint: s} = i.editingLinearElement
          , a = ae.getElement(o);
        if (!a)
            return i.editingLinearElement;
        const {points: l} = a
          , c = l[l.length - 1];
        if (!t.altKey)
            return c === s && ae.deletePoints(a, [l.length - 1]),
            {
                ...i.editingLinearElement,
                lastUncommittedPoint: null
            };
        let u;
        if (Kc(t) && l.length >= 2) {
            const d = l[l.length - 2]
              , [f,h] = ae._getShiftLockedDelta(a, d, [n, r], t[R.CTRL_OR_CMD] ? null : i.gridSize);
            u = [f + d[0], h + d[1]]
        } else
            u = ae.createPointAt(a, n - i.editingLinearElement.pointerOffset.x, r - i.editingLinearElement.pointerOffset.y, t[R.CTRL_OR_CMD] ? null : i.gridSize);
        return c === s ? ae.movePoints(a, [{
            index: a.points.length - 1,
            point: u
        }]) : ae.addPoints(a, i, [{
            point: u
        }]),
        {
            ...i.editingLinearElement,
            lastUncommittedPoint: a.points[a.points.length - 1]
        }
    }
    static getPointGlobalCoordinates(t, n) {
        const [r,i,o,s] = me(t)
          , a = (r + o) / 2
          , l = (i + s) / 2;
        let {x: c, y: u} = t;
        return [c,u] = be(c + n[0], u + n[1], a, l, t.angle),
        [c, u]
    }
    static getPointsGlobalCoordinates(t) {
        const [n,r,i,o] = me(t)
          , s = (n + i) / 2
          , a = (r + o) / 2;
        return t.points.map(l=>{
            let {x: c, y: u} = t;
            return [c,u] = be(c + l[0], u + l[1], s, a, t.angle),
            [c, u]
        }
        )
    }
    static getPointAtIndexGlobalCoordinates(t, n) {
        const r = n < 0 ? t.points.length + n : n
          , [i,o,s,a] = me(t)
          , l = (i + s) / 2
          , c = (o + a) / 2
          , u = t.points[r]
          , {x: d, y: f} = t;
        return u ? be(d + u[0], f + u[1], l, c, t.angle) : be(d, f, l, c, t.angle)
    }
    static pointFromAbsoluteCoords(t, n) {
        const [r,i,o,s] = me(t)
          , a = (r + o) / 2
          , l = (i + s) / 2
          , [c,u] = be(n[0], n[1], a, l, -t.angle);
        return [c - t.x, u - t.y]
    }
    static getPointIndexUnderCursor(t, n, r, i) {
        const o = ae.getPointsGlobalCoordinates(t);
        let s = o.length;
        for (; --s > -1; ) {
            const a = o[s];
            if (wt(r, i, a[0], a[1]) * n.value < ae.POINT_HANDLE_SIZE + 1)
                return s
        }
        return -1
    }
    static createPointAt(t, n, r, i) {
        const o = en(n, r, i)
          , [s,a,l,c] = me(t)
          , u = (s + l) / 2
          , d = (a + c) / 2
          , [f,h] = be(o[0], o[1], u, d, -t.angle);
        return [f - t.x, h - t.y]
    }
    static getNormalizedPoints(t) {
        const {points: n} = t
          , r = n[0][0]
          , i = n[0][1];
        return {
            points: n.map((o,s)=>[o[0] - r, o[1] - i]),
            x: t.x + r,
            y: t.y + i
        }
    }
    static normalizePoints(t) {
        Q(t, ae.getNormalizedPoints(t))
    }
    static duplicateSelectedPoints(t) {
        if (!t.editingLinearElement)
            return !1;
        const {selectedPointsIndices: n, elementId: r} = t.editingLinearElement
          , i = ae.getElement(r);
        if (!i || n === null)
            return !1;
        const {points: o} = i
          , s = [];
        let a = !1
          , l = -1;
        const c = o.reduce((u,d,f)=>{
            if (++l,
            u.push(d),
            n.includes(f)) {
                const m = o[f + 1];
                m || (a = !0),
                u.push(m ? [(d[0] + m[0]) / 2, (d[1] + m[1]) / 2] : [d[0], d[1]]),
                s.push(l + 1),
                ++l
            }
            return u
        }
        , []);
        if (Q(i, {
            points: c
        }),
        a) {
            const u = i.points[i.points.length - 1];
            ae.movePoints(i, [{
                index: i.points.length - 1,
                point: [u[0] + 30, u[1] + 30]
            }])
        }
        return {
            appState: {
                ...t,
                editingLinearElement: {
                    ...t.editingLinearElement,
                    selectedPointsIndices: s
                }
            }
        }
    }
    static deletePoints(t, n) {
        let r = 0
          , i = 0;
        if (n.includes(0)) {
            const a = t.points.find((l,c)=>!n.includes(c));
            a && (r = a[0],
            i = a[1])
        }
        const s = t.points.reduce((a,l,c)=>(n.includes(c) || a.push(a.length ? [l[0] - r, l[1] - i] : [0, 0]),
        a), []);
        ae._updatePoints(t, s, r, i)
    }
    static addPoints(t, n, r) {
        const s = [...t.points, ...r.map(a=>a.point)];
        ae._updatePoints(t, s, 0, 0)
    }
    static movePoints(t, n, r) {
        const {points: i} = t;
        let o = 0
          , s = 0;
        const a = n.find(({index: c})=>c === 0);
        a && (o = a.point[0] + i[a.index][0],
        s = a.point[1] + i[a.index][1]);
        const l = i.map((c,u)=>{
            const d = n.find(f=>f.index === u);
            if (d) {
                if (a)
                    return c;
                const f = d.point[0] - i[d.index][0]
                  , h = d.point[1] - i[d.index][1];
                return [c[0] + f, c[1] + h]
            }
            return o || s ? [c[0] - o, c[1] - s] : c
        }
        );
        ae._updatePoints(t, l, o, s, r)
    }
    static shouldAddMidpoint(t, n, r) {
        if (!ae.getElement(t.elementId))
            return !1;
        const {segmentMidpoint: o} = t.pointerDownState;
        if (o.added || o.value === null || o.index === null || t.pointerDownState.origin === null)
            return !1;
        const s = t.pointerDownState.origin
          , a = wt(s.x, s.y, n.x, n.y);
        return !(!r.editingLinearElement && a < us / r.zoom.value)
    }
    static addMidpoint(t, n, r, i) {
        const o = ae.getElement(t.elementId);
        if (!o)
            return;
        const {segmentMidpoint: s} = t.pointerDownState
          , a = {
            pointerDownState: t.pointerDownState,
            selectedPointsIndices: t.selectedPointsIndices
        }
          , l = ae.createPointAt(o, n.x, n.y, i ? r.gridSize : null)
          , c = [...o.points.slice(0, s.index), l, ...o.points.slice(s.index)];
        return Q(o, {
            points: c
        }),
        a.pointerDownState = {
            ...t.pointerDownState,
            segmentMidpoint: {
                ...t.pointerDownState.segmentMidpoint,
                added: !0
            },
            lastClickedPoint: s.index
        },
        a.selectedPointsIndices = [s.index],
        a
    }
    static _updatePoints(t, n, r, i, o) {
        const s = s1(t, n)
          , a = s1(t, t.points)
          , l = (s[0] + s[2]) / 2
          , c = (s[1] + s[3]) / 2
          , u = (a[0] + a[2]) / 2
          , d = (a[1] + a[3]) / 2
          , f = u - l
          , h = d - c
          , m = be(r, i, f, h, t.angle);
        Q(t, {
            ...o,
            points: n,
            x: t.x + m[0],
            y: t.y + m[1]
        })
    }
    static _getShiftLockedDelta(t, n, r, i) {
        const o = ae.getPointGlobalCoordinates(t, n)
          , [s,a] = en(r[0], r[1], i)
          , {width: l, height: c} = Qg(o[0], o[1], s, a);
        return lt([l, c], [0, 0], -t.angle)
    }
}
;
M(ae, "POINT_HANDLE_SIZE", 10),
M(ae, "getEditorMidPoints", (t,n)=>{
    const r = Ae(t);
    return !n.editingLinearElement && t.points.length > 2 && !r ? [] : (_i.version === t.version && _i.zoom === n.zoom.value || ae.updateEditorMidPointsCache(t, n),
    _i.points)
}
),
M(ae, "updateEditorMidPointsCache", (t,n)=>{
    const r = ae.getPointsGlobalCoordinates(t);
    let i = 0;
    const o = [];
    for (; i < r.length - 1; ) {
        if (ae.isSegmentTooShort(t, t.points[i], t.points[i + 1], n.zoom)) {
            o.push(null),
            i++;
            continue
        }
        const s = ae.getSegmentMidPoint(t, r[i], r[i + 1], i + 1);
        o.push(s),
        i++
    }
    _i.points = o,
    _i.version = t.version,
    _i.zoom = n.zoom.value
}
),
M(ae, "getSegmentMidpointHitCoords", (t,n,r)=>{
    const {elementId: i} = t
      , o = ae.getElement(i);
    if (!o || ae.getPointIndexUnderCursor(o, r.zoom, n.x, n.y) >= 0 || ae.getPointsGlobalCoordinates(o).length >= 3 && !r.editingLinearElement)
        return null;
    const l = ae.POINT_HANDLE_SIZE / r.zoom.value
      , c = t.segmentMidPointHoveredCoords;
    if (c && wt(c[0], c[1], n.x, n.y) <= l)
        return c;
    let u = 0;
    const d = ae.getEditorMidPoints(o, r);
    for (; u < d.length; ) {
        if (d[u] !== null && wt(d[u][0], d[u][1], n.x, n.y) <= l)
            return d[u];
        u++
    }
    return null
}
),
M(ae, "getBoundTextElementPosition", (t,n)=>{
    const r = ae.getPointsGlobalCoordinates(t);
    r.length < 2 && Q(n, {
        isDeleted: !0
    });
    let i = 0
      , o = 0;
    if (t.points.length % 2 === 1) {
        const s = Math.floor(t.points.length / 2)
          , a = ae.getPointGlobalCoordinates(t, t.points[s]);
        i = a[0] - n.width / 2,
        o = a[1] - n.height / 2
    } else {
        const s = t.points.length / 2 - 1;
        let a = _i.points[s];
        t.points.length === 2 && (a = Zg(r[0], r[1])),
        (!a || _i.version !== t.version) && (a = ae.getSegmentMidPoint(t, r[s], r[s + 1], s + 1)),
        i = a[0] - n.width / 2,
        o = a[1] - n.height / 2
    }
    return {
        x: i,
        y: o
    }
}
),
M(ae, "getMinMaxXYWithBoundText", (t,n,r)=>{
    let[i,o,s,a] = n;
    const l = (i + s) / 2
      , c = (o + a) / 2
      , {x: u, y: d} = ae.getBoundTextElementPosition(t, r)
      , f = u + r.width
      , h = d + r.height
      , m = lt([i, o], [l, c], t.angle)
      , g = lt([s, o], [l, c], t.angle)
      , E = lt([u, d], [l, c], -t.angle)
      , v = lt([f, d], [l, c], -t.angle)
      , y = lt([u, h], [l, c], -t.angle)
      , w = lt([f, h], [l, c], -t.angle);
    return m[0] < g[0] && m[1] >= g[1] ? (i = Math.min(i, y[0]),
    s = Math.max(s, Math.max(v[0], w[0])),
    o = Math.min(o, E[1]),
    a = Math.max(a, w[1])) : m[0] >= g[0] && m[1] > g[1] ? (i = Math.min(i, w[0]),
    s = Math.max(s, Math.max(E[0], v[0])),
    o = Math.min(o, y[1]),
    a = Math.max(a, v[1])) : m[0] >= g[0] ? (i = Math.min(i, v[0]),
    s = Math.max(s, y[0]),
    o = Math.min(o, w[1]),
    a = Math.max(a, E[1])) : m[1] <= g[1] && (i = Math.min(i, Math.min(v[0], E[0])),
    s = Math.max(s, w[0]),
    o = Math.min(o, v[1]),
    a = Math.max(a, y[1])),
    [i, o, s, a, l, c]
}
),
M(ae, "getElementAbsoluteCoords", (t,n=!1)=>{
    let r, i, o, s, a;
    if (t.points.length < 2 || !We.get(t)) {
        const {minX: d, minY: f, maxX: h, maxY: m} = t.points.reduce((g,[E,v])=>(g.minY = Math.min(g.minY, v),
        g.minX = Math.min(g.minX, E),
        g.maxX = Math.max(g.maxX, E),
        g.maxY = Math.max(g.maxY, v),
        g), {
            minX: 1 / 0,
            minY: 1 / 0,
            maxX: -1 / 0,
            maxY: -1 / 0
        });
        i = d + t.x,
        o = f + t.y,
        s = h + t.x,
        a = m + t.y
    } else {
        const d = We.generateElementShape(t)
          , f = ss(d[0])
          , [h,m,g,E] = g0(f);
        i = h + t.x,
        o = m + t.y,
        s = g + t.x,
        a = E + t.y
    }
    const l = (i + s) / 2
      , c = (o + a) / 2;
    if (r = [i, o, s, a, l, c],
    !n)
        return r;
    const u = Ae(t);
    return u && (r = ae.getMinMaxXYWithBoundText(t, [i, o, s, a], u)),
    r
}
);
let ce = ae;
const RN = e=>{
    let t = [...new Set(e.filter(n=>n !== null && n !== -1))];
    return t = t.sort((n,r)=>n - r),
    t.length ? t : null
}
  , qi = e=>p("div", {
    className: "buttonList buttonListIcon",
    children: e.options.map(t=>e.type === "button" ? p("button", {
        onClick: n=>e.onClick(t.value, n),
        className: le({
            active: t.active ?? e.value === t.value
        }),
        "data-testid": t.testId,
        title: t.text,
        children: t.icon
    }, t.text) : k("label", {
        className: le({
            active: e.value === t.value
        }),
        title: t.text,
        children: [p("input", {
            type: "radio",
            name: e.group,
            onChange: ()=>e.onChange(t.value),
            checked: e.value === t.value,
            "data-testid": t.testId
        }), t.icon]
    }, t.text))
})
  , ON = ({onChange: e, type: t, activeColor: n, topPicks: r})=>{
    let i;
    return t === "elementStroke" && (i = L8),
    t === "elementBackground" && (i = P8),
    t === "canvasBackground" && (i = R8),
    r && (i = r),
    i ? p("div", {
        className: "color-picker__top-picks",
        children: i.map(o=>p("button", {
            className: le("color-picker__button", {
                active: o === n,
                "is-transparent": o === "transparent" || !o
            }),
            style: {
                "--swatch-color": o
            },
            type: "button",
            title: o,
            onClick: ()=>e(o),
            children: p("div", {
                className: "color-picker__button-outline"
            })
        }, o))
    }) : (console.error("Invalid type for TopPicks"),
    null)
}
  , i0 = ({palette: e, color: t})=>{
    for (const [n,r] of Object.entries(e))
        if (Array.isArray(r)) {
            const i = r.indexOf(t);
            if (i > -1)
                return {
                    colorName: n,
                    shade: i
                }
        } else if (r === t)
            return {
                colorName: n,
                shade: null
            };
    return null
}
  , Ag = [["q", "w", "e", "r", "t"], ["a", "s", "d", "f", "g"], ["z", "x", "c", "v", "b"]].flat()
  , W7 = ({color: e, palette: t})=>!Object.values(t).flat().includes(e)
  , DN = (e,t,n)=>{
    const r = {
        elementBackground: "backgroundColor",
        elementStroke: "strokeColor"
    }
      , i = e.filter(s=>{
        if (s.isDeleted)
            return !1;
        const a = s[r[t]];
        return W7({
            color: a,
            palette: n
        })
    }
    )
      , o = new Map;
    return i.forEach(s=>{
        const a = s[r[t]];
        o.has(a) ? o.set(a, o.get(a) + 1) : o.set(a, 1)
    }
    ),
    [...o.entries()].sort((s,a)=>a[1] - s[1]).map(s=>s[0]).slice(0, XA)
}
  , $l = un(null)
  , n6 = (e,t,n)=>(e * 299 + t * 587 + n * 114) / 1e3 >= 160 ? "black" : "white"
  , NN = (e,t)=>{
    if (t) {
        const o = new Option().style;
        if (o.color = e,
        o.color) {
            const s = o.color.replace(/^(rgb|rgba)\(/, "").replace(/\)$/, "").replace(/\s/g, "").split(",")
              , a = parseInt(s[0])
              , l = parseInt(s[1])
              , c = parseInt(s[2]);
            return n6(a, l, c)
        }
    }
    if (e === "transparent")
        return "black";
    const n = parseInt(e.substring(1, 3), 16)
      , r = parseInt(e.substring(3, 5), 16)
      , i = parseInt(e.substring(5, 7), 16);
    return n6(n, r, i)
}
  , my = ({color: e, keyLabel: t, isCustomColor: n=!1, isShade: r=!1})=>k("div", {
    className: "color-picker__button__hotkey-label",
    style: {
        color: NN(e, n)
    },
    children: [r && "", t]
})
  , FN = ({hex: e, onChange: t, palette: n})=>{
    const r = i0({
        color: e || "transparent",
        palette: n
    })
      , [i,o] = ut($l)
      , s = x.useRef(null);
    if (x.useEffect(()=>{
        s.current && i === "shades" && s.current.focus()
    }
    , [r, i]),
    r) {
        const {colorName: a, shade: l} = r
          , c = n[a];
        if (Array.isArray(c))
            return p("div", {
                className: "color-picker-content--default shades",
                children: c.map((u,d)=>k("button", {
                    ref: d === l && i === "shades" ? s : void 0,
                    tabIndex: -1,
                    type: "button",
                    className: le("color-picker__button color-picker__button--large", {
                        active: d === l
                    }),
                    "aria-label": "Shade",
                    title: `${a} - ${d + 1}`,
                    style: u ? {
                        "--swatch-color": u
                    } : void 0,
                    onClick: ()=>{
                        t(u),
                        o("shades")
                    }
                    ,
                    children: [p("div", {
                        className: "color-picker__button-outline"
                    }), p(my, {
                        color: u,
                        keyLabel: d + 1,
                        isShade: !0
                    })]
                }, d))
            })
    }
    return k("div", {
        className: "color-picker-content--default",
        style: {
            position: "relative"
        },
        tabIndex: -1,
        children: [p("button", {
            type: "button",
            tabIndex: -1,
            className: "color-picker__button color-picker__button--large color-picker__button--no-focus-visible"
        }), p("div", {
            tabIndex: -1,
            style: {
                position: "absolute",
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                textAlign: "center",
                fontSize: "0.75rem"
            },
            children: _("colorPicker.noShades")
        })]
    })
}
  , $N = ({palette: e, color: t, onChange: n, label: r, activeShade: i})=>{
    const o = i0({
        color: t || "transparent",
        palette: e
    })
      , [s,a] = ut($l)
      , l = x.useRef(null);
    return x.useEffect(()=>{
        l.current && s === "baseColors" && l.current.focus()
    }
    , [o == null ? void 0 : o.colorName, s]),
    p("div", {
        className: "color-picker-content--default",
        children: Object.entries(e).map(([c,u],d)=>{
            const f = (Array.isArray(u) ? u[i] : u) || "transparent"
              , h = Ag[d]
              , m = _(`colors.${c.replace(/\d+/, "")}`, null, "");
            return k("button", {
                ref: (o == null ? void 0 : o.colorName) === c ? l : void 0,
                tabIndex: -1,
                type: "button",
                className: le("color-picker__button color-picker__button--large", {
                    active: (o == null ? void 0 : o.colorName) === c,
                    "is-transparent": f === "transparent" || !f
                }),
                onClick: ()=>{
                    n(f),
                    a("baseColors")
                }
                ,
                title: `${m}${f.startsWith("#") ? ` ${f}` : ""}  ${h}`,
                "aria-label": `${m}  ${h}`,
                style: f ? {
                    "--swatch-color": f
                } : void 0,
                "data-testid": `color-${c}`,
                children: [p("div", {
                    className: "color-picker__button-outline"
                }), p(my, {
                    color: f,
                    keyLabel: h
                })]
            }, c)
        }
        )
    })
}
  , BN = ({colors: e, color: t, onChange: n, label: r})=>{
    const [i,o] = ut($l)
      , s = x.useRef(null);
    return x.useEffect(()=>{
        s.current && s.current.focus()
    }
    , [t, i]),
    p("div", {
        className: "color-picker-content--default",
        children: e.map((a,l)=>k("button", {
            ref: t === a ? s : void 0,
            tabIndex: -1,
            type: "button",
            className: le("color-picker__button color-picker__button--large", {
                active: t === a,
                "is-transparent": a === "transparent" || !a
            }),
            onClick: ()=>{
                n(a),
                o("custom")
            }
            ,
            title: a,
            "aria-label": r,
            style: {
                "--swatch-color": a
            },
            children: [p("div", {
                className: "color-picker__button-outline"
            }), p(my, {
                color: a,
                keyLabel: l + 1,
                isCustomColor: !0
            })]
        }, l))
    })
}
  , wp = (e,t,n)=>{
    const r = Math.ceil(n / Ca);
    switch (t = t ?? -1,
    e) {
    case "ArrowLeft":
        {
            const i = t - 1;
            return i < 0 ? n - 1 : i
        }
    case "ArrowRight":
        return (t + 1) % n;
    case "ArrowDown":
        {
            const i = t + Ca;
            return i >= n ? t % Ca : i
        }
    case "ArrowUp":
        {
            const i = t - Ca
              , o = i < 0 ? Ca * r + i : i;
            return o >= n ? void 0 : o
        }
    }
}
  , zN = ({e, colorObj: t, onChange: n, palette: r, customColors: i, setActiveColorPickerSection: o, activeShade: s})=>{
    if ((t == null ? void 0 : t.shade) != null && ["Digit1", "Digit2", "Digit3", "Digit4", "Digit5"].includes(e.code) && e.shiftKey) {
        const a = Number(e.code.slice(-1)) - 1;
        return n(r[t.colorName][a]),
        o("shades"),
        !0
    }
    if (["1", "2", "3", "4", "5"].includes(e.key) && i[Number(e.key) - 1])
        return n(i[Number(e.key) - 1]),
        o("custom"),
        !0;
    if (Ag.includes(e.key)) {
        const a = Ag.indexOf(e.key)
          , l = Object.keys(r)[a]
          , c = r[l]
          , u = Array.isArray(c) ? c[s] : c;
        return n(u),
        o("baseColors"),
        !0
    }
    return !1
}
  , HN = ({event: e, activeColorPickerSection: t, palette: n, color: r, onChange: i, customColors: o, setActiveColorPickerSection: s, updateData: a, activeShade: l, onEyeDropperToggle: c, onEscape: u})=>{
    if (e[R.CTRL_OR_CMD])
        return !1;
    if (e.key === R.ESCAPE)
        return u(e),
        !0;
    if (e.key === R.ALT)
        return c(!0),
        !0;
    if (e.key === R.I)
        return c(),
        !0;
    const d = i0({
        color: r,
        palette: n
    });
    if (e.key === R.TAB) {
        const f = {
            custom: !!o.length,
            baseColors: !0,
            shades: (d == null ? void 0 : d.shade) != null,
            hex: !0
        }
          , h = Object.entries(f).reduce((y,[w,b])=>(b && y.push(w),
        y), [])
          , m = h.indexOf(t)
          , g = e.shiftKey ? -1 : 1
          , E = m + g > h.length - 1 ? 0 : m + g < 0 ? h.length - 1 : m + g
          , v = h[E];
        return v && s(v),
        v === "custom" ? i(o[0]) : v === "baseColors" && (Object.entries(n).find(([w,b])=>Array.isArray(b) ? b.includes(r) : b === r ? w : null) || i(ge.black)),
        e.preventDefault(),
        e.stopPropagation(),
        !0
    }
    if (zN({
        e,
        colorObj: d,
        onChange: i,
        palette: n,
        customColors: o,
        setActiveColorPickerSection: s,
        activeShade: l
    }))
        return !0;
    if (t === "shades" && d) {
        const {shade: f} = d
          , h = wp(e.key, f, Ca);
        if (h !== void 0)
            return i(n[d.colorName][h]),
            !0
    }
    if (t === "baseColors" && d) {
        const {colorName: f} = d
          , h = Object.keys(n)
          , m = h.indexOf(f)
          , g = wp(e.key, m, h.length);
        if (g !== void 0) {
            const E = h[g]
              , v = n[E];
            return i(Array.isArray(v) ? v[l] : v),
            !0
        }
    }
    if (t === "custom") {
        const f = o.indexOf(r)
          , h = wp(e.key, f, o.length);
        if (h !== void 0) {
            const m = o[h];
            return i(m),
            !0
        }
    }
    return !1
}
  , Jf = ({children: e})=>p("div", {
    className: "color-picker__heading",
    children: e
})
  , UN = ({color: e, onChange: t, label: n, type: r, elements: i, palette: o, updateData: s, children: a, onEyeDropperToggle: l, onEscape: c})=>{
    const [u] = ee.useState(()=>r === "canvasBackground" ? [] : DN(i, r, o))
      , [d,f] = ut($l)
      , h = i0({
        color: e,
        palette: o
    });
    x.useEffect(()=>{
        if (!d) {
            const v = W7({
                color: e,
                palette: o
            })
              , y = v && !u.includes(e);
            f(y ? "hex" : v ? "custom" : (h == null ? void 0 : h.shade) != null ? "shades" : "baseColors")
        }
    }
    , [d, e, o, f, h, u]);
    const [m,g] = x.useState((h == null ? void 0 : h.shade) ?? (r === "elementBackground" ? Pc : Lc));
    x.useEffect(()=>{
        (h == null ? void 0 : h.shade) != null && g(h.shade);
        const v = y=>{
            y.key === R.ALT && l(!1)
        }
        ;
        return document.addEventListener(U.KEYUP, v, {
            capture: !0
        }),
        ()=>{
            document.removeEventListener(U.KEYUP, v, {
                capture: !0
            })
        }
    }
    , [h, l]);
    const E = ee.useRef(null);
    return p("div", {
        role: "dialog",
        "aria-modal": "true",
        "aria-label": _("labels.colorPicker"),
        children: k("div", {
            ref: E,
            onKeyDown: v=>{
                HN({
                    event: v,
                    activeColorPickerSection: d,
                    palette: o,
                    color: e,
                    onChange: t,
                    onEyeDropperToggle: l,
                    customColors: u,
                    setActiveColorPickerSection: f,
                    updateData: s,
                    activeShade: m,
                    onEscape: c
                }) && (v.preventDefault(),
                v.stopPropagation())
            }
            ,
            className: "color-picker-content",
            tabIndex: -1,
            children: [!!u.length && k("div", {
                children: [p(Jf, {
                    children: _("colorPicker.mostUsedCustomColors")
                }), p(BN, {
                    colors: u,
                    color: e,
                    label: _("colorPicker.mostUsedCustomColors"),
                    onChange: t
                })]
            }), k("div", {
                children: [p(Jf, {
                    children: _("colorPicker.colors")
                }), p($N, {
                    color: e,
                    label: n,
                    palette: o,
                    onChange: t,
                    activeShade: m
                })]
            }), k("div", {
                children: [p(Jf, {
                    children: _("colorPicker.shades")
                }), p(FN, {
                    hex: e,
                    onChange: t,
                    palette: o
                })]
            }), a]
        })
    })
}
;
function Ge() {
    return Ge = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
            var n = arguments[t];
            for (var r in n)
                Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
    }
    ,
    Ge.apply(this, arguments)
}
function an(e, t, {checkForDefaultPrevented: n=!0}={}) {
    return function(i) {
        if (e == null || e(i),
        n === !1 || !i.defaultPrevented)
            return t == null ? void 0 : t(i)
    }
}
function VN(e, t) {
    typeof e == "function" ? e(t) : e != null && (e.current = t)
}
function G7(...e) {
    return t=>e.forEach(n=>VN(n, t))
}
function fi(...e) {
    return x.useCallback(G7(...e), e)
}
function Id(e, t=[]) {
    let n = [];
    function r(o, s) {
        const a = x.createContext(s)
          , l = n.length;
        n = [...n, s];
        function c(d) {
            const {scope: f, children: h, ...m} = d
              , g = (f == null ? void 0 : f[e][l]) || a
              , E = x.useMemo(()=>m, Object.values(m));
            return x.createElement(g.Provider, {
                value: E
            }, h)
        }
        function u(d, f) {
            const h = (f == null ? void 0 : f[e][l]) || a
              , m = x.useContext(h);
            if (m)
                return m;
            if (s !== void 0)
                return s;
            throw new Error(`\`${d}\` must be used within \`${o}\``)
        }
        return c.displayName = o + "Provider",
        [c, u]
    }
    const i = ()=>{
        const o = n.map(s=>x.createContext(s));
        return function(a) {
            const l = (a == null ? void 0 : a[e]) || o;
            return x.useMemo(()=>({
                [`__scope ${e}`]: {
                    ...a,
                    [e]: l
                }
            }), [a, l])
        }
    }
    ;
    return i.scopeName = e,
    [r, WN(i, ...t)]
}
function WN(...e) {
    const t = e[0];
    if (e.length === 1)
        return t;
    const n = ()=>{
        const r = e.map(i=>({
            useScope: i(),
            scopeName: i.scopeName
        }));
        return function(o) {
            const s = r.reduce((a,{useScope: l, scopeName: c})=>{
                const d = l(o)[`__scope ${c}`];
                return {
                    ...a,
                    ...d
                }
            }
            , {});
            return x.useMemo(()=>({
                [`__scope ${t.scopeName}`]: s
            }), [s])
        }
    }
    ;
    return n.scopeName = t.scopeName,
    n
}
const Wu = x.forwardRef((e,t)=>{
    const {children: n, ...r} = e
      , i = x.Children.toArray(n)
      , o = i.find(jN);
    if (o) {
        const s = o.props.children
          , a = i.map(l=>l === o ? x.Children.count(s) > 1 ? x.Children.only(null) : x.isValidElement(s) ? s.props.children : null : l);
        return x.createElement(Lg, Ge({}, r, {
            ref: t
        }), x.isValidElement(s) ? x.cloneElement(s, void 0, a) : null)
    }
    return x.createElement(Lg, Ge({}, r, {
        ref: t
    }), n)
}
);
Wu.displayName = "Slot";
const Lg = x.forwardRef((e,t)=>{
    const {children: n, ...r} = e;
    return x.isValidElement(n) ? x.cloneElement(n, {
        ...YN(r, n.props),
        ref: G7(t, n.ref)
    }) : x.Children.count(n) > 1 ? x.Children.only(null) : null
}
);
Lg.displayName = "SlotClone";
const GN = ({children: e})=>x.createElement(x.Fragment, null, e);
function jN(e) {
    return x.isValidElement(e) && e.type === GN
}
function YN(e, t) {
    const n = {
        ...t
    };
    for (const r in t) {
        const i = e[r]
          , o = t[r];
        /^on[A-Z]/.test(r) ? i && o ? n[r] = (...a)=>{
            o(...a),
            i(...a)
        }
        : i && (n[r] = i) : r === "style" ? n[r] = {
            ...i,
            ...o
        } : r === "className" && (n[r] = [i, o].filter(Boolean).join(" "))
    }
    return {
        ...e,
        ...n
    }
}
const ZN = ["a", "button", "div", "h2", "h3", "img", "label", "li", "nav", "ol", "p", "span", "svg", "ul"]
  , Pn = ZN.reduce((e,t)=>{
    const n = x.forwardRef((r,i)=>{
        const {asChild: o, ...s} = r
          , a = o ? Wu : t;
        return x.useEffect(()=>{
            window[Symbol.for("radix-ui")] = !0
        }
        , []),
        x.createElement(a, Ge({}, s, {
            ref: i
        }))
    }
    );
    return n.displayName = `Primitive.${t}`,
    {
        ...e,
        [t]: n
    }
}
, {});
function KN(e, t) {
    e && Vn.flushSync(()=>e.dispatchEvent(t))
}
function ji(e) {
    const t = x.useRef(e);
    return x.useEffect(()=>{
        t.current = e
    }
    ),
    x.useMemo(()=>(...n)=>{
        var r;
        return (r = t.current) === null || r === void 0 ? void 0 : r.call(t, ...n)
    }
    , [])
}
function XN(e, t=globalThis == null ? void 0 : globalThis.document) {
    const n = ji(e);
    x.useEffect(()=>{
        const r = i=>{
            i.key === "Escape" && n(i)
        }
        ;
        return t.addEventListener("keydown", r),
        ()=>t.removeEventListener("keydown", r)
    }
    , [n, t])
}
const Pg = "dismissableLayer.update"
  , qN = "dismissableLayer.pointerDownOutside"
  , QN = "dismissableLayer.focusOutside";
let r6;
const JN = x.createContext({
    layers: new Set,
    layersWithOutsidePointerEventsDisabled: new Set,
    branches: new Set
})
  , eF = x.forwardRef((e,t)=>{
    var n;
    const {disableOutsidePointerEvents: r=!1, onEscapeKeyDown: i, onPointerDownOutside: o, onFocusOutside: s, onInteractOutside: a, onDismiss: l, ...c} = e
      , u = x.useContext(JN)
      , [d,f] = x.useState(null)
      , h = (n = d == null ? void 0 : d.ownerDocument) !== null && n !== void 0 ? n : globalThis == null ? void 0 : globalThis.document
      , [,m] = x.useState({})
      , g = fi(t, T=>f(T))
      , E = Array.from(u.layers)
      , [v] = [...u.layersWithOutsidePointerEventsDisabled].slice(-1)
      , y = E.indexOf(v)
      , w = d ? E.indexOf(d) : -1
      , b = u.layersWithOutsidePointerEventsDisabled.size > 0
      , I = w >= y
      , S = tF(T=>{
        const L = T.target
          , A = [...u.branches].some(P=>P.contains(L));
        !I || A || (o == null || o(T),
        a == null || a(T),
        T.defaultPrevented || l == null || l())
    }
    , h)
      , C = nF(T=>{
        const L = T.target;
        [...u.branches].some(P=>P.contains(L)) || (s == null || s(T),
        a == null || a(T),
        T.defaultPrevented || l == null || l())
    }
    , h);
    return XN(T=>{
        w === u.layers.size - 1 && (i == null || i(T),
        !T.defaultPrevented && l && (T.preventDefault(),
        l()))
    }
    , h),
    x.useEffect(()=>{
        if (d)
            return r && (u.layersWithOutsidePointerEventsDisabled.size === 0 && (r6 = h.body.style.pointerEvents,
            h.body.style.pointerEvents = "none"),
            u.layersWithOutsidePointerEventsDisabled.add(d)),
            u.layers.add(d),
            i6(),
            ()=>{
                r && u.layersWithOutsidePointerEventsDisabled.size === 1 && (h.body.style.pointerEvents = r6)
            }
    }
    , [d, h, r, u]),
    x.useEffect(()=>()=>{
        d && (u.layers.delete(d),
        u.layersWithOutsidePointerEventsDisabled.delete(d),
        i6())
    }
    , [d, u]),
    x.useEffect(()=>{
        const T = ()=>m({});
        return document.addEventListener(Pg, T),
        ()=>document.removeEventListener(Pg, T)
    }
    , []),
    x.createElement(Pn.div, Ge({}, c, {
        ref: g,
        style: {
            pointerEvents: b ? I ? "auto" : "none" : void 0,
            ...e.style
        },
        onFocusCapture: an(e.onFocusCapture, C.onFocusCapture),
        onBlurCapture: an(e.onBlurCapture, C.onBlurCapture),
        onPointerDownCapture: an(e.onPointerDownCapture, S.onPointerDownCapture)
    }))
}
);
function tF(e, t=globalThis == null ? void 0 : globalThis.document) {
    const n = ji(e)
      , r = x.useRef(!1)
      , i = x.useRef(()=>{}
    );
    return x.useEffect(()=>{
        const o = a=>{
            if (a.target && !r.current) {
                let c = function() {
                    j7(qN, n, l, {
                        discrete: !0
                    })
                };
                const l = {
                    originalEvent: a
                };
                a.pointerType === "touch" ? (t.removeEventListener("click", i.current),
                i.current = c,
                t.addEventListener("click", i.current, {
                    once: !0
                })) : c()
            }
            r.current = !1
        }
          , s = window.setTimeout(()=>{
            t.addEventListener("pointerdown", o)
        }
        , 0);
        return ()=>{
            window.clearTimeout(s),
            t.removeEventListener("pointerdown", o),
            t.removeEventListener("click", i.current)
        }
    }
    , [t, n]),
    {
        onPointerDownCapture: ()=>r.current = !0
    }
}
function nF(e, t=globalThis == null ? void 0 : globalThis.document) {
    const n = ji(e)
      , r = x.useRef(!1);
    return x.useEffect(()=>{
        const i = o=>{
            o.target && !r.current && j7(QN, n, {
                originalEvent: o
            }, {
                discrete: !1
            })
        }
        ;
        return t.addEventListener("focusin", i),
        ()=>t.removeEventListener("focusin", i)
    }
    , [t, n]),
    {
        onFocusCapture: ()=>r.current = !0,
        onBlurCapture: ()=>r.current = !1
    }
}
function i6() {
    const e = new CustomEvent(Pg);
    document.dispatchEvent(e)
}
function j7(e, t, n, {discrete: r}) {
    const i = n.originalEvent.target
      , o = new CustomEvent(e,{
        bubbles: !1,
        cancelable: !0,
        detail: n
    });
    t && i.addEventListener(e, t, {
        once: !0
    }),
    r ? KN(i, o) : i.dispatchEvent(o)
}
let bp = 0;
function rF() {
    x.useEffect(()=>{
        var e, t;
        const n = document.querySelectorAll("[data-radix-focus-guard]");
        return document.body.insertAdjacentElement("afterbegin", (e = n[0]) !== null && e !== void 0 ? e : o6()),
        document.body.insertAdjacentElement("beforeend", (t = n[1]) !== null && t !== void 0 ? t : o6()),
        bp++,
        ()=>{
            bp === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),
            bp--
        }
    }
    , [])
}
function o6() {
    const e = document.createElement("span");
    return e.setAttribute("data-radix-focus-guard", ""),
    e.tabIndex = 0,
    e.style.cssText = "outline: none; opacity: 0; position: fixed; pointer-events: none",
    e
}
const _p = "focusScope.autoFocusOnMount"
  , xp = "focusScope.autoFocusOnUnmount"
  , s6 = {
    bubbles: !1,
    cancelable: !0
}
  , iF = x.forwardRef((e,t)=>{
    const {loop: n=!1, trapped: r=!1, onMountAutoFocus: i, onUnmountAutoFocus: o, ...s} = e
      , [a,l] = x.useState(null)
      , c = ji(i)
      , u = ji(o)
      , d = x.useRef(null)
      , f = fi(t, g=>l(g))
      , h = x.useRef({
        paused: !1,
        pause() {
            this.paused = !0
        },
        resume() {
            this.paused = !1
        }
    }).current;
    x.useEffect(()=>{
        if (r) {
            let g = function(v) {
                if (h.paused || !a)
                    return;
                const y = v.target;
                a.contains(y) ? d.current = y : hs(d.current, {
                    select: !0
                })
            }
              , E = function(v) {
                h.paused || !a || a.contains(v.relatedTarget) || hs(d.current, {
                    select: !0
                })
            };
            return document.addEventListener("focusin", g),
            document.addEventListener("focusout", E),
            ()=>{
                document.removeEventListener("focusin", g),
                document.removeEventListener("focusout", E)
            }
        }
    }
    , [r, a, h.paused]),
    x.useEffect(()=>{
        if (a) {
            l6.add(h);
            const g = document.activeElement;
            if (!a.contains(g)) {
                const v = new CustomEvent(_p,s6);
                a.addEventListener(_p, c),
                a.dispatchEvent(v),
                v.defaultPrevented || (oF(uF(Y7(a)), {
                    select: !0
                }),
                document.activeElement === g && hs(a))
            }
            return ()=>{
                a.removeEventListener(_p, c),
                setTimeout(()=>{
                    const v = new CustomEvent(xp,s6);
                    a.addEventListener(xp, u),
                    a.dispatchEvent(v),
                    v.defaultPrevented || hs(g ?? document.body, {
                        select: !0
                    }),
                    a.removeEventListener(xp, u),
                    l6.remove(h)
                }
                , 0)
            }
        }
    }
    , [a, c, u, h]);
    const m = x.useCallback(g=>{
        if (!n && !r || h.paused)
            return;
        const E = g.key === "Tab" && !g.altKey && !g.ctrlKey && !g.metaKey
          , v = document.activeElement;
        if (E && v) {
            const y = g.currentTarget
              , [w,b] = sF(y);
            w && b ? !g.shiftKey && v === b ? (g.preventDefault(),
            n && hs(w, {
                select: !0
            })) : g.shiftKey && v === w && (g.preventDefault(),
            n && hs(b, {
                select: !0
            })) : v === y && g.preventDefault()
        }
    }
    , [n, r, h.paused]);
    return x.createElement(Pn.div, Ge({
        tabIndex: -1
    }, s, {
        ref: f,
        onKeyDown: m
    }))
}
);
function oF(e, {select: t=!1}={}) {
    const n = document.activeElement;
    for (const r of e)
        if (hs(r, {
            select: t
        }),
        document.activeElement !== n)
            return
}
function sF(e) {
    const t = Y7(e)
      , n = a6(t, e)
      , r = a6(t.reverse(), e);
    return [n, r]
}
function Y7(e) {
    const t = []
      , n = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
        acceptNode: r=>{
            const i = r.tagName === "INPUT" && r.type === "hidden";
            return r.disabled || r.hidden || i ? NodeFilter.FILTER_SKIP : r.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP
        }
    });
    for (; n.nextNode(); )
        t.push(n.currentNode);
    return t
}
function a6(e, t) {
    for (const n of e)
        if (!aF(n, {
            upTo: t
        }))
            return n
}
function aF(e, {upTo: t}) {
    if (getComputedStyle(e).visibility === "hidden")
        return !0;
    for (; e; ) {
        if (t !== void 0 && e === t)
            return !1;
        if (getComputedStyle(e).display === "none")
            return !0;
        e = e.parentElement
    }
    return !1
}
function lF(e) {
    return e instanceof HTMLInputElement && "select"in e
}
function hs(e, {select: t=!1}={}) {
    if (e && e.focus) {
        const n = document.activeElement;
        e.focus({
            preventScroll: !0
        }),
        e !== n && lF(e) && t && e.select()
    }
}
const l6 = cF();
function cF() {
    let e = [];
    return {
        add(t) {
            const n = e[0];
            t !== n && (n == null || n.pause()),
            e = c6(e, t),
            e.unshift(t)
        },
        remove(t) {
            var n;
            e = c6(e, t),
            (n = e[0]) === null || n === void 0 || n.resume()
        }
    }
}
function c6(e, t) {
    const n = [...e]
      , r = n.indexOf(t);
    return r !== -1 && n.splice(r, 1),
    n
}
function uF(e) {
    return e.filter(t=>t.tagName !== "A")
}
const xo = globalThis != null && globalThis.document ? x.useLayoutEffect : ()=>{}
  , dF = oT["useId".toString()] || (()=>{}
);
let fF = 0;
function gy(e) {
    const [t,n] = x.useState(dF());
    return xo(()=>{
        e || n(r=>r ?? String(fF++))
    }
    , [e]),
    e || (t ? `radix-${t}` : "")
}
function fa(e) {
    return e.split("-")[0]
}
function Sd(e) {
    return e.split("-")[1]
}
function Bl(e) {
    return ["top", "bottom"].includes(fa(e)) ? "x" : "y"
}
function vy(e) {
    return e === "y" ? "height" : "width"
}
function u6(e, t, n) {
    let {reference: r, floating: i} = e;
    const o = r.x + r.width / 2 - i.width / 2
      , s = r.y + r.height / 2 - i.height / 2
      , a = Bl(t)
      , l = vy(a)
      , c = r[l] / 2 - i[l] / 2
      , u = a === "x";
    let d;
    switch (fa(t)) {
    case "top":
        d = {
            x: o,
            y: r.y - i.height
        };
        break;
    case "bottom":
        d = {
            x: o,
            y: r.y + r.height
        };
        break;
    case "right":
        d = {
            x: r.x + r.width,
            y: s
        };
        break;
    case "left":
        d = {
            x: r.x - i.width,
            y: s
        };
        break;
    default:
        d = {
            x: r.x,
            y: r.y
        }
    }
    switch (Sd(t)) {
    case "start":
        d[a] -= c * (n && u ? -1 : 1);
        break;
    case "end":
        d[a] += c * (n && u ? -1 : 1)
    }
    return d
}
const hF = async(e,t,n)=>{
    const {placement: r="bottom", strategy: i="absolute", middleware: o=[], platform: s} = n
      , a = await (s.isRTL == null ? void 0 : s.isRTL(t));
    let l = await s.getElementRects({
        reference: e,
        floating: t,
        strategy: i
    })
      , {x: c, y: u} = u6(l, r, a)
      , d = r
      , f = {}
      , h = 0;
    for (let m = 0; m < o.length; m++) {
        const {name: g, fn: E} = o[m]
          , {x: v, y, data: w, reset: b} = await E({
            x: c,
            y: u,
            initialPlacement: r,
            placement: d,
            strategy: i,
            middlewareData: f,
            rects: l,
            platform: s,
            elements: {
                reference: e,
                floating: t
            }
        });
        c = v ?? c,
        u = y ?? u,
        f = {
            ...f,
            [g]: {
                ...f[g],
                ...w
            }
        },
        b && h <= 50 && (h++,
        typeof b == "object" && (b.placement && (d = b.placement),
        b.rects && (l = b.rects === !0 ? await s.getElementRects({
            reference: e,
            floating: t,
            strategy: i
        }) : b.rects),
        {x: c, y: u} = u6(l, d, a)),
        m = -1)
    }
    return {
        x: c,
        y: u,
        placement: d,
        strategy: i,
        middlewareData: f
    }
}
;
function Z7(e) {
    return typeof e != "number" ? function(t) {
        return {
            top: 0,
            right: 0,
            bottom: 0,
            left: 0,
            ...t
        }
    }(e) : {
        top: e,
        right: e,
        bottom: e,
        left: e
    }
}
function Xh(e) {
    return {
        ...e,
        top: e.y,
        left: e.x,
        right: e.x + e.width,
        bottom: e.y + e.height
    }
}
async function Gu(e, t) {
    var n;
    t === void 0 && (t = {});
    const {x: r, y: i, platform: o, rects: s, elements: a, strategy: l} = e
      , {boundary: c="clippingAncestors", rootBoundary: u="viewport", elementContext: d="floating", altBoundary: f=!1, padding: h=0} = t
      , m = Z7(h)
      , g = a[f ? d === "floating" ? "reference" : "floating" : d]
      , E = Xh(await o.getClippingRect({
        element: (n = await (o.isElement == null ? void 0 : o.isElement(g))) == null || n ? g : g.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a.floating)),
        boundary: c,
        rootBoundary: u,
        strategy: l
    }))
      , v = Xh(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({
        rect: d === "floating" ? {
            ...s.floating,
            x: r,
            y: i
        } : s.reference,
        offsetParent: await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a.floating)),
        strategy: l
    }) : s[d]);
    return {
        top: E.top - v.top + m.top,
        bottom: v.bottom - E.bottom + m.bottom,
        left: E.left - v.left + m.left,
        right: v.right - E.right + m.right
    }
}
const pF = Math.min
  , ps = Math.max;
function Rg(e, t, n) {
    return ps(e, pF(t, n))
}
const d6 = e=>({
    name: "arrow",
    options: e,
    async fn(t) {
        const {element: n, padding: r=0} = e ?? {}
          , {x: i, y: o, placement: s, rects: a, platform: l} = t;
        if (n == null)
            return {};
        const c = Z7(r)
          , u = {
            x: i,
            y: o
        }
          , d = Bl(s)
          , f = Sd(s)
          , h = vy(d)
          , m = await l.getDimensions(n)
          , g = d === "y" ? "top" : "left"
          , E = d === "y" ? "bottom" : "right"
          , v = a.reference[h] + a.reference[d] - u[d] - a.floating[h]
          , y = u[d] - a.reference[d]
          , w = await (l.getOffsetParent == null ? void 0 : l.getOffsetParent(n));
        let b = w ? d === "y" ? w.clientHeight || 0 : w.clientWidth || 0 : 0;
        b === 0 && (b = a.floating[h]);
        const I = v / 2 - y / 2
          , S = c[g]
          , C = b - m[h] - c[E]
          , T = b / 2 - m[h] / 2 + I
          , L = Rg(S, T, C)
          , A = (f === "start" ? c[g] : c[E]) > 0 && T !== L && a.reference[h] <= a.floating[h];
        return {
            [d]: u[d] - (A ? T < S ? S - T : C - T : 0),
            data: {
                [d]: L,
                centerOffset: T - L
            }
        }
    }
})
  , mF = {
    left: "right",
    right: "left",
    bottom: "top",
    top: "bottom"
};
function qh(e) {
    return e.replace(/left|right|bottom|top/g, t=>mF[t])
}
function gF(e, t, n) {
    n === void 0 && (n = !1);
    const r = Sd(e)
      , i = Bl(e)
      , o = vy(i);
    let s = i === "x" ? r === (n ? "end" : "start") ? "right" : "left" : r === "start" ? "bottom" : "top";
    return t.reference[o] > t.floating[o] && (s = qh(s)),
    {
        main: s,
        cross: qh(s)
    }
}
const vF = {
    start: "end",
    end: "start"
};
function f6(e) {
    return e.replace(/start|end/g, t=>vF[t])
}
const K7 = ["top", "right", "bottom", "left"];
K7.reduce((e,t)=>e.concat(t, t + "-start", t + "-end"), []);
const yF = function(e) {
    return e === void 0 && (e = {}),
    {
        name: "flip",
        options: e,
        async fn(t) {
            var n;
            const {placement: r, middlewareData: i, rects: o, initialPlacement: s, platform: a, elements: l} = t
              , {mainAxis: c=!0, crossAxis: u=!0, fallbackPlacements: d, fallbackStrategy: f="bestFit", flipAlignment: h=!0, ...m} = e
              , g = fa(r)
              , E = d || (g === s || !h ? [qh(s)] : function(T) {
                const L = qh(T);
                return [f6(T), L, f6(L)]
            }(s))
              , v = [s, ...E]
              , y = await Gu(t, m)
              , w = [];
            let b = ((n = i.flip) == null ? void 0 : n.overflows) || [];
            if (c && w.push(y[g]),
            u) {
                const {main: T, cross: L} = gF(r, o, await (a.isRTL == null ? void 0 : a.isRTL(l.floating)));
                w.push(y[T], y[L])
            }
            if (b = [...b, {
                placement: r,
                overflows: w
            }],
            !w.every(T=>T <= 0)) {
                var I, S;
                const T = ((I = (S = i.flip) == null ? void 0 : S.index) != null ? I : 0) + 1
                  , L = v[T];
                if (L)
                    return {
                        data: {
                            index: T,
                            overflows: b
                        },
                        reset: {
                            placement: L
                        }
                    };
                let A = "bottom";
                switch (f) {
                case "bestFit":
                    {
                        var C;
                        const P = (C = b.map(O=>[O, O.overflows.filter(N=>N > 0).reduce((N,$)=>N + $, 0)]).sort((O,N)=>O[1] - N[1])[0]) == null ? void 0 : C[0].placement;
                        P && (A = P);
                        break
                    }
                case "initialPlacement":
                    A = s
                }
                if (r !== A)
                    return {
                        reset: {
                            placement: A
                        }
                    }
            }
            return {}
        }
    }
};
function h6(e, t) {
    return {
        top: e.top - t.height,
        right: e.right - t.width,
        bottom: e.bottom - t.height,
        left: e.left - t.width
    }
}
function p6(e) {
    return K7.some(t=>e[t] >= 0)
}
const EF = function(e) {
    let {strategy: t="referenceHidden", ...n} = e === void 0 ? {} : e;
    return {
        name: "hide",
        async fn(r) {
            const {rects: i} = r;
            switch (t) {
            case "referenceHidden":
                {
                    const o = h6(await Gu(r, {
                        ...n,
                        elementContext: "reference"
                    }), i.reference);
                    return {
                        data: {
                            referenceHiddenOffsets: o,
                            referenceHidden: p6(o)
                        }
                    }
                }
            case "escaped":
                {
                    const o = h6(await Gu(r, {
                        ...n,
                        altBoundary: !0
                    }), i.floating);
                    return {
                        data: {
                            escapedOffsets: o,
                            escaped: p6(o)
                        }
                    }
                }
            default:
                return {}
            }
        }
    }
}
  , wF = function(e) {
    return e === void 0 && (e = 0),
    {
        name: "offset",
        options: e,
        async fn(t) {
            const {x: n, y: r} = t
              , i = await async function(o, s) {
                const {placement: a, platform: l, elements: c} = o
                  , u = await (l.isRTL == null ? void 0 : l.isRTL(c.floating))
                  , d = fa(a)
                  , f = Sd(a)
                  , h = Bl(a) === "x"
                  , m = ["left", "top"].includes(d) ? -1 : 1
                  , g = u && h ? -1 : 1
                  , E = typeof s == "function" ? s(o) : s;
                let {mainAxis: v, crossAxis: y, alignmentAxis: w} = typeof E == "number" ? {
                    mainAxis: E,
                    crossAxis: 0,
                    alignmentAxis: null
                } : {
                    mainAxis: 0,
                    crossAxis: 0,
                    alignmentAxis: null,
                    ...E
                };
                return f && typeof w == "number" && (y = f === "end" ? -1 * w : w),
                h ? {
                    x: y * g,
                    y: v * m
                } : {
                    x: v * m,
                    y: y * g
                }
            }(t, e);
            return {
                x: n + i.x,
                y: r + i.y,
                data: i
            }
        }
    }
};
function X7(e) {
    return e === "x" ? "y" : "x"
}
const bF = function(e) {
    return e === void 0 && (e = {}),
    {
        name: "shift",
        options: e,
        async fn(t) {
            const {x: n, y: r, placement: i} = t
              , {mainAxis: o=!0, crossAxis: s=!1, limiter: a={
                fn: E=>{
                    let {x: v, y} = E;
                    return {
                        x: v,
                        y
                    }
                }
            }, ...l} = e
              , c = {
                x: n,
                y: r
            }
              , u = await Gu(t, l)
              , d = Bl(fa(i))
              , f = X7(d);
            let h = c[d]
              , m = c[f];
            if (o) {
                const E = d === "y" ? "bottom" : "right";
                h = Rg(h + u[d === "y" ? "top" : "left"], h, h - u[E])
            }
            if (s) {
                const E = f === "y" ? "bottom" : "right";
                m = Rg(m + u[f === "y" ? "top" : "left"], m, m - u[E])
            }
            const g = a.fn({
                ...t,
                [d]: h,
                [f]: m
            });
            return {
                ...g,
                data: {
                    x: g.x - n,
                    y: g.y - r
                }
            }
        }
    }
}
  , _F = function(e) {
    return e === void 0 && (e = {}),
    {
        options: e,
        fn(t) {
            const {x: n, y: r, placement: i, rects: o, middlewareData: s} = t
              , {offset: a=0, mainAxis: l=!0, crossAxis: c=!0} = e
              , u = {
                x: n,
                y: r
            }
              , d = Bl(i)
              , f = X7(d);
            let h = u[d]
              , m = u[f];
            const g = typeof a == "function" ? a({
                ...o,
                placement: i
            }) : a
              , E = typeof g == "number" ? {
                mainAxis: g,
                crossAxis: 0
            } : {
                mainAxis: 0,
                crossAxis: 0,
                ...g
            };
            if (l) {
                const I = d === "y" ? "height" : "width"
                  , S = o.reference[d] - o.floating[I] + E.mainAxis
                  , C = o.reference[d] + o.reference[I] - E.mainAxis;
                h < S ? h = S : h > C && (h = C)
            }
            if (c) {
                var v, y, w, b;
                const I = d === "y" ? "width" : "height"
                  , S = ["top", "left"].includes(fa(i))
                  , C = o.reference[f] - o.floating[I] + (S && (v = (y = s.offset) == null ? void 0 : y[f]) != null ? v : 0) + (S ? 0 : E.crossAxis)
                  , T = o.reference[f] + o.reference[I] + (S ? 0 : (w = (b = s.offset) == null ? void 0 : b[f]) != null ? w : 0) - (S ? E.crossAxis : 0);
                m < C ? m = C : m > T && (m = T)
            }
            return {
                [d]: h,
                [f]: m
            }
        }
    }
}
  , xF = function(e) {
    return e === void 0 && (e = {}),
    {
        name: "size",
        options: e,
        async fn(t) {
            const {placement: n, rects: r, platform: i, elements: o} = t
              , {apply: s, ...a} = e
              , l = await Gu(t, a)
              , c = fa(n)
              , u = Sd(n);
            let d, f;
            c === "top" || c === "bottom" ? (d = c,
            f = u === (await (i.isRTL == null ? void 0 : i.isRTL(o.floating)) ? "start" : "end") ? "left" : "right") : (f = c,
            d = u === "end" ? "top" : "bottom");
            const h = ps(l.left, 0)
              , m = ps(l.right, 0)
              , g = ps(l.top, 0)
              , E = ps(l.bottom, 0)
              , v = {
                availableHeight: r.floating.height - (["left", "right"].includes(n) ? 2 * (g !== 0 || E !== 0 ? g + E : ps(l.top, l.bottom)) : l[d]),
                availableWidth: r.floating.width - (["top", "bottom"].includes(n) ? 2 * (h !== 0 || m !== 0 ? h + m : ps(l.left, l.right)) : l[f])
            }
              , y = await i.getDimensions(o.floating);
            s == null || s({
                ...t,
                ...v
            });
            const w = await i.getDimensions(o.floating);
            return y.width !== w.width || y.height !== w.height ? {
                reset: {
                    rects: !0
                }
            } : {}
        }
    }
};
function q7(e) {
    return e && e.document && e.location && e.alert && e.setInterval
}
function Qi(e) {
    if (e == null)
        return window;
    if (!q7(e)) {
        const t = e.ownerDocument;
        return t && t.defaultView || window
    }
    return e
}
function Cd(e) {
    return Qi(e).getComputedStyle(e)
}
function Fi(e) {
    return q7(e) ? "" : e ? (e.nodeName || "").toLowerCase() : ""
}
function Q7() {
    const e = navigator.userAgentData;
    return e != null && e.brands ? e.brands.map(t=>t.brand + "/" + t.version).join(" ") : navigator.userAgent
}
function hi(e) {
    return e instanceof Qi(e).HTMLElement
}
function Xo(e) {
    return e instanceof Qi(e).Element
}
function yy(e) {
    return typeof ShadowRoot > "u" ? !1 : e instanceof Qi(e).ShadowRoot || e instanceof ShadowRoot
}
function o0(e) {
    const {overflow: t, overflowX: n, overflowY: r} = Cd(e);
    return /auto|scroll|overlay|hidden/.test(t + r + n)
}
function IF(e) {
    return ["table", "td", "th"].includes(Fi(e))
}
function m6(e) {
    const t = /firefox/i.test(Q7())
      , n = Cd(e);
    return n.transform !== "none" || n.perspective !== "none" || n.contain === "paint" || ["transform", "perspective"].includes(n.willChange) || t && n.willChange === "filter" || t && !!n.filter && n.filter !== "none"
}
function J7() {
    return !/^((?!chrome|android).)*safari/i.test(Q7())
}
const g6 = Math.min
  , Jc = Math.max
  , Qh = Math.round;
function $i(e, t, n) {
    var r, i, o, s;
    t === void 0 && (t = !1),
    n === void 0 && (n = !1);
    const a = e.getBoundingClientRect();
    let l = 1
      , c = 1;
    t && hi(e) && (l = e.offsetWidth > 0 && Qh(a.width) / e.offsetWidth || 1,
    c = e.offsetHeight > 0 && Qh(a.height) / e.offsetHeight || 1);
    const u = Xo(e) ? Qi(e) : window
      , d = !J7() && n
      , f = (a.left + (d && (r = (i = u.visualViewport) == null ? void 0 : i.offsetLeft) != null ? r : 0)) / l
      , h = (a.top + (d && (o = (s = u.visualViewport) == null ? void 0 : s.offsetTop) != null ? o : 0)) / c
      , m = a.width / l
      , g = a.height / c;
    return {
        width: m,
        height: g,
        top: h,
        right: f + m,
        bottom: h + g,
        left: f,
        x: f,
        y: h
    }
}
function Fo(e) {
    return (t = e,
    (t instanceof Qi(t).Node ? e.ownerDocument : e.document) || window.document).documentElement;
    var t
}
function s0(e) {
    return Xo(e) ? {
        scrollLeft: e.scrollLeft,
        scrollTop: e.scrollTop
    } : {
        scrollLeft: e.pageXOffset,
        scrollTop: e.pageYOffset
    }
}
function eI(e) {
    return $i(Fo(e)).left + s0(e).scrollLeft
}
function SF(e, t, n) {
    const r = hi(t)
      , i = Fo(t)
      , o = $i(e, r && function(l) {
        const c = $i(l);
        return Qh(c.width) !== l.offsetWidth || Qh(c.height) !== l.offsetHeight
    }(t), n === "fixed");
    let s = {
        scrollLeft: 0,
        scrollTop: 0
    };
    const a = {
        x: 0,
        y: 0
    };
    if (r || !r && n !== "fixed")
        if ((Fi(t) !== "body" || o0(i)) && (s = s0(t)),
        hi(t)) {
            const l = $i(t, !0);
            a.x = l.x + t.clientLeft,
            a.y = l.y + t.clientTop
        } else
            i && (a.x = eI(i));
    return {
        x: o.left + s.scrollLeft - a.x,
        y: o.top + s.scrollTop - a.y,
        width: o.width,
        height: o.height
    }
}
function tI(e) {
    return Fi(e) === "html" ? e : e.assignedSlot || e.parentNode || (yy(e) ? e.host : null) || Fo(e)
}
function v6(e) {
    return hi(e) && getComputedStyle(e).position !== "fixed" ? e.offsetParent : null
}
function Og(e) {
    const t = Qi(e);
    let n = v6(e);
    for (; n && IF(n) && getComputedStyle(n).position === "static"; )
        n = v6(n);
    return n && (Fi(n) === "html" || Fi(n) === "body" && getComputedStyle(n).position === "static" && !m6(n)) ? t : n || function(r) {
        let i = tI(r);
        for (yy(i) && (i = i.host); hi(i) && !["html", "body"].includes(Fi(i)); ) {
            if (m6(i))
                return i;
            i = i.parentNode
        }
        return null
    }(e) || t
}
function y6(e) {
    if (hi(e))
        return {
            width: e.offsetWidth,
            height: e.offsetHeight
        };
    const t = $i(e);
    return {
        width: t.width,
        height: t.height
    }
}
function nI(e) {
    const t = tI(e);
    return ["html", "body", "#document"].includes(Fi(t)) ? e.ownerDocument.body : hi(t) && o0(t) ? t : nI(t)
}
function Jh(e, t) {
    var n;
    t === void 0 && (t = []);
    const r = nI(e)
      , i = r === ((n = e.ownerDocument) == null ? void 0 : n.body)
      , o = Qi(r)
      , s = i ? [o].concat(o.visualViewport || [], o0(r) ? r : []) : r
      , a = t.concat(s);
    return i ? a : a.concat(Jh(s))
}
function E6(e, t, n) {
    return t === "viewport" ? Xh(function(r, i) {
        const o = Qi(r)
          , s = Fo(r)
          , a = o.visualViewport;
        let l = s.clientWidth
          , c = s.clientHeight
          , u = 0
          , d = 0;
        if (a) {
            l = a.width,
            c = a.height;
            const f = J7();
            (f || !f && i === "fixed") && (u = a.offsetLeft,
            d = a.offsetTop)
        }
        return {
            width: l,
            height: c,
            x: u,
            y: d
        }
    }(e, n)) : Xo(t) ? function(r, i) {
        const o = $i(r, !1, i === "fixed")
          , s = o.top + r.clientTop
          , a = o.left + r.clientLeft;
        return {
            top: s,
            left: a,
            x: a,
            y: s,
            right: a + r.clientWidth,
            bottom: s + r.clientHeight,
            width: r.clientWidth,
            height: r.clientHeight
        }
    }(t, n) : Xh(function(r) {
        var i;
        const o = Fo(r)
          , s = s0(r)
          , a = (i = r.ownerDocument) == null ? void 0 : i.body
          , l = Jc(o.scrollWidth, o.clientWidth, a ? a.scrollWidth : 0, a ? a.clientWidth : 0)
          , c = Jc(o.scrollHeight, o.clientHeight, a ? a.scrollHeight : 0, a ? a.clientHeight : 0);
        let u = -s.scrollLeft + eI(r);
        const d = -s.scrollTop;
        return Cd(a || o).direction === "rtl" && (u += Jc(o.clientWidth, a ? a.clientWidth : 0) - l),
        {
            width: l,
            height: c,
            x: u,
            y: d
        }
    }(Fo(e)))
}
function CF(e) {
    const t = Jh(e)
      , n = ["absolute", "fixed"].includes(Cd(e).position) && hi(e) ? Og(e) : e;
    return Xo(n) ? t.filter(r=>Xo(r) && function(i, o) {
        const s = o.getRootNode == null ? void 0 : o.getRootNode();
        if (i.contains(o))
            return !0;
        if (s && yy(s)) {
            let a = o;
            do {
                if (a && i === a)
                    return !0;
                a = a.parentNode || a.host
            } while (a)
        }
        return !1
    }(r, n) && Fi(r) !== "body") : []
}
const kF = {
    getClippingRect: function(e) {
        let {element: t, boundary: n, rootBoundary: r, strategy: i} = e;
        const o = [...n === "clippingAncestors" ? CF(t) : [].concat(n), r]
          , s = o[0]
          , a = o.reduce((l,c)=>{
            const u = E6(t, c, i);
            return l.top = Jc(u.top, l.top),
            l.right = g6(u.right, l.right),
            l.bottom = g6(u.bottom, l.bottom),
            l.left = Jc(u.left, l.left),
            l
        }
        , E6(t, s, i));
        return {
            width: a.right - a.left,
            height: a.bottom - a.top,
            x: a.left,
            y: a.top
        }
    },
    convertOffsetParentRelativeRectToViewportRelativeRect: function(e) {
        let {rect: t, offsetParent: n, strategy: r} = e;
        const i = hi(n)
          , o = Fo(n);
        if (n === o)
            return t;
        let s = {
            scrollLeft: 0,
            scrollTop: 0
        };
        const a = {
            x: 0,
            y: 0
        };
        if ((i || !i && r !== "fixed") && ((Fi(n) !== "body" || o0(o)) && (s = s0(n)),
        hi(n))) {
            const l = $i(n, !0);
            a.x = l.x + n.clientLeft,
            a.y = l.y + n.clientTop
        }
        return {
            ...t,
            x: t.x - s.scrollLeft + a.x,
            y: t.y - s.scrollTop + a.y
        }
    },
    isElement: Xo,
    getDimensions: y6,
    getOffsetParent: Og,
    getDocumentElement: Fo,
    getElementRects: e=>{
        let {reference: t, floating: n, strategy: r} = e;
        return {
            reference: SF(t, Og(n), r),
            floating: {
                ...y6(n),
                x: 0,
                y: 0
            }
        }
    }
    ,
    getClientRects: e=>Array.from(e.getClientRects()),
    isRTL: e=>Cd(e).direction === "rtl"
};
function TF(e, t, n, r) {
    r === void 0 && (r = {});
    const {ancestorScroll: i=!0, ancestorResize: o=!0, elementResize: s=!0, animationFrame: a=!1} = r
      , l = i && !a
      , c = o && !a
      , u = l || c ? [...Xo(e) ? Jh(e) : [], ...Jh(t)] : [];
    u.forEach(m=>{
        l && m.addEventListener("scroll", n, {
            passive: !0
        }),
        c && m.addEventListener("resize", n)
    }
    );
    let d, f = null;
    if (s) {
        let m = !0;
        f = new ResizeObserver(()=>{
            m || n(),
            m = !1
        }
        ),
        Xo(e) && !a && f.observe(e),
        f.observe(t)
    }
    let h = a ? $i(e) : null;
    return a && function m() {
        const g = $i(e);
        !h || g.x === h.x && g.y === h.y && g.width === h.width && g.height === h.height || n(),
        h = g,
        d = requestAnimationFrame(m)
    }(),
    n(),
    ()=>{
        var m;
        u.forEach(g=>{
            l && g.removeEventListener("scroll", n),
            c && g.removeEventListener("resize", n)
        }
        ),
        (m = f) == null || m.disconnect(),
        f = null,
        a && cancelAnimationFrame(d)
    }
}
const MF = (e,t,n)=>hF(e, t, {
    platform: kF,
    ...n
});
var Dg = typeof document < "u" ? x.useLayoutEffect : x.useEffect;
function Ng(e, t) {
    if (e === t)
        return !0;
    if (typeof e != typeof t)
        return !1;
    if (typeof e == "function" && e.toString() === t.toString())
        return !0;
    let n, r, i;
    if (e && t && typeof e == "object") {
        if (Array.isArray(e)) {
            if (n = e.length,
            n != t.length)
                return !1;
            for (r = n; r-- !== 0; )
                if (!Ng(e[r], t[r]))
                    return !1;
            return !0
        }
        if (i = Object.keys(e),
        n = i.length,
        n !== Object.keys(t).length)
            return !1;
        for (r = n; r-- !== 0; )
            if (!Object.prototype.hasOwnProperty.call(t, i[r]))
                return !1;
        for (r = n; r-- !== 0; ) {
            const o = i[r];
            if (!(o === "_owner" && e.$$typeof) && !Ng(e[o], t[o]))
                return !1
        }
        return !0
    }
    return e !== e && t !== t
}
function AF(e) {
    const t = x.useRef(e);
    return Dg(()=>{
        t.current = e
    }
    ),
    t
}
function LF(e) {
    let {middleware: t, placement: n="bottom", strategy: r="absolute", whileElementsMounted: i} = e === void 0 ? {} : e;
    const o = x.useRef(null)
      , s = x.useRef(null)
      , a = AF(i)
      , l = x.useRef(null)
      , [c,u] = x.useState({
        x: null,
        y: null,
        strategy: r,
        placement: n,
        middlewareData: {}
    })
      , [d,f] = x.useState(t);
    Ng(d == null ? void 0 : d.map(w=>{
        let {options: b} = w;
        return b
    }
    ), t == null ? void 0 : t.map(w=>{
        let {options: b} = w;
        return b
    }
    )) || f(t);
    const h = x.useCallback(()=>{
        !o.current || !s.current || MF(o.current, s.current, {
            middleware: d,
            placement: n,
            strategy: r
        }).then(w=>{
            m.current && Vn.flushSync(()=>{
                u(w)
            }
            )
        }
        )
    }
    , [d, n, r]);
    Dg(()=>{
        m.current && h()
    }
    , [h]);
    const m = x.useRef(!1);
    Dg(()=>(m.current = !0,
    ()=>{
        m.current = !1
    }
    ), []);
    const g = x.useCallback(()=>{
        if (typeof l.current == "function" && (l.current(),
        l.current = null),
        o.current && s.current)
            if (a.current) {
                const w = a.current(o.current, s.current, h);
                l.current = w
            } else
                h()
    }
    , [h, a])
      , E = x.useCallback(w=>{
        o.current = w,
        g()
    }
    , [g])
      , v = x.useCallback(w=>{
        s.current = w,
        g()
    }
    , [g])
      , y = x.useMemo(()=>({
        reference: o,
        floating: s
    }), []);
    return x.useMemo(()=>({
        ...c,
        update: h,
        refs: y,
        reference: E,
        floating: v
    }), [c, h, y, E, v])
}
const PF = e=>{
    const {element: t, padding: n} = e;
    function r(i) {
        return Object.prototype.hasOwnProperty.call(i, "current")
    }
    return {
        name: "arrow",
        options: e,
        fn(i) {
            return r(t) ? t.current != null ? d6({
                element: t.current,
                padding: n
            }).fn(i) : {} : t ? d6({
                element: t,
                padding: n
            }).fn(i) : {}
        }
    }
}
  , RF = x.forwardRef((e,t)=>{
    const {children: n, width: r=10, height: i=5, ...o} = e;
    return x.createElement(Pn.svg, Ge({}, o, {
        ref: t,
        width: r,
        height: i,
        viewBox: "0 0 30 10",
        preserveAspectRatio: "none"
    }), e.asChild ? n : x.createElement("polygon", {
        points: "0,0 30,0 15,10"
    }))
}
)
  , OF = RF;
function DF(e) {
    const [t,n] = x.useState(void 0);
    return xo(()=>{
        if (e) {
            n({
                width: e.offsetWidth,
                height: e.offsetHeight
            });
            const r = new ResizeObserver(i=>{
                if (!Array.isArray(i) || !i.length)
                    return;
                const o = i[0];
                let s, a;
                if ("borderBoxSize"in o) {
                    const l = o.borderBoxSize
                      , c = Array.isArray(l) ? l[0] : l;
                    s = c.inlineSize,
                    a = c.blockSize
                } else
                    s = e.offsetWidth,
                    a = e.offsetHeight;
                n({
                    width: s,
                    height: a
                })
            }
            );
            return r.observe(e, {
                box: "border-box"
            }),
            ()=>r.unobserve(e)
        } else
            n(void 0)
    }
    , [e]),
    t
}
const rI = "Popper"
  , [Ey,iI] = Id(rI)
  , [NF,oI] = Ey(rI)
  , FF = e=>{
    const {__scopePopper: t, children: n} = e
      , [r,i] = x.useState(null);
    return x.createElement(NF, {
        scope: t,
        anchor: r,
        onAnchorChange: i
    }, n)
}
  , $F = "PopperAnchor"
  , BF = x.forwardRef((e,t)=>{
    const {__scopePopper: n, virtualRef: r, ...i} = e
      , o = oI($F, n)
      , s = x.useRef(null)
      , a = fi(t, s);
    return x.useEffect(()=>{
        o.onAnchorChange((r == null ? void 0 : r.current) || s.current)
    }
    ),
    r ? null : x.createElement(Pn.div, Ge({}, i, {
        ref: a
    }))
}
)
  , e1 = "PopperContent"
  , [zF,HF] = Ey(e1)
  , [UF,VF] = Ey(e1, {
    hasParent: !1,
    positionUpdateFns: new Set
})
  , WF = x.forwardRef((e,t)=>{
    var n, r, i, o, s, a, l, c;
    const {__scopePopper: u, side: d="bottom", sideOffset: f=0, align: h="center", alignOffset: m=0, arrowPadding: g=0, collisionBoundary: E=[], collisionPadding: v=0, sticky: y="partial", hideWhenDetached: w=!1, avoidCollisions: b=!0, onPlaced: I, ...S} = e
      , C = oI(e1, u)
      , [T,L] = x.useState(null)
      , A = fi(t, ga=>L(ga))
      , [P,O] = x.useState(null)
      , N = DF(P)
      , $ = (n = N == null ? void 0 : N.width) !== null && n !== void 0 ? n : 0
      , V = (r = N == null ? void 0 : N.height) !== null && r !== void 0 ? r : 0
      , te = d + (h !== "center" ? "-" + h : "")
      , Z = typeof v == "number" ? v : {
        top: 0,
        right: 0,
        bottom: 0,
        left: 0,
        ...v
    }
      , z = Array.isArray(E) ? E : [E]
      , W = z.length > 0
      , D = {
        padding: Z,
        boundary: z.filter(KF),
        altBoundary: W
    }
      , {reference: F, floating: B, strategy: Y, x: G, y: K, placement: q, middlewareData: oe, update: $e} = LF({
        strategy: "fixed",
        placement: te,
        whileElementsMounted: TF,
        middleware: [XF(), wF({
            mainAxis: f + V,
            alignmentAxis: m
        }), b ? bF({
            mainAxis: !0,
            crossAxis: !1,
            limiter: y === "partial" ? _F() : void 0,
            ...D
        }) : void 0, P ? PF({
            element: P,
            padding: g
        }) : void 0, b ? yF({
            ...D
        }) : void 0, xF({
            ...D,
            apply: ({elements: ga, availableWidth: B9, availableHeight: z9})=>{
                ga.floating.style.setProperty("--radix-popper-available-width", `${B9}px`),
                ga.floating.style.setProperty("--radix-popper-available-height", `${z9}px`)
            }
        }), qF({
            arrowWidth: $,
            arrowHeight: V
        }), w ? EF({
            strategy: "referenceHidden"
        }) : void 0].filter(ZF)
    });
    xo(()=>{
        F(C.anchor)
    }
    , [F, C.anchor]);
    const Ie = G !== null && K !== null
      , [Se,Ce] = sI(q)
      , ze = ji(I);
    xo(()=>{
        Ie && (ze == null || ze())
    }
    , [Ie, ze]);
    const dn = (i = oe.arrow) === null || i === void 0 ? void 0 : i.x
      , Nd = (o = oe.arrow) === null || o === void 0 ? void 0 : o.y
      , Fd = ((s = oe.arrow) === null || s === void 0 ? void 0 : s.centerOffset) !== 0
      , [Wr,Ht] = x.useState();
    xo(()=>{
        T && Ht(window.getComputedStyle(T).zIndex)
    }
    , [T]);
    const {hasParent: yi, positionUpdateFns: fn} = VF(e1, u)
      , ql = !yi;
    x.useLayoutEffect(()=>{
        if (!ql)
            return fn.add($e),
            ()=>{
                fn.delete($e)
            }
    }
    , [ql, fn, $e]),
    xo(()=>{
        ql && Ie && Array.from(fn).reverse().forEach(ga=>requestAnimationFrame(ga))
    }
    , [ql, Ie, fn]);
    const U3 = {
        "data-side": Se,
        "data-align": Ce,
        ...S,
        ref: A,
        style: {
            ...S.style,
            animation: Ie ? void 0 : "none",
            opacity: (a = oe.hide) !== null && a !== void 0 && a.referenceHidden ? 0 : void 0
        }
    };
    return x.createElement("div", {
        ref: B,
        "data-radix-popper-content-wrapper": "",
        style: {
            position: Y,
            left: 0,
            top: 0,
            transform: Ie ? `translate3d(${Math.round(G)}px, ${Math.round(K)}px, 0)` : "translate3d(0, -200%, 0)",
            minWidth: "max-content",
            zIndex: Wr,
            "--radix-popper-transform-origin": [(l = oe.transformOrigin) === null || l === void 0 ? void 0 : l.x, (c = oe.transformOrigin) === null || c === void 0 ? void 0 : c.y].join(" ")
        },
        dir: e.dir
    }, x.createElement(zF, {
        scope: u,
        placedSide: Se,
        onArrowChange: O,
        arrowX: dn,
        arrowY: Nd,
        shouldHideArrow: Fd
    }, ql ? x.createElement(UF, {
        scope: u,
        hasParent: !0,
        positionUpdateFns: fn
    }, x.createElement(Pn.div, U3)) : x.createElement(Pn.div, U3)))
}
)
  , GF = "PopperArrow"
  , jF = {
    top: "bottom",
    right: "left",
    bottom: "top",
    left: "right"
}
  , YF = x.forwardRef(function(t, n) {
    const {__scopePopper: r, ...i} = t
      , o = HF(GF, r)
      , s = jF[o.placedSide];
    return x.createElement("span", {
        ref: o.onArrowChange,
        style: {
            position: "absolute",
            left: o.arrowX,
            top: o.arrowY,
            [s]: 0,
            transformOrigin: {
                top: "",
                right: "0 0",
                bottom: "center 0",
                left: "100% 0"
            }[o.placedSide],
            transform: {
                top: "translateY(100%)",
                right: "translateY(50%) rotate(90deg) translateX(-50%)",
                bottom: "rotate(180deg)",
                left: "translateY(50%) rotate(-90deg) translateX(50%)"
            }[o.placedSide],
            visibility: o.shouldHideArrow ? "hidden" : void 0
        }
    }, x.createElement(OF, Ge({}, i, {
        ref: n,
        style: {
            ...i.style,
            display: "block"
        }
    })))
});
function ZF(e) {
    return e !== void 0
}
function KF(e) {
    return e !== null
}
const XF = ()=>({
    name: "anchorCssProperties",
    fn(e) {
        const {rects: t, elements: n} = e
          , {width: r, height: i} = t.reference;
        return n.floating.style.setProperty("--radix-popper-anchor-width", `${r}px`),
        n.floating.style.setProperty("--radix-popper-anchor-height", `${i}px`),
        {}
    }
})
  , qF = e=>({
    name: "transformOrigin",
    options: e,
    fn(t) {
        var n, r, i, o, s;
        const {placement: a, rects: l, middlewareData: c} = t
          , d = ((n = c.arrow) === null || n === void 0 ? void 0 : n.centerOffset) !== 0
          , f = d ? 0 : e.arrowWidth
          , h = d ? 0 : e.arrowHeight
          , [m,g] = sI(a)
          , E = {
            start: "0%",
            center: "50%",
            end: "100%"
        }[g]
          , v = ((r = (i = c.arrow) === null || i === void 0 ? void 0 : i.x) !== null && r !== void 0 ? r : 0) + f / 2
          , y = ((o = (s = c.arrow) === null || s === void 0 ? void 0 : s.y) !== null && o !== void 0 ? o : 0) + h / 2;
        let w = ""
          , b = "";
        return m === "bottom" ? (w = d ? E : `${v}px`,
        b = `${-h}px`) : m === "top" ? (w = d ? E : `${v}px`,
        b = `${l.floating.height + h}px`) : m === "right" ? (w = `${-h}px`,
        b = d ? E : `${y}px`) : m === "left" && (w = `${l.floating.width + h}px`,
        b = d ? E : `${y}px`),
        {
            data: {
                x: w,
                y: b
            }
        }
    }
});
function sI(e) {
    const [t,n="center"] = e.split("-");
    return [t, n]
}
const QF = FF
  , JF = BF
  , e$ = WF
  , t$ = YF
  , n$ = x.forwardRef((e,t)=>{
    var n;
    const {container: r=globalThis == null || (n = globalThis.document) === null || n === void 0 ? void 0 : n.body, ...i} = e;
    return r ? mA.createPortal(x.createElement(Pn.div, Ge({}, i, {
        ref: t
    })), r) : null
}
);
function r$(e, t) {
    return x.useReducer((n,r)=>{
        const i = t[n][r];
        return i ?? n
    }
    , e)
}
const a0 = e=>{
    const {present: t, children: n} = e
      , r = i$(t)
      , i = typeof n == "function" ? n({
        present: r.isPresent
    }) : x.Children.only(n)
      , o = fi(r.ref, i.ref);
    return typeof n == "function" || r.isPresent ? x.cloneElement(i, {
        ref: o
    }) : null
}
;
a0.displayName = "Presence";
function i$(e) {
    const [t,n] = x.useState()
      , r = x.useRef({})
      , i = x.useRef(e)
      , o = x.useRef("none")
      , s = e ? "mounted" : "unmounted"
      , [a,l] = r$(s, {
        mounted: {
            UNMOUNT: "unmounted",
            ANIMATION_OUT: "unmountSuspended"
        },
        unmountSuspended: {
            MOUNT: "mounted",
            ANIMATION_END: "unmounted"
        },
        unmounted: {
            MOUNT: "mounted"
        }
    });
    return x.useEffect(()=>{
        const c = hf(r.current);
        o.current = a === "mounted" ? c : "none"
    }
    , [a]),
    xo(()=>{
        const c = r.current
          , u = i.current;
        if (u !== e) {
            const f = o.current
              , h = hf(c);
            e ? l("MOUNT") : h === "none" || (c == null ? void 0 : c.display) === "none" ? l("UNMOUNT") : l(u && f !== h ? "ANIMATION_OUT" : "UNMOUNT"),
            i.current = e
        }
    }
    , [e, l]),
    xo(()=>{
        if (t) {
            const c = d=>{
                const h = hf(r.current).includes(d.animationName);
                d.target === t && h && Vn.flushSync(()=>l("ANIMATION_END"))
            }
              , u = d=>{
                d.target === t && (o.current = hf(r.current))
            }
            ;
            return t.addEventListener("animationstart", u),
            t.addEventListener("animationcancel", c),
            t.addEventListener("animationend", c),
            ()=>{
                t.removeEventListener("animationstart", u),
                t.removeEventListener("animationcancel", c),
                t.removeEventListener("animationend", c)
            }
        } else
            l("ANIMATION_END")
    }
    , [t, l]),
    {
        isPresent: ["mounted", "unmountSuspended"].includes(a),
        ref: x.useCallback(c=>{
            c && (r.current = getComputedStyle(c)),
            n(c)
        }
        , [])
    }
}
function hf(e) {
    return (e == null ? void 0 : e.animationName) || "none"
}
function wy({prop: e, defaultProp: t, onChange: n=()=>{}
}) {
    const [r,i] = o$({
        defaultProp: t,
        onChange: n
    })
      , o = e !== void 0
      , s = o ? e : r
      , a = ji(n)
      , l = x.useCallback(c=>{
        if (o) {
            const d = typeof c == "function" ? c(e) : c;
            d !== e && a(d)
        } else
            i(c)
    }
    , [o, e, i, a]);
    return [s, l]
}
function o$({defaultProp: e, onChange: t}) {
    const n = x.useState(e)
      , [r] = n
      , i = x.useRef(r)
      , o = ji(t);
    return x.useEffect(()=>{
        i.current !== r && (o(r),
        i.current = r)
    }
    , [r, i, o]),
    n
}
var s$ = function(e) {
    if (typeof document > "u")
        return null;
    var t = Array.isArray(e) ? e[0] : e;
    return t.ownerDocument.body
}
  , Ea = new WeakMap
  , pf = new WeakMap
  , mf = {}
  , Ip = 0
  , aI = function(e) {
    return e && (e.host || aI(e.parentNode))
}
  , a$ = function(e, t) {
    return t.map(function(n) {
        if (e.contains(n))
            return n;
        var r = aI(n);
        return r && e.contains(r) ? r : (console.error("aria-hidden", n, "in not contained inside", e, ". Doing nothing"),
        null)
    }).filter(function(n) {
        return !!n
    })
}
  , l$ = function(e, t, n, r) {
    var i = a$(t, Array.isArray(e) ? e : [e]);
    mf[n] || (mf[n] = new WeakMap);
    var o = mf[n]
      , s = []
      , a = new Set
      , l = new Set(i)
      , c = function(d) {
        !d || a.has(d) || (a.add(d),
        c(d.parentNode))
    };
    i.forEach(c);
    var u = function(d) {
        !d || l.has(d) || Array.prototype.forEach.call(d.children, function(f) {
            if (a.has(f))
                u(f);
            else {
                var h = f.getAttribute(r)
                  , m = h !== null && h !== "false"
                  , g = (Ea.get(f) || 0) + 1
                  , E = (o.get(f) || 0) + 1;
                Ea.set(f, g),
                o.set(f, E),
                s.push(f),
                g === 1 && m && pf.set(f, !0),
                E === 1 && f.setAttribute(n, "true"),
                m || f.setAttribute(r, "true")
            }
        })
    };
    return u(t),
    a.clear(),
    Ip++,
    function() {
        s.forEach(function(d) {
            var f = Ea.get(d) - 1
              , h = o.get(d) - 1;
            Ea.set(d, f),
            o.set(d, h),
            f || (pf.has(d) || d.removeAttribute(r),
            pf.delete(d)),
            h || d.removeAttribute(n)
        }),
        Ip--,
        Ip || (Ea = new WeakMap,
        Ea = new WeakMap,
        pf = new WeakMap,
        mf = {})
    }
}
  , c$ = function(e, t, n) {
    n === void 0 && (n = "data-aria-hidden");
    var r = Array.from(Array.isArray(e) ? e : [e])
      , i = t || s$(e);
    return i ? (r.push.apply(r, Array.from(i.querySelectorAll("[aria-live]"))),
    l$(r, i, n, "aria-hidden")) : function() {
        return null
    }
}
  , Fg = function(e, t) {
    return Fg = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, r) {
        n.__proto__ = r
    }
    || function(n, r) {
        for (var i in r)
            Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i])
    }
    ,
    Fg(e, t)
};
function NX(e, t) {
    if (typeof t != "function" && t !== null)
        throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    Fg(e, t);
    function n() {
        this.constructor = e
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype,
    new n)
}
var ni = function() {
    return ni = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    ni.apply(this, arguments)
};
function lI(e, t) {
    var n = {};
    for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
    if (e != null && typeof Object.getOwnPropertySymbols == "function")
        for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
            t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
    return n
}
function FX(e, t, n, r) {
    function i(o) {
        return o instanceof n ? o : new n(function(s) {
            s(o)
        }
        )
    }
    return new (n || (n = Promise))(function(o, s) {
        function a(u) {
            try {
                c(r.next(u))
            } catch (d) {
                s(d)
            }
        }
        function l(u) {
            try {
                c(r.throw(u))
            } catch (d) {
                s(d)
            }
        }
        function c(u) {
            u.done ? o(u.value) : i(u.value).then(a, l)
        }
        c((r = r.apply(e, t || [])).next())
    }
    )
}
function $X(e, t) {
    var n = {
        label: 0,
        sent: function() {
            if (o[0] & 1)
                throw o[1];
            return o[1]
        },
        trys: [],
        ops: []
    }, r, i, o, s;
    return s = {
        next: a(0),
        throw: a(1),
        return: a(2)
    },
    typeof Symbol == "function" && (s[Symbol.iterator] = function() {
        return this
    }
    ),
    s;
    function a(c) {
        return function(u) {
            return l([c, u])
        }
    }
    function l(c) {
        if (r)
            throw new TypeError("Generator is already executing.");
        for (; s && (s = 0,
        c[0] && (n = 0)),
        n; )
            try {
                if (r = 1,
                i && (o = c[0] & 2 ? i.return : c[0] ? i.throw || ((o = i.return) && o.call(i),
                0) : i.next) && !(o = o.call(i, c[1])).done)
                    return o;
                switch (i = 0,
                o && (c = [c[0] & 2, o.value]),
                c[0]) {
                case 0:
                case 1:
                    o = c;
                    break;
                case 4:
                    return n.label++,
                    {
                        value: c[1],
                        done: !1
                    };
                case 5:
                    n.label++,
                    i = c[1],
                    c = [0];
                    continue;
                case 7:
                    c = n.ops.pop(),
                    n.trys.pop();
                    continue;
                default:
                    if (o = n.trys,
                    !(o = o.length > 0 && o[o.length - 1]) && (c[0] === 6 || c[0] === 2)) {
                        n = 0;
                        continue
                    }
                    if (c[0] === 3 && (!o || c[1] > o[0] && c[1] < o[3])) {
                        n.label = c[1];
                        break
                    }
                    if (c[0] === 6 && n.label < o[1]) {
                        n.label = o[1],
                        o = c;
                        break
                    }
                    if (o && n.label < o[2]) {
                        n.label = o[2],
                        n.ops.push(c);
                        break
                    }
                    o[2] && n.ops.pop(),
                    n.trys.pop();
                    continue
                }
                c = t.call(e, n)
            } catch (u) {
                c = [6, u],
                i = 0
            } finally {
                r = o = 0
            }
        if (c[0] & 5)
            throw c[1];
        return {
            value: c[0] ? c[1] : void 0,
            done: !0
        }
    }
}
function BX(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function zX(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function u$(e, t, n) {
    if (n || arguments.length === 2)
        for (var r = 0, i = t.length, o; r < i; r++)
            (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)),
            o[r] = t[r]);
    return e.concat(o || Array.prototype.slice.call(t))
}
var eh = "right-scroll-bar-position"
  , th = "width-before-scroll-bar"
  , d$ = "with-scroll-bars-hidden"
  , f$ = "--removed-body-scroll-bar-size";
function h$(e, t) {
    return typeof e == "function" ? e(t) : e && (e.current = t),
    e
}
function p$(e, t) {
    var n = x.useState(function() {
        return {
            value: e,
            callback: t,
            facade: {
                get current() {
                    return n.value
                },
                set current(r) {
                    var i = n.value;
                    i !== r && (n.value = r,
                    n.callback(r, i))
                }
            }
        }
    })[0];
    return n.callback = t,
    n.facade
}
function m$(e, t) {
    return p$(t || null, function(n) {
        return e.forEach(function(r) {
            return h$(r, n)
        })
    })
}
function g$(e) {
    return e
}
function v$(e, t) {
    t === void 0 && (t = g$);
    var n = []
      , r = !1
      , i = {
        read: function() {
            if (r)
                throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");
            return n.length ? n[n.length - 1] : e
        },
        useMedium: function(o) {
            var s = t(o, r);
            return n.push(s),
            function() {
                n = n.filter(function(a) {
                    return a !== s
                })
            }
        },
        assignSyncMedium: function(o) {
            for (r = !0; n.length; ) {
                var s = n;
                n = [],
                s.forEach(o)
            }
            n = {
                push: function(a) {
                    return o(a)
                },
                filter: function() {
                    return n
                }
            }
        },
        assignMedium: function(o) {
            r = !0;
            var s = [];
            if (n.length) {
                var a = n;
                n = [],
                a.forEach(o),
                s = n
            }
            var l = function() {
                var u = s;
                s = [],
                u.forEach(o)
            }
              , c = function() {
                return Promise.resolve().then(l)
            };
            c(),
            n = {
                push: function(u) {
                    s.push(u),
                    c()
                },
                filter: function(u) {
                    return s = s.filter(u),
                    n
                }
            }
        }
    };
    return i
}
function y$(e) {
    e === void 0 && (e = {});
    var t = v$(null);
    return t.options = ni({
        async: !0,
        ssr: !1
    }, e),
    t
}
var cI = function(e) {
    var t = e.sideCar
      , n = lI(e, ["sideCar"]);
    if (!t)
        throw new Error("Sidecar: please provide `sideCar` property to import the right car");
    var r = t.read();
    if (!r)
        throw new Error("Sidecar medium not found");
    return x.createElement(r, ni({}, n))
};
cI.isSideCarExport = !0;
function E$(e, t) {
    return e.useMedium(t),
    cI
}
var uI = y$()
  , Sp = function() {}
  , l0 = x.forwardRef(function(e, t) {
    var n = x.useRef(null)
      , r = x.useState({
        onScrollCapture: Sp,
        onWheelCapture: Sp,
        onTouchMoveCapture: Sp
    })
      , i = r[0]
      , o = r[1]
      , s = e.forwardProps
      , a = e.children
      , l = e.className
      , c = e.removeScrollBar
      , u = e.enabled
      , d = e.shards
      , f = e.sideCar
      , h = e.noIsolation
      , m = e.inert
      , g = e.allowPinchZoom
      , E = e.as
      , v = E === void 0 ? "div" : E
      , y = lI(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noIsolation", "inert", "allowPinchZoom", "as"])
      , w = f
      , b = m$([n, t])
      , I = ni(ni({}, y), i);
    return x.createElement(x.Fragment, null, u && x.createElement(w, {
        sideCar: uI,
        removeScrollBar: c,
        shards: d,
        noIsolation: h,
        inert: m,
        setCallbacks: o,
        allowPinchZoom: !!g,
        lockRef: n
    }), s ? x.cloneElement(x.Children.only(a), ni(ni({}, I), {
        ref: b
    })) : x.createElement(v, ni({}, I, {
        className: l,
        ref: b
    }), a))
});
l0.defaultProps = {
    enabled: !0,
    removeScrollBar: !0,
    inert: !1
};
l0.classNames = {
    fullWidth: th,
    zeroRight: eh
};
var w6, w$ = function() {
    if (w6)
        return w6;
    if (typeof __webpack_nonce__ < "u")
        return __webpack_nonce__
};
function b$() {
    if (!document)
        return null;
    var e = document.createElement("style");
    e.type = "text/css";
    var t = w$();
    return t && e.setAttribute("nonce", t),
    e
}
function _$(e, t) {
    e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t))
}
function x$(e) {
    var t = document.head || document.getElementsByTagName("head")[0];
    t.appendChild(e)
}
var I$ = function() {
    var e = 0
      , t = null;
    return {
        add: function(n) {
            e == 0 && (t = b$()) && (_$(t, n),
            x$(t)),
            e++
        },
        remove: function() {
            e--,
            !e && t && (t.parentNode && t.parentNode.removeChild(t),
            t = null)
        }
    }
}
  , S$ = function() {
    var e = I$();
    return function(t, n) {
        x.useEffect(function() {
            return e.add(t),
            function() {
                e.remove()
            }
        }, [t && n])
    }
}
  , dI = function() {
    var e = S$()
      , t = function(n) {
        var r = n.styles
          , i = n.dynamic;
        return e(r, i),
        null
    };
    return t
}
  , C$ = {
    left: 0,
    top: 0,
    right: 0,
    gap: 0
}
  , Cp = function(e) {
    return parseInt(e || "", 10) || 0
}
  , k$ = function(e) {
    var t = window.getComputedStyle(document.body)
      , n = t[e === "padding" ? "paddingLeft" : "marginLeft"]
      , r = t[e === "padding" ? "paddingTop" : "marginTop"]
      , i = t[e === "padding" ? "paddingRight" : "marginRight"];
    return [Cp(n), Cp(r), Cp(i)]
}
  , T$ = function(e) {
    if (e === void 0 && (e = "margin"),
    typeof window > "u")
        return C$;
    var t = k$(e)
      , n = document.documentElement.clientWidth
      , r = window.innerWidth;
    return {
        left: t[0],
        top: t[1],
        right: t[2],
        gap: Math.max(0, r - n + t[2] - t[0])
    }
}
  , M$ = dI()
  , A$ = function(e, t, n, r) {
    var i = e.left
      , o = e.top
      , s = e.right
      , a = e.gap;
    return n === void 0 && (n = "margin"),
    `
  .`.concat(d$, ` {
   overflow: hidden `).concat(r, `;
   padding-right: `).concat(a, "px ").concat(r, `;
  }
  body {
    overflow: hidden `).concat(r, `;
    overscroll-behavior: contain;
    `).concat([t && "position: relative ".concat(r, ";"), n === "margin" && `
    padding-left: `.concat(i, `px;
    padding-top: `).concat(o, `px;
    padding-right: `).concat(s, `px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a, "px ").concat(r, `;
    `), n === "padding" && "padding-right: ".concat(a, "px ").concat(r, ";")].filter(Boolean).join(""), `
  }
  
  .`).concat(eh, ` {
    right: `).concat(a, "px ").concat(r, `;
  }
  
  .`).concat(th, ` {
    margin-right: `).concat(a, "px ").concat(r, `;
  }
  
  .`).concat(eh, " .").concat(eh, ` {
    right: 0 `).concat(r, `;
  }
  
  .`).concat(th, " .").concat(th, ` {
    margin-right: 0 `).concat(r, `;
  }
  
  body {
    `).concat(f$, ": ").concat(a, `px;
  }
`)
}
  , L$ = function(e) {
    var t = e.noRelative
      , n = e.noImportant
      , r = e.gapMode
      , i = r === void 0 ? "margin" : r
      , o = x.useMemo(function() {
        return T$(i)
    }, [i]);
    return x.createElement(M$, {
        styles: A$(o, !t, i, n ? "" : "!important")
    })
}
  , $g = !1;
if (typeof window < "u")
    try {
        var gf = Object.defineProperty({}, "passive", {
            get: function() {
                return $g = !0,
                !0
            }
        });
        window.addEventListener("test", gf, gf),
        window.removeEventListener("test", gf, gf)
    } catch {
        $g = !1
    }
var wa = $g ? {
    passive: !1
} : !1
  , P$ = function(e) {
    return e.tagName === "TEXTAREA"
}
  , fI = function(e, t) {
    var n = window.getComputedStyle(e);
    return n[t] !== "hidden" && !(n.overflowY === n.overflowX && !P$(e) && n[t] === "visible")
}
  , R$ = function(e) {
    return fI(e, "overflowY")
}
  , O$ = function(e) {
    return fI(e, "overflowX")
}
  , b6 = function(e, t) {
    var n = t;
    do {
        typeof ShadowRoot < "u" && n instanceof ShadowRoot && (n = n.host);
        var r = hI(e, n);
        if (r) {
            var i = pI(e, n)
              , o = i[1]
              , s = i[2];
            if (o > s)
                return !0
        }
        n = n.parentNode
    } while (n && n !== document.body);
    return !1
}
  , D$ = function(e) {
    var t = e.scrollTop
      , n = e.scrollHeight
      , r = e.clientHeight;
    return [t, n, r]
}
  , N$ = function(e) {
    var t = e.scrollLeft
      , n = e.scrollWidth
      , r = e.clientWidth;
    return [t, n, r]
}
  , hI = function(e, t) {
    return e === "v" ? R$(t) : O$(t)
}
  , pI = function(e, t) {
    return e === "v" ? D$(t) : N$(t)
}
  , F$ = function(e, t) {
    return e === "h" && t === "rtl" ? -1 : 1
}
  , $$ = function(e, t, n, r, i) {
    var o = F$(e, window.getComputedStyle(t).direction)
      , s = o * r
      , a = n.target
      , l = t.contains(a)
      , c = !1
      , u = s > 0
      , d = 0
      , f = 0;
    do {
        var h = pI(e, a)
          , m = h[0]
          , g = h[1]
          , E = h[2]
          , v = g - E - o * m;
        (m || v) && hI(e, a) && (d += v,
        f += m),
        a = a.parentNode
    } while (!l && a !== document.body || l && (t.contains(a) || t === a));
    return (u && (i && d === 0 || !i && s > d) || !u && (i && f === 0 || !i && -s > f)) && (c = !0),
    c
}
  , vf = function(e) {
    return "changedTouches"in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0]
}
  , _6 = function(e) {
    return [e.deltaX, e.deltaY]
}
  , x6 = function(e) {
    return e && "current"in e ? e.current : e
}
  , B$ = function(e, t) {
    return e[0] === t[0] && e[1] === t[1]
}
  , z$ = function(e) {
    return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`)
}
  , H$ = 0
  , ba = [];
function U$(e) {
    var t = x.useRef([])
      , n = x.useRef([0, 0])
      , r = x.useRef()
      , i = x.useState(H$++)[0]
      , o = x.useState(function() {
        return dI()
    })[0]
      , s = x.useRef(e);
    x.useEffect(function() {
        s.current = e
    }, [e]),
    x.useEffect(function() {
        if (e.inert) {
            document.body.classList.add("block-interactivity-".concat(i));
            var g = u$([e.lockRef.current], (e.shards || []).map(x6), !0).filter(Boolean);
            return g.forEach(function(E) {
                return E.classList.add("allow-interactivity-".concat(i))
            }),
            function() {
                document.body.classList.remove("block-interactivity-".concat(i)),
                g.forEach(function(E) {
                    return E.classList.remove("allow-interactivity-".concat(i))
                })
            }
        }
    }, [e.inert, e.lockRef.current, e.shards]);
    var a = x.useCallback(function(g, E) {
        if ("touches"in g && g.touches.length === 2)
            return !s.current.allowPinchZoom;
        var v = vf(g), y = n.current, w = "deltaX"in g ? g.deltaX : y[0] - v[0], b = "deltaY"in g ? g.deltaY : y[1] - v[1], I, S = g.target, C = Math.abs(w) > Math.abs(b) ? "h" : "v";
        if ("touches"in g && C === "h" && S.type === "range")
            return !1;
        var T = b6(C, S);
        if (!T)
            return !0;
        if (T ? I = C : (I = C === "v" ? "h" : "v",
        T = b6(C, S)),
        !T)
            return !1;
        if (!r.current && "changedTouches"in g && (w || b) && (r.current = I),
        !I)
            return !0;
        var L = r.current || I;
        return $$(L, E, g, L === "h" ? w : b, !0)
    }, [])
      , l = x.useCallback(function(g) {
        var E = g;
        if (!(!ba.length || ba[ba.length - 1] !== o)) {
            var v = "deltaY"in E ? _6(E) : vf(E)
              , y = t.current.filter(function(I) {
                return I.name === E.type && I.target === E.target && B$(I.delta, v)
            })[0];
            if (y && y.should) {
                E.cancelable && E.preventDefault();
                return
            }
            if (!y) {
                var w = (s.current.shards || []).map(x6).filter(Boolean).filter(function(I) {
                    return I.contains(E.target)
                })
                  , b = w.length > 0 ? a(E, w[0]) : !s.current.noIsolation;
                b && E.cancelable && E.preventDefault()
            }
        }
    }, [])
      , c = x.useCallback(function(g, E, v, y) {
        var w = {
            name: g,
            delta: E,
            target: v,
            should: y
        };
        t.current.push(w),
        setTimeout(function() {
            t.current = t.current.filter(function(b) {
                return b !== w
            })
        }, 1)
    }, [])
      , u = x.useCallback(function(g) {
        n.current = vf(g),
        r.current = void 0
    }, [])
      , d = x.useCallback(function(g) {
        c(g.type, _6(g), g.target, a(g, e.lockRef.current))
    }, [])
      , f = x.useCallback(function(g) {
        c(g.type, vf(g), g.target, a(g, e.lockRef.current))
    }, []);
    x.useEffect(function() {
        return ba.push(o),
        e.setCallbacks({
            onScrollCapture: d,
            onWheelCapture: d,
            onTouchMoveCapture: f
        }),
        document.addEventListener("wheel", l, wa),
        document.addEventListener("touchmove", l, wa),
        document.addEventListener("touchstart", u, wa),
        function() {
            ba = ba.filter(function(g) {
                return g !== o
            }),
            document.removeEventListener("wheel", l, wa),
            document.removeEventListener("touchmove", l, wa),
            document.removeEventListener("touchstart", u, wa)
        }
    }, []);
    var h = e.removeScrollBar
      , m = e.inert;
    return x.createElement(x.Fragment, null, m ? x.createElement(o, {
        styles: z$(i)
    }) : null, h ? x.createElement(L$, {
        gapMode: "margin"
    }) : null)
}
const V$ = E$(uI, U$);
var mI = x.forwardRef(function(e, t) {
    return x.createElement(l0, ni({}, e, {
        ref: t,
        sideCar: V$
    }))
});
mI.classNames = l0.classNames;
const W$ = mI
  , gI = "Popover"
  , [vI,HX] = Id(gI, [iI])
  , c0 = iI()
  , [G$,zl] = vI(gI)
  , j$ = e=>{
    const {__scopePopover: t, children: n, open: r, defaultOpen: i, onOpenChange: o, modal: s=!1} = e
      , a = c0(t)
      , l = x.useRef(null)
      , [c,u] = x.useState(!1)
      , [d=!1,f] = wy({
        prop: r,
        defaultProp: i,
        onChange: o
    });
    return x.createElement(QF, a, x.createElement(G$, {
        scope: t,
        contentId: gy(),
        triggerRef: l,
        open: d,
        onOpenChange: f,
        onOpenToggle: x.useCallback(()=>f(h=>!h), [f]),
        hasCustomAnchor: c,
        onCustomAnchorAdd: x.useCallback(()=>u(!0), []),
        onCustomAnchorRemove: x.useCallback(()=>u(!1), []),
        modal: s
    }, n))
}
  , Y$ = "PopoverTrigger"
  , Z$ = x.forwardRef((e,t)=>{
    const {__scopePopover: n, ...r} = e
      , i = zl(Y$, n)
      , o = c0(n)
      , s = fi(t, i.triggerRef)
      , a = x.createElement(Pn.button, Ge({
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": i.open,
        "aria-controls": i.contentId,
        "data-state": wI(i.open)
    }, r, {
        ref: s,
        onClick: an(e.onClick, i.onOpenToggle)
    }));
    return i.hasCustomAnchor ? a : x.createElement(JF, Ge({
        asChild: !0
    }, o), a)
}
)
  , yI = "PopoverPortal"
  , [K$,X$] = vI(yI, {
    forceMount: void 0
})
  , q$ = e=>{
    const {__scopePopover: t, forceMount: n, children: r, container: i} = e
      , o = zl(yI, t);
    return x.createElement(K$, {
        scope: t,
        forceMount: n
    }, x.createElement(a0, {
        present: n || o.open
    }, x.createElement(n$, {
        asChild: !0,
        container: i
    }, r)))
}
  , ju = "PopoverContent"
  , Q$ = x.forwardRef((e,t)=>{
    const n = X$(ju, e.__scopePopover)
      , {forceMount: r=n.forceMount, ...i} = e
      , o = zl(ju, e.__scopePopover);
    return x.createElement(a0, {
        present: r || o.open
    }, o.modal ? x.createElement(J$, Ge({}, i, {
        ref: t
    })) : x.createElement(eB, Ge({}, i, {
        ref: t
    })))
}
)
  , J$ = x.forwardRef((e,t)=>{
    const n = zl(ju, e.__scopePopover)
      , r = x.useRef(null)
      , i = fi(t, r)
      , o = x.useRef(!1);
    return x.useEffect(()=>{
        const s = r.current;
        if (s)
            return c$(s)
    }
    , []),
    x.createElement(W$, {
        as: Wu,
        allowPinchZoom: !0
    }, x.createElement(EI, Ge({}, e, {
        ref: i,
        trapFocus: n.open,
        disableOutsidePointerEvents: !0,
        onCloseAutoFocus: an(e.onCloseAutoFocus, s=>{
            var a;
            s.preventDefault(),
            o.current || (a = n.triggerRef.current) === null || a === void 0 || a.focus()
        }
        ),
        onPointerDownOutside: an(e.onPointerDownOutside, s=>{
            const a = s.detail.originalEvent
              , l = a.button === 0 && a.ctrlKey === !0
              , c = a.button === 2 || l;
            o.current = c
        }
        , {
            checkForDefaultPrevented: !1
        }),
        onFocusOutside: an(e.onFocusOutside, s=>s.preventDefault(), {
            checkForDefaultPrevented: !1
        })
    })))
}
)
  , eB = x.forwardRef((e,t)=>{
    const n = zl(ju, e.__scopePopover)
      , r = x.useRef(!1);
    return x.createElement(EI, Ge({}, e, {
        ref: t,
        trapFocus: !1,
        disableOutsidePointerEvents: !1,
        onCloseAutoFocus: i=>{
            var o;
            if ((o = e.onCloseAutoFocus) === null || o === void 0 || o.call(e, i),
            !i.defaultPrevented) {
                var s;
                r.current || (s = n.triggerRef.current) === null || s === void 0 || s.focus(),
                i.preventDefault()
            }
            r.current = !1
        }
        ,
        onInteractOutside: i=>{
            var o, s;
            (o = e.onInteractOutside) === null || o === void 0 || o.call(e, i),
            i.defaultPrevented || (r.current = !0);
            const a = i.target;
            ((s = n.triggerRef.current) === null || s === void 0 ? void 0 : s.contains(a)) && i.preventDefault()
        }
    }))
}
)
  , EI = x.forwardRef((e,t)=>{
    const {__scopePopover: n, trapFocus: r, onOpenAutoFocus: i, onCloseAutoFocus: o, disableOutsidePointerEvents: s, onEscapeKeyDown: a, onPointerDownOutside: l, onFocusOutside: c, onInteractOutside: u, ...d} = e
      , f = zl(ju, n)
      , h = c0(n);
    return rF(),
    x.createElement(iF, {
        asChild: !0,
        loop: !0,
        trapped: r,
        onMountAutoFocus: i,
        onUnmountAutoFocus: o
    }, x.createElement(eF, {
        asChild: !0,
        disableOutsidePointerEvents: s,
        onInteractOutside: u,
        onEscapeKeyDown: a,
        onPointerDownOutside: l,
        onFocusOutside: c,
        onDismiss: ()=>f.onOpenChange(!1)
    }, x.createElement(e$, Ge({
        "data-state": wI(f.open),
        role: "dialog",
        id: f.contentId
    }, h, d, {
        ref: t,
        style: {
            ...d.style,
            "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)"
        }
    }))))
}
)
  , tB = x.forwardRef((e,t)=>{
    const {__scopePopover: n, ...r} = e
      , i = c0(n);
    return x.createElement(t$, Ge({}, i, r, {
        ref: t
    }))
}
);
function wI(e) {
    return e ? "open" : "closed"
}
const by = j$
  , _y = Z$
  , nB = q$
  , xy = Q$
  , rB = tB
  , bI = ee.createContext(null)
  , On = ()=>ee.useContext(bI)
  , _I = e=>{
    const [t,n] = x.useState(null)
      , r = Xt()
      , {theme: i} = On()
      , o = x.useRef(r.isMobile);
    o.current = r.isMobile;
    const {container: s} = eo();
    return x.useLayoutEffect(()=>{
        t && t.classList.toggle("excalidraw--mobile", r.isMobile)
    }
    , [t, r.isMobile]),
    x.useLayoutEffect(()=>{
        var c;
        const a = e != null && e.parentSelector ? s == null ? void 0 : s.querySelector(e.parentSelector) : document.body;
        if (!a)
            return;
        const l = document.createElement("div");
        return l.classList.add("excalidraw", ...((c = e == null ? void 0 : e.className) == null ? void 0 : c.split(/\s+/)) || []),
        l.classList.toggle("excalidraw--mobile", o.current),
        l.classList.toggle("theme--dark", i === "dark"),
        a.appendChild(l),
        n(l),
        ()=>{
            a.removeChild(l)
        }
    }
    , [s, i, e == null ? void 0 : e.className, e == null ? void 0 : e.parentSelector]),
    t
}
;
function Iy(e, t, n) {
    x.useEffect(()=>{
        function r(i) {
            const o = i;
            if (!e.current)
                return;
            const s = n == null ? void 0 : n(o, e.current);
            if (s === !0)
                return;
            if (s === !1)
                return t(o);
            e.current.contains(o.target) || !document.documentElement.contains(o.target) || o.target.closest("[data-radix-portal]") || o.target === document.documentElement && document.body.style.pointerEvents === "none" || o.target.closest("[data-prevent-outside-click]") || t(o)
        }
        return document.addEventListener(U.POINTER_DOWN, r),
        document.addEventListener(U.TOUCH_START, r),
        ()=>{
            document.removeEventListener(U.POINTER_DOWN, r),
            document.removeEventListener(U.TOUCH_START, r)
        }
    }
    , [e, t, n])
}
const iB = e=>{
    const t = x.useRef(e);
    return Object.assign(t.current, e),
    t.current
}
;
const u0 = un(null)
  , oB = ({onCancel: e, onChange: t, onSelect: n, colorPickerType: r})=>{
    const i = _I({
        className: "excalidraw-eye-dropper-backdrop",
        parentSelector: ".excalidraw-eye-dropper-container"
    })
      , o = On()
      , s = A0()
      , a = T0()
      , l = it(s, o)
      , c = iB({
        app: a,
        onCancel: e,
        onChange: t,
        onSelect: n,
        selectedElements: l
    })
      , {container: u} = eo();
    x.useEffect(()=>{
        const f = d.current;
        if (!f || !a.canvas || !i)
            return;
        let h = !1;
        const m = a.canvas.getContext("2d")
          , g = ({clientX: S, clientY: C})=>{
            const T = m.getImageData((S - o.offsetLeft) * window.devicePixelRatio, (C - o.offsetTop) * window.devicePixelRatio, 1, 1).data;
            return tL(T[0], T[1], T[2])
        }
          , E = ({clientX: S, clientY: C, altKey: T})=>{
            f.style.top = `${C + 20}px`,
            f.style.left = `${S + 20}px`;
            const L = g({
                clientX: S,
                clientY: C
            });
            h && c.onChange(r, L, c.selectedElements, {
                altKey: T
            }),
            f.style.background = L
        }
          , v = ()=>{
            c.onCancel()
        }
          , y = (S,C)=>{
            c.onSelect(S, C)
        }
          , w = S=>{
            h = !0,
            S.stopImmediatePropagation()
        }
          , b = S=>{
            h = !1,
            u == null || u.focus(),
            S.stopImmediatePropagation(),
            S.preventDefault(),
            y(g(S), S)
        }
          , I = S=>{
            S.key === R.ESCAPE && (S.preventDefault(),
            S.stopImmediatePropagation(),
            v())
        }
        ;
        return i.tabIndex = -1,
        i.focus(),
        E({
            clientX: c.app.lastViewportPosition.x,
            clientY: c.app.lastViewportPosition.y,
            altKey: !1
        }),
        i.addEventListener(U.KEYDOWN, I),
        i.addEventListener(U.POINTER_DOWN, w),
        i.addEventListener(U.POINTER_UP, b),
        window.addEventListener("pointermove", E, {
            passive: !0
        }),
        window.addEventListener(U.BLUR, v),
        ()=>{
            h = !1,
            i.removeEventListener(U.KEYDOWN, I),
            i.removeEventListener(U.POINTER_DOWN, w),
            i.removeEventListener(U.POINTER_UP, b),
            window.removeEventListener("pointermove", E),
            window.removeEventListener(U.BLUR, v)
        }
    }
    , [c, a.canvas, i, r, u, o.offsetLeft, o.offsetTop]);
    const d = x.useRef(null);
    return Iy(d, ()=>{
        e()
    }
    , f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),
    i ? Vn.createPortal(p("div", {
        ref: d,
        className: "excalidraw-eye-dropper-preview"
    }), i) : null
}
  , sB = ({color: e, onChange: t, label: n, colorPickerType: r})=>{
    const i = Xt()
      , [o,s] = x.useState(e)
      , [a,l] = ut($l);
    x.useEffect(()=>{
        s(e)
    }
    , [e]);
    const c = x.useCallback(m=>{
        const g = m.toLowerCase()
          , E = aB(g);
        E && t(E),
        s(g)
    }
    , [t])
      , u = x.useRef(null)
      , d = x.useRef(null);
    x.useEffect(()=>{
        u.current && u.current.focus()
    }
    , [a]);
    const [f,h] = ut(u0, Kt);
    return x.useEffect(()=>()=>{
        h(null)
    }
    , [h]),
    k("div", {
        className: "color-picker__input-label",
        children: [p("div", {
            className: "color-picker__input-hash",
            children: "#"
        }), p("input", {
            ref: a === "hex" ? u : void 0,
            style: {
                border: 0,
                padding: 0
            },
            spellCheck: !1,
            className: "color-picker-input",
            "aria-label": n,
            onChange: m=>{
                c(m.target.value)
            }
            ,
            value: (o || "").replace(/^#/, ""),
            onBlur: ()=>{
                s(e)
            }
            ,
            tabIndex: -1,
            onFocus: ()=>l("hex"),
            onKeyDown: m=>{
                var g;
                m.key !== R.TAB && (m.key === R.ESCAPE && ((g = d.current) == null || g.focus()),
                m.stopPropagation())
            }
        }), !i.isMobile && k(re, {
            children: [p("div", {
                style: {
                    width: "1px",
                    height: "1.25rem",
                    backgroundColor: "var(--default-border-color)"
                }
            }), p("div", {
                ref: d,
                className: le("excalidraw-eye-dropper-trigger", {
                    selected: f
                }),
                onClick: ()=>h(m=>m ? null : {
                    keepOpenOnAlt: !1,
                    onSelect: g=>t(g),
                    colorPickerType: r
                }),
                title: `${_("labels.eyeDropper")}  ${R.I.toLocaleUpperCase()} or ${j("Alt")} `,
                children: pD
            })]
        })]
    })
}
;
const I6 = e=>{
    const t = new Option().style;
    return t.color = e,
    !!t.color
}
  , aB = e=>Ys(e) ? e : I6(`#${e}`) ? `#${e}` : I6(e) ? e : null
  , lB = ({type: e, color: t, onChange: n, label: r, elements: i, palette: o=ge, updateData: s})=>{
    const [,a] = ut($l)
      , [l,c] = ut(u0, Kt)
      , {container: u} = eo()
      , {isMobile: d, isLandscape: f} = Xt()
      , h = k("div", {
        children: [p(Jf, {
            children: _("colorPicker.hexCode")
        }), p(sB, {
            color: t,
            label: r,
            onChange: E=>{
                n(E)
            }
            ,
            colorPickerType: e
        })]
    })
      , m = x.useRef(null)
      , g = ()=>{
        var E, v;
        (v = (E = m.current) == null ? void 0 : E.querySelector(".color-picker-content")) == null || v.focus()
    }
    ;
    return p(nB, {
        container: u,
        children: k(xy, {
            ref: m,
            className: "focus-visible-none",
            "data-prevent-outside-click": !0,
            onFocusOutside: E=>{
                g(),
                E.preventDefault()
            }
            ,
            onPointerDownOutside: E=>{
                l && E.preventDefault()
            }
            ,
            onCloseAutoFocus: E=>{
                E.stopPropagation(),
                E.preventDefault(),
                u && !$L(document.activeElement) && u.focus(),
                s({
                    openPopup: null
                }),
                a(null)
            }
            ,
            side: d && !f ? "bottom" : "right",
            align: d && !f ? "center" : "start",
            alignOffset: -16,
            sideOffset: 20,
            style: {
                zIndex: "var(--zIndex-layerUI)",
                backgroundColor: "var(--popup-bg-color)",
                maxWidth: "208px",
                maxHeight: window.innerHeight,
                padding: "12px",
                borderRadius: "8px",
                boxSizing: "border-box",
                overflowY: "auto",
                boxShadow: "0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702)"
            },
            children: [o ? p(UN, {
                palette: o,
                color: t,
                onChange: E=>{
                    n(E)
                }
                ,
                onEyeDropperToggle: E=>{
                    c(v=>E ? (v = v || {
                        keepOpenOnAlt: !0,
                        onSelect: n,
                        colorPickerType: e
                    },
                    v.keepOpenOnAlt = !0,
                    v) : E === !1 || v ? null : {
                        keepOpenOnAlt: !1,
                        onSelect: n,
                        colorPickerType: e
                    })
                }
                ,
                onEscape: E=>{
                    l ? c(null) : vs(E.target) ? g() : s({
                        openPopup: null
                    })
                }
                ,
                label: r,
                type: e,
                elements: i,
                updateData: s,
                children: h
            }) : h, p(rB, {
                width: 20,
                height: 10,
                style: {
                    fill: "var(--popup-bg-color)",
                    filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"
                }
            })]
        })
    })
}
  , cB = ({label: e, color: t, type: n})=>p(_y, {
    type: "button",
    className: le("color-picker__button active-color", {
        "is-transparent": t === "transparent" || !t
    }),
    "aria-label": e,
    style: t ? {
        "--swatch-color": t
    } : void 0,
    title: _(n === "elementStroke" ? "labels.showStroke" : "labels.showBackground"),
    children: p("div", {
        className: "color-picker__button-outline"
    })
})
  , Sy = ({type: e, color: t, onChange: n, label: r, elements: i, palette: o=ge, topPicks: s, updateData: a, appState: l})=>p("div", {
    children: k("div", {
        role: "dialog",
        "aria-modal": "true",
        className: "color-picker-container",
        children: [p(ON, {
            activeColor: t,
            onChange: n,
            type: e,
            topPicks: s
        }), p("div", {
            style: {
                width: 1,
                height: "100%",
                backgroundColor: "var(--default-border-color)",
                margin: "0 auto"
            }
        }), k(by, {
            open: l.openPopup === e,
            onOpenChange: c=>{
                a({
                    openPopup: c ? e : null
                })
            }
            ,
            children: [p(cB, {
                color: t,
                label: r,
                type: e
            }), l.openPopup === e && p(lB, {
                type: e,
                color: t,
                onChange: n,
                label: r,
                elements: i,
                palette: o,
                updateData: a
            })]
        })]
    })
});
const xI = ({children: e, left: t, top: n, onCloseRequest: r, fitInViewport: i=!1, offsetLeft: o=0, offsetTop: s=0, viewportWidth: a=window.innerWidth, viewportHeight: l=window.innerHeight})=>{
    const c = x.useRef(null);
    x.useEffect(()=>{
        const d = c.current;
        if (!d)
            return;
        d.contains(document.activeElement) || d.focus();
        const f = h=>{
            var m, g, E;
            if (h.key === R.TAB) {
                const v = pg(d)
                  , {activeElement: y} = document
                  , w = v.findIndex(b=>b === y);
                y === d ? (h.shiftKey ? (m = v[v.length - 1]) == null || m.focus() : v[0].focus(),
                h.preventDefault(),
                h.stopImmediatePropagation()) : w === 0 && h.shiftKey ? ((g = v[v.length - 1]) == null || g.focus(),
                h.preventDefault(),
                h.stopImmediatePropagation()) : w === v.length - 1 && !h.shiftKey && ((E = v[0]) == null || E.focus(),
                h.preventDefault(),
                h.stopImmediatePropagation())
            }
        }
        ;
        return d.addEventListener("keydown", f),
        ()=>d.removeEventListener("keydown", f)
    }
    , []);
    const u = x.useRef(null);
    return x.useLayoutEffect(()=>{
        var d, f;
        if (i && c.current && n != null && t != null) {
            const h = c.current
              , {width: m, height: g} = h.getBoundingClientRect();
            if (((d = u.current) == null ? void 0 : d.top) === n && ((f = u.current) == null ? void 0 : f.left) === t)
                return;
            u.current = {
                top: n,
                left: t
            },
            m >= a ? (h.style.width = `${a}px`,
            h.style.left = "0px",
            h.style.overflowX = "scroll") : t + m - o > a ? h.style.left = `${a - m - 10}px` : h.style.left = `${t}px`,
            g >= l ? (h.style.height = `${l - 20}px`,
            h.style.top = "10px",
            h.style.overflowY = "scroll") : n + g - s > l ? h.style.top = `${l - g}px` : h.style.top = `${n}px`
        }
    }
    , [n, t, i, a, l, o, s]),
    x.useEffect(()=>{
        if (r) {
            const d = f=>{
                var h;
                (h = c.current) != null && h.contains(f.target) || Vn.unstable_batchedUpdates(()=>r(f))
            }
            ;
            return document.addEventListener("pointerdown", d, !1),
            ()=>document.removeEventListener("pointerdown", d, !1)
        }
    }
    , [r]),
    p("div", {
        className: "popover",
        ref: c,
        tabIndex: -1,
        children: e
    })
}
;
function uB({options: e, value: t, label: n, onChange: r, onClose: i}) {
    const o = ee.useRef()
      , s = ee.useRef()
      , a = ee.useRef(null);
    return ee.useEffect(()=>{
        s.current ? s.current.focus() : a.current && a.current.focus()
    }
    , []),
    p("div", {
        className: "picker",
        role: "dialog",
        "aria-modal": "true",
        "aria-label": n,
        onKeyDown: c=>{
            const u = e.find(d=>d.keyBinding === c.key.toLowerCase());
            if (!(c.metaKey || c.altKey || c.ctrlKey) && u) {
                const d = e.indexOf(u);
                a.current.children[d].focus(),
                c.preventDefault()
            } else if (c.key === R.TAB)
                setTimeout(()=>{
                    const d = s.current
                      , f = document.activeElement;
                    d !== f && i()
                }
                , 0);
            else if (Qf(c.key)) {
                const {activeElement: d} = document
                  , f = vd().rtl
                  , h = Array.prototype.indexOf.call(a.current.children, d);
                if (h !== -1) {
                    const m = e.length;
                    let g = h;
                    switch (c.key) {
                    case (f ? R.ARROW_LEFT : R.ARROW_RIGHT):
                    case R.ARROW_DOWN:
                        {
                            g = (h + 1) % m;
                            break
                        }
                    case (f ? R.ARROW_RIGHT : R.ARROW_LEFT):
                    case R.ARROW_UP:
                        {
                            g = (m + h - 1) % m;
                            break
                        }
                    }
                    a.current.children[g].focus()
                }
                c.preventDefault()
            } else
                (c.key === R.ESCAPE || c.key === R.ENTER) && (c.preventDefault(),
                i());
            c.nativeEvent.stopImmediatePropagation(),
            c.stopPropagation()
        }
        ,
        children: p("div", {
            className: "picker-content",
            ref: a,
            children: e.map((c,u)=>k("button", {
                className: le("picker-option", {
                    active: t === c.value
                }),
                onClick: d=>{
                    d.currentTarget.focus(),
                    r(c.value)
                }
                ,
                title: `${c.text}  ${c.keyBinding.toUpperCase()}`,
                "aria-label": c.text || "none",
                "aria-keyshortcuts": c.keyBinding,
                ref: d=>{
                    d && u === 0 && (o.current = d),
                    d && c.value === t && (s.current = d)
                }
                ,
                onFocus: ()=>{
                    r(c.value)
                }
                ,
                children: [c.icon, p("span", {
                    className: "picker-keybinding",
                    children: c.keyBinding
                })]
            }, c.text))
        })
    })
}
function S6({value: e, label: t, options: n, onChange: r, group: i=""}) {
    var c;
    const [o,s] = ee.useState(!1)
      , a = ee.useRef(null)
      , l = vd().rtl;
    return k("div", {
        children: [p("button", {
            name: i,
            className: o ? "active" : "",
            "aria-label": t,
            onClick: ()=>s(!o),
            ref: a,
            children: (c = n.find(u=>u.value === e)) == null ? void 0 : c.icon
        }), p(ee.Suspense, {
            fallback: "",
            children: o ? k(re, {
                children: [p(xI, {
                    onCloseRequest: u=>u.target !== a.current && s(!1),
                    ...l ? {
                        right: 5.5
                    } : {
                        left: -5.5
                    },
                    children: p(uB, {
                        options: n,
                        value: e,
                        label: t,
                        onChange: r,
                        onClose: ()=>{
                            var u;
                            s(!1),
                            (u = a.current) == null || u.focus()
                        }
                    })
                }), p("div", {
                    className: "picker-triangle"
                })]
            }) : null
        })]
    })
}
const Wa = e=>e === "rectangle" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "line" || e === "freedraw"
  , Bg = e=>e !== "image" && e !== "frame"
  , C6 = e=>e === "rectangle" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "freedraw" || e === "arrow" || e === "line"
  , k6 = e=>e === "rectangle" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "arrow" || e === "line"
  , zg = e=>e === "rectangle" || e === "embeddable" || e === "arrow" || e === "line" || e === "diamond"
  , T6 = e=>e === "text"
  , t1 = e=>e === "arrow"
  , dB = (e,t)=>{
    let n = null;
    for (let r = e.length - 1; r >= 0; --r) {
        const i = e[r];
        if (!i.isDeleted && t(i)) {
            n = i;
            break
        }
    }
    return n
}
  , fB = (e,t)=>{
    const n = [];
    return e.filter(i=>!i.isDeleted && t(i) ? ht(i) ? (n.push(i),
    !1) : !0 : !1).concat(n)
}
  , II = .1
  , Zn = (e,t,n,r=!1)=>{
    const i = Rt(it(e, t, {
        includeBoundTextElement: r
    }));
    return e.map(o=>{
        var s;
        return i.get(o.id) || o.id === ((s = t.editingElement) == null ? void 0 : s.id) ? n(o) : o
    }
    )
}
  , Rn = function(e, t, n, r) {
    const i = t.editingElement
      , o = Pe(e);
    return (i && n(i)) ?? (Pt(o, t) ? Zz(o, t, n) : r) ?? r
}
  , hB = (e,t)=>_t(t) ? t : Q(t, {
    x: e.textAlign === "left" ? e.x : e.x + (e.width - t.width) / (e.textAlign === "center" ? 2 : 1),
    y: e.y + (e.height - t.height) / 2
}, !1)
  , Cy = (e,t,n,r)=>{
    const i = new Set;
    return {
        elements: Zn(e, t, o=>{
            if (ue(o)) {
                const s = n(o);
                i.add(s);
                let a = fe(o, {
                    fontSize: s
                });
                return mi(a, Lt(o)),
                a = hB(o, a),
                a
            }
            return o
        }
        , !0),
        appState: {
            ...t,
            currentItemFontSize: i.size === 1 ? [...i][0] : r ?? t.currentItemFontSize
        },
        commitToHistory: !0
    }
}
;
J({
    name: "changeStrokeColor",
    trackEvent: !1,
    perform: (e,t,n)=>({
        ...n.currentItemStrokeColor && {
            elements: Zn(e, t, r=>Bg(r.type) ? fe(r, {
                strokeColor: n.currentItemStrokeColor
            }) : r, !0)
        },
        appState: {
            ...t,
            ...n
        },
        commitToHistory: !!n.currentItemStrokeColor
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, appProps: r})=>k(re, {
        children: [p("h3", {
            "aria-hidden": "true",
            children: _("labels.stroke")
        }), p(Sy, {
            topPicks: L8,
            palette: QA,
            type: "elementStroke",
            label: _("labels.stroke"),
            color: Rn(e, t, i=>i.strokeColor, t.currentItemStrokeColor),
            onChange: i=>n({
                currentItemStrokeColor: i
            }),
            elements: e,
            appState: t,
            updateData: n
        })]
    })
});
J({
    name: "changeBackgroundColor",
    trackEvent: !1,
    perform: (e,t,n)=>({
        ...n.currentItemBackgroundColor && {
            elements: Zn(e, t, r=>fe(r, {
                backgroundColor: n.currentItemBackgroundColor
            }))
        },
        appState: {
            ...t,
            ...n
        },
        commitToHistory: !!n.currentItemBackgroundColor
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, appProps: r})=>k(re, {
        children: [p("h3", {
            "aria-hidden": "true",
            children: _("labels.background")
        }), p(Sy, {
            topPicks: P8,
            palette: JA,
            type: "elementBackground",
            label: _("labels.background"),
            color: Rn(e, t, i=>i.backgroundColor, t.currentItemBackgroundColor),
            onChange: i=>n({
                currentItemBackgroundColor: i
            }),
            elements: e,
            appState: t,
            updateData: n
        })]
    })
});
J({
    name: "changeFillStyle",
    trackEvent: !1,
    perform: (e,t,n,r)=>(nt("element", "changeFillStyle", `${n} (${r.device.isMobile ? "mobile" : "desktop"})`),
    {
        elements: Zn(e, t, i=>fe(i, {
            fillStyle: n
        })),
        appState: {
            ...t,
            currentItemFillStyle: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = it(e, t)
          , i = r.length > 0 && r.every(o=>o.fillStyle === "zigzag");
        return k("fieldset", {
            children: [p("legend", {
                children: _("labels.fill")
            }), p(qi, {
                type: "button",
                options: [{
                    value: "hachure",
                    text: `${_(i ? "labels.zigzag" : "labels.hachure")} (${j("Alt-Click")})`,
                    icon: i ? FO : $O,
                    active: i ? !0 : void 0
                }, {
                    value: "cross-hatch",
                    text: _("labels.crossHatch"),
                    icon: BO
                }, {
                    value: "solid",
                    text: _("labels.solid"),
                    icon: zO
                }],
                value: Rn(e, t, o=>o.fillStyle, t.currentItemFillStyle),
                onClick: (o,s)=>{
                    const a = s.altKey && o === "hachure" && r.every(l=>l.fillStyle === "hachure") ? "zigzag" : o;
                    n(a)
                }
            })]
        })
    }
});
J({
    name: "changeStrokeWidth",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>fe(r, {
            strokeWidth: n
        })),
        appState: {
            ...t,
            currentItemStrokeWidth: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>k("fieldset", {
        children: [p("legend", {
            children: _("labels.strokeWidth")
        }), p(qi, {
            group: "stroke-width",
            options: [{
                value: 1,
                text: _("labels.thin"),
                icon: f7
            }, {
                value: 2,
                text: _("labels.bold"),
                icon: HO
            }, {
                value: 4,
                text: _("labels.extraBold"),
                icon: UO
            }],
            value: Rn(e, t, r=>r.strokeWidth, t.currentItemStrokeWidth),
            onChange: r=>n(r)
        })]
    })
});
J({
    name: "changeSloppiness",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>fe(r, {
            seed: os(),
            roughness: n
        })),
        appState: {
            ...t,
            currentItemRoughness: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>k("fieldset", {
        children: [p("legend", {
            children: _("labels.sloppiness")
        }), p(qi, {
            group: "sloppiness",
            options: [{
                value: 0,
                text: _("labels.architect"),
                icon: GO
            }, {
                value: 1,
                text: _("labels.artist"),
                icon: jO
            }, {
                value: 2,
                text: _("labels.cartoonist"),
                icon: YO
            }],
            value: Rn(e, t, r=>r.roughness, t.currentItemRoughness),
            onChange: r=>n(r)
        })]
    })
});
J({
    name: "changeStrokeStyle",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>fe(r, {
            strokeStyle: n
        })),
        appState: {
            ...t,
            currentItemStrokeStyle: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>k("fieldset", {
        children: [p("legend", {
            children: _("labels.strokeStyle")
        }), p(qi, {
            group: "strokeStyle",
            options: [{
                value: "solid",
                text: _("labels.strokeStyle_solid"),
                icon: f7
            }, {
                value: "dashed",
                text: _("labels.strokeStyle_dashed"),
                icon: VO
            }, {
                value: "dotted",
                text: _("labels.strokeStyle_dotted"),
                icon: WO
            }],
            value: Rn(e, t, r=>r.strokeStyle, t.currentItemStrokeStyle),
            onChange: r=>n(r)
        })]
    })
});
J({
    name: "changeOpacity",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>fe(r, {
            opacity: n
        }), !0),
        appState: {
            ...t,
            currentItemOpacity: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>k("label", {
        className: "control-label",
        children: [_("labels.opacity"), p("input", {
            type: "range",
            min: "0",
            max: "100",
            step: "10",
            onChange: r=>n(+r.target.value),
            value: Rn(e, t, r=>r.opacity, t.currentItemOpacity) ?? void 0
        })]
    })
});
J({
    name: "changeFontSize",
    trackEvent: !1,
    perform: (e,t,n)=>Cy(e, t, ()=>n, n),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>k("fieldset", {
        children: [p("legend", {
            children: _("labels.fontSize")
        }), p(qi, {
            group: "font-size",
            options: [{
                value: 16,
                text: _("labels.small"),
                icon: XO,
                testId: "fontSize-small"
            }, {
                value: 20,
                text: _("labels.medium"),
                icon: qO,
                testId: "fontSize-medium"
            }, {
                value: 28,
                text: _("labels.large"),
                icon: QO,
                testId: "fontSize-large"
            }, {
                value: 36,
                text: _("labels.veryLarge"),
                icon: JO,
                testId: "fontSize-veryLarge"
            }],
            value: Rn(e, t, r=>{
                if (ue(r))
                    return r.fontSize;
                const i = Ae(r);
                return i ? i.fontSize : null
            }
            , t.currentItemFontSize || Ki),
            onChange: r=>n(r)
        })]
    })
});
const M6 = J({
    name: "decreaseFontSize",
    trackEvent: !1,
    perform: (e,t,n)=>Cy(e, t, r=>Math.round(1 / (1 + II) * r.fontSize)),
    keyTest: e=>e[R.CTRL_OR_CMD] && e.shiftKey && (e.key === R.CHEVRON_LEFT || e.key === R.COMMA)
})
  , A6 = J({
    name: "increaseFontSize",
    trackEvent: !1,
    perform: (e,t,n)=>Cy(e, t, r=>Math.round(r.fontSize * (1 + II))),
    keyTest: e=>e[R.CTRL_OR_CMD] && e.shiftKey && (e.key === R.CHEVRON_RIGHT || e.key === R.PERIOD)
});
J({
    name: "changeFontFamily",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>{
            if (ue(r)) {
                const i = fe(r, {
                    fontFamily: n,
                    lineHeight: ea(n)
                });
                return mi(i, Lt(r)),
                i
            }
            return r
        }
        , !0),
        appState: {
            ...t,
            currentItemFontFamily: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = [{
            value: Lr.Virgil,
            text: _("labels.handDrawn"),
            icon: ty
        }, {
            value: Lr.Helvetica,
            text: _("labels.normal"),
            icon: eD
        }, {
            value: Lr.Cascadia,
            text: _("labels.code"),
            icon: tD
        }];
        return k("fieldset", {
            children: [p("legend", {
                children: _("labels.fontFamily")
            }), p(qi, {
                group: "font-family",
                options: r,
                value: Rn(e, t, i=>{
                    if (ue(i))
                        return i.fontFamily;
                    const o = Ae(i);
                    return o ? o.fontFamily : null
                }
                , t.currentItemFontFamily || Xi),
                onChange: i=>n(i)
            })]
        })
    }
});
J({
    name: "changeTextAlign",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>{
            if (ue(r)) {
                const i = fe(r, {
                    textAlign: n
                });
                return mi(i, Lt(r)),
                i
            }
            return r
        }
        , !0),
        appState: {
            ...t,
            currentItemTextAlign: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>k("fieldset", {
        children: [p("legend", {
            children: _("labels.textAlign")
        }), p(qi, {
            group: "text-align",
            options: [{
                value: "left",
                text: _("labels.left"),
                icon: nD,
                testId: "align-left"
            }, {
                value: "center",
                text: _("labels.center"),
                icon: rD,
                testId: "align-horizontal-center"
            }, {
                value: "right",
                text: _("labels.right"),
                icon: iD,
                testId: "align-right"
            }],
            value: Rn(e, t, r=>{
                if (ue(r))
                    return r.textAlign;
                const i = Ae(r);
                return i ? i.textAlign : null
            }
            , t.currentItemTextAlign),
            onChange: r=>n(r)
        })]
    })
});
J({
    name: "changeVerticalAlign",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>{
            if (ue(r)) {
                const i = fe(r, {
                    verticalAlign: n
                });
                return mi(i, Lt(r)),
                i
            }
            return r
        }
        , !0),
        appState: {
            ...t
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>p("fieldset", {
        children: p(qi, {
            group: "text-align",
            options: [{
                value: Bn.TOP,
                text: _("labels.alignTop"),
                icon: p(oD, {
                    theme: t.theme
                }),
                testId: "align-top"
            }, {
                value: Bn.MIDDLE,
                text: _("labels.centerVertically"),
                icon: p(aD, {
                    theme: t.theme
                }),
                testId: "align-middle"
            }, {
                value: Bn.BOTTOM,
                text: _("labels.alignBottom"),
                icon: p(sD, {
                    theme: t.theme
                }),
                testId: "align-bottom"
            }],
            value: Rn(e, t, r=>{
                if (ue(r) && r.containerId)
                    return r.verticalAlign;
                const i = Ae(r);
                return i ? i.verticalAlign : null
            }
            , Bn.MIDDLE),
            onChange: r=>n(r)
        })
    })
});
J({
    name: "changeRoundness",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>fe(r, {
            roundness: n === "round" ? {
                type: Nl(r.type) ? zt.ADAPTIVE_RADIUS : zt.PROPORTIONAL_RADIUS
            } : null
        })),
        appState: {
            ...t,
            currentItemRoundness: n
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const i = Uy(Pe(e), t).some(o=>{
            var s;
            return ((s = o.roundness) == null ? void 0 : s.type) === zt.LEGACY
        }
        );
        return k("fieldset", {
            children: [p("legend", {
                children: _("labels.edges")
            }), p(qi, {
                group: "edges",
                options: [{
                    value: "sharp",
                    text: _("labels.sharp"),
                    icon: ZO
                }, {
                    value: "round",
                    text: _("labels.round"),
                    icon: KO
                }],
                value: Rn(e, t, o=>i ? null : o.roundness ? "round" : "sharp", zg(t.activeTool.type) && t.currentItemRoundness || null),
                onChange: o=>n(o)
            })]
        })
    }
});
J({
    name: "changeArrowhead",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Zn(e, t, r=>{
            if (ye(r)) {
                const {position: i, type: o} = n;
                if (i === "start")
                    return fe(r, {
                        startArrowhead: o
                    });
                if (i === "end")
                    return fe(r, {
                        endArrowhead: o
                    })
            }
            return r
        }
        ),
        appState: {
            ...t,
            [n.position === "start" ? "currentItemStartArrowhead" : "currentItemEndArrowhead"]: n.type
        },
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = vd().rtl;
        return k("fieldset", {
            children: [p("legend", {
                children: _("labels.arrowheads")
            }), k("div", {
                className: "iconSelectList buttonList",
                children: [p(S6, {
                    label: "arrowhead_start",
                    options: [{
                        value: null,
                        text: _("labels.arrowhead_none"),
                        icon: Dw,
                        keyBinding: "q"
                    }, {
                        value: "arrow",
                        text: _("labels.arrowhead_arrow"),
                        icon: p(Nw, {
                            flip: !r
                        }),
                        keyBinding: "w"
                    }, {
                        value: "bar",
                        text: _("labels.arrowhead_bar"),
                        icon: p($w, {
                            flip: !r
                        }),
                        keyBinding: "e"
                    }, {
                        value: "dot",
                        text: _("labels.arrowhead_dot"),
                        icon: p(Fw, {
                            flip: !r
                        }),
                        keyBinding: "r"
                    }, {
                        value: "triangle",
                        text: _("labels.arrowhead_triangle"),
                        icon: p(Bw, {
                            flip: !r
                        }),
                        keyBinding: "t"
                    }],
                    value: Rn(e, t, i=>ye(i) && t1(i.type) ? i.startArrowhead : t.currentItemStartArrowhead, t.currentItemStartArrowhead),
                    onChange: i=>n({
                        position: "start",
                        type: i
                    })
                }), p(S6, {
                    label: "arrowhead_end",
                    group: "arrowheads",
                    options: [{
                        value: null,
                        text: _("labels.arrowhead_none"),
                        keyBinding: "q",
                        icon: Dw
                    }, {
                        value: "arrow",
                        text: _("labels.arrowhead_arrow"),
                        keyBinding: "w",
                        icon: p(Nw, {
                            flip: r
                        })
                    }, {
                        value: "bar",
                        text: _("labels.arrowhead_bar"),
                        keyBinding: "e",
                        icon: p($w, {
                            flip: r
                        })
                    }, {
                        value: "dot",
                        text: _("labels.arrowhead_dot"),
                        keyBinding: "r",
                        icon: p(Fw, {
                            flip: r
                        })
                    }, {
                        value: "triangle",
                        text: _("labels.arrowhead_triangle"),
                        icon: p(Bw, {
                            flip: r
                        }),
                        keyBinding: "t"
                    }],
                    value: Rn(e, t, i=>ye(i) && t1(i.type) ? i.endArrowhead : t.currentItemEndArrowhead, t.currentItemEndArrowhead),
                    onChange: i=>n({
                        position: "end",
                        type: i
                    })
                })]
            })]
        })
    }
});
const pB = (e,t)=>{
    const [n,r,i,o] = t
      , {x: s, y: a} = Cr({
        sceneX: n,
        sceneY: r
    }, e)
      , {x: l, y: c} = Cr({
        sceneX: i,
        sceneY: o
    }, e);
    return l - s > e.width || c - a > e.height
}
  , ky = ({scenePoint: e, viewportDimensions: t, zoom: n})=>({
    scrollX: t.width / 2 / n.value - e.x,
    scrollY: t.height / 2 / n.value - e.y
})
  , Yu = (e,t)=>{
    if (e = cH(e),
    !e.length)
        return {
            scrollX: 0,
            scrollY: 0
        };
    let[n,r,i,o] = mt(e);
    pB(t, [n, r, i, o]) && ([n,r,i,o] = Rz(e, Ke({
        clientX: t.scrollX,
        clientY: t.scrollY
    }, t)));
    const s = (n + i) / 2
      , a = (r + o) / 2;
    return ky({
        scenePoint: {
            x: s,
            y: a
        },
        viewportDimensions: {
            width: t.width,
            height: t.height
        },
        zoom: t.zoom
    })
}
  , Ms = e=>Math.max(B8, Math.min(e, 30))
  , As = ({viewportX: e, viewportY: t, nextZoom: n},r)=>{
    const i = e - r.offsetLeft
      , o = t - r.offsetTop
      , s = r.zoom.value
      , a = r.scrollX + (i - i / s)
      , l = r.scrollY + (o - o / s)
      , c = -(i - i / n)
      , u = -(o - o / n);
    return {
        scrollX: a + c,
        scrollY: l + u,
        zoom: {
            value: n
        }
    }
}
;
J({
    name: "changeViewBackgroundColor",
    trackEvent: !1,
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor && !t.viewModeEnabled,
    perform: (e,t,n)=>({
        appState: {
            ...t,
            ...n
        },
        commitToHistory: !!n.viewBackgroundColor
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, appProps: r})=>p(Sy, {
        palette: null,
        topPicks: R8,
        label: _("labels.canvasBackground"),
        type: "canvasBackground",
        color: t.viewBackgroundColor,
        onChange: i=>n({
            viewBackgroundColor: i
        }),
        "data-testid": "canvas-background-picker",
        elements: e,
        appState: t,
        updateData: n
    })
});
const SI = J({
    name: "clearCanvas",
    trackEvent: {
        category: "canvas"
    },
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.clearCanvas && !t.viewModeEnabled,
    perform: (e,t,n,r)=>(r.imageCache.clear(),
    {
        elements: e.map(i=>fe(i, {
            isDeleted: !0
        })),
        appState: {
            ...di(),
            files: {},
            theme: t.theme,
            penMode: t.penMode,
            penDetected: t.penDetected,
            exportBackground: t.exportBackground,
            exportEmbedScene: t.exportEmbedScene,
            gridSize: t.gridSize,
            showStats: t.showStats,
            pasteDialog: t.pasteDialog,
            activeTool: t.activeTool.type === "image" ? {
                ...t.activeTool,
                type: "selection"
            } : t.activeTool
        },
        commitToHistory: !0
    })
})
  , L6 = J({
    name: "zoomIn",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>({
        appState: {
            ...t,
            ...As({
                viewportX: t.width / 2 + t.offsetLeft,
                viewportY: t.height / 2 + t.offsetTop,
                nextZoom: Ms(t.zoom.value + Pu)
            }, t)
        },
        commitToHistory: !1
    }),
    PanelComponent: ({updateData: e})=>p(Ee, {
        type: "button",
        className: "zoom-in-button zoom-button",
        icon: eO,
        title: `${_("buttons.zoomIn")}  ${j("CtrlOrCmd++")}`,
        "aria-label": _("buttons.zoomIn"),
        onClick: ()=>{
            e(null)
        }
    }),
    keyTest: e=>(e.code === Me.EQUAL || e.code === Me.NUM_ADD) && (e[R.CTRL_OR_CMD] || e.shiftKey)
})
  , P6 = J({
    name: "zoomOut",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>({
        appState: {
            ...t,
            ...As({
                viewportX: t.width / 2 + t.offsetLeft,
                viewportY: t.height / 2 + t.offsetTop,
                nextZoom: Ms(t.zoom.value - Pu)
            }, t)
        },
        commitToHistory: !1
    }),
    PanelComponent: ({updateData: e})=>p(Ee, {
        type: "button",
        className: "zoom-out-button zoom-button",
        icon: tO,
        title: `${_("buttons.zoomOut")}  ${j("CtrlOrCmd+-")}`,
        "aria-label": _("buttons.zoomOut"),
        onClick: ()=>{
            e(null)
        }
    }),
    keyTest: e=>(e.code === Me.MINUS || e.code === Me.NUM_SUBTRACT) && (e[R.CTRL_OR_CMD] || e.shiftKey)
});
J({
    name: "resetZoom",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>({
        appState: {
            ...t,
            ...As({
                viewportX: t.width / 2 + t.offsetLeft,
                viewportY: t.height / 2 + t.offsetTop,
                nextZoom: Ms(1)
            }, t)
        },
        commitToHistory: !1
    }),
    PanelComponent: ({updateData: e, appState: t})=>p(Zo, {
        label: _("buttons.resetZoom"),
        style: {
            height: "100%"
        },
        children: k(Ee, {
            type: "button",
            className: "reset-zoom-button zoom-button",
            title: _("buttons.resetZoom"),
            "aria-label": _("buttons.resetZoom"),
            onClick: ()=>{
                e(null)
            }
            ,
            children: [(t.zoom.value * 100).toFixed(0), "%"]
        })
    }),
    keyTest: e=>(e.code === Me.ZERO || e.code === Me.NUM_ZERO) && (e[R.CTRL_OR_CMD] || e.shiftKey)
});
const mB = (e,t)=>{
    const [n,r,i,o] = e
      , s = i - n
      , a = t.width / s
      , l = o - r
      , c = t.height / l
      , u = Math.min(a, c)
      , d = Math.floor(u / Pu) * Pu;
    return Math.min(Math.max(d, B8), 1)
}
  , d0 = ({targetElements: e, appState: t, fitToViewport: n=!1, viewportZoomFactor: r=.7})=>{
    const i = mt(Pe(e))
      , [o,s,a,l] = i
      , c = (o + a) / 2
      , u = (s + l) / 2;
    let d, f, h;
    if (n) {
        const m = a - o
          , g = l - s;
        d = Math.min(t.width / m, t.height / g) * Math.min(1, Math.max(r, .1)),
        d = Math.min(Math.max(d, .1), 30),
        f = t.width / 2 * (1 / d) - c,
        h = t.height / 2 * (1 / d) - u
    } else {
        d = mB(i, {
            width: t.width,
            height: t.height
        });
        const m = ky({
            scenePoint: {
                x: c,
                y: u
            },
            viewportDimensions: {
                width: t.width,
                height: t.height
            },
            zoom: {
                value: d
            }
        });
        f = m.scrollX,
        h = m.scrollY
    }
    return {
        appState: {
            ...t,
            scrollX: f,
            scrollY: h,
            zoom: {
                value: d
            }
        },
        commitToHistory: !1
    }
}
;
J({
    name: "zoomToFitSelectionInViewport",
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return d0({
            targetElements: i.length ? i : e,
            appState: t,
            fitToViewport: !1
        })
    }
    ,
    keyTest: e=>e.code === Me.TWO && e.shiftKey && !e.altKey && !e[R.CTRL_OR_CMD]
});
J({
    name: "zoomToFitSelection",
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return d0({
            targetElements: i.length ? i : e,
            appState: t,
            fitToViewport: !0
        })
    }
    ,
    keyTest: e=>e.code === Me.THREE && e.shiftKey && !e.altKey && !e[R.CTRL_OR_CMD]
});
J({
    name: "zoomToFit",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t)=>d0({
        targetElements: e,
        appState: t,
        fitToViewport: !1
    }),
    keyTest: e=>e.code === Me.ONE && e.shiftKey && !e.altKey && !e[R.CTRL_OR_CMD]
});
const R6 = J({
    name: "toggleTheme",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            theme: n || (t.theme === $t.LIGHT ? $t.DARK : $t.LIGHT)
        },
        commitToHistory: !1
    }),
    keyTest: e=>e.altKey && e.shiftKey && e.code === Me.D,
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme
});
J({
    name: "toggleEraserTool",
    trackEvent: {
        category: "toolbar"
    },
    perform: (e,t)=>{
        let n;
        return Cs(t) ? n = Ct(t, {
            ...t.activeTool.lastActiveTool || {
                type: "selection"
            },
            lastActiveToolBeforeEraser: null
        }) : n = Ct(t, {
            type: "eraser",
            lastActiveToolBeforeEraser: t.activeTool
        }),
        {
            appState: {
                ...t,
                selectedElementIds: {},
                selectedGroupIds: {},
                activeEmbeddable: null,
                activeTool: n
            },
            commitToHistory: !0
        }
    }
    ,
    keyTest: e=>e.key === R.E
});
const gB = J({
    name: "toggleHandTool",
    trackEvent: {
        category: "toolbar"
    },
    perform: (e,t,n,r)=>{
        let i;
        return El(t) ? i = Ct(t, {
            ...t.activeTool.lastActiveTool || {
                type: "selection"
            },
            lastActiveToolBeforeEraser: null
        }) : (i = Ct(t, {
            type: "hand",
            lastActiveToolBeforeEraser: t.activeTool
        }),
        Re(r.interactiveCanvas, De.GRAB)),
        {
            appState: {
                ...t,
                selectedElementIds: {},
                selectedGroupIds: {},
                activeEmbeddable: null,
                activeTool: i
            },
            commitToHistory: !0
        }
    }
    ,
    keyTest: e=>e.key === R.H
})
  , ha = (()=>{
    if (typeof self > "u")
        return !1;
    if ("top"in self && self !== top)
        try {} catch {
            return !1
        }
    else if ("showOpenFilePicker"in self)
        return "showOpenFilePicker";
    return !1
}
)()
  , vB = ne(ha ? ()=>import("file-open-002ab408-9ae3a7ce.js") : ()=>import("file-open-7c801643-a0dcc141.js"), []);
async function yB(...e) {
    return (await vB).default(...e)
}
ne(ha ? ()=>import("directory-open-4ed118d0-f36e5697.js") : ()=>import("directory-open-01563666-f87a57cf.js"), []);
const EB = ne(ha ? ()=>import("file-save-745eba88-e9b5e4a2.js") : ()=>import("file-save-3189631c-cc90d322.js"), []);
async function wB(...e) {
    return (await EB).default(...e)
}
const O6 = 500
  , Ty = e=>{
    var r, i;
    const t = (r = e.extensions) == null ? void 0 : r.reduce((o,s)=>(o.push(ve[s]),
    o), [])
      , n = (i = e.extensions) == null ? void 0 : i.reduce((o,s)=>s === "jpg" ? o.concat(".jpg", ".jpeg") : o.concat(`.${s}`), []);
    return yB({
        description: e.description,
        extensions: n,
        mimeTypes: t,
        multiple: e.multiple ?? !1,
        legacySetup: (o,s,a)=>{
            const l = yl(s, O6)
              , c = ()=>{
                u(),
                document.addEventListener(U.KEYUP, l),
                document.addEventListener(U.POINTER_UP, l),
                l()
            }
              , u = ()=>{
                var f;
                if ((f = a.files) != null && f.length) {
                    const h = e.multiple ? [...a.files] : a.files[0];
                    o(h)
                }
            }
            ;
            requestAnimationFrame(()=>{
                window.addEventListener(U.FOCUS, c)
            }
            );
            const d = window.setInterval(()=>{
                u()
            }
            , O6);
            return f=>{
                clearInterval(d),
                l.cancel(),
                window.removeEventListener(U.FOCUS, c),
                document.removeEventListener(U.KEYUP, l),
                document.removeEventListener(U.POINTER_UP, l),
                f && (console.warn("Opening the file was canceled (legacy-fs)."),
                f(new zu))
            }
        }
    })
}
  , n1 = (e,t)=>wB(e, {
    fileName: `${t.name}.${t.extension}`,
    description: t.description,
    extensions: [`.${t.extension}`]
}, t.fileHandle)
  , bB = {
    selection: !0,
    text: !0,
    rectangle: !0,
    diamond: !0,
    ellipse: !0,
    line: !0,
    image: !0,
    arrow: !0,
    freedraw: !0,
    eraser: !1,
    custom: !0,
    frame: !0,
    embeddable: !0,
    hand: !0,
    laser: !1
}
  , _B = e=>Object.keys(Lr).includes(e) ? Lr[e] : Xi
  , D6 = e=>e ? {
    ...e,
    focus: e.focus || 0
} : null
  , xi = (e,t)=>{
    const n = {
        type: t.type || e.type,
        version: e.version || 1,
        versionNonce: e.versionNonce ?? 0,
        isDeleted: e.isDeleted ?? !1,
        id: e.id || $r(),
        fillStyle: e.fillStyle || at.fillStyle,
        strokeWidth: e.strokeWidth || at.strokeWidth,
        strokeStyle: e.strokeStyle ?? at.strokeStyle,
        roughness: e.roughness ?? at.roughness,
        opacity: e.opacity == null ? at.opacity : e.opacity,
        angle: e.angle || 0,
        x: t.x ?? e.x ?? 0,
        y: t.y ?? e.y ?? 0,
        strokeColor: e.strokeColor || at.strokeColor,
        backgroundColor: e.backgroundColor || at.backgroundColor,
        width: e.width || 0,
        height: e.height || 0,
        seed: e.seed ?? 1,
        groupIds: e.groupIds ?? [],
        frameId: e.frameId ?? null,
        roundness: e.roundness ? e.roundness : e.strokeSharpness === "round" ? {
            type: Nl(e.type) ? zt.LEGACY : zt.PROPORTIONAL_RADIUS
        } : null,
        boundElements: e.boundElementIds ? e.boundElementIds.map(r=>({
            type: "arrow",
            id: r
        })) : e.boundElements ?? [],
        updated: e.updated ?? Dl(),
        link: e.link ? ci(e.link) : null,
        locked: e.locked ?? !1
    };
    return "customData"in e && (n.customData = e.customData),
    wo in e && (n[wo] = e[wo]),
    {
        ...n,
        ...CS(n),
        ...t
    }
}
  , xB = (e,t=!1)=>{
    switch (e.type) {
    case "text":
        let n = e.fontSize
          , r = e.fontFamily;
        if ("font"in e) {
            const [a,l] = e.font.split(" ");
            n = parseFloat(a),
            r = _B(l)
        }
        const i = typeof e.text == "string" && e.text || ""
          , o = e.lineHeight || (e.height ? YI(e) : ea(e.fontFamily))
          , s = jI(e.text, xt(e), o);
        return e = xi(e, {
            fontSize: n,
            fontFamily: r,
            text: i,
            textAlign: e.textAlign || V1,
            verticalAlign: e.verticalAlign || Fh,
            containerId: e.containerId ?? null,
            originalText: e.originalText || i,
            lineHeight: o,
            baseline: s
        }),
        !i && !e.isDeleted && (e = {
            ...e,
            originalText: i,
            isDeleted: !0
        },
        e = Wl(e)),
        t && (e = {
            ...e,
            ...Jv(e)
        }),
        e;
    case "freedraw":
        return xi(e, {
            points: e.points,
            lastCommittedPoint: null,
            simulatePressure: e.simulatePressure,
            pressures: e.pressures
        });
    case "image":
        return xi(e, {
            status: e.status || "pending",
            fileId: e.fileId,
            scale: e.scale || [1, 1]
        });
    case "line":
    case "draw":
    case "arrow":
        {
            const {startArrowhead: a=null, endArrowhead: l=e.type === "arrow" ? "arrow" : null} = e;
            let c = e.x
              , u = e.y
              , d = !Array.isArray(e.points) || e.points.length < 2 ? [[0, 0], [e.width, e.height]] : e.points;
            return (d[0][0] !== 0 || d[0][1] !== 0) && ({points: d, x: c, y: u} = ce.getNormalizedPoints(e)),
            xi(e, {
                type: e.type === "draw" ? "line" : e.type,
                startBinding: D6(e.startBinding),
                endBinding: D6(e.endBinding),
                lastCommittedPoint: null,
                startArrowhead: a,
                endArrowhead: l,
                points: d,
                x: c,
                y: u
            })
        }
    case "ellipse":
        return xi(e, {});
    case "rectangle":
        return xi(e, {});
    case "diamond":
        return xi(e, {});
    case "embeddable":
        return xi(e, {
            validated: null
        });
    case "frame":
        return xi(e, {
            name: e.name ?? null
        })
    }
    return null
}
  , IB = (e,t)=>{
    if (e.boundElements) {
        const n = e.boundElements.slice()
          , r = new Set;
        e.boundElements = n.reduce((i,o)=>{
            const s = t.get(o.id);
            if (s && !r.has(o.id)) {
                if (r.add(o.id),
                s.isDeleted)
                    return i;
                i.push(o),
                ue(s) && !s.containerId && (s.containerId = e.id)
            }
            return i
        }
        , [])
    }
}
  , SB = (e,t)=>{
    const n = e.containerId ? t.get(e.containerId) : null;
    if (!n) {
        e.containerId = null;
        return
    }
    if (!e.isDeleted && n.boundElements && !n.boundElements.find(r=>r.id === e.id)) {
        const r = (n.boundElements || (n.boundElements = [])).slice();
        r.push({
            type: "text",
            id: e.id
        }),
        n.boundElements = r
    }
}
  , CB = (e,t)=>{
    e.frameId && (t.get(e.frameId) || (e.frameId = null))
}
  , kd = (e,t,n)=>{
    const r = new Set
      , i = t ? Rt(t) : null
      , o = (e || []).reduce((a,l)=>{
        if (l.type !== "selection" && !ta(l)) {
            let c = xB(l, n == null ? void 0 : n.refreshDimensions);
            if (c) {
                const u = i == null ? void 0 : i.get(l.id);
                u && u.version > c.version && (c = Wl(c, u.version)),
                r.has(c.id) && (c = {
                    ...c,
                    id: $r()
                }),
                r.add(c.id),
                a.push(c)
            }
        }
        return a
    }
    , []);
    if (!(n != null && n.repairBindings))
        return o;
    const s = Rt(o);
    for (const a of o)
        a.frameId && CB(a, s),
        ue(a) && a.containerId ? SB(a, s) : a.boundElements && IB(a, s);
    return o
}
  , kB = (e,t,n)=>{
    const r = t[e];
    return r !== void 0 ? r : n[e]
}
  , N6 = {
    isSidebarDocked: (e,t)=>["defaultSidebarDockedPreference", e.isSidebarDocked ?? kB("defaultSidebarDockedPreference", e, t)]
}
  , CI = (e,t)=>{
    var i;
    e = e || {};
    const n = di()
      , r = {};
    for (const o of Object.keys(N6))
        if (o in e) {
            const [s,a] = N6[o](e, n);
            r[s] = a
        }
    for (const [o,s] of Object.entries(n)) {
        const a = e[o]
          , l = t ? t[o] : void 0;
        r[o] = a !== void 0 ? a : l !== void 0 ? l : s
    }
    return {
        ...r,
        cursorButton: (t == null ? void 0 : t.cursorButton) || "up",
        penDetected: (t == null ? void 0 : t.penDetected) ?? (e.penMode ? e.penDetected ?? !1 : !1),
        activeTool: {
            ...Ct(n, r.activeTool.type && bB[r.activeTool.type] ? r.activeTool : {
                type: "selection"
            }),
            lastActiveTool: null,
            locked: r.activeTool.locked ?? !1
        },
        zoom: typeof e.zoom == "number" ? {
            value: e.zoom
        } : (i = e.zoom) != null && i.value ? e.zoom : n.zoom,
        openSidebar: typeof e.openSidebar == "string" ? {
            name: nl.name
        } : r.openSidebar
    }
}
  , qs = (e,t,n,r)=>({
    elements: kd(e == null ? void 0 : e.elements, n, r),
    appState: CI(e == null ? void 0 : e.appState, t || null),
    files: (e == null ? void 0 : e.files) || {}
})
  , F6 = e=>{
    const t = kd(Pe(e.elements), null);
    return t.length ? {
        ...e,
        elements: t
    } : null
}
  , kI = (e=[],t)=>{
    const n = [];
    for (const r of e)
        if (Array.isArray(r)) {
            const i = F6({
                status: t,
                elements: r,
                id: $r(),
                created: Date.now()
            });
            i && n.push(i)
        } else {
            const i = r
              , o = F6({
                ...i,
                id: i.id || $r(),
                status: i.status || t,
                created: i.created || Date.now()
            });
            o && n.push(o)
        }
    return n
}
  , TI = async e=>{
    let t;
    if (e.type === ve.png)
        try {
            return await (await ne(()=>import("./image-bb85c34d.js"), [])).decodePngMetadata(e)
        } catch (n) {
            throw n.message === "INVALID" ? new DOMException(_("alerts.imageDoesNotContainScene"),"EncodingError") : new DOMException(_("alerts.cannotRestoreFromImage"),"EncodingError")
        }
    else if ("text"in Blob ? t = await e.text() : t = await new Promise(n=>{
        const r = new FileReader;
        r.readAsText(e, "utf8"),
        r.onloadend = ()=>{
            r.readyState === FileReader.DONE && n(r.result)
        }
    }
    ),
    e.type === ve.svg)
        try {
            return await (await ne(()=>import("./image-bb85c34d.js"), [])).decodeSvgMetadata({
                svg: t
            })
        } catch (n) {
            throw n.message === "INVALID" ? new DOMException(_("alerts.imageDoesNotContainScene"),"EncodingError") : new DOMException(_("alerts.cannotRestoreFromImage"),"EncodingError")
        }
    return t
}
  , MI = e=>{
    var t;
    return e && ((t = e.name.match(/\.(json|excalidraw|png|svg)$/)) == null ? void 0 : t[1]) || null
}
  , TB = e=>e === "png" || e === "svg"
  , My = e=>{
    const t = MI(e);
    return t === "png" || t === "svg"
}
  , eu = e=>{
    const {type: t} = e || {};
    return !!t && Object.values(Lv).includes(t)
}
  , AI = async(e,t,n,r)=>{
    const i = await TI(e);
    try {
        const o = JSON.parse(i);
        if (NB(o))
            return {
                type: ve.excalidraw,
                data: qs({
                    elements: TS(o.elements || []),
                    appState: {
                        theme: t == null ? void 0 : t.theme,
                        fileHandle: r || e.handle || null,
                        ...Px(o.appState || {}),
                        ...t ? Yu(o.elements || [], t) : {}
                    },
                    files: o.files
                }, t, n, {
                    repairBindings: !0,
                    refreshDimensions: !1
                })
            };
        if (RI(o))
            return {
                type: ve.excalidrawlib,
                data: o
            };
        throw new Error(_("alerts.couldNotLoadInvalidFile"))
    } catch (o) {
        throw console.error(o.message),
        new Error(_("alerts.couldNotLoadInvalidFile"))
    }
}
  , Ay = async(e,t,n,r)=>{
    const i = await AI(e, t, n, r);
    if (i.type !== ve.excalidraw)
        throw new Error(_("alerts.couldNotLoadInvalidFile"));
    return i.data
}
  , LI = (e,t="unpublished")=>{
    const n = JSON.parse(e);
    if (!RI(n))
        throw new Error("Invalid library");
    const r = n.libraryItems || n.library;
    return kI(r, t)
}
  , MB = async(e,t="unpublished")=>LI(await TI(e), t)
  , r1 = async e=>new Promise((t,n)=>{
    try {
        e.toBlob(r=>{
            if (!r)
                return n(new OR(_("canvasError.canvasTooBig"),"CANVAS_POSSIBLY_TOO_BIG"));
            t(r)
        }
        )
    } catch (r) {
        n(r)
    }
}
)
  , AB = async e=>{
    try {
        const t = await window.crypto.subtle.digest("SHA-1", await Ga(e));
        return kx(new Uint8Array(t))
    } catch (t) {
        return console.error(t),
        Z1(40)
    }
}
  , $6 = async e=>new Promise((t,n)=>{
    const r = new FileReader;
    r.onload = ()=>{
        const i = r.result;
        t(i)
    }
    ,
    r.onerror = i=>n(i),
    r.readAsDataURL(e)
}
)
  , LB = (e,t="")=>{
    const n = e.indexOf(",")
      , r = atob(e.slice(n + 1))
      , i = e.slice(0, n).split(":")[1].split(";")[0]
      , o = new ArrayBuffer(r.length)
      , s = new Uint8Array(o);
    for (let a = 0; a < r.length; a++)
        s[a] = r.charCodeAt(a);
    return new File([o],t,{
        type: i
    })
}
  , Hg = async(e,t)=>{
    if (e.type === ve.svg)
        return e;
    const [n,r] = await Promise.all([ne(()=>import("./pica-6e64895e.js").then(o=>o.p), []).then(o=>o.default), ne(()=>import("./image-blob-reduce.esm-1fc068b7.js"), []).then(o=>o.default)])
      , i = r({
        pica: n({
            features: ["js", "wasm"]
        })
    });
    if (t.outputType) {
        const {outputType: o} = t;
        i._create_blob = function(s) {
            return this.pica.toBlob(s.out_canvas, o, .8).then(a=>(s.out_blob = a,
            s))
        }
    }
    if (!eu(e))
        throw new Error(_("errors.unsupportedFileType"));
    return new File([await i.toBlob(e, {
        max: t.maxWidthOrHeight
    })],e.name,{
        type: t.outputType || e.type
    })
}
  , B6 = (e,t="")=>new File([new TextEncoder().encode(e)],t,{
    type: ve.svg
})
  , PB = async e=>{
    const t = e.dataTransfer.files.item(0)
      , n = await RB(e);
    return {
        file: t ? await Ly(t) : null,
        fileHandle: n
    }
}
  , RB = async e=>{
    if (ha)
        try {
            return await e.dataTransfer.items[0].getAsFileSystemHandle() || null
        } catch (t) {
            return console.warn(t.name, t.message),
            null
        }
    return null
}
  , z6 = e=>{
    let t = null;
    const n = `${[...new Uint8Array(e).slice(0, 8)].join(" ")} `
      , r = {
        png: "137 80 78 71 13 10 26 10 ",
        jpg: "255 216 255 ",
        gif: "71 73 70 56 57 97 "
    };
    return n === r.png ? t = ve.png : n.startsWith(r.jpg) ? t = ve.jpg : n.startsWith(r.gif) && (t = ve.gif),
    t
}
  , yf = (e,t,n)=>new File([e],n || "",{
    type: t
})
  , Ly = async e=>{
    var t, n;
    if (e.type) {
        if (eu(e)) {
            const r = await Ga(e)
              , i = z6(r);
            i && i !== e.type && (e = yf(r, i, e.name))
        }
    } else if ((t = e == null ? void 0 : e.name) != null && t.endsWith(".excalidrawlib"))
        e = yf(await Ga(e), ve.excalidrawlib, e.name);
    else if ((n = e == null ? void 0 : e.name) != null && n.endsWith(".excalidraw"))
        e = yf(await Ga(e), ve.excalidraw, e.name);
    else {
        const r = await Ga(e)
          , i = z6(r);
        i && (e = yf(r, i, e.name))
    }
    return e
}
  , Ga = e=>"arrayBuffer"in e ? e.arrayBuffer() : new Promise((t,n)=>{
    const r = new FileReader;
    r.onload = i=>{
        var o;
        if (!((o = i.target) != null && o.result))
            return n(new Error("Couldn't convert blob to ArrayBuffer"));
        t(i.target.result)
    }
    ,
    r.readAsArrayBuffer(e)
}
)
  , OB = (e,t)=>{
    const n = {};
    for (const r of e)
        !r.isDeleted && "fileId"in r && r.fileId && t[r.fileId] && (n[r.fileId] = t[r.fileId]);
    return n
}
  , Hl = (e,t,n,r)=>{
    const i = {
        type: li.excalidraw,
        version: W1.excalidraw,
        source: Pv,
        elements: r === "local" ? TS(e) : dH(e),
        appState: r === "local" ? Px(t) : nP(t),
        files: r === "local" ? OB(e, n) : void 0
    };
    return JSON.stringify(i, null, 2)
}
  , PI = async(e,t,n)=>{
    const r = Hl(e, t, n, "local")
      , i = new Blob([r],{
        type: ve.excalidraw
    });
    return {
        fileHandle: await n1(i, {
            name: t.name,
            extension: "excalidraw",
            description: "Excalidraw file",
            fileHandle: My(t.fileHandle) ? null : t.fileHandle
        })
    }
}
  , DB = async(e,t)=>{
    const n = await Ty({
        description: "Excalidraw files"
    });
    return Ay(await Ly(n), e, t, n.handle)
}
  , NB = e=>(e == null ? void 0 : e.type) === li.excalidraw && (!e.elements || Array.isArray(e.elements) && (!e.appState || typeof e.appState == "object"))
  , RI = e=>typeof e == "object" && e && e.type === li.excalidrawLibrary && (e.version === 1 || e.version === 2)
  , OI = e=>{
    const t = {
        type: li.excalidrawLibrary,
        version: W1.excalidrawLibrary,
        source: Pv,
        libraryItems: e
    };
    return JSON.stringify(t, null, 2)
}
  , FB = async e=>{
    const t = OI(e);
    await n1(new Blob([t],{
        type: ve.excalidrawlib
    }), {
        name: "library",
        extension: "excalidrawlib",
        description: "Excalidraw library file"
    })
}
  , DI = e=>new Promise((t,n)=>{
    const r = new Image;
    r.onload = ()=>{
        t(r)
    }
    ,
    r.onerror = i=>{
        n(i)
    }
    ,
    r.src = e
}
)
  , NI = async({fileIds: e, files: t, imageCache: n})=>{
    const r = new Map
      , i = new Map;
    return await Promise.all(e.reduce((o,s)=>{
        const a = t[s];
        return a && !r.has(s) ? (r.set(s, !0),
        o.concat((async()=>{
            try {
                if (a.mimeType === ve.binary)
                    throw new Error("Only images can be added to ImageCache");
                const l = DI(a.dataURL)
                  , c = {
                    image: l,
                    mimeType: a.mimeType
                };
                n.set(s, c);
                const u = await l;
                n.set(s, {
                    ...c,
                    image: u
                })
            } catch {
                i.set(s, !0)
            }
        }
        )())) : o
    }
    , [])),
    {
        imageCache: n,
        updatedFiles: r,
        erroredFiles: i
    }
}
  , FI = e=>e.filter(t=>At(t))
  , $B = e=>(e == null ? void 0 : e.nodeName.toLowerCase()) === "svg"
  , BB = async e=>{
    const t = new DOMParser().parseFromString(e, ve.svg)
      , n = t.querySelector("svg");
    if (t.querySelector("parsererror") || !$B(n))
        throw new Error(_("errors.invalidSVGString"));
    if (n.hasAttribute("xmlns") || n.setAttribute("xmlns", ft),
    !n.hasAttribute("width") || !n.hasAttribute("height")) {
        const i = n.getAttribute("viewBox");
        let o = n.getAttribute("width") || "50"
          , s = n.getAttribute("height") || "50";
        if (i) {
            const a = i.match(/\d+ +\d+ +(\d+) +(\d+)/);
            a && ([,o,s] = a)
        }
        n.setAttribute("width", o),
        n.setAttribute("height", s)
    }
    return n.outerHTML
}
  , $I = "<!-- svg-source:excalidraw -->"
  , BI = async(e,t,n,{exportBackground: r, exportPadding: i=gd, viewBackgroundColor: o},s=(a,l)=>{
    const c = document.createElement("canvas");
    return c.width = a * t.exportScale,
    c.height = l * t.exportScale,
    {
        canvas: c,
        scale: t.exportScale
    }
}
)=>{
    const [a,l,c,u] = Ry(e, i)
      , {canvas: d, scale: f=1} = s(c, u)
      , h = di()
      , {imageCache: m} = await NI({
        imageCache: new Map,
        fileIds: FI(e).map(E=>E.fileId),
        files: n
    })
      , g = Nu(e);
    return A7({
        canvas: d,
        rc: is.canvas(d),
        elements: e,
        visibleElements: e,
        scale: f,
        appState: {
            ...t,
            viewBackgroundColor: r ? o : null,
            scrollX: -a + (g ? 0 : i),
            scrollY: -l + (g ? 0 : i),
            zoom: h.zoom,
            shouldCacheIgnoreZoom: !1,
            theme: t.exportWithDarkMode ? "dark" : "light"
        },
        renderConfig: {
            imageCache: m,
            renderGrid: !1,
            isExporting: !0
        }
    }),
    d
}
  , Py = async(e,t,n,r)=>{
    var S, C, T;
    const {exportPadding: i=gd, viewBackgroundColor: o, exportScale: s=1, exportEmbedScene: a} = t;
    let l = "";
    if (a)
        try {
            l = await (await ne(()=>import("./image-bb85c34d.js"), [])).encodeSvgMetadata({
                text: r != null && r.serializeAsJSON ? (S = r == null ? void 0 : r.serializeAsJSON) == null ? void 0 : S.call(r) : Hl(e, t, n || {}, "local")
            })
        } catch (L) {
            console.error(L)
        }
    const [c,u,d,f] = Ry(e, i)
      , h = document.createElementNS(ft, "svg");
    h.setAttribute("version", "1.1"),
    h.setAttribute("xmlns", ft),
    h.setAttribute("viewBox", `0 0 ${d} ${f}`),
    h.setAttribute("width", `${d * s}`),
    h.setAttribute("height", `${f * s}`),
    t.exportWithDarkMode && h.setAttribute("filter", Rv);
    let m = "https://excalidraw.com/";
    ({}).VITE_IS_EXCALIDRAW_NPM_PACKAGE && (m = window.EXCALIDRAW_ASSET_PATH || `https://unpkg.com/${{}.VITE_PKG_NAME}@${{}.PKG_VERSION}`,
    m != null && m.startsWith("/") && (m = m.replace("/", `${window.location.origin}/`)),
    m = `${m}/dist/excalidraw-assets/`);
    const g = ((T = (C = Fe.getScene(e[0])) == null ? void 0 : C.getNonDeletedElements()) == null ? void 0 : T.length) === e.length
      , E = Nu(e)
      , v = -c + (E ? 0 : i)
      , y = -u + (E ? 0 : i)
      , w = g || !E ? void 0 : e.find(L=>L.type === "frame");
    let b = "";
    if (w) {
        const [L,A,P,O] = me(w)
          , N = (P - L) / 2 - (w.x - L)
          , $ = (O - A) / 2 - (w.y - A);
        b = `<clipPath id=${w.id}>
            <rect transform="translate(${w.x + v} ${w.y + y}) rotate(${w.angle} ${N} ${$})"
          width="${w.width}"
          height="${w.height}"
          >
          </rect>
        </clipPath>`
    }
    if (h.innerHTML = `
  ${$I}
  ${l}
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("${m}Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("${m}Cascadia.woff2");
      }
    </style>
    ${b}
  </defs>
  `,
    t.exportBackground && o) {
        const L = h.ownerDocument.createElementNS(ft, "rect");
        L.setAttribute("x", "0"),
        L.setAttribute("y", "0"),
        L.setAttribute("width", `${d}`),
        L.setAttribute("height", `${f}`),
        L.setAttribute("fill", o),
        h.appendChild(L)
    }
    const I = is.svg(h);
    return qD(e, I, h, n || {}, {
        offsetX: v,
        offsetY: y,
        exportWithDarkMode: t.exportWithDarkMode,
        exportingFrameId: (w == null ? void 0 : w.id) || null,
        renderEmbeddables: r == null ? void 0 : r.renderEmbeddables
    }),
    h
}
  , Ry = (e,t)=>{
    var u, d;
    const n = ((d = (u = Fe.getScene(e[0])) == null ? void 0 : u.getNonDeletedElements()) == null ? void 0 : d.length) === e.length
      , r = Nu(e);
    if (!n || r) {
        const h = e.filter(m=>m.type === "frame").reduce((m,g)=>(m[g.id] = !0,
        m), {});
        e = e.filter(m=>!h[m.frameId ?? ""])
    }
    const [i,o,s,a] = mt(e)
      , l = on(i, s) + (r ? 0 : t * 2)
      , c = on(o, a) + (r ? 0 : t * 2);
    return [i, o, l, c]
}
  , zB = (e,t,n)=>{
    const [,,r,i] = Ry(e, t).map(o=>Math.trunc(o * n));
    return [r, i]
}
  , Sr = 32
  , Ue = 12
  , $o = 256
  , zI = 50
  , ys = "NOT_SPREADSHEET"
  , Zu = "VALID_SPREADSHEET"
  , Rc = e=>{
    const t = /^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);
    return t ? parseFloat(`${(t[1] || t[2]) + t[3]}`.replace(/,/g, "")) : null
}
  , kp = (e,t)=>e.slice(1).every(n=>Rc(n[t]) !== null)
  , H6 = e=>{
    const t = e[0].length;
    if (t > 2)
        return {
            type: ys,
            reason: "More than 2 columns"
        };
    if (t === 1) {
        if (!kp(e, 0))
            return {
                type: ys,
                reason: "Value is not numeric"
            };
        const l = Rc(e[0][0]) === null
          , c = (l ? e.slice(1) : e).map(u=>Rc(u[0]));
        return c.length < 2 ? {
            type: ys,
            reason: "Less than two rows"
        } : {
            type: Zu,
            spreadsheet: {
                title: l ? e[0][0] : null,
                labels: null,
                values: c
            }
        }
    }
    const n = kp(e, 0)
      , r = kp(e, 1);
    if (!n && !r)
        return {
            type: ys,
            reason: "Value is not numeric"
        };
    const [i,o] = r ? [0, 1] : [1, 0]
      , s = Rc(e[0][o]) === null
      , a = s ? e.slice(1) : e;
    return a.length < 2 ? {
        type: ys,
        reason: "Less than 2 rows"
    } : {
        type: Zu,
        spreadsheet: {
            title: s ? e[0][o] : null,
            labels: a.map(l=>l[i]),
            values: a.map(l=>Rc(l[o]))
        }
    }
}
  , HB = e=>{
    const t = [];
    for (let n = 0; n < e[0].length; n++) {
        const r = [];
        for (let i = 0; i < e.length; i++)
            r.push(e[i][n]);
        t.push(r)
    }
    return t
}
  , UB = e=>{
    let t = e.trim().split(`
`).map(o=>o.trim().split("	"));
    if (t.length && t[0].length !== 2 && (t = e.trim().split(`
`).map(o=>o.trim().split(","))),
    t.length === 0)
        return {
            type: ys,
            reason: "No values"
        };
    const n = t[0].length;
    if (!t.every(o=>o.length === n))
        return {
            type: ys,
            reason: "All rows don't have same number of columns"
        };
    const i = H6(t);
    if (i.type !== Zu) {
        const o = H6(HB(t));
        if (o.type === Zu)
            return o
    }
    return i
}
  , i1 = eL(qA)
  , sr = {
    fillStyle: "hachure",
    fontFamily: Xi,
    fontSize: Ki,
    opacity: 100,
    roughness: 1,
    strokeColor: ge.black,
    roundness: null,
    strokeStyle: "solid",
    strokeWidth: 1,
    verticalAlign: Bn.MIDDLE,
    locked: !1
}
  , HI = e=>{
    const t = (Sr + Ue) * e.values.length + Ue
      , n = $o + Ue * 2;
    return {
        chartWidth: t,
        chartHeight: n
    }
}
  , VB = (e,t,n,r,i)=>{
    var o;
    return ((o = e.labels) == null ? void 0 : o.map((s,a)=>Br({
        groupIds: [r],
        backgroundColor: i,
        ...sr,
        text: s.length > 8 ? `${s.slice(0, 5)}...` : s,
        x: t + a * (Sr + Ue) + Ue * 2,
        y: n + Ue / 2,
        width: Sr,
        angle: 5.87,
        fontSize: 16,
        textAlign: "center",
        verticalAlign: "top"
    }))) || []
}
  , WB = (e,t,n,r,i)=>{
    const o = Br({
        groupIds: [r],
        backgroundColor: i,
        ...sr,
        x: t - Ue,
        y: n - Ue,
        text: "0",
        textAlign: "right"
    })
      , s = Br({
        groupIds: [r],
        backgroundColor: i,
        ...sr,
        x: t - Ue,
        y: n - $o - o.height / 2,
        text: Math.max(...e.values).toLocaleString(),
        textAlign: "right"
    });
    return [o, s]
}
  , GB = (e,t,n,r,i)=>{
    const {chartWidth: o, chartHeight: s} = HI(e)
      , a = No({
        backgroundColor: i,
        groupIds: [r],
        ...sr,
        type: "line",
        x: t,
        y: n,
        startArrowhead: null,
        endArrowhead: null,
        width: o,
        points: [[0, 0], [o, 0]]
    })
      , l = No({
        backgroundColor: i,
        groupIds: [r],
        ...sr,
        type: "line",
        x: t,
        y: n,
        startArrowhead: null,
        endArrowhead: null,
        height: s,
        points: [[0, 0], [0, -s]]
    })
      , c = No({
        backgroundColor: i,
        groupIds: [r],
        ...sr,
        type: "line",
        x: t,
        y: n - $o - Ue,
        startArrowhead: null,
        endArrowhead: null,
        strokeStyle: "dotted",
        width: o,
        opacity: zI,
        points: [[0, 0], [o, 0]]
    });
    return [a, l, c]
}
  , UI = (e,t,n,r,i,o)=>{
    const {chartWidth: s, chartHeight: a} = HI(e)
      , l = e.title ? Br({
        backgroundColor: i,
        groupIds: [r],
        ...sr,
        text: e.title,
        x: t + s / 2,
        y: n - $o - Ue * 2 - Ki,
        roundness: null,
        textAlign: "center"
    }) : null
      , c = o ? Yo({
        backgroundColor: i,
        groupIds: [r],
        ...sr,
        type: "rectangle",
        x: t,
        y: n - a,
        width: s,
        height: a,
        strokeColor: ge.black,
        fillStyle: "solid",
        opacity: 6
    }) : null;
    return [...c ? [c] : [], ...l ? [l] : [], ...VB(e, t, n, r, i), ...WB(e, t, n, r, i), ...GB(e, t, n, r, i)]
}
  , jB = (e,t,n)=>{
    const r = Math.max(...e.values)
      , i = $r()
      , o = i1[Math.floor(Math.random() * i1.length)];
    return [...e.values.map((a,l)=>{
        const c = a / r * $o;
        return Yo({
            backgroundColor: o,
            groupIds: [i],
            ...sr,
            type: "rectangle",
            x: t + l * (Sr + Ue) + Ue,
            y: n - c - Ue,
            width: Sr,
            height: c
        })
    }
    ), ...UI(e, t, n, i, o, !1)]
}
  , YB = (e,t,n)=>{
    const r = Math.max(...e.values)
      , i = $r()
      , o = i1[Math.floor(Math.random() * i1.length)];
    let s = 0;
    const a = [];
    for (const g of e.values) {
        const E = s * (Sr + Ue)
          , v = -(g / r) * $o;
        a.push([E, v]),
        s++
    }
    const l = Math.max(...a.map(g=>g[0]))
      , c = Math.max(...a.map(g=>g[1]))
      , u = Math.min(...a.map(g=>g[0]))
      , d = Math.min(...a.map(g=>g[1]))
      , f = No({
        backgroundColor: o,
        groupIds: [i],
        ...sr,
        type: "line",
        x: t + Ue + Sr / 2,
        y: n - Ue,
        startArrowhead: null,
        endArrowhead: null,
        height: c - d,
        width: l - u,
        strokeWidth: 2,
        points: a
    })
      , h = e.values.map((g,E)=>{
        const v = E * (Sr + Ue) + Ue / 2
          , y = -(g / r) * $o + Ue / 2;
        return Yo({
            backgroundColor: o,
            groupIds: [i],
            ...sr,
            fillStyle: "solid",
            strokeWidth: 2,
            type: "ellipse",
            x: t + v + Sr / 2,
            y: n + y - Ue * 2,
            width: Ue,
            height: Ue
        })
    }
    )
      , m = e.values.map((g,E)=>{
        const v = E * (Sr + Ue) + Ue / 2
          , y = g / r * $o + Ue / 2 + Ue;
        return No({
            backgroundColor: o,
            groupIds: [i],
            ...sr,
            type: "line",
            x: t + v + Sr / 2 + Ue / 2,
            y: n - y,
            startArrowhead: null,
            endArrowhead: null,
            height: y,
            strokeStyle: "dotted",
            opacity: zI,
            points: [[0, 0], [0, y]]
        })
    }
    );
    return [...UI(e, t, n, i, o, !1), f, ...m, ...h]
}
  , ZB = (e,t,n,r)=>e === "line" ? YB(t, n, r) : jB(t, n, r);
let Ug = ""
  , Vg = !1;
const KB = "clipboard"in navigator && "readText"in navigator.clipboard
  , Oy = "clipboard"in navigator && "writeText"in navigator.clipboard
  , Dy = "clipboard"in navigator && "write"in navigator.clipboard && "ClipboardItem"in window && "toBlob"in HTMLCanvasElement.prototype
  , XB = e=>!!([li.excalidraw, li.excalidrawClipboard, li.excalidrawClipboardWithAPI].includes(e == null ? void 0 : e.type) && Array.isArray(e.elements))
  , qB = async(e,t)=>{
    const n = new Set(e.filter(a=>a.type === "frame"));
    let r = !1;
    const i = e.reduce((a,l)=>(At(l) && (r = !0,
    t && t[l.fileId] && (a[l.fileId] = t[l.fileId])),
    a), {});
    r && !t && console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");
    const o = {
        type: li.excalidrawClipboard,
        elements: e.map(a=>{
            if (dr(a) && !n.has(dr(a))) {
                const l = bd(a);
                return Q(l, {
                    frameId: null
                }),
                l
            }
            return a
        }
        ),
        files: t ? i : void 0
    }
      , s = JSON.stringify(o);
    Ug = s;
    try {
        Vg = !1,
        await Ul(s)
    } catch (a) {
        Vg = !0,
        console.error(a)
    }
}
  , U6 = ()=>{
    if (!Ug)
        return {};
    try {
        return JSON.parse(Ug)
    } catch (e) {
        return console.error(e),
        {}
    }
}
  , QB = e=>{
    const t = UB(e);
    return t.type === Zu ? {
        spreadsheet: t.spreadsheet
    } : null
}
  , JB = async e=>{
    var t;
    try {
        return ((e ? (t = e.clipboardData) == null ? void 0 : t.getData("text/plain") : KB && await navigator.clipboard.readText()) || "").trim()
    } catch {
        return ""
    }
}
  , VI = async(e,t=!1)=>{
    const n = await JB(e);
    if (!n || !t && n.includes($I))
        return U6();
    const r = !t && QB(n);
    if (r)
        return r;
    const i = U6();
    try {
        const o = JSON.parse(n)
          , s = o.type === li.excalidrawClipboardWithAPI;
        if (XB(o))
            return {
                elements: o.elements,
                files: o.files,
                text: t ? JSON.stringify(o.elements, null, 2) : void 0,
                programmaticAPI: s
            }
    } catch {}
    return Vg && i.elements ? {
        ...i,
        text: t ? JSON.stringify(i.elements, null, 2) : void 0
    } : {
        text: n
    }
}
  , ez = async e=>{
    try {
        await navigator.clipboard.write([new window.ClipboardItem({
            [ve.png]: e
        })])
    } catch (t) {
        if (QL(e))
            await navigator.clipboard.write([new window.ClipboardItem({
                [ve.png]: await e
            })]);
        else
            throw t
    }
}
  , Ul = async e=>{
    let t = !1;
    if (Oy)
        try {
            await navigator.clipboard.writeText(e || ""),
            t = !0
        } catch (n) {
            console.error(n)
        }
    if (!t && !tz(e || " "))
        throw new Error("couldn't copy")
}
  , tz = e=>{
    const t = document.documentElement.getAttribute("dir") === "rtl"
      , n = document.createElement("textarea");
    n.style.border = "0",
    n.style.padding = "0",
    n.style.margin = "0",
    n.style.position = "absolute",
    n.style[t ? "right" : "left"] = "-9999px";
    const r = window.pageYOffset || document.documentElement.scrollTop;
    n.style.top = `${r}px`,
    n.style.fontSize = "12pt",
    n.setAttribute("readonly", ""),
    n.value = e,
    document.body.appendChild(n);
    let i = !1;
    try {
        n.select(),
        n.setSelectionRange(0, n.value.length),
        i = document.execCommand("copy")
    } catch (o) {
        console.error(o)
    }
    return n.remove(),
    i
}
  , nz = (e,t,n,r,i,o)=>{
    const {zoom: s} = r
      , a = 180 * n / Math.PI;
    let l = e * (s.value - 1) / 2
      , c = t * (s.value - 1) / 2;
    return e > i && s.value !== 1 && (l = i * (s.value - 1) / 2),
    t > o && s.value !== 1 && (c = o * (s.value - 1) / 2),
    `translate(${l}px, ${c}px) scale(${s.value}) rotate(${a}deg)`
}
  , _l = {}
  , o1 = (e,t)=>{
    const n = _l[e] || (_l[e] = {
        height: t
    });
    return n.height = t,
    n
}
  , WI = e=>{
    _l[e] && delete _l[e]
}
  , rz = e=>{
    var t;
    return ((t = _l[e]) == null ? void 0 : t.height) ?? null
}
  , iz = ({id: e, onChange: t, onSubmit: n, getViewportCoords: r, element: i, canvas: o, excalidrawContainer: s, app: a})=>{
    const l = (O,N)=>{
        if (!N.style.fontFamily || !N.style.fontSize)
            return !1;
        const $ = N.style.fontFamily.replace(/"/g, "");
        return zv({
            fontFamily: O.fontFamily
        }) !== $ || `${O.fontSize}px` !== N.style.fontSize
    }
      , c = ()=>{
        var te;
        const O = a.state
          , N = (te = Fe.getScene(i)) == null ? void 0 : te.getElement(e);
        if (!N)
            return;
        const {textAlign: $, verticalAlign: V} = N;
        if (N && ue(N)) {
            let Z = N.x
              , z = N.y;
            const W = Lt(N);
            let D = N.width
              , F = N.height
              , B = N.width;
            const Y = N.height;
            if (W && N.containerId) {
                if (rt(W)) {
                    const dn = ce.getBoundTextElementPosition(W, N);
                    Z = dn.x,
                    z = dn.y
                }
                const Ce = l(N, u);
                let ze;
                if (Ce ? ze = o1(W.id, W.height) : (ze = _l[W.id],
                ze || (ze = o1(W.id, W.height))),
                D = pi(W),
                F = Vl(W, N),
                !rt(W) && Y > F) {
                    const dn = Js(Y, W.type);
                    Q(W, {
                        height: dn
                    });
                    return
                } else if (!rt(W) && W.height > ze.height && Y < F) {
                    const dn = Js(Y, W.type);
                    Q(W, {
                        height: dn
                    })
                } else {
                    const {y: dn} = h0(W, N);
                    z = dn
                }
            }
            const [G,K] = r(Z, z)
              , q = u.selectionStart
              , oe = u.selectionEnd
              , $e = u.value.length;
            if (q === oe && oe !== $e) {
                const Ce = $e - oe;
                u.selectionStart = u.value.length - Ce,
                u.selectionEnd = u.value.length - Ce
            }
            W ? B += .5 : (D = (O.width - 8 - G) / O.zoom.value,
            B = Math.min(B, D));
            let Ie = N.lineHeight;
            N8 && (Ie = YI({
                ...N,
                fontSize: Math.round(N.fontSize)
            }));
            const Se = (O.height - K) / O.zoom.value;
            Object.assign(u.style, {
                font: xt(N),
                lineHeight: Ie,
                width: `${B}px`,
                height: `${Y}px`,
                left: `${G}px`,
                top: `${K}px`,
                transform: nz(B, Y, az(N), O, D, Se),
                textAlign: $,
                verticalAlign: V,
                color: N.strokeColor,
                opacity: N.opacity / 100,
                filter: "var(--theme-filter)",
                maxHeight: `${Se}px`
            }),
            u.scrollTop = 0,
            Q(N, {
                x: Z,
                y: z
            })
        }
    }
      , u = document.createElement("textarea");
    u.dir = "auto",
    u.tabIndex = 0,
    u.dataset.type = "wysiwyg",
    u.wrap = "off",
    u.classList.add("excalidraw-wysiwyg");
    let d = "pre"
      , f = "normal";
    _t(i) && (d = "pre-wrap",
    f = "break-word"),
    Object.assign(u.style, {
        position: "absolute",
        display: "inline-block",
        minHeight: "1em",
        backfaceVisibility: "hidden",
        margin: 0,
        padding: 0,
        border: 0,
        outline: 0,
        resize: "none",
        background: "transparent",
        overflow: "hidden",
        zIndex: "var(--zIndex-wysiwyg)",
        wordBreak: f,
        whiteSpace: d,
        overflowWrap: "break-word",
        boxSizing: "content-box"
    }),
    u.value = i.originalText,
    c(),
    t && (u.onpaste = async O=>{
        const N = await VI(O, !0);
        if (!N.text)
            return;
        const $ = Ku(N.text);
        if (!$)
            return;
        const V = Lt(i)
          , te = xt({
            fontSize: a.state.currentItemFontSize,
            fontFamily: a.state.currentItemFontFamily
        });
        if (V) {
            const Z = Md(`${u.value}${$}`, te, pi(V))
              , z = p0(Z, te);
            u.style.width = `${z}px`
        }
    }
    ,
    u.oninput = ()=>{
        t(Ku(u.value))
    }
    ),
    u.onkeydown = O=>{
        if (!O.shiftKey && L6.keyTest(O))
            O.preventDefault(),
            a.actionManager.executeAction(L6),
            c();
        else if (!O.shiftKey && P6.keyTest(O))
            O.preventDefault(),
            a.actionManager.executeAction(P6),
            c();
        else if (M6.keyTest(O))
            a.actionManager.executeAction(M6);
        else if (A6.keyTest(O))
            a.actionManager.executeAction(A6);
        else if (O.key === R.ESCAPE)
            O.preventDefault(),
            b = !0,
            I();
        else if (O.key === R.ENTER && O[R.CTRL_OR_CMD]) {
            if (O.preventDefault(),
            O.isComposing || O.keyCode === 229)
                return;
            b = !0,
            I()
        } else if (O.key === R.TAB || O[R.CTRL_OR_CMD] && (O.code === Me.BRACKET_LEFT || O.code === Me.BRACKET_RIGHT)) {
            if (O.preventDefault(),
            O.isComposing)
                return;
            O.shiftKey || O.code === Me.BRACKET_LEFT ? v() : E(),
            u.dispatchEvent(new Event("input"))
        }
    }
    ;
    const h = 4
      , m = " ".repeat(h)
      , g = new RegExp(`^ {1,${h}}`)
      , E = ()=>{
        const {selectionStart: O, selectionEnd: N} = u
          , $ = y();
        let V = u.value;
        $.forEach(te=>{
            const Z = V.slice(0, te)
              , z = V.slice(te);
            V = `${Z}${m}${z}`
        }
        ),
        u.value = V,
        u.selectionStart = O + h,
        u.selectionEnd = N + h * $.length
    }
      , v = ()=>{
        const {selectionStart: O, selectionEnd: N} = u
          , $ = y()
          , V = [];
        let te = u.value;
        $.forEach(Z=>{
            const z = te.slice(Z, Z + h).match(g);
            if (z) {
                const W = te.slice(0, Z)
                  , D = te.slice(Z + z[0].length);
                te = `${W}${D}`,
                V.push(Z)
            }
        }
        ),
        u.value = te,
        V.length && (O > V[V.length - 1] ? u.selectionStart = Math.max(O - h, V[V.length - 1]) : u.selectionStart = O,
        u.selectionEnd = Math.max(u.selectionStart, N - h * V.length))
    }
      , y = ()=>{
        let {selectionStart: O, selectionEnd: N, value: $} = u;
        const V = $.slice(0, O).match(/[^\n]*$/)[0].length;
        return O = O - V,
        $.slice(O, N).split(`
`).reduce((Z,z,W,D)=>Z.concat(W ? Z[W - 1] + D[W - 1].length + 1 : O), []).reverse()
    }
      , w = O=>{
        O.preventDefault(),
        O.stopPropagation()
    }
    ;
    let b = !1;
    const I = ()=>{
        var V, te;
        S();
        const O = (V = Fe.getScene(i)) == null ? void 0 : V.getElement(i.id);
        if (!O)
            return;
        let N = u.value;
        const $ = Lt(O);
        if ($) {
            if (N = O.text,
            u.value.trim()) {
                const Z = Qs($);
                !Z || Z !== i.id ? Q($, {
                    boundElements: ($.boundElements || []).concat({
                        type: "text",
                        id: i.id
                    })
                }) : rt($) && Wl($)
            } else
                Q($, {
                    boundElements: (te = $.boundElements) == null ? void 0 : te.filter(Z=>!ue(Z))
                });
            mi(O, $)
        }
        n({
            text: N,
            viaKeyboard: b,
            originalText: u.value
        })
    }
      , S = ()=>{
        A || (A = !0,
        u.onblur = null,
        u.oninput = null,
        u.onkeydown = null,
        P && P.disconnect(),
        window.removeEventListener("resize", c),
        window.removeEventListener("wheel", w, !0),
        window.removeEventListener("pointerdown", T),
        window.removeEventListener("pointerup", C),
        window.removeEventListener("blur", I),
        window.removeEventListener("beforeunload", I),
        L(),
        u.remove())
    }
      , C = O=>{
        window.removeEventListener("pointerup", C);
        const N = O == null ? void 0 : O.target
          , $ = N instanceof HTMLElement && N.classList.contains("active-color");
        setTimeout(()=>{
            if (u.onblur = I,
            $) {
                const V = (Z,z)=>{
                    Z.find(D=>{
                        var F;
                        return D.removedNodes.length > 0 && ((F = D.removedNodes[0].dataset) == null ? void 0 : F.radixPopperContentWrapper) !== void 0
                    }
                    ) && (setTimeout(()=>{
                        u.focus()
                    }
                    ),
                    z.disconnect())
                }
                ;
                new MutationObserver(V).observe(document.querySelector(".excalidraw-container"), {
                    childList: !0
                })
            }
            $ || u.focus()
        }
        )
    }
      , T = O=>{
        const N = O.target instanceof HTMLElement && O.target.classList.contains("active-color");
        ((O.target instanceof HTMLElement || O.target instanceof SVGElement) && O.target.closest(`.${F8.SHAPE_ACTIONS_MENU}`) && !vs(O.target) || N) && (u.onblur = null,
        window.addEventListener("pointerup", C),
        window.addEventListener("blur", I))
    }
      , L = Fe.getScene(i).addCallback(()=>{
        var N;
        c(),
        !!((N = document.activeElement) != null && N.closest(".color-picker-content")) || u.focus()
    }
    );
    let A = !1;
    u.select(),
    C();
    let P = null;
    o && "ResizeObserver"in window ? (P = new window.ResizeObserver(()=>{
        c()
    }
    ),
    P.observe(o)) : window.addEventListener("resize", c),
    window.addEventListener("pointerdown", T),
    window.addEventListener("wheel", w, {
        passive: !1,
        capture: !0
    }),
    window.addEventListener("beforeunload", I),
    s == null || s.querySelector(".excalidraw-textEditorContainer").appendChild(u)
}
  , Ku = e=>e.replace(/\t/g, "        ").replace(/\r?\n|\r/g, `
`)
  , Ny = e=>Ku(e).split(`
`)
  , mi = (e,t)=>{
    let n;
    const r = {
        x: e.x,
        y: e.y,
        text: e.text,
        width: e.width,
        height: e.height,
        baseline: e.baseline
    };
    r.text = e.text,
    t && (n = pi(t, e),
    r.text = Md(e.originalText, xt(e), n));
    const i = Yi(r.text, xt(e), e.lineHeight);
    if (r.width = i.width,
    r.height = i.height,
    r.baseline = i.baseline,
    t) {
        const o = Vl(t, e)
          , s = pi(t);
        if (i.height > o) {
            const u = Js(i.height, t.type);
            Q(t, {
                height: u
            }),
            o1(t.id, u)
        }
        if (i.width > s) {
            const u = Js(i.width, t.type);
            Q(t, {
                width: u
            })
        }
        const a = {
            ...e,
            ...r
        }
          , {x: l, y: c} = h0(t, a);
        r.x = l,
        r.y = c
    }
    Q(e, r)
}
  , GI = (e,t,n)=>{
    const r = Rt(e);
    t.forEach(i=>{
        const o = n.get(i.id)
          , s = Qs(i);
        if (s) {
            const a = n.get(s);
            if (a) {
                const l = r.get(o);
                l && Q(l, {
                    boundElements: (i.boundElements || []).filter(u=>u.id !== a && u.id !== s).concat({
                        type: "text",
                        id: a
                    })
                });
                const c = r.get(a);
                c && ue(c) && Q(c, {
                    containerId: l ? o : null
                })
            }
        }
    }
    )
}
  , f0 = (e,t,n=!1)=>{
    const r = Qs(e);
    if (!r)
        return;
    WI(e.id);
    let i = Fe.getScene(e).getElement(r);
    if (i && i.text) {
        if (!e)
            return;
        i = Fe.getScene(e).getElement(r);
        let o = i.text
          , s = i.height
          , a = i.width;
        const l = pi(e)
          , c = Vl(e, i);
        let u = e.height
          , d = i.baseline;
        if (n || t !== "n" && t !== "s") {
            o && (o = Md(i.originalText, xt(i), l));
            const f = Yi(o, xt(i), i.lineHeight);
            s = f.height,
            a = f.width,
            d = f.baseline
        }
        if (s > c) {
            u = Js(s, e.type);
            const f = u - e.height
              , h = !rt(e) && (t === "ne" || t === "nw" || t === "n") ? e.y - f : e.y;
            Q(e, {
                height: u,
                y: h
            })
        }
        Q(i, {
            text: o,
            width: a,
            height: s,
            baseline: d
        }),
        rt(e) || Q(i, h0(e, i))
    }
}
  , h0 = (e,t)=>{
    if (rt(e))
        return ce.getBoundTextElementPosition(e, t);
    const n = QI(e)
      , r = Vl(e, t)
      , i = pi(e);
    let o, s;
    return t.verticalAlign === Bn.TOP ? s = n.y : t.verticalAlign === Bn.BOTTOM ? s = n.y + (r - t.height) : s = n.y + (r / 2 - t.height / 2),
    t.textAlign === Ru.LEFT ? o = n.x : t.textAlign === Ru.RIGHT ? o = n.x + (i - t.width) : o = n.x + (i / 2 - t.width / 2),
    {
        x: o,
        y: s
    }
}
  , Yi = (e,t,n)=>{
    e = e.split(`
`).map(a=>a || " ").join(`
`);
    const r = parseFloat(t)
      , i = Wg(e, r, n)
      , o = p0(e, t)
      , s = jI(e, t, n);
    return {
        width: o,
        height: i,
        baseline: s
    }
}
  , jI = (e,t,n,r)=>{
    const i = document.createElement("div");
    i.style.position = "absolute",
    i.style.whiteSpace = "pre",
    i.style.font = t,
    i.style.minHeight = "1em",
    r && (i.style.overflow = "hidden",
    i.style.wordBreak = "break-word",
    i.style.whiteSpace = "pre-wrap"),
    i.style.lineHeight = String(n),
    i.innerText = e,
    document.body.appendChild(i);
    const o = document.createElement("span");
    o.style.display = "inline-block",
    o.style.overflow = "hidden",
    o.style.width = "1px",
    o.style.height = "1px",
    i.appendChild(o);
    let s = o.offsetTop + o.offsetHeight;
    const a = i.offsetHeight;
    if (N8) {
        const l = Wg(e, parseFloat(t), n)
          , c = parseFloat(t)
          , u = Wg(e, Math.round(c), n);
        l > a && (s += l - u),
        a > l && (s -= u - l)
    }
    return document.body.removeChild(i),
    s
}
  , YI = e=>{
    const t = Ny(e.text).length;
    return e.height / t / e.fontSize
}
  , Td = (e,t)=>e * t
  , ZI = (e,t)=>Td(e, t) + Mt * 2;
let Tp;
const tu = (e,t)=>{
    Tp || (Tp = document.createElement("canvas"));
    const n = Tp.getContext("2d");
    return n.font = t,
    n.measureText(e).width
}
  , p0 = (e,t)=>{
    const n = Ny(e);
    let r = 0;
    return n.forEach(i=>{
        r = Math.max(r, tu(i, t))
    }
    ),
    r
}
  , Wg = (e,t,n)=>{
    const r = Ny(e).length;
    return Td(t, n) * r
}
  , oz = e=>{
    const t = e.split("-");
    return t.length > 1 && t.forEach((n,r)=>{
        r !== t.length - 1 && (t[r] = n += "-")
    }
    ),
    t.join(" ").split(" ")
}
  , Md = (e,t,n)=>{
    if (!Number.isFinite(n) || n < 0)
        return e;
    const r = []
      , i = e.split(`
`)
      , o = tu(" ", t);
    let s = ""
      , a = 0;
    const l = u=>{
        u.trim() && r.push(u)
    }
      , c = ()=>{
        s = "",
        a = 0
    }
    ;
    return i.forEach(u=>{
        if (p0(u, t) <= n) {
            r.push(u);
            return
        }
        const f = oz(u);
        c();
        let h = 0;
        for (; h < f.length; ) {
            const m = tu(f[h], t);
            if (m === n)
                l(f[h]),
                h++;
            else if (m > n) {
                for (l(s),
                c(); f[h].length > 0; ) {
                    const g = String.fromCodePoint(f[h].codePointAt(0))
                      , E = KI.calculate(g, t);
                    a += E,
                    f[h] = f[h].slice(g.length),
                    a >= n ? (l(s),
                    s = g,
                    a = E) : s += g
                }
                a + o >= n ? (l(s),
                c()) : s.endsWith("-") || (s += " ",
                a += o),
                h++
            } else
                for (; a < n && h < f.length; ) {
                    const g = f[h];
                    if (a = tu(s + g, t),
                    a > n) {
                        l(s),
                        c();
                        break
                    }
                    h++;
                    const E = !g.endsWith("-");
                    if (s += g,
                    E && (s += " "),
                    a + o >= n) {
                        E ? r.push(s.slice(0, -1)) : r.push(s),
                        c();
                        break
                    }
                }
        }
        s.slice(-1) === " " && (s = s.slice(0, -1),
        l(s))
    }
    ),
    r.join(`
`)
}
  , KI = (()=>{
    const e = {};
    return {
        calculate: (r,i)=>{
            const o = r.charCodeAt(0);
            if (e[i] || (e[i] = []),
            !e[i][o]) {
                const s = tu(r, i);
                e[i][o] = s
            }
            return e[i][o]
        }
        ,
        getCache: r=>e[r]
    }
}
)()
  , XI = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase()
  , qI = (e,t)=>{
    const n = sz(e);
    return n === 0 ? Yi(XI.split("").join(`
`), e, t).width + Mt * 2 : n + Mt * 2
}
  , sz = e=>{
    const t = KI.getCache(e);
    if (!t)
        return 0;
    const n = t.filter(r=>r !== void 0);
    return Math.max(...n)
}
  , Qs = e=>{
    var t, n, r;
    return (t = e == null ? void 0 : e.boundElements) != null && t.length && ((r = (n = e == null ? void 0 : e.boundElements) == null ? void 0 : n.filter(i=>i.type === "text")[0]) == null ? void 0 : r.id) || null
}
  , Ae = e=>{
    var n;
    if (!e)
        return null;
    const t = Qs(e);
    return t && ((n = Fe.getScene(e)) == null ? void 0 : n.getElement(t)) || null
}
  , Lt = e=>{
    var t;
    return e && e.containerId && ((t = Fe.getScene(e)) == null ? void 0 : t.getElement(e.containerId)) || null
}
  , Mp = (e,t)=>{
    if (!rt(e))
        return {
            x: e.x + e.width / 2,
            y: e.y + e.height / 2
        };
    const n = ce.getPointsGlobalCoordinates(e);
    if (n.length % 2 === 1) {
        const o = Math.floor(e.points.length / 2)
          , s = ce.getPointGlobalCoordinates(e, e.points[o]);
        return {
            x: s[0],
            y: s[1]
        }
    }
    const r = e.points.length / 2 - 1;
    let i = ce.getEditorMidPoints(e, t)[r];
    return i || (i = ce.getSegmentMidPoint(e, n[r], n[r + 1], r + 1)),
    {
        x: i[0],
        y: i[1]
    }
}
  , QI = e=>{
    let t = Mt
      , n = Mt;
    return e.type === "ellipse" && (t += e.width / 2 * (1 - Math.sqrt(2) / 2),
    n += e.height / 2 * (1 - Math.sqrt(2) / 2)),
    e.type === "diamond" && (t += e.width / 4,
    n += e.height / 4),
    {
        x: e.x + t,
        y: e.y + n
    }
}
  , az = e=>{
    const t = Lt(e);
    return !t || rt(t) ? e.angle : t.angle
}
  , lz = e=>e.some(t=>{
    if (_t(t)) {
        const r = Lt(t);
        return !(ue(t) && rt(r))
    }
    return !1
}
)
  , cz = e=>e.some(t=>{
    if (_t(t)) {
        const r = Lt(t);
        return !(ue(t) && rt(r))
    }
    return ue(t)
}
)
  , V6 = (e,t,n,r)=>{
    const i = it(e, t);
    if (i.length === 1)
        return zs(i[0], !1) ? i[0] : null;
    let o = null;
    for (let s = e.length - 1; s >= 0; --s) {
        if (e[s].isDeleted)
            continue;
        const [a,l,c,u] = me(e[s]);
        if (rt(e[s]) && Uu(e[s], t, null, [n, r])) {
            o = e[s];
            break
        } else if (a < n && n < c && l < r && r < u) {
            o = e[s];
            break
        }
    }
    return zs(o, !1) ? o : null
}
  , uz = new Set(["rectangle", "ellipse", "diamond", "arrow"])
  , dz = e=>uz.has(e.type)
  , Js = (e,t)=>{
    e = Math.ceil(e);
    const n = Mt * 2;
    return t === "ellipse" ? Math.round((e + n) / Math.sqrt(2) * 2) : t === "arrow" ? e + n * 8 : t === "diamond" ? 2 * (e + n) : e + n
}
  , pi = (e,t=Ae(e))=>{
    const {width: n} = e;
    if (rt(e)) {
        const r = ((t == null ? void 0 : t.fontSize) ?? Ki) * yL;
        return Math.max(vL * n, r)
    }
    return e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - Mt * 2 : e.type === "diamond" ? Math.round(n / 2) - Mt * 2 : n - Mt * 2
}
  , Vl = (e,t)=>{
    const {height: n} = e;
    return rt(e) ? n - Mt * 8 * 2 <= 0 ? t.height : n : e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - Mt * 2 : e.type === "diamond" ? Math.round(n / 2) - Mt * 2 : n - Mt * 2
}
  , fz = ()=>p0(XI, xt({
    fontSize: Ki,
    fontFamily: Xi
})) > 0
  , Ap = {
    [Lr.Virgil]: 1.25,
    [Lr.Helvetica]: 1.15,
    [Lr.Cascadia]: 1.2
}
  , ea = e=>e in Ap ? Ap[e] : Ap[Xi]
  , JI = "invert(100%) hue-rotate(180deg) saturate(1.25)"
  , hz = di()
  , eS = (e,t)=>At(e) && !t.imageCache.has(e.fileId)
  , tS = (e,t,n)=>{
    var r;
    return n.theme === "dark" && At(e) && !eS(e, t) && ((r = t.imageCache.get(e.fileId)) == null ? void 0 : r.mimeType) !== ve.svg
}
  , m0 = e=>e.type === "freedraw" ? e.strokeWidth * 12 : 20
  , pz = (e,t)=>{
    const i = m0(e)
      , [o,s,a,l] = me(e)
      , c = ye(e) || Gn(e) ? on(o, a) : e.width
      , u = ye(e) || Gn(e) ? on(s, l) : e.height;
    let d = c * window.devicePixelRatio + i * 2
      , f = u * window.devicePixelRatio + i * 2
      , h = t.value;
    return (d * h > 32767 || f * h > 32767) && (h = Math.min(32767 / d, 32767 / f)),
    d * f * h * h > 16777216 && (h = Math.sqrt(16777216 / (d * f))),
    d = Math.floor(d * h),
    f = Math.floor(f * h),
    {
        width: d,
        height: f,
        scale: h
    }
}
  , mz = (e,t,n,r)=>{
    var h, m;
    const i = document.createElement("canvas")
      , o = i.getContext("2d")
      , s = m0(e)
      , {width: a, height: l, scale: c} = pz(e, t);
    i.width = a,
    i.height = l;
    let u = 0
      , d = 0;
    if (ye(e) || Gn(e)) {
        const [g,E] = me(e);
        u = e.x > g ? on(e.x, g) * window.devicePixelRatio * c : 0,
        d = e.y > E ? on(e.y, E) * window.devicePixelRatio * c : 0,
        o.translate(u, d)
    }
    o.save(),
    o.translate(s * c, s * c),
    o.scale(window.devicePixelRatio * c, window.devicePixelRatio * c);
    const f = is.canvas(i);
    return tS(e, n, r) && (o.filter = JI),
    nh(e, f, o, n, r),
    o.restore(),
    {
        element: e,
        canvas: i,
        theme: r.theme,
        scale: c,
        zoomValue: t.value,
        canvasOffsetX: u,
        canvasOffsetY: d,
        boundTextElementVersion: ((h = Ae(e)) == null ? void 0 : h.version) || null,
        containingFrameOpacity: ((m = dr(e)) == null ? void 0 : m.opacity) || 100
    }
}
  , gz = 14
  , nS = document.createElement("img");
nS.src = `data:${ve.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;
const rS = document.createElement("img");
rS.src = `data:${ve.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;
const vz = (e,t,n)=>{
    t.fillStyle = "#E7E7E7",
    t.fillRect(0, 0, e.width, e.height);
    const r = Math.min(e.width, e.height)
      , i = Math.min(r, Math.min(r * .4, 100));
    t.drawImage(e.status === "error" ? rS : nS, e.width / 2 - i / 2, e.height / 2 - i / 2, i, i)
}
  , nh = (e,t,n,r,i)=>{
    var o, s;
    switch (n.globalAlpha = (((o = dr(e)) == null ? void 0 : o.opacity) ?? 100) * e.opacity / 1e4,
    e.type) {
    case "rectangle":
    case "embeddable":
    case "diamond":
    case "ellipse":
        {
            n.lineJoin = "round",
            n.lineCap = "round",
            t.draw(We.get(e));
            break
        }
    case "arrow":
    case "line":
        {
            n.lineJoin = "round",
            n.lineCap = "round",
            We.get(e).forEach(a=>{
                t.draw(a)
            }
            );
            break
        }
    case "freedraw":
        {
            n.save(),
            n.fillStyle = e.strokeColor;
            const a = wz(e)
              , l = We.get(e);
            l && t.draw(l),
            n.fillStyle = e.strokeColor,
            n.fill(a),
            n.restore();
            break
        }
    case "image":
        {
            const a = At(e) ? (s = r.imageCache.get(e.fileId)) == null ? void 0 : s.image : void 0;
            a != null && !(a instanceof Promise) ? n.drawImage(a, 0, 0, e.width, e.height) : vz(e, n, i.zoom.value);
            break
        }
    default:
        if (ue(e)) {
            const a = Ix(e.text)
              , l = a && !n.canvas.isConnected;
            l && document.body.appendChild(n.canvas),
            n.canvas.setAttribute("dir", a ? "rtl" : "ltr"),
            n.save(),
            n.font = xt(e),
            n.fillStyle = e.strokeColor,
            n.textAlign = e.textAlign;
            const c = e.text.replace(/\r\n?/g, `
`).split(`
`)
              , u = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0
              , d = Td(e.fontSize, e.lineHeight)
              , f = e.height - e.baseline;
            for (let h = 0; h < c.length; h++)
                n.fillText(c[h], u, (h + 1) * d - f);
            n.restore(),
            l && n.canvas.remove()
        } else
            throw new Error(`Unimplemented type ${e.type}`)
    }
    n.globalAlpha = 1
}
  , Gg = new WeakMap
  , W6 = (e,t,n)=>{
    var l, c;
    const r = t ? n.zoom : hz.zoom
      , i = Gg.get(e)
      , o = i && i.zoomValue !== r.value && !(n != null && n.shouldCacheIgnoreZoom)
      , s = ((l = Ae(e)) == null ? void 0 : l.version) || null
      , a = ((c = dr(e)) == null ? void 0 : c.opacity) || 100;
    if (!i || o || i.theme !== n.theme || i.boundTextElementVersion !== s || i.containingFrameOpacity !== a) {
        const u = mz(e, r, t, n);
        return Gg.set(e, u),
        u
    }
    return i
}
  , G6 = (e,t,n,r)=>{
    const i = e.element
      , o = m0(i)
      , s = e.scale;
    let[a,l,c,u] = me(i);
    Gn(i) && (a = Math.floor(a),
    c = Math.ceil(c),
    l = Math.floor(l),
    u = Math.ceil(u));
    const d = ((a + c) / 2 + r.scrollX) * window.devicePixelRatio
      , f = ((l + u) / 2 + r.scrollY) * window.devicePixelRatio;
    t.save(),
    t.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio);
    const h = Ae(i);
    if (rt(i) && h) {
        const m = document.createElement("canvas")
          , g = m.getContext("2d")
          , E = Math.max(on(a, c), on(l, u));
        m.width = E * window.devicePixelRatio * s + o * e.scale * 10,
        m.height = E * window.devicePixelRatio * s + o * e.scale * 10;
        const v = (m.width - e.canvas.width) / 2
          , y = (m.height - e.canvas.height) / 2;
        g.translate(m.width / 2, m.height / 2),
        g.rotate(i.angle),
        g.drawImage(e.canvas, -e.canvas.width / 2, -e.canvas.height / 2, e.canvas.width, e.canvas.height);
        const [,,,,w,b] = me(h);
        g.rotate(-i.angle);
        const I = m.width / 2 - (w - a) * window.devicePixelRatio * s - v - o * s
          , S = m.height / 2 - (b - l) * window.devicePixelRatio * s - y - o * s;
        g.translate(-I, -S),
        g.clearRect(-(h.width / 2 + Mt) * window.devicePixelRatio * s, -(h.height / 2 + Mt) * window.devicePixelRatio * s, (h.width + Mt * 2) * window.devicePixelRatio * s, (h.height + Mt * 2) * window.devicePixelRatio * s),
        t.translate(d, f),
        t.drawImage(m, -(c - a) / 2 * window.devicePixelRatio - v / s - o, -(u - l) / 2 * window.devicePixelRatio - y / s - o, m.width / s, m.height / s)
    } else if (t.translate(d, f),
    t.rotate(i.angle),
    "scale"in e.element && !eS(i, n) && t.scale(e.element.scale[0], e.element.scale[1]),
    t.translate(-d, -f),
    t.drawImage(e.canvas, (a + r.scrollX) * window.devicePixelRatio - o * e.scale / e.scale, (l + r.scrollY) * window.devicePixelRatio - o * e.scale / e.scale, e.canvas.width / e.scale, e.canvas.height / e.scale),
    {}.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX === "true" && jo(i)) {
        const m = Ae(i)
          , g = QI(i);
        t.strokeStyle = "#c92a2a",
        t.lineWidth = 3,
        t.strokeRect((g.x + r.scrollX) * window.devicePixelRatio, (g.y + r.scrollY) * window.devicePixelRatio, pi(i) * window.devicePixelRatio, Vl(i, m) * window.devicePixelRatio)
    }
    t.restore()
}
  , yz = (e,t,n)=>{
    t.save(),
    t.translate(e.x + n.scrollX, e.y + n.scrollY),
    t.fillStyle = "rgba(0, 0, 200, 0.04)";
    const r = .5 / n.zoom.value;
    t.fillRect(r, r, e.width, e.height),
    t.lineWidth = 1 / n.zoom.value,
    t.strokeStyle = " rgb(105, 101, 219)",
    t.strokeRect(r, r, e.width, e.height),
    t.restore()
}
  , Ef = (e,t,n,r,i)=>{
    switch (e.type) {
    case "frame":
        {
            !r.isExporting && i.frameRendering.enabled && i.frameRendering.outline && (n.save(),
            n.translate(e.x + i.scrollX, e.y + i.scrollY),
            n.fillStyle = "rgba(0, 0, 200, 0.04)",
            n.lineWidth = 2 / i.zoom.value,
            n.strokeStyle = vl.strokeColor,
            n.roundRect ? (n.beginPath(),
            n.roundRect(0, 0, e.width, e.height, vl.radius / i.zoom.value),
            n.stroke(),
            n.closePath()) : n.strokeRect(0, 0, e.width, e.height),
            n.restore());
            break
        }
    case "freedraw":
        {
            if (We.generateElementShape(e),
            r.isExporting) {
                const [o,s,a,l] = me(e)
                  , c = (o + a) / 2 + i.scrollX
                  , u = (s + l) / 2 + i.scrollY
                  , d = (a - o) / 2 - (e.x - o)
                  , f = (l - s) / 2 - (e.y - s);
                n.save(),
                n.translate(c, u),
                n.rotate(e.angle),
                n.translate(-d, -f),
                nh(e, t, n, r, i),
                n.restore()
            } else {
                const o = W6(e, r, i);
                G6(o, n, r, i)
            }
            break
        }
    case "rectangle":
    case "diamond":
    case "ellipse":
    case "line":
    case "arrow":
    case "image":
    case "text":
    case "embeddable":
        {
            if (We.generateElementShape(e, r.isExporting),
            r.isExporting) {
                const [o,s,a,l] = me(e)
                  , c = (o + a) / 2 + i.scrollX
                  , u = (s + l) / 2 + i.scrollY;
                let d = (a - o) / 2 - (e.x - o)
                  , f = (l - s) / 2 - (e.y - s);
                if (ue(e)) {
                    const m = Lt(e);
                    if (rt(m)) {
                        const g = ce.getBoundTextElementPosition(m, e);
                        d = (a - o) / 2 - (g.x - o),
                        f = (l - s) / 2 - (g.y - s)
                    }
                }
                n.save(),
                n.translate(c, u),
                tS(e, r, i) && (n.filter = "none");
                const h = Ae(e);
                if (rt(e) && h) {
                    const m = document.createElement("canvas")
                      , g = m.getContext("2d")
                      , E = Math.max(on(o, a), on(s, l))
                      , v = m0(e);
                    m.width = E * i.exportScale + v * 10 * i.exportScale,
                    m.height = E * i.exportScale + v * 10 * i.exportScale,
                    g.translate(m.width / 2, m.height / 2),
                    g.scale(i.exportScale, i.exportScale),
                    d = e.width / 2 - (e.x - o),
                    f = e.height / 2 - (e.y - s),
                    g.rotate(e.angle);
                    const y = is.canvas(m);
                    g.translate(-d, -f),
                    nh(e, y, g, r, i),
                    g.translate(d, f),
                    g.rotate(-e.angle);
                    const [,,,,w,b] = me(h)
                      , I = (o + a) / 2 - w
                      , S = (s + l) / 2 - b;
                    g.translate(-I, -S),
                    g.clearRect(-h.width / 2, -h.height / 2, h.width, h.height),
                    n.scale(1 / i.exportScale, 1 / i.exportScale),
                    n.drawImage(m, -m.width / 2, -m.height / 2, m.width, m.height)
                } else
                    n.rotate(e.angle),
                    e.type === "image" && n.scale(e.scale[0], e.scale[1]),
                    n.translate(-d, -f),
                    nh(e, t, n, r, i);
                n.restore()
            } else {
                const o = W6(e, r, i)
                  , s = n.imageSmoothingEnabled;
                !(i != null && i.shouldCacheIgnoreZoom) && (!e.angle || $z(e.angle)) && (n.imageSmoothingEnabled = !1),
                G6(o, n, r, i),
                n.imageSmoothingEnabled = s
            }
            break
        }
    default:
        throw new Error(`Unimplemented type ${e.type}`)
    }
}
  , vc = (e,t,n)=>{
    if (typeof n > "u")
        return e.draw(t);
    const r = {
        sets: t.sets,
        shape: t.shape,
        options: {
            ...t.options,
            fixedDecimalPlaceDigits: n
        }
    };
    return e.draw(r)
}
  , yc = (e,t,n,r)=>{
    const i = dr(e);
    if (i && i.id === r) {
        const o = t.ownerDocument.createElementNS(ft, "g");
        return o.setAttributeNS(ft, "clip-path", `url(#${i.id})`),
        n.forEach(s=>o.appendChild(s)),
        o
    }
    return null
}
  , jg = (e,t,n,r,i,o,s,a,l)=>{
    var w;
    const c = {
        x: i,
        y: o
    }
      , [u,d,f,h] = me(e);
    let m = (f - u) / 2 - (e.x - u)
      , g = (h - d) / 2 - (e.y - d);
    if (ue(e)) {
        const b = Lt(e);
        if (rt(b)) {
            const [I,S,C,T] = me(b)
              , L = ce.getBoundTextElementPosition(b, e);
            m = (C - I) / 2 - (L.x - I),
            g = (T - S) / 2 - (L.y - S),
            i = i + L.x - e.x,
            o = o + L.y - e.y
        }
    }
    const E = 180 * e.angle / Math.PI;
    let v = n;
    if (e.link) {
        const b = n.ownerDocument.createElementNS(ft, "a");
        b.setAttribute("href", ci(e.link)),
        v.appendChild(b),
        v = b
    }
    const y = (((w = dr(e)) == null ? void 0 : w.opacity) ?? 100) * e.opacity / 1e4;
    switch (e.type) {
    case "selection":
        throw new Error("Selection rendering is not supported for SVG");
    case "rectangle":
    case "diamond":
    case "ellipse":
        {
            const b = We.generateElementShape(e)
              , I = vc(t, b, cc);
            y !== 1 && (I.setAttribute("stroke-opacity", `${y}`),
            I.setAttribute("fill-opacity", `${y}`)),
            I.setAttribute("stroke-linecap", "round"),
            I.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`);
            const S = yc(e, v, [I], a);
            S ? v.appendChild(S) : v.appendChild(I);
            break
        }
    case "embeddable":
        {
            const b = We.generateElementShape(e, !0)
              , I = vc(t, b, cc)
              , S = e.opacity / 100;
            S !== 1 && (I.setAttribute("stroke-opacity", `${S}`),
            I.setAttribute("fill-opacity", `${S}`)),
            I.setAttribute("stroke-linecap", "round"),
            I.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`),
            v.appendChild(I);
            const C = s7(e);
            jg(C, t, v, r, C.x + c.x - e.x, C.y + c.y - e.y, s, a, l);
            const T = vc(t, b, cc);
            for (T.setAttribute("stroke-linecap", "round"),
            T.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`); T.firstChild; )
                T.removeChild(T.firstChild);
            const L = ru(Math.min(e.width, e.height), e)
              , A = Va(y7(e.link || ""));
            if (l === !1 || (A == null ? void 0 : A.type) === "document") {
                const P = n.ownerDocument.createElementNS(ft, "a");
                P.setAttribute("href", ci(e.link || "")),
                P.setAttribute("target", "_blank"),
                P.setAttribute("rel", "noopener noreferrer"),
                P.style.borderRadius = `${L}px`,
                T.appendChild(P)
            } else {
                const P = n.ownerDocument.createElementNS(ft, "foreignObject");
                P.style.width = `${e.width}px`,
                P.style.height = `${e.height}px`,
                P.style.border = "none";
                const O = P.ownerDocument.createElementNS(ft, "div");
                O.setAttribute("xmlns", "http://www.w3.org/1999/xhtml"),
                O.style.width = "100%",
                O.style.height = "100%";
                const N = O.ownerDocument.createElement("iframe");
                N.src = (A == null ? void 0 : A.link) ?? "",
                N.style.width = "100%",
                N.style.height = "100%",
                N.style.border = "none",
                N.style.borderRadius = `${L}px`,
                N.style.top = "0",
                N.style.left = "0",
                N.allowFullscreen = !0,
                O.appendChild(N),
                P.appendChild(O),
                T.appendChild(P)
            }
            v.appendChild(T);
            break
        }
    case "line":
    case "arrow":
        {
            const b = Ae(e)
              , I = n.ownerDocument.createElementNS(ft, "mask");
            if (b) {
                I.setAttribute("id", `mask-${e.id}`);
                const L = n.ownerDocument.createElementNS(ft, "rect");
                i = i || 0,
                o = o || 0,
                L.setAttribute("x", "0"),
                L.setAttribute("y", "0"),
                L.setAttribute("fill", "#fff"),
                L.setAttribute("width", `${e.width + 100 + i}`),
                L.setAttribute("height", `${e.height + 100 + o}`),
                I.appendChild(L);
                const A = n.ownerDocument.createElementNS(ft, "rect")
                  , P = ce.getBoundTextElementPosition(e, b)
                  , O = i + P.x - e.x
                  , N = o + P.y - e.y;
                A.setAttribute("x", O.toString()),
                A.setAttribute("y", N.toString()),
                A.setAttribute("fill", "#000"),
                A.setAttribute("width", `${b.width}`),
                A.setAttribute("height", `${b.height}`),
                A.setAttribute("opacity", "1"),
                I.appendChild(A)
            }
            const S = n.ownerDocument.createElementNS(ft, "g");
            b && S.setAttribute("mask", `url(#mask-${e.id})`),
            S.setAttribute("stroke-linecap", "round"),
            We.generateElementShape(e).forEach(L=>{
                const A = vc(t, L, cc);
                y !== 1 && (A.setAttribute("stroke-opacity", `${y}`),
                A.setAttribute("fill-opacity", `${y}`)),
                A.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`),
                e.type === "line" && qo(e.points) && e.backgroundColor !== "transparent" && A.setAttribute("fill-rule", "evenodd"),
                S.appendChild(A)
            }
            );
            const T = yc(e, v, [S, I], a);
            T ? v.appendChild(T) : (v.appendChild(S),
            v.append(I));
            break
        }
    case "freedraw":
        {
            const b = We.generateElementShape(e)
              , I = b ? vc(t, b, cc) : n.ownerDocument.createElementNS(ft, "g");
            y !== 1 && (I.setAttribute("stroke-opacity", `${y}`),
            I.setAttribute("fill-opacity", `${y}`)),
            I.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`),
            I.setAttribute("stroke", "none");
            const S = n.ownerDocument.createElementNS(ft, "path");
            S.setAttribute("fill", e.strokeColor),
            S.setAttribute("d", oS(e)),
            I.appendChild(S);
            const C = yc(e, v, [I], a);
            C ? v.appendChild(C) : v.appendChild(I);
            break
        }
    case "image":
        {
            const b = Math.round(e.width)
              , I = Math.round(e.height)
              , S = At(e) && r[e.fileId];
            if (S) {
                const C = `image-${S.id}`;
                let T = n.querySelector(`#${C}`);
                if (!T) {
                    T = n.ownerDocument.createElementNS(ft, "symbol"),
                    T.id = C;
                    const O = n.ownerDocument.createElementNS(ft, "image");
                    O.setAttribute("width", "100%"),
                    O.setAttribute("height", "100%"),
                    O.setAttribute("href", S.dataURL),
                    T.appendChild(O),
                    v.prepend(T)
                }
                const L = n.ownerDocument.createElementNS(ft, "use");
                if (L.setAttribute("href", `#${C}`),
                s && S.mimeType !== ve.svg && L.setAttribute("filter", JI),
                L.setAttribute("width", `${b}`),
                L.setAttribute("height", `${I}`),
                L.setAttribute("opacity", `${y}`),
                e.scale[0] !== 1 || e.scale[1] !== 1) {
                    const O = e.scale[0] !== 1 ? -b : 0
                      , N = e.scale[1] !== 1 ? -I : 0;
                    L.setAttribute("transform", `scale(${e.scale[0]}, ${e.scale[1]}) translate(${O} ${N})`)
                }
                const A = n.ownerDocument.createElementNS(ft, "g");
                A.appendChild(L),
                A.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`);
                const P = yc(e, v, [A], a);
                P ? v.appendChild(P) : v.appendChild(A)
            }
            break
        }
    case "frame":
        break;
    default:
        if (ue(e)) {
            const b = n.ownerDocument.createElementNS(ft, "g");
            y !== 1 && (b.setAttribute("stroke-opacity", `${y}`),
            b.setAttribute("fill-opacity", `${y}`)),
            b.setAttribute("transform", `translate(${i || 0} ${o || 0}) rotate(${E} ${m} ${g})`);
            const I = e.text.replace(/\r\n?/g, `
`).split(`
`)
              , S = Td(e.fontSize, e.lineHeight)
              , C = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0
              , T = Ix(e.text) ? "rtl" : "ltr"
              , L = e.textAlign === "center" ? "middle" : e.textAlign === "right" || T === "rtl" ? "end" : "start";
            for (let P = 0; P < I.length; P++) {
                const O = n.ownerDocument.createElementNS(ft, "text");
                O.textContent = I[P],
                O.setAttribute("x", `${C}`),
                O.setAttribute("y", `${P * S}`),
                O.setAttribute("font-family", zv(e)),
                O.setAttribute("font-size", `${e.fontSize}px`),
                O.setAttribute("fill", e.strokeColor),
                O.setAttribute("text-anchor", L),
                O.setAttribute("style", "white-space: pre;"),
                O.setAttribute("direction", T),
                O.setAttribute("dominant-baseline", "text-before-edge"),
                b.appendChild(O)
            }
            const A = yc(e, v, [b], a);
            A ? v.appendChild(A) : v.appendChild(b)
        } else
            throw new Error(`Unimplemented type ${e.type}`)
    }
}
  , iS = new WeakMap([]);
function Ez(e) {
    const t = oS(e)
      , n = new Path2D(t);
    return iS.set(e, n),
    n
}
function wz(e) {
    return iS.get(e)
}
function oS(e) {
    const t = e.simulatePressure ? e.points : e.points.length ? e.points.map(([r,i],o)=>[r, i, e.pressures[o]]) : [[0, 0, .5]]
      , n = {
        simulatePressure: e.simulatePressure,
        size: e.strokeWidth * 4.25,
        thinning: .6,
        smoothing: .5,
        streamline: .5,
        easing: r=>Math.sin(r * Math.PI / 2),
        last: !!e.lastCommittedPoint
    };
    return _z(ZP(t, n))
}
function j6(e, t) {
    return [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2]
}
const bz = /(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;
function _z(e) {
    if (!e.length)
        return "";
    const t = e.length - 1;
    return e.reduce((n,r,i,o)=>(i === t ? n.push(r, j6(r, o[0]), "L", o[0], "Z") : n.push(r, j6(r, o[i + 1])),
    n), ["M", e[0], "Q"]).join(" ").replace(bz, "$1")
}
const xz = e=>[8, 8 + e]
  , sS = e=>[1.5, 6 + e]
  , er = (e,t=!1)=>{
    const n = {
        seed: e.seed,
        strokeLineDash: e.strokeStyle === "dashed" ? xz(e.strokeWidth) : e.strokeStyle === "dotted" ? sS(e.strokeWidth) : void 0,
        disableMultiStroke: e.strokeStyle !== "solid",
        strokeWidth: e.strokeStyle !== "solid" ? e.strokeWidth + .5 : e.strokeWidth,
        fillWeight: e.strokeWidth / 2,
        hachureGap: e.strokeWidth * 4,
        roughness: e.roughness,
        stroke: e.strokeColor,
        preserveVertices: t
    };
    switch (e.type) {
    case "rectangle":
    case "embeddable":
    case "diamond":
    case "ellipse":
        return n.fillStyle = e.fillStyle,
        n.fill = Ys(e.backgroundColor) ? void 0 : e.backgroundColor,
        e.type === "ellipse" && (n.curveFitting = 1),
        n;
    case "line":
    case "freedraw":
        return qo(e.points) && (n.fillStyle = e.fillStyle,
        n.fill = e.backgroundColor === "transparent" ? void 0 : e.backgroundColor),
        n;
    case "arrow":
        return n;
    default:
        throw new Error(`Unimplemented type ${e.type}`)
    }
}
  , Y6 = (e,t)=>e.type === "embeddable" && (t || !e.validated) && Ys(e.backgroundColor) && Ys(e.strokeColor) ? {
    ...e,
    roughness: 0,
    backgroundColor: "#d3d3d3",
    fillStyle: "solid"
} : e
  , Iz = (e,t,n=!1)=>{
    switch (e.type) {
    case "rectangle":
    case "embeddable":
        {
            let r;
            if (e.roundness) {
                const i = e.width
                  , o = e.height
                  , s = ru(Math.min(i, o), e);
                r = t.path(`M ${s} 0 L ${i - s} 0 Q ${i} 0, ${i} ${s} L ${i} ${o - s} Q ${i} ${o}, ${i - s} ${o} L ${s} ${o} Q 0 ${o}, 0 ${o - s} L 0 ${s} Q 0 0, ${s} 0`, er(Y6(e, n), !0))
            } else
                r = t.rectangle(0, 0, e.width, e.height, er(Y6(e, n), !1));
            return r
        }
    case "diamond":
        {
            let r;
            const [i,o,s,a,l,c,u,d] = kz(e);
            if (e.roundness) {
                const f = ru(Math.abs(i - u), e)
                  , h = ru(Math.abs(a - o), e);
                r = t.path(`M ${i + f} ${o + h} L ${s - f} ${a - h}
            C ${s} ${a}, ${s} ${a}, ${s - f} ${a + h}
            L ${l + f} ${c - h}
            C ${l} ${c}, ${l} ${c}, ${l - f} ${c - h}
            L ${u + f} ${d + h}
            C ${u} ${d}, ${u} ${d}, ${u + f} ${d - h}
            L ${i - f} ${o + h}
            C ${i} ${o}, ${i} ${o}, ${i + f} ${o + h}`, er(e, !0))
            } else
                r = t.polygon([[i, o], [s, a], [l, c], [u, d]], er(e));
            return r
        }
    case "ellipse":
        return t.ellipse(e.width / 2, e.height / 2, e.width, e.height, er(e));
    case "line":
    case "arrow":
        {
            let r;
            const i = er(e)
              , o = e.points.length ? e.points : [[0, 0]];
            if (e.roundness ? r = [t.curve(o, i)] : i.fill ? r = [t.polygon(o, i)] : r = [t.linearPath(o, i)],
            e.type === "arrow") {
                const {startArrowhead: s=null, endArrowhead: a="arrow"} = e
                  , l = (c,u,d,f)=>{
                    const h = Az(c, u, d, f);
                    if (h === null)
                        return [];
                    if (f === "dot") {
                        const [b,I,S] = h;
                        return [t.circle(b, I, S, {
                            ...i,
                            fill: c.strokeColor,
                            fillStyle: "solid",
                            stroke: "none"
                        })]
                    }
                    if (f === "triangle") {
                        const [b,I,S,C,T,L] = h;
                        return delete i.strokeLineDash,
                        [t.polygon([[b, I], [S, C], [T, L], [b, I]], {
                            ...i,
                            fill: c.strokeColor,
                            fillStyle: "solid"
                        })]
                    }
                    const [m,g,E,v,y,w] = h;
                    if (c.strokeStyle === "dotted") {
                        const b = sS(c.strokeWidth - 1);
                        i.strokeLineDash = [b[0], b[1] - 1]
                    } else
                        delete i.strokeLineDash;
                    return [t.line(E, v, m, g, i), t.line(y, w, m, g, i)]
                }
                ;
                if (s !== null) {
                    const c = l(e, r, "start", s);
                    r.push(...c)
                }
                if (a !== null) {
                    const c = l(e, r, "end", a);
                    r.push(...c)
                }
            }
            return r
        }
    case "freedraw":
        {
            let r;
            return Ez(e),
            qo(e.points) ? r = t.polygon(e.points, {
                ...er(e),
                stroke: "none"
            }) : r = null,
            r
        }
    case "frame":
    case "text":
    case "image":
        return null;
    default:
        return zh(e, `generateElementShape(): Unimplemented type ${e == null ? void 0 : e.type}`),
        null
    }
}
  , Sz = e=>{
    const t = e.map(r=>r[0])
      , n = e.map(r=>r[1]);
    return {
        width: Math.max(...t) - Math.min(...t),
        height: Math.max(...n) - Math.min(...n)
    }
}
  , xl = (e,t,n,r)=>{
    const i = n.map(h=>h[e])
      , o = Math.max(...i)
      , s = Math.min(...i)
      , a = o - s
      , l = a === 0 ? 1 : t / a;
    let c = 1 / 0;
    const u = n.map(h=>{
        const m = h[e] * l
          , g = [...h];
        return g[e] = m,
        m < c && (c = m),
        g
    }
    );
    if (!r || u.length === 2)
        return u;
    const d = s - c;
    return u.map(h=>h.map((m,g)=>g === e ? m + d : m))
}
  , Za = class Za {
    static getBounds(t) {
        const n = Za.boundsCache.get(t);
        if (n != null && n.version && n.version === t.version)
            return n.bounds;
        const r = Za.calculateBounds(t);
        return Za.boundsCache.set(t, {
            version: t.version,
            bounds: r
        }),
        r
    }
    static calculateBounds(t) {
        let n;
        const [r,i,o,s,a,l] = me(t);
        if (Gn(t)) {
            const [c,u,d,f] = Fy(t.points.map(([h,m])=>be(h, m, a - t.x, l - t.y, t.angle)));
            return [c + t.x, u + t.y, d + t.x, f + t.y]
        } else if (ye(t))
            n = Pz(t, a, l);
        else if (t.type === "diamond") {
            const [c,u] = be(a, i, a, l, t.angle)
              , [d,f] = be(a, s, a, l, t.angle)
              , [h,m] = be(r, l, a, l, t.angle)
              , [g,E] = be(o, l, a, l, t.angle)
              , v = Math.min(c, d, h, g)
              , y = Math.min(u, f, m, E)
              , w = Math.max(c, d, h, g)
              , b = Math.max(u, f, m, E);
            n = [v, y, w, b]
        } else if (t.type === "ellipse") {
            const c = (o - r) / 2
              , u = (s - i) / 2
              , d = Math.cos(t.angle)
              , f = Math.sin(t.angle)
              , h = Math.hypot(c * d, u * f)
              , m = Math.hypot(u * d, c * f);
            n = [a - h, l - m, a + h, l + m]
        } else {
            const [c,u] = be(r, i, a, l, t.angle)
              , [d,f] = be(r, s, a, l, t.angle)
              , [h,m] = be(o, s, a, l, t.angle)
              , [g,E] = be(o, i, a, l, t.angle)
              , v = Math.min(c, d, h, g)
              , y = Math.min(u, f, m, E)
              , w = Math.max(c, d, h, g)
              , b = Math.max(u, f, m, E);
            n = [v, y, w, b]
        }
        return n
    }
}
;
M(Za, "boundsCache", new WeakMap);
let Yg = Za;
const me = (e,t=!1)=>{
    if (Gn(e))
        return Mz(e);
    if (ye(e))
        return ce.getElementAbsoluteCoords(e, t);
    if (ue(e)) {
        const n = Lt(e);
        if (rt(n)) {
            const r = ce.getBoundTextElementPosition(n, e);
            return [r.x, r.y, r.x + e.width, r.y + e.height, r.x + e.width / 2, r.y + e.height / 2]
        }
    }
    return [e.x, e.y, e.x + e.width, e.y + e.height, e.x + e.width / 2, e.y + e.height / 2]
}
  , Z6 = e=>{
    const [t,n,r,i,o,s] = me(e)
      , a = [o, s];
    if (ye(e) || Gn(e)) {
        const E = [];
        let v = 0;
        for (; v < e.points.length - 1; )
            E.push([lt([e.points[v][0] + e.x, e.points[v][1] + e.y], a, e.angle), lt([e.points[v + 1][0] + e.x, e.points[v + 1][1] + e.y], a, e.angle)]),
            v++;
        return E
    }
    const [l,c,u,d,f,h,m,g] = [[t, n], [r, n], [t, i], [r, i], [o, n], [o, i], [t, s], [r, s]].map(E=>lt(E, a, e.angle));
    return e.type === "diamond" ? [[f, m], [f, g], [h, m], [h, g]] : e.type === "ellipse" ? [[f, m], [f, g], [h, m], [h, g], [f, m], [f, g], [h, m], [h, g]] : [[l, c], [u, d], [l, u], [c, d], [l, g], [u, g], [c, m], [d, m]]
}
  , Cz = e=>[e.x, e.y, e.x + e.width, e.y + e.height, e.x + e.width / 2, e.y + e.height / 2]
  , kz = e=>{
    const t = Math.floor(e.width / 2) + 1
      , n = 0
      , r = e.width
      , i = Math.floor(e.height / 2) + 1
      , o = t
      , s = e.height;
    return [t, n, r, i, o, s, 0, i]
}
  , ss = e=>{
    for (const t of e.sets)
        if (t.type === "path")
            return t.ops;
    return e.sets[0].ops
}
  , K6 = (e,t,n,r,i)=>{
    const o = 1 - e;
    return Math.pow(o, 3) * t + 3 * Math.pow(o, 2) * e * n + 3 * o * Math.pow(e, 2) * r + Math.pow(e, 3) * i
}
  , X6 = (e,t,n,r)=>{
    const i = t - e
      , o = n - t
      , s = r - n
      , a = 3 * i - 6 * o + 3 * s
      , l = 6 * o - 6 * i
      , c = 3 * i
      , u = l * l - 4 * a * c;
    if (!(u >= 0))
        return !1;
    let f = null
      , h = null
      , m = 1 / 0
      , g = 1 / 0;
    return a === 0 ? m = g = -c / l : (m = (-l + Math.sqrt(u)) / (2 * a),
    g = (-l - Math.sqrt(u)) / (2 * a)),
    m >= 0 && m <= 1 && (f = K6(m, e, t, n, r)),
    g >= 0 && g <= 1 && (h = K6(g, e, t, n, r)),
    [f, h]
}
  , Tz = (e,t,n,r)=>{
    const i = X6(e[0], t[0], n[0], r[0])
      , o = X6(e[1], t[1], n[1], r[1]);
    let s = Math.min(e[0], r[0])
      , a = Math.max(e[0], r[0]);
    if (i) {
        const u = i.filter(d=>d !== null);
        s = Math.min(s, ...u),
        a = Math.max(a, ...u)
    }
    let l = Math.min(e[1], r[1])
      , c = Math.max(e[1], r[1]);
    if (o) {
        const u = o.filter(d=>d !== null);
        l = Math.min(l, ...u),
        c = Math.max(c, ...u)
    }
    return [s, l, a, c]
}
  , g0 = (e,t)=>{
    let n = [0, 0];
    const {minX: r, minY: i, maxX: o, maxY: s} = e.reduce((a,{op: l, data: c})=>{
        if (l === "move")
            n = c;
        else if (l === "bcurveTo") {
            const u = [c[0], c[1]]
              , d = [c[2], c[3]]
              , f = [c[4], c[5]]
              , h = t ? t(...u) : u
              , m = t ? t(...d) : d
              , g = t ? t(...f) : f
              , E = t ? t(...n) : n;
            n = f;
            const [v,y,w,b] = Tz(E, h, m, g);
            a.minX = Math.min(a.minX, v),
            a.minY = Math.min(a.minY, y),
            a.maxX = Math.max(a.maxX, w),
            a.maxY = Math.max(a.maxY, b)
        }
        return a
    }
    , {
        minX: 1 / 0,
        minY: 1 / 0,
        maxX: -1 / 0,
        maxY: -1 / 0
    });
    return [r, i, o, s]
}
  , Fy = e=>{
    let t = 1 / 0
      , n = 1 / 0
      , r = -1 / 0
      , i = -1 / 0;
    for (const [o,s] of e)
        t = Math.min(t, o),
        n = Math.min(n, s),
        r = Math.max(r, o),
        i = Math.max(i, s);
    return [t, n, r, i]
}
  , Mz = e=>{
    const [t,n,r,i] = Fy(e.points)
      , o = t + e.x
      , s = n + e.y
      , a = r + e.x
      , l = i + e.y;
    return [o, s, a, l, (o + a) / 2, (s + l) / 2]
}
  , Az = (e,t,n,r)=>{
    const i = ss(t[0]);
    if (i.length < 1)
        return null;
    const o = n === "start" ? 1 : i.length - 1
      , s = i[o].data
      , a = [s[4], s[5]]
      , l = [s[2], s[3]]
      , c = [s[0], s[1]]
      , u = i[o - 1];
    let d = [0, 0];
    u.op === "move" ? d = u.data : u.op === "bcurveTo" && (d = [u.data[4], u.data[5]]);
    const f = ($,V)=>Math.pow(1 - $, 3) * a[V] + 3 * $ * Math.pow(1 - $, 2) * l[V] + 3 * Math.pow($, 2) * (1 - $) * c[V] + d[V] * Math.pow($, 3)
      , [h,m] = n === "start" ? d : a
      , [g,E] = [f(.3, 0), f(.3, 1)]
      , v = Math.hypot(h - g, m - E)
      , y = (h - g) / v
      , w = (m - E) / v
      , b = {
        arrow: 30,
        bar: 15,
        dot: 15,
        triangle: 15
    }[r];
    let I = 0;
    if (r === "arrow") {
        const [$,V] = e.points[e.points.length - 1]
          , [te,Z] = e.points.length > 1 ? e.points[e.points.length - 2] : [0, 0];
        I = Math.hypot($ - te, V - Z)
    } else
        for (let $ = 0; $ < e.points.length; $++) {
            const [V,te] = e.points[$ - 1] || [0, 0]
              , [Z,z] = e.points[$];
            I += Math.hypot(Z - V, z - te)
        }
    const S = Math.min(b, I / 2)
      , C = h - y * S
      , T = m - w * S;
    if (r === "dot") {
        const $ = Math.hypot(T - m, C - h) + e.strokeWidth;
        return [h, m, $]
    }
    const L = {
        arrow: 20,
        bar: 90,
        triangle: 25
    }[r]
      , [A,P] = be(C, T, h, m, -L * Math.PI / 180)
      , [O,N] = be(C, T, h, m, L * Math.PI / 180);
    return [h, m, A, P, O, N]
}
  , Lz = e=>{
    const t = is.generator()
      , n = er(e)
      , r = (()=>e.roundness ? "curve" : n.fill ? "polygon" : "linearPath")();
    return t[r](e.points, n)
}
  , Pz = (e,t,n)=>{
    var u;
    if (e.points.length < 2) {
        const [d,f] = e.points[0]
          , [h,m] = be(e.x + d, e.y + f, t, n, e.angle);
        let g = [h, m, h, m];
        const E = Ae(e);
        if (E) {
            const v = ce.getMinMaxXYWithBoundText(e, [h, m, h, m], E);
            g = [v[0], v[1], v[2], v[3]]
        }
        return g
    }
    const i = ((u = We.get(e)) == null ? void 0 : u[0]) ?? Lz(e)
      , o = ss(i)
      , a = g0(o, (d,f)=>be(e.x + d, e.y + f, t, n, e.angle));
    let l = [a[0], a[1], a[2], a[3]];
    const c = Ae(e);
    if (c) {
        const d = ce.getMinMaxXYWithBoundText(e, l, c);
        l = [d[0], d[1], d[2], d[3]]
    }
    return l
}
  , Il = e=>Yg.getBounds(e)
  , mt = e=>{
    if (!e.length)
        return [0, 0, 0, 0];
    let t = 1 / 0
      , n = -1 / 0
      , r = 1 / 0
      , i = -1 / 0;
    return e.forEach(o=>{
        const [s,a,l,c] = Il(o);
        t = Math.min(t, s),
        r = Math.min(r, a),
        n = Math.max(n, l),
        i = Math.max(i, c)
    }
    ),
    [t, r, n, i]
}
  , $y = (e,t)=>{
    const [n,r,i,o] = mt(e);
    return [n + t.x, r + t.y, i + t.x, o + t.y]
}
  , nu = (e,t,n,r)=>{
    if (!(ye(e) || Gn(e)))
        return [e.x, e.y, e.x + t, e.y + n];
    const i = xl(0, t, xl(1, n, e.points, r), r);
    let o;
    if (Gn(e))
        o = Fy(i);
    else {
        const u = is.generator()
          , d = e.roundness ? u.curve(i, er(e)) : u.linearPath(i, er(e))
          , f = ss(d);
        o = g0(f)
    }
    const [s,a,l,c] = o;
    return [s + e.x, a + e.y, l + e.x, c + e.y]
}
  , s1 = (e,t)=>{
    const n = is.generator()
      , r = e.roundness == null ? n.linearPath(t, er(e)) : n.curve(t, er(e))
      , i = ss(r)
      , [o,s,a,l] = g0(i);
    return [o + e.x, s + e.y, a + e.x, l + e.y]
}
  , Rz = (e,t)=>{
    if (!e.length)
        return [0, 0, 0, 0];
    let n = 1 / 0
      , r = e[0];
    return e.forEach(i=>{
        const [o,s,a,l] = Il(i)
          , c = wt((o + a) / 2, (s + l) / 2, t.x, t.y);
        c < n && (n = c,
        r = i)
    }
    ),
    Il(r)
}
  , Bi = e=>{
    const [t,n,r,i] = mt(e);
    return {
        minX: t,
        minY: n,
        maxX: r,
        maxY: i,
        width: r - t,
        height: i - n,
        midX: (t + r) / 2,
        midY: (n + i) / 2
    }
}
  , be = (e,t,n,r,i)=>[(e - n) * Math.cos(i) - (t - r) * Math.sin(i) + n, (e - n) * Math.sin(i) + (t - r) * Math.cos(i) + r]
  , lt = (e,t,n)=>be(e[0], e[1], t[0], t[1], n)
  , aS = (e,t,n,r,i,o,s,a)=>{
    const l = Math.cos(r)
      , c = Math.sin(r);
    return e.e && e.w ? t += i + s : e.e ? (t += i * (1 + l),
    n += i * c,
    t += s * (1 - l),
    n += s * -c) : e.w && (t += i * (1 - l),
    n += i * -c,
    t += s * (1 + l),
    n += s * c),
    e.n && e.s ? n += o + a : e.n ? (t += o * c,
    n += o * (1 - l),
    t += a * -c,
    n += a * (1 + l)) : e.s && (t += o * -c,
    n += o * (1 + l),
    t += a * c,
    n += a * (1 - l)),
    [t, n]
}
  , wt = (e,t,n,r)=>{
    const i = n - e
      , o = r - t;
    return Math.hypot(i, o)
}
  , Zg = (e,t)=>[(e[0] + t[0]) / 2, (e[1] + t[1]) / 2]
  , qo = (e,t=1)=>{
    if (e.length >= 3) {
        const [n,r] = [e[0], e[e.length - 1]];
        return wt(n[0], n[1], r[0], r[1]) <= Gf / t
    }
    return !1
}
  , q6 = (e,t,n)=>{
    const r = e.length;
    if (r < 3)
        return !1;
    const i = [Number.MAX_SAFE_INTEGER, n]
      , o = [t, n];
    let s = 0;
    for (let a = 0; a < r; a++) {
        const l = e[a]
          , c = e[(a + 1) % r];
        if (Oz(l, c, o, i)) {
            if (Oc(l, o, c) === 0)
                return ja(l, o, c);
            s++
        }
    }
    return s % 2 === 1
}
  , ja = (e,t,n)=>t[0] <= Math.max(e[0], n[0]) && t[0] >= Math.min(e[0], n[0]) && t[1] <= Math.max(e[1], n[1]) && t[1] >= Math.min(e[1], n[1])
  , Oc = (e,t,n)=>{
    const r = (t[1] - e[1]) * (n[0] - t[0]) - (t[0] - e[0]) * (n[1] - t[1]);
    return r === 0 ? 0 : r > 0 ? 1 : 2
}
  , Oz = (e,t,n,r)=>{
    const i = Oc(e, t, n)
      , o = Oc(e, t, r)
      , s = Oc(n, r, e)
      , a = Oc(n, r, t);
    return !!(i !== o && s !== a || i === 0 && ja(e, n, t) || o === 0 && ja(e, r, t) || s === 0 && ja(n, e, r) || a === 0 && ja(n, t, r))
}
  , en = (e,t,n)=>n ? [Math.round(e / n) * n, Math.round(t / n) * n] : [e, t]
  , ru = (e,t)=>{
    var n, r, i, o;
    if (((n = t.roundness) == null ? void 0 : n.type) === zt.PROPORTIONAL_RADIUS || ((r = t.roundness) == null ? void 0 : r.type) === zt.LEGACY)
        return e * cp;
    if (((i = t.roundness) == null ? void 0 : i.type) === zt.ADAPTIVE_RADIUS) {
        const s = ((o = t.roundness) == null ? void 0 : o.value) ?? wL
          , a = s / cp;
        return e <= a ? e * cp : s
    }
    return 0
}
  , lS = (e,t)=>{
    const n = We.generateElementShape(e);
    if (!n)
        return null;
    const r = ss(n[0]);
    let i = [0, 0]
      , o = 0
      , s = 1 / 0
      , a = null;
    for (; o < r.length; ) {
        const {op: l, data: c} = r[o];
        if (l === "move" && (i = c),
        l === "bcurveTo") {
            const u = i
              , d = [c[0], c[1]]
              , f = [c[2], c[3]]
              , h = [c[4], c[5]]
              , m = wt(h[0], h[1], t[0], t[1]);
            m < s && (s = m,
            a = [u, d, f, h]),
            i = h
        }
        o++
    }
    return a
}
  , cS = (e,t,n,r,i)=>{
    const o = (l,c)=>Math.pow(1 - l, 3) * r[c] + 3 * l * Math.pow(1 - l, 2) * n[c] + 3 * Math.pow(l, 2) * (1 - l) * t[c] + e[c] * Math.pow(l, 3)
      , s = o(i, 0)
      , a = o(i, 1);
    return [s, a]
}
  , Dz = (e,t)=>{
    const n = lS(e, t);
    if (!n)
        return [];
    const r = [];
    let i = 1;
    for (; i > 0; ) {
        const o = cS(n[0], n[1], n[2], n[3], i);
        r.push([o[0], o[1]]),
        i -= .05
    }
    return r.length && dS(r.at(-1), t) && r.push([t[0], t[1]]),
    r
}
  , uS = (e,t)=>{
    const n = [];
    n[0] = 0;
    const r = Dz(e, t);
    let i = 0
      , o = 0;
    for (; i < r.length - 1; ) {
        const s = wt(r[i][0], r[i][1], r[i + 1][0], r[i + 1][1]);
        o += s,
        n.push(o),
        i++
    }
    return n
}
  , Nz = (e,t)=>uS(e, t).at(-1)
  , Fz = (e,t,n)=>{
    const r = uS(e, t)
      , i = r.length - 1
      , o = r.at(-1)
      , s = n * o;
    let a = 0
      , l = i
      , c = 0;
    for (; a < l; )
        c = Math.floor(a + (l - a) / 2),
        r[c] < s ? a = c + 1 : l = c;
    return r[c] > s && c--,
    r[c] === s ? c / i : 1 - (c + (s - r[c]) / (r[c + 1] - r[c])) / i
}
  , dS = (e,t)=>e[0] === t[0] && e[1] === t[1]
  , $z = e=>Math.round(e / Math.PI * 1e4) % 5e3 === 0
  , a1 = ([e,t],[n,r])=>e <= n ? t >= n : e >= n ? r >= e : !1
  , l1 = (e,t)=>{
    const n = Math.max(e[0], t[0])
      , r = Math.min(e[1], t[1]);
    return n <= r ? [n, r] : null
}
  , Bz = e=>!e.frameId
  , fS = (e,t,n)=>{
    let r = []
      , i = []
      , o = null
      , s = -1;
    const a = Rt(n || it(e, t, {
        includeBoundTextElement: !0
    }));
    for (; ++s < e.length; ) {
        const l = e[s];
        a.get(l.id) ? (i.length && (r = r.concat(i),
        i = []),
        r.push(s),
        o = s + 1) : l.isDeleted && o === s ? (o = s + 1,
        i.push(s)) : i = []
    }
    return r
}
  , zz = e=>{
    let t = 0;
    return e.reduce((n,r,i)=>(i > 0 && e[i - 1] !== r - 1 && (t = ++t),
    (n[t] || (n[t] = [])).push(r),
    n), [])
}
  , Q6 = (e,t,n)=>{
    var r, i;
    if ("containerId"in e && e.containerId)
        if (n === "left") {
            const o = Fe.getScene(e).getElement(e.containerId);
            if (o)
                return t.indexOf(o)
        } else
            return t.indexOf(e);
    else {
        const o = (i = (r = e.boundElements) == null ? void 0 : r.find(s=>s.type !== "arrow")) == null ? void 0 : i.id;
        if (o) {
            if (n === "left")
                return t.indexOf(e);
            const s = Fe.getScene(e).getElement(o);
            if (s)
                return t.indexOf(s)
        }
    }
}
  , Hz = (e,t,n,r)=>{
    const i = t[n]
      , o = u=>u.isDeleted ? !1 : e.editingGroupId ? u.groupIds.includes(e.editingGroupId) : !0
      , s = r === "left" ? YL(t, o, Math.max(0, n - 1)) : jL(t, o, n + 1)
      , a = t[s];
    if (!a)
        return -1;
    if (e.editingGroupId) {
        if ((i == null ? void 0 : i.groupIds.join("")) === (a == null ? void 0 : a.groupIds.join("")))
            return Q6(a, t, r) ?? s;
        if (!(a != null && a.groupIds.includes(e.editingGroupId)))
            return -1
    }
    if (!a.groupIds.length)
        return Q6(a, t, r) ?? s;
    const l = e.editingGroupId ? a.groupIds[a.groupIds.indexOf(e.editingGroupId) - 1] : a.groupIds[a.groupIds.length - 1]
      , c = Ft(t, l);
    return c.length ? r === "left" ? t.indexOf(c[0]) : t.indexOf(c[c.length - 1]) : s
}
  , hS = (e,t)=>t.reduce((n,r)=>{
    const i = e[r];
    return n[i.id] = i,
    n
}
, {})
  , Uz = (e,t,n,r)=>{
    const i = fS(e, t, r)
      , o = hS(e, i);
    let s = zz(i);
    return n === "right" && (s = s.reverse()),
    s.forEach((a,l)=>{
        const c = a[0]
          , u = a[a.length - 1]
          , d = n === "left" ? c : u
          , f = Hz(t, e, d, n);
        if (f === -1 || d === f)
            return;
        const h = n === "left" ? e.slice(0, f) : e.slice(0, c)
          , m = e.slice(c, u + 1)
          , g = n === "left" ? e.slice(f, c) : e.slice(u + 1, f + 1)
          , E = n === "left" ? e.slice(u + 1) : e.slice(f + 1);
        e = n === "left" ? [...h, ...m, ...g, ...E] : [...h, ...g, ...m, ...E]
    }
    ),
    e.map(a=>o[a.id] ? Wl(a) : a)
}
  , pS = (e,t,n,r)=>gS(t, e, n, Uz, r)
  , Vz = (e,t,n)=>{
    const r = fS(e, t)
      , i = hS(e, r)
      , o = [];
    let s, a;
    if (n === "left") {
        if (t.editingGroupId) {
            const d = Ft(e, t.editingGroupId);
            if (!d.length)
                return e;
            s = e.indexOf(d[0])
        } else
            s = 0;
        a = r[r.length - 1]
    } else {
        if (t.editingGroupId) {
            const d = Ft(e, t.editingGroupId);
            if (!d.length)
                return e;
            a = e.indexOf(d[d.length - 1])
        } else
            a = e.length - 1;
        s = r[0]
    }
    for (let d = s; d < a + 1; d++)
        r.includes(d) || o.push(e[d]);
    const l = Object.values(i).map(d=>Wl(d))
      , c = e.slice(0, s)
      , u = e.slice(a + 1);
    return n === "left" ? [...c, ...l, ...o, ...u] : [...c, ...o, ...l, ...u]
}
  , mS = (e,t,n,r)=>gS(e, t, n, Vz, r);
function gS(e, t, n, r, i) {
    const o = Rt(e)
      , s = _S(e);
    let a = e.filter(c=>Bz(c) || c.frameId && !o.has(c.frameId));
    for (const c of s.keys())
        o.has(c) || s.delete(c);
    a = r(a, t, n, i),
    s.forEach((c,u)=>{
        t.selectedElementIds[u] || s.set(u, r(c, t, n, i))
    }
    );
    let l = [];
    return a.forEach(c=>{
        cn(c) ? l = [...l, ...s.get(c.id) ?? [], c] : l = [...l, c]
    }
    ),
    l
}
const Wz = (e,t,n)=>pS(t, e, "left", n)
  , vS = (e,t,n)=>pS(t, e, "right", n)
  , Gz = (e,t,n)=>mS(e, t, "left", n)
  , jz = (e,t,n)=>mS(e, t, "right", n)
  , yS = (e,t,n)=>{
    const r = Rt(e);
    for (const i of t)
        if (i.frameId) {
            const o = n.get(i.id)
              , s = n.get(i.frameId);
            if (o) {
                const a = r.get(o);
                a && Q(a, {
                    frameId: s ?? i.frameId
                }, !1)
            }
        }
}
;
class Qn {
    constructor(t, n) {
        M(this, "x");
        M(this, "y");
        this.x = t,
        this.y = n
    }
}
class wf {
    constructor(t, n) {
        M(this, "first");
        M(this, "second");
        this.first = t,
        this.second = n
    }
    getBoundingBox() {
        return [new Qn(Math.min(this.first.x, this.second.x),Math.min(this.first.y, this.second.y)), new Qn(Math.max(this.first.x, this.second.x),Math.max(this.first.y, this.second.y))]
    }
}
class By {
    static crossProduct(t, n) {
        return t.x * n.y - n.x * t.y
    }
    static doBoundingBoxesIntersect(t, n) {
        return t[0].x <= n[1].x && t[1].x >= n[0].x && t[0].y <= n[1].y && t[1].y >= n[0].y
    }
    static isPointOnLine(t, n) {
        const r = new wf(new Qn(0,0),new Qn(t.second.x - t.first.x,t.second.y - t.first.y))
          , i = new Qn(n.x - t.first.x,n.y - t.first.y)
          , o = this.crossProduct(r.second, i);
        return Math.abs(o) < this.EPSILON
    }
    static isPointRightOfLine(t, n) {
        const r = new wf(new Qn(0,0),new Qn(t.second.x - t.first.x,t.second.y - t.first.y))
          , i = new Qn(n.x - t.first.x,n.y - t.first.y);
        return this.crossProduct(r.second, i) < 0
    }
    static lineSegmentTouchesOrCrossesLine(t, n) {
        return this.isPointOnLine(t, n.first) || this.isPointOnLine(t, n.second) || (this.isPointRightOfLine(t, n.first) ? !this.isPointRightOfLine(t, n.second) : this.isPointRightOfLine(t, n.second))
    }
    static doLineSegmentsIntersect(t, n) {
        const r = new wf(new Qn(t[0][0],t[0][1]),new Qn(t[1][0],t[1][1]))
          , i = new wf(new Qn(n[0][0],n[0][1]),new Qn(n[1][0],n[1][1]))
          , o = r.getBoundingBox()
          , s = i.getBoundingBox();
        return this.doBoundingBoxesIntersect(o, s) && this.lineSegmentTouchesOrCrossesLine(r, i) && this.lineSegmentTouchesOrCrossesLine(i, r)
    }
    static isElementIntersectingFrame(t, n) {
        const r = Z6(n)
          , i = Z6(t);
        return r.some(s=>i.some(a=>this.doLineSegmentsIntersect(s, a)))
    }
}
M(By, "EPSILON", 1e-6);
const ES = (e,t)=>zy(Hy(e, t, !1)).filter(n=>n.type !== "frame" && !n.frameId || n.frameId === t.id)
  , wS = (e,t,n)=>Hy(e, t).some(r=>r.id === n.id)
  , bS = (e,t)=>{
    const [n,r,i,o] = me(t)
      , [s,a,l,c] = mt(e);
    return n <= s && r <= a && i >= l && o >= c
}
  , Xu = (e,t)=>bS([e], t) || By.isElementIntersectingFrame(e, t) || wS([t], e, t)
  , J6 = (e,t)=>{
    const [n,r,i,o] = me(t);
    return ja([n, r], [e.x, e.y], [i, o])
}
  , _S = e=>{
    const t = new Map;
    for (const n of e) {
        const r = cn(n) ? n.id : n.frameId;
        r && !t.has(r) && t.set(r, Rr(e, r))
    }
    return t
}
  , Rr = (e,t)=>e.filter(n=>n.frameId === t)
  , rh = (e,t,n)=>{
    const r = Rr(e, t.id)
      , i = new Set(r)
      , o = new Set([...ES(e, t), ...r.filter(d=>wS(e, d, t))])
      , s = r.filter(d=>!o.has(d))
      , a = new Set(Array.from(o).flatMap(d=>d.groupIds));
    for (const d of s)
        if (!By.isElementIntersectingFrame(d, t))
            d.groupIds.length === 0 && i.delete(d);
        else if (d.groupIds.length > 0)
            for (const f of d.groupIds)
                a.add(f);
    for (const d of s)
        if (d.groupIds.length > 0) {
            let f = !0;
            for (const h of d.groupIds)
                a.has(h) && (f = !1);
            f && i.delete(d)
        }
    const l = Array.from(o).filter(d=>d.groupIds.length === 0);
    for (const d of l)
        i.add(d);
    const c = Array.from(o).filter(d=>d.groupIds.length > 0)
      , u = Jx(c, n);
    for (const [d,f] of Object.entries(u))
        if (f) {
            const h = Ft(e, d);
            if (bS(h, t))
                for (const m of h)
                    i.add(m)
        }
    return [...i].filter(d=>!(ue(d) && d.containerId))
}
  , Yz = (e,t)=>zy(e, ES(e, t))
  , dr = (e,t)=>{
    var n;
    return e.frameId ? t ? t.get(e.frameId) || null : ((n = Fe.getScene(e)) == null ? void 0 : n.getElement(e.frameId)) || null : null
}
  , Kg = (e,t,n)=>{
    const {allElementsIndexMap: r, currTargetFrameChildrenMap: i} = e.reduce((u,d,f)=>(u.allElementsIndexMap.set(d.id, f),
    d.frameId === n.id && u.currTargetFrameChildrenMap.set(d.id, !0),
    u), {
        allElementsIndexMap: new Map,
        currTargetFrameChildrenMap: new Map
    })
      , o = new Set(t.map(u=>u.id))
      , s = [];
    for (const u of zy(e, t)) {
        i.has(u.id) || s.push(u);
        const d = Ae(u);
        d && !o.has(d.id) && !i.has(d.id) && s.push(d)
    }
    const a = new Set(s.map(u=>u.id))
      , l = []
      , c = new Set;
    for (const u of e)
        if (!c.has(u.id) && (c.add(u.id),
        !(a.has(u.id) || u.frameId && u.frameId === n.id))) {
            if (u.id === n.id) {
                const d = Rr(e, n.id);
                d.forEach(g=>{
                    c.add(g.id)
                }
                );
                const f = r.get(n.id) ?? -1
                  , {newChildren_left: h, newChildren_right: m} = s.reduce((g,E)=>((r.get(E.id) ?? 1 / 0) < f ? g.newChildren_left.push(E) : g.newChildren_right.push(E),
                g), {
                    newChildren_left: [],
                    newChildren_right: []
                });
                l.push(...h, ...d, ...m, u);
                continue
            }
            l.push(u)
        }
    for (const u of s)
        Q(u, {
            frameId: n.id
        }, !1);
    return l
}
  , v0 = (e,t,n)=>{
    const r = [];
    for (const o of t)
        if (o.frameId) {
            r.push(o);
            const s = Ae(o);
            s && r.push(s)
        }
    for (const o of r)
        Q(o, {
            frameId: null
        }, !1);
    return vS(e, n, Array.from(r))
}
  , xS = (e,t,n)=>{
    const r = Rr(e, t.id);
    return v0(e, r, n)
}
  , IS = (e,t,n,r)=>Kg(xS(e, n, r), t, n)
  , Sl = (e,t,n)=>{
    const r = n.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        elements: e
    })
      , i = new Set(r);
    if (t.editingGroupId)
        for (const s of r)
            s.groupIds.length === 0 ? i.add(s) : s.groupIds.flatMap(a=>Ft(e, a)).forEach(a=>i.add(a));
    const o = new Set;
    return i.forEach(s=>{
        s.frameId && !cn(s) && !qu(s, e, t) && o.add(s)
    }
    ),
    o.size > 0 ? v0(e, [...o], t) : e
}
  , zy = (e,t)=>{
    const n = new Set;
    for (const i of t || e) {
        const o = i.groupIds[i.groupIds.length - 1];
        o && n.add(o)
    }
    const r = new Set;
    for (const i of n)
        Ft(e, i).some(o=>cn(o)) && r.add(i);
    return (t || e).filter(i=>!r.has(i.groupIds[i.groupIds.length - 1]))
}
  , Xg = (e,t)=>{
    const n = ue(e) && Lt(e) || e;
    return t.selectedElementIds[n.id] && t.selectedElementsAreBeingDragged ? t.frameToHighlight : dr(n)
}
  , qu = (e,t,n)=>{
    const r = Xg(e, n)
      , i = ue(e) && Lt(e) || e;
    if (r) {
        if (!n.selectedElementIds[e.id] || !n.selectedElementsAreBeingDragged)
            return !0;
        if (i.groupIds.length === 0)
            return Xu(i, r);
        const o = new Set(i.groupIds.flatMap(s=>Ft(t, s)));
        if (n.editingGroupId && n.selectedElementsAreBeingDragged) {
            const s = new Set(it(t, n));
            if (n.frameToHighlight !== null)
                return !0;
            s.forEach(l=>{
                o.delete(l)
            }
            )
        }
        for (const s of o)
            if (cn(s))
                return !1;
        for (const s of o)
            if (Xu(s, r))
                return !0
    }
    return !1
}
  , y0 = e=>{
    const t = new Set;
    return e.forEach(n=>{
        n.type === "frame" && t.add(n.id)
    }
    ),
    e.filter(n=>!(n.frameId && t.has(n.frameId)))
}
  , Hy = (e,t,n=!0)=>{
    const [r,i,o,s] = me(t);
    let a = e.filter(l=>{
        let[c,u,d,f] = Il(l);
        const h = dr(l);
        if (h) {
            const [m,g,E,v] = Il(h);
            c = Math.max(m, c),
            u = Math.max(g, u),
            d = Math.min(E, d),
            f = Math.min(v, f)
        }
        return l.locked === !1 && l.type !== "selection" && !_t(l) && r <= c && i <= u && o >= d && s >= f
    }
    );
    return a = n ? y0(a) : a,
    a = a.filter(l=>{
        const c = dr(l);
        return c ? Xu(l, c) : !0
    }
    ),
    a
}
  , SS = (e,t,n)=>{
    const r = new Set(t.map(i=>i.id));
    return e.filter(i=>{
        const o = c1(i, n.width, n.height, n);
        return !r.has(i.id) && o
    }
    )
}
  , Pt = function() {
    let e = null
      , t = null
      , n = null;
    const r = (i,o)=>(n != null && i === e && o.selectedElementIds === t || (n = i.some(s=>o.selectedElementIds[s.id]),
    e = i,
    t = o.selectedElementIds),
    n);
    return r.clearCache = ()=>{
        e = null,
        t = null,
        n = null
    }
    ,
    r
}()
  , Zz = (e,t,n)=>{
    const r = Array.from(new Set(it(e, t).map(i=>n(i))));
    return r.length === 1 ? r[0] : null
}
  , it = (e,t,n)=>{
    const r = e.filter(i=>t.selectedElementIds[i.id] || n != null && n.includeBoundTextElement && _t(i) && t.selectedElementIds[i == null ? void 0 : i.containerId] ? i : null);
    if (n != null && n.includeElementsInFrames) {
        const i = [];
        return r.forEach(o=>{
            o.type === "frame" && Rr(e, o.id).forEach(s=>i.push(s)),
            i.push(o)
        }
        ),
        i
    }
    return r
}
  , Uy = (e,t)=>t.editingElement ? [t.editingElement] : it(e, t, {
    includeBoundTextElement: !0
})
  , Oe = (e,t)=>Tr(t.selectedElementIds, e) ? t.selectedElementIds : e
  , Kz = e=>{
    const t = ["includeBoundTextElement", "includeElementsInFrames"];
    let n = "";
    for (const r of t)
        n += `${r}:${e[r] ? "1" : "0"}`;
    return n
}
  , eb = e=>typeof e == "string"
  , bs = class bs {
    constructor() {
        M(this, "callbacks", new Set);
        M(this, "nonDeletedElements", []);
        M(this, "elements", []);
        M(this, "nonDeletedFrames", []);
        M(this, "frames", []);
        M(this, "elementsMap", new Map);
        M(this, "selectedElementsCache", {
            selectedElementIds: null,
            elements: null,
            cache: new Map
        });
        M(this, "versionNonce");
        M(this, "addNewElement", t=>{
            t.frameId ? this.insertElementAtIndex(t, this.getElementIndex(t.frameId)) : this.replaceAllElements([...this.elements, t])
        }
        )
    }
    static mapElementToScene(t, n) {
        eb(t) ? this.sceneMapById.set(t, n) : (this.sceneMapByElement.set(t, n),
        this.sceneMapById.set(t.id, n))
    }
    static getScene(t) {
        return eb(t) ? this.sceneMapById.get(t) || null : this.sceneMapByElement.get(t) || null
    }
    getElementsIncludingDeleted() {
        return this.elements
    }
    getNonDeletedElements() {
        return this.nonDeletedElements
    }
    getFramesIncludingDeleted() {
        return this.frames
    }
    getSelectedElements(t) {
        const n = Kz(t)
          , r = (t == null ? void 0 : t.elements) || this.nonDeletedElements;
        if (this.selectedElementsCache.elements === r && this.selectedElementsCache.selectedElementIds === t.selectedElementIds) {
            const o = this.selectedElementsCache.cache.get(n);
            if (o)
                return o
        } else
            (t == null ? void 0 : t.elements) == null && this.selectedElementsCache.cache.clear();
        const i = it(r, {
            selectedElementIds: t.selectedElementIds
        }, t);
        return (t == null ? void 0 : t.elements) == null && (this.selectedElementsCache.selectedElementIds = t.selectedElementIds,
        this.selectedElementsCache.elements = this.nonDeletedElements,
        this.selectedElementsCache.cache.set(n, i)),
        i
    }
    getNonDeletedFrames() {
        return this.nonDeletedFrames
    }
    getElement(t) {
        return this.elementsMap.get(t) || null
    }
    getVersionNonce() {
        return this.versionNonce
    }
    getNonDeletedElement(t) {
        const n = this.getElement(t);
        return n && e2(n) ? n : null
    }
    mapElements(t) {
        let n = !1;
        const r = this.elements.map(i=>{
            const o = t(i);
            return o !== i && (n = !0),
            o
        }
        );
        return n && this.replaceAllElements(r),
        n
    }
    replaceAllElements(t) {
        this.elements = t;
        const n = [];
        this.elementsMap.clear(),
        t.forEach(r=>{
            cn(r) && n.push(r),
            this.elementsMap.set(r.id, r),
            bs.mapElementToScene(r, this)
        }
        ),
        this.nonDeletedElements = Pe(this.elements),
        this.frames = n,
        this.nonDeletedFrames = uH(this.frames),
        this.informMutation()
    }
    informMutation() {
        this.versionNonce = os();
        for (const t of Array.from(this.callbacks))
            t()
    }
    addCallback(t) {
        if (this.callbacks.has(t))
            throw new Error;
        return this.callbacks.add(t),
        ()=>{
            if (!this.callbacks.has(t))
                throw new Error;
            this.callbacks.delete(t)
        }
    }
    destroy() {
        this.nonDeletedElements = [],
        this.elements = [],
        this.nonDeletedFrames = [],
        this.frames = [],
        this.elementsMap.clear(),
        this.selectedElementsCache.selectedElementIds = null,
        this.selectedElementsCache.elements = null,
        this.selectedElementsCache.cache.clear(),
        bs.sceneMapById.forEach((t,n)=>{
            t === this && bs.sceneMapById.delete(n)
        }
        ),
        this.callbacks.clear()
    }
    insertElementAtIndex(t, n) {
        if (!Number.isFinite(n) || n < 0)
            throw new Error("insertElementAtIndex can only be called with index >= 0");
        const r = [...this.elements.slice(0, n), t, ...this.elements.slice(n)];
        this.replaceAllElements(r)
    }
    insertElementsAtIndex(t, n) {
        if (!Number.isFinite(n) || n < 0)
            throw new Error("insertElementAtIndex can only be called with index >= 0");
        const r = [...this.elements.slice(0, n), ...t, ...this.elements.slice(n)];
        this.replaceAllElements(r)
    }
    getElementIndex(t) {
        return this.elements.findIndex(n=>n.id === t)
    }
}
;
M(bs, "sceneMapByElement", new WeakMap),
M(bs, "sceneMapById", new Map);
let qg = bs;
const Fe = qg
  , Q = (e,t,n=!0)=>{
    var s;
    let r = !1;
    const {points: i, fileId: o} = t;
    typeof i < "u" && (t = {
        ...Sz(i),
        ...t
    });
    for (const a in t) {
        const l = t[a];
        if (typeof l < "u") {
            if (e[a] === l && (typeof l != "object" || l === null || a === "groupIds" || a === "scale"))
                continue;
            if (a === "scale") {
                const c = e[a]
                  , u = l;
                if (c[0] === u[0] && c[1] === u[1])
                    continue
            } else if (a === "points") {
                const c = e[a]
                  , u = l;
                if (c.length === u.length) {
                    let d = !1
                      , f = c.length;
                    for (; --f; ) {
                        const h = c[f]
                          , m = u[f];
                        if (h[0] !== m[0] || h[1] !== m[1]) {
                            d = !0;
                            break
                        }
                    }
                    if (!d)
                        continue
                }
            }
            e[a] = l,
            r = !0
        }
    }
    return r && ((typeof t.height < "u" || typeof t.width < "u" || typeof o < "u" || typeof i < "u") && We.delete(e),
    e.version++,
    e.versionNonce = os(),
    e.updated = Dl(),
    n && ((s = Fe.getScene(e)) == null || s.informMutation())),
    e
}
  , fe = (e,t)=>{
    let n = !1;
    for (const r in t) {
        const i = t[r];
        if (typeof i < "u") {
            if (e[r] === i && (typeof i != "object" || i === null))
                continue;
            n = !0
        }
    }
    return n ? {
        ...e,
        ...t,
        updated: Dl(),
        version: e.version + 1,
        versionNonce: os()
    } : e
}
  , Wl = (e,t)=>(e.version = (t ?? e.version) + 1,
e.versionNonce = os(),
e.updated = Dl(),
e)
  , ta = e=>ye(e) || Gn(e) ? e.points.length < 2 : e.width === 0 && e.height === 0
  , c1 = (e,t,n,r)=>{
    const [i,o,s,a] = Il(e)
      , l = Ke({
        clientX: r.offsetLeft,
        clientY: r.offsetTop
    }, r)
      , c = Ke({
        clientX: r.offsetLeft + t,
        clientY: r.offsetTop + n
    }, r);
    return l.x <= s && l.y <= a && c.x >= i && c.y >= o
}
  , tb = (e,t,n)=>{
    const r = Math.abs(t)
      , i = Math.abs(n);
    if (e === "line" || e === "arrow" || e === "freedraw") {
        const o = Math.round(Math.atan(i / r) / Wo) * Wo;
        o === 0 ? n = 0 : o === Math.PI / 2 ? t = 0 : n = r * Math.tan(o) * Math.sign(n) || n
    } else
        e !== "selection" && (n = r * Math.sign(n));
    return {
        width: t,
        height: n
    }
}
  , Qg = (e,t,n,r)=>{
    let i = n - e
      , o = r - t;
    const s = Math.round(Math.atan(o / i) / Wo) * Wo;
    if (s === 0)
        o = 0;
    else if (s === Math.PI / 2)
        i = 0;
    else {
        const a = Math.tan(s)
          , l = -1
          , c = t - a * e
          , u = -1 / a
          , d = -1
          , f = r - u * n
          , h = (l * f - d * c) / (a * d - u * l)
          , m = (c * u - f * a) / (a * d - u * l);
        i = h - e,
        o = m - t
    }
    return {
        width: i,
        height: o
    }
}
  , CS = e=>{
    const t = {
        width: e.width,
        height: e.height,
        x: e.x,
        y: e.y
    };
    if (e.width < 0) {
        const n = Math.abs(e.width);
        t.width = n,
        t.x = e.x - n
    }
    if (e.height < 0) {
        const n = Math.abs(e.height);
        t.height = n,
        t.y = e.y - n
    }
    return t
}
  , Jg = (e,t,n)=>t >= e[0] && t <= e[0] + e[2] && n >= e[1] && n <= e[1] + e[3]
  , Xz = (e,t,n,r,i,o)=>{
    if (!t.selectedElementIds[e.id])
        return !1;
    const {rotation: s, ...a} = R7(e, i, o);
    if (s && Jg(s, n, r))
        return "rotation";
    const l = Object.keys(a).filter(c=>{
        const u = a[c];
        return u ? Jg(u, n, r) : !1
    }
    );
    return l.length > 0 ? l[0] : !1
}
  , nb = (e,t,n,r,i,o)=>e.reduce((s,a)=>{
    if (s)
        return s;
    const l = Xz(a, t, n, r, i, o);
    return l ? {
        element: a,
        transformHandleType: l
    } : null
}
, null)
  , rb = ([e,t,n,r],i,o,s,a)=>{
    const l = cy([e, t, n, r, (e + n) / 2, (t + r) / 2], 0, s, a, P7);
    return Object.keys(l).find(u=>{
        const d = l[u];
        return d && Jg(d, i, o)
    }
    ) || !1
}
  , Lp = ["ns", "nesw", "ew", "nwse"]
  , qz = (e,t)=>{
    const n = Lp.indexOf(e);
    if (n >= 0) {
        const r = Math.round(t / (Math.PI / 4));
        e = Lp[(n + r) % Lp.length]
    }
    return e
}
  , ib = e=>{
    const {element: t, transformHandleType: n} = e
      , r = t && Math.sign(t.height) * Math.sign(t.width) === -1;
    let i = null;
    switch (n) {
    case "n":
    case "s":
        i = "ns";
        break;
    case "w":
    case "e":
        i = "ew";
        break;
    case "nw":
    case "se":
        r ? i = "nesw" : i = "nwse";
        break;
    case "ne":
    case "sw":
        r ? i = "nwse" : i = "nesw";
        break;
    case "rotation":
        return "grab"
    }
    return i && t && (i = qz(i, t.angle)),
    i ? `${i}-resize` : ""
}
  , u1 = e=>e < 0 ? e + 2 * Math.PI : e >= 2 * Math.PI ? e - 2 * Math.PI : e
  , Qz = (e,t,n,r,i,o,s,a,l,c,u,d)=>{
    if (n.length === 1) {
        const [f] = n;
        return t === "rotation" ? (Jz(f, a, l, i, e.originalElements),
        Ko(f)) : ue(f) && (t === "nw" || t === "ne" || t === "sw" || t === "se") ? (nH(f, t, o, a, l),
        Ko(f)) : t && rH(e.originalElements, s, f, t, o, a, l),
        !0
    } else if (n.length > 1) {
        if (t === "rotation")
            return iH(e, n, a, l, i, c, u),
            !0;
        if (t === "nw" || t === "ne" || t === "sw" || t === "se")
            return kS(e, n, t, o, a, l),
            !0
    }
    return !1
}
  , Jz = (e,t,n,r,i)=>{
    var h;
    const [o,s,a,l] = me(e)
      , c = (o + a) / 2
      , u = (s + l) / 2;
    let d;
    cn(e) ? d = 0 : (d = 5 * Math.PI / 2 + Math.atan2(n - u, t - c),
    r && (d += Wo / 2,
    d -= d % Wo),
    d = u1(d));
    const f = Qs(e);
    if (Q(e, {
        angle: d
    }),
    f) {
        const m = (h = Fe.getScene(e)) == null ? void 0 : h.getElement(f);
        m && !rt(e) && Q(m, {
            angle: d
        })
    }
}
  , eH = (e,t,n,r)=>ye(e) || Gn(e) ? {
    points: xl(0, t, xl(1, n, e.points, r), r)
} : {}
  , Vy = (e,t,n)=>{
    let r = e.width;
    if (_t(e)) {
        const a = Lt(e);
        a && (r = pi(a))
    }
    const o = e.fontSize * (t / r);
    if (o < Av)
        return null;
    const s = Yi(e.text, xt({
        fontSize: o,
        fontFamily: e.fontFamily
    }), e.lineHeight);
    return {
        size: o,
        baseline: s.baseline + (n - s.height)
    }
}
  , tH = (e,t)=>({
    n: /^(n|ne|nw)$/.test(e) || t && /^(s|se|sw)$/.test(e),
    s: /^(s|se|sw)$/.test(e) || t && /^(n|ne|nw)$/.test(e),
    w: /^(w|nw|sw)$/.test(e) || t && /^(e|ne|se)$/.test(e),
    e: /^(e|ne|se)$/.test(e) || t && /^(w|nw|sw)$/.test(e)
})
  , nH = (e,t,n,r,i)=>{
    const [o,s,a,l] = me(e)
      , c = (o + a) / 2
      , u = (s + l) / 2
      , [d,f] = be(r, i, c, u, -e.angle);
    let h;
    switch (t) {
    case "se":
        h = Math.max((d - o) / (a - o), (f - s) / (l - s));
        break;
    case "nw":
        h = Math.max((a - d) / (a - o), (l - f) / (l - s));
        break;
    case "ne":
        h = Math.max((d - o) / (a - o), (l - f) / (l - s));
        break;
    case "sw":
        h = Math.max((a - d) / (a - o), (f - s) / (l - s));
        break
    }
    if (h > 0) {
        const m = e.width * h
          , g = e.height * h
          , E = Vy(e, m, g);
        if (E === null)
            return;
        const [v,y,w,b] = nu(e, m, g, !1)
          , I = (o - v) / 2
          , S = (s - y) / 2
          , C = (a - w) / 2
          , T = (l - b) / 2
          , [L,A] = aS(tH(t, n), e.x, e.y, e.angle, I, S, C, T);
        Q(e, {
            fontSize: E.size,
            width: m,
            height: g,
            baseline: E.baseline,
            x: L,
            y: A
        })
    }
}
  , rH = (e,t,n,r,i,o,s)=>{
    const a = e.get(n.id)
      , [l,c,u,d] = nu(a, a.width, a.height, !0)
      , f = [l, c]
      , h = [u, d]
      , m = Zg(f, h)
      , g = lt([o, s], m, -a.angle)
      , [E,v,y,w] = nu(n, n.width, n.height, !0)
      , b = y - E
      , I = w - v
      , S = h[0] - f[0]
      , C = h[1] - f[1];
    let T = S / b
      , L = C / I
      , A = {};
    const P = Ae(n);
    r.includes("e") && (T = (g[0] - f[0]) / b),
    r.includes("s") && (L = (g[1] - f[1]) / I),
    r.includes("w") && (T = (h[0] - g[0]) / b),
    r.includes("n") && (L = (h[1] - g[1]) / I);
    const O = a.width
      , N = a.height;
    let $ = n.width * T
      , V = n.height * L;
    if (i && ($ = 2 * $ - O,
    V = 2 * V - N),
    t) {
        const Ht = Math.abs($) / O
          , yi = Math.abs(V) / N;
        if (r.length === 1 && (V *= Ht,
        $ *= yi),
        r.length === 2) {
            const fn = Math.max(Ht, yi);
            $ = O * fn * Math.sign($),
            V = N * fn * Math.sign(V)
        }
    }
    if (P) {
        const Ht = e.get(P.id);
        if (Ht && (A = {
            fontSize: Ht.fontSize,
            baseline: Ht.baseline
        }),
        t) {
            const yi = {
                ...n,
                width: $,
                height: V
            }
              , fn = Vy(P, pi(yi), Vl(yi, P));
            if (fn === null)
                return;
            A = {
                fontSize: fn.size,
                baseline: fn.baseline
            }
        } else {
            const yi = qI(xt(P), P.lineHeight)
              , fn = ZI(P.fontSize, P.lineHeight);
            $ = Math.max($, yi),
            V = Math.max(V, fn)
        }
    }
    const [te,Z,z,W] = nu(a, $, V, !0)
      , D = z - te
      , F = W - Z;
    let B = [...f];
    if (["n", "w", "nw"].includes(r) && (B = [h[0] - Math.abs(D), h[1] - Math.abs(F)]),
    r === "ne") {
        const Ht = [f[0], h[1]];
        B = [Ht[0], Ht[1] - Math.abs(F)]
    }
    if (r === "sw") {
        const Ht = [h[0], f[1]];
        B = [Ht[0] - Math.abs(D), Ht[1]]
    }
    t && (["s", "n"].includes(r) && (B[0] = m[0] - D / 2),
    ["e", "w"].includes(r) && (B[1] = m[1] - F / 2));
    const Y = $ < 0
      , G = V < 0;
    Y && (r.includes("e") && (B[0] -= Math.abs(D)),
    r.includes("w") && (B[0] += Math.abs(D))),
    G && (r.includes("s") && (B[1] -= Math.abs(F)),
    r.includes("n") && (B[1] += Math.abs(F))),
    i && (B[0] = m[0] - Math.abs(D) / 2,
    B[1] = m[1] - Math.abs(F) / 2);
    const K = a.angle
      , q = lt(B, m, K)
      , oe = [B[0] + Math.abs(D) / 2, B[1] + Math.abs(F) / 2]
      , $e = lt(oe, m, K);
    B = lt(q, $e, -K);
    const Ie = [...B]
      , Se = a.x - te
      , Ce = a.y - Z;
    Ie[0] += Se,
    Ie[1] += Ce;
    const ze = Ie[0]
      , dn = Ie[1];
    let Nd, Fd;
    (ye(n) || Gn(n)) && (Nd = xl(1, V, a.points, !0),
    Fd = xl(0, $, Nd, !0));
    const Wr = {
        width: Math.abs($),
        height: Math.abs(V),
        x: ze,
        y: dn,
        points: Fd
    };
    if ("scale"in n && "scale"in a && Q(n, {
        scale: [(Math.sign(z - a.x) || a.scale[0]) * a.scale[0], (Math.sign(W - a.y) || a.scale[1]) * a.scale[1]]
    }),
    rt(n) && P && t) {
        const Ht = Wr.width / n.width * P.fontSize;
        if (Ht < Av)
            return;
        A.fontSize = Ht
    }
    Wr.width !== 0 && Wr.height !== 0 && Number.isFinite(Wr.x) && Number.isFinite(Wr.y) && (Q(n, Wr),
    Ko(n, {
        newSize: {
            width: Wr.width,
            height: Wr.height
        }
    }),
    P && A != null && Q(P, {
        fontSize: A.fontSize,
        baseline: A.baseline
    }),
    f0(n, r, t))
}
  , kS = (e,t,n,r,i,o)=>{
    var A;
    const s = t.reduce((P,O)=>{
        const N = e.originalElements.get(O.id);
        return N && P.push({
            orig: N,
            latest: O
        }),
        P
    }
    , [])
      , a = s.reduce((P,{orig: O})=>{
        if (!ye(O))
            return P;
        const N = Qs(O);
        if (!N)
            return P;
        const $ = e.originalElements.get(N) ?? null;
        if (!_t($))
            return P;
        const V = ce.getBoundTextElementPosition(O, $);
        return [...P, {
            ...$,
            ...V
        }]
    }
    , [])
      , {minX: l, minY: c, maxX: u, maxY: d, midX: f, midY: h} = Bi(s.map(({orig: P})=>P).concat(a))
      , m = n
      , g = {
        ne: [l, d],
        se: [l, c],
        sw: [u, c],
        nw: [u, d]
    }
      , [E,v] = r ? [f, h] : g[m]
      , y = Math.max(Math.abs(i - E) / (u - l) || 0, Math.abs(o - v) / (d - c) || 0) * (r ? 2 : 1);
    if (y === 0)
        return;
    const w = {
        ne: [i >= E, o <= v],
        se: [i >= E, o >= v],
        sw: [i <= E, o >= v],
        nw: [i <= E, o <= v]
    }
      , [b,I] = w[m].map(P=>P ? 1 : -1)
      , S = b < 0
      , C = I < 0
      , T = [];
    for (const {orig: P, latest: O} of s) {
        if (ue(P) && _t(P))
            continue;
        const N = P.width * y
          , $ = P.height * y
          , V = u1(P.angle * b * I)
          , te = ye(P) || Gn(P)
          , Z = P.x - E
          , z = P.y - v
          , W = S && !te ? N : 0
          , D = C && !te ? $ : 0
          , F = E + b * (Z * y + W)
          , B = v + I * (z * y + D)
          , Y = eH(P, N * b, $ * I, !1)
          , G = {
            x: F,
            y: B,
            width: N,
            height: $,
            angle: V,
            ...Y
        };
        if (Ni(P) && s.length === 1 && (G.scale = [P.scale[0] * b, P.scale[1] * I]),
        ye(P) && (S || C)) {
            const q = s1(P, P.points)
              , oe = s1({
                ...P,
                x: F,
                y: B
            }, Y.points)
              , $e = [P.x, P.y]
              , Ie = [F, B]
              , Se = Ce=>{
                const ze = Ce === "x" ? 0 : 1;
                return (oe[ze + 2] - Ie[ze] - ($e[ze] - q[ze]) * y + (q[ze + 2] - $e[ze]) * y - (Ie[ze] - oe[ze])) / 2
            }
            ;
            S && (G.x -= Se("x")),
            C && (G.y -= Se("y"))
        }
        if (ue(P)) {
            const q = Vy(P, N, $);
            if (!q)
                return;
            G.fontSize = q.size,
            G.baseline = q.baseline
        }
        const K = e.originalElements.get(Qs(P) ?? "");
        if (K) {
            const q = K.fontSize * y;
            if (q < Av)
                return;
            G.boundTextFontSize = q
        }
        T.push({
            element: O,
            update: G
        })
    }
    const L = T.map(({element: P})=>P);
    for (const {element: P, update: {boundTextFontSize: O, ...N}} of T) {
        const {width: $, height: V, angle: te} = N;
        Q(P, N, !1),
        Ko(P, {
            simultaneouslyUpdated: L,
            newSize: {
                width: $,
                height: V
            }
        });
        const Z = Ae(P);
        Z && O && (Q(Z, {
            fontSize: O,
            angle: ye(P) ? void 0 : te
        }, !1),
        f0(P, n, !0))
    }
    (A = Fe.getScene(T[0].element)) == null || A.informMutation()
}
  , iH = (e,t,n,r,i,o,s)=>{
    var l;
    let a = 5 * Math.PI / 2 + Math.atan2(r - s, n - o);
    i && (a += Wo / 2,
    a -= a % Wo),
    t.filter(c=>c.type !== "frame").forEach(c=>{
        var b;
        const [u,d,f,h] = me(c)
          , m = (u + f) / 2
          , g = (d + h) / 2
          , E = ((b = e.originalElements.get(c.id)) == null ? void 0 : b.angle) ?? c.angle
          , [v,y] = be(m, g, o, s, a + E - c.angle);
        Q(c, {
            x: c.x + (v - m),
            y: c.y + (y - g),
            angle: u1(a + E)
        }, !1),
        Ko(c, {
            simultaneouslyUpdated: t
        });
        const w = Ae(c);
        w && !rt(c) && Q(w, {
            x: w.x + (v - m),
            y: w.y + (y - g),
            angle: u1(a + E)
        }, !1)
    }
    ),
    (l = Fe.getScene(t[0])) == null || l.informMutation()
}
  , oH = (e,t,n,r)=>{
    const [i,o,s,a] = t.length === 1 ? me(t[0]) : mt(t)
      , l = (i + s) / 2
      , c = (o + a) / 2
      , u = t.length === 1 ? t[0].angle : 0;
    switch ([n,r] = be(n, r, l, c, -u),
    e) {
    case "n":
        return be(n - (i + s) / 2, r - o, 0, 0, u);
    case "s":
        return be(n - (i + s) / 2, r - a, 0, 0, u);
    case "w":
        return be(n - i, r - (o + a) / 2, 0, 0, u);
    case "e":
        return be(n - s, r - (o + a) / 2, 0, 0, u);
    case "nw":
        return be(n - i, r - o, 0, 0, u);
    case "ne":
        return be(n - s, r - o, 0, 0, u);
    case "sw":
        return be(n - i, r - a, 0, 0, u);
    case "se":
        return be(n - s, r - a, 0, 0, u);
    default:
        return [0, 0]
    }
}
  , sH = (e,t)=>{
    const [,[n,r]] = t.points;
    return e === "nw" && (n < 0 || r < 0) || e === "ne" && n >= 0 || e === "sw" && n <= 0 || e === "se" && (n > 0 || r > 0) ? "end" : "origin"
}
  , aH = (e,t,n,r,i,o,s)=>{
    const a = new Set(t)
      , l = t.filter(c=>cn(c)).map(c=>c.id);
    l.length > 0 && i.getNonDeletedElements().filter(u=>u.frameId !== null).filter(u=>l.includes(u.frameId)).forEach(u=>a.add(u)),
    a.forEach(c=>{
        if (ob(e, c, n, o, s),
        !c.groupIds.length || r.editingGroupId && !Qv(r, c)) {
            const u = Ae(c);
            u && (!u.frameId || !l.includes(u.frameId)) && ob(e, u, n, o, s)
        }
        Ko(c, {
            simultaneouslyUpdated: Array.from(a)
        })
    }
    )
}
  , ob = (e,t,n,r,i)=>{
    const o = e.originalElements.get(t.id) ?? t;
    let s = o.x + n.x + r.x
      , a = o.y + n.y + r.y;
    if (r.x === 0 || r.y === 0) {
        const [l,c] = en(o.x + n.x, o.y + n.y, i);
        r.x === 0 && (s = l),
        r.y === 0 && (a = c)
    }
    Q(t, {
        x: s,
        y: a
    })
}
  , lH = (e,t,n)=>{
    const [r,i] = mt(e);
    return [t - r, n - i]
}
  , sb = (e,t,n,r,i,o,s,a,l,c,u,d=null)=>{
    l && e.type !== "selection" && (u ? a = s / u : (Math.abs(o - r) > Math.abs(i - n) ? {width: s, height: a} = tb(t, a, i < n ? -s : s) : {width: s, height: a} = tb(t, s, o < r ? -a : a),
    a < 0 && (a = -a)));
    let f = i < n ? n - s : n
      , h = o < r ? r - a : r;
    c && (s += s,
    a += a,
    f = n - s / 2,
    h = r - a / 2),
    s !== 0 && a !== 0 && Q(e, {
        x: f + ((d == null ? void 0 : d.x) ?? 0),
        y: h + ((d == null ? void 0 : d.y) ?? 0),
        width: s,
        height: a
    })
}
  , Wy = (e,t)=>!!(!e.viewModeEnabled && (e.activeTool.type !== "custom" && (e.editingElement || e.activeTool.type !== "selection" && e.activeTool.type !== "eraser" && e.activeTool.type !== "hand" && e.activeTool.type !== "laser") || it(t, e).length))
  , po = e=>e.reduce((t,n)=>t + n.version, 0)
  , cH = e=>e.filter(t=>!t.isDeleted && !ta(t))
  , Pe = e=>e.filter(t=>!t.isDeleted)
  , uH = e=>e.filter(t=>!t.isDeleted)
  , e2 = e=>!e.isDeleted
  , Gy = e=>Pe(e).map(t=>Zv(t.type) ? {
    ...t,
    lastCommittedPoint: null
} : t)
  , dH = e=>Gy(e)
  , TS = e=>Gy(e)
  , MS = e=>Gy(e)
  , ei = 4
  , Io = 6
  , fH = "rgba(0,0,0,0.3)"
  , hH = (e,t,n,r)=>{
    if (e.length === 0)
        return {
            horizontal: null,
            vertical: null
        };
    const [i,o,s,a] = mt(e)
      , l = t / r.zoom.value
      , c = n / r.zoom.value
      , u = t - l
      , d = n - c
      , f = {
        top: parseInt(sf("sat")) || 0,
        bottom: parseInt(sf("sab")) || 0,
        left: parseInt(sf("sal")) || 0,
        right: parseInt(sf("sar")) || 0
    }
      , h = vd().rtl
      , m = -r.scrollX + u / 2 + f.left
      , g = -r.scrollY + d / 2 + f.top
      , E = m + l - f.right
      , v = g + c - f.bottom
      , y = Math.min(i, m)
      , w = Math.min(o, g)
      , b = Math.max(s, E)
      , I = Math.max(a, v);
    return {
        horizontal: m === y && E === b ? null : {
            x: Math.max(f.left, ei) + (m - y) / (b - y) * t,
            y: n - Io - Math.max(ei, f.bottom),
            width: (E - m) / (b - y) * t - Math.max(ei * 2, f.left + f.right),
            height: Io
        },
        vertical: g === w && v === I ? null : {
            x: h ? Math.max(f.left, ei) : t - Io - Math.max(f.right, ei),
            y: (g - w) / (I - w) * n + Math.max(f.top, ei),
            width: Io,
            height: (v - g) / (I - w) * n - Math.max(ei * 2, f.top + f.bottom)
        }
    }
}
  , ab = (e,t,n)=>{
    const [r,i] = [e.horizontal, e.vertical].map(s=>s != null && s.x <= t && t <= s.x + s.width && s.y <= n && n <= s.y + s.height);
    return {
        isOverEither: r || i,
        isOverHorizontal: r,
        isOverVertical: i
    }
}
  , pH = (e,t)=>{
    const n = new Set(it(e.filter(r=>r.type === "frame"), t).map(r=>r.id));
    return {
        elements: e.map(r=>t.selectedElementIds[r.id] ? fe(r, {
            isDeleted: !0
        }) : r.frameId && n.has(r.frameId) ? fe(r, {
            isDeleted: !0
        }) : _t(r) && t.selectedElementIds[r.containerId] ? fe(r, {
            isDeleted: !0
        }) : r),
        appState: {
            ...t,
            selectedElementIds: {}
        }
    }
}
  , lb = (e,t)=>{
    if (e.editingGroupId) {
        const n = Ft(Pe(t), e.editingGroupId);
        if (n.length)
            return {
                ...e,
                selectedElementIds: {
                    [n[0].id]: !0
                }
            }
    }
    return e
}
  , AS = J({
    name: "deleteSelectedElements",
    trackEvent: {
        category: "element",
        action: "delete"
    },
    perform: (e,t)=>{
        if (t.editingLinearElement) {
            const {elementId: i, selectedPointsIndices: o, startBindingElement: s, endBindingElement: a} = t.editingLinearElement
              , l = ce.getElement(i);
            if (!l || o == null)
                return !1;
            if (l.points.length < 2) {
                const u = e.map(f=>f.id === l.id ? fe(f, {
                    isDeleted: !0
                }) : f)
                  , d = lb(t, u);
                return {
                    elements: u,
                    appState: {
                        ...d,
                        editingLinearElement: null
                    },
                    commitToHistory: !1
                }
            }
            const c = {
                startBindingElement: o != null && o.includes(0) ? null : s,
                endBindingElement: o != null && o.includes(l.points.length - 1) ? null : a
            };
            return ce.deletePoints(l, o),
            {
                elements: e,
                appState: {
                    ...t,
                    editingLinearElement: {
                        ...t.editingLinearElement,
                        ...c,
                        selectedPointsIndices: (o == null ? void 0 : o[0]) > 0 ? [o[0] - 1] : [0]
                    }
                },
                commitToHistory: !0
            }
        }
        let {elements: n, appState: r} = pH(e, t);
        return py(n, e.filter(({id: i})=>t.selectedElementIds[i])),
        r = lb(r, n),
        {
            elements: n,
            appState: {
                ...r,
                activeTool: Ct(t, {
                    type: "selection"
                }),
                multiElement: null,
                activeEmbeddable: null
            },
            commitToHistory: Pt(Pe(e), t)
        }
    }
    ,
    contextItemLabel: "labels.delete",
    keyTest: (e,t,n)=>(e.key === R.BACKSPACE || e.key === R.DELETE) && !e[R.CTRL_OR_CMD],
    PanelComponent: ({elements: e, appState: t, updateData: n})=>p(Ee, {
        type: "button",
        icon: Q1,
        title: _("labels.delete"),
        "aria-label": _("labels.delete"),
        onClick: ()=>n(null),
        visible: Pt(Pe(e), t)
    })
})
  , mH = J({
    name: "sendBackward",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: Wz(e, t),
        appState: t,
        commitToHistory: !0
    }),
    contextItemLabel: "labels.sendBackward",
    keyPriority: 40,
    keyTest: e=>e[R.CTRL_OR_CMD] && !e.shiftKey && e.code === Me.BRACKET_LEFT,
    PanelComponent: ({updateData: e, appState: t})=>p("button", {
        type: "button",
        className: "zIndexButton",
        onClick: ()=>e(null),
        title: `${_("labels.sendBackward")}  ${j("CtrlOrCmd+[")}`,
        children: _O
    })
})
  , gH = J({
    name: "bringForward",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: vS(e, t),
        appState: t,
        commitToHistory: !0
    }),
    contextItemLabel: "labels.bringForward",
    keyPriority: 40,
    keyTest: e=>e[R.CTRL_OR_CMD] && !e.shiftKey && e.code === Me.BRACKET_RIGHT,
    PanelComponent: ({updateData: e, appState: t})=>p("button", {
        type: "button",
        className: "zIndexButton",
        onClick: ()=>e(null),
        title: `${_("labels.bringForward")}  ${j("CtrlOrCmd+]")}`,
        children: bO
    })
})
  , vH = J({
    name: "sendToBack",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: Gz(e, t),
        appState: t,
        commitToHistory: !0
    }),
    contextItemLabel: "labels.sendToBack",
    keyTest: e=>ui ? e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.BRACKET_LEFT : e[R.CTRL_OR_CMD] && e.shiftKey && e.code === Me.BRACKET_LEFT,
    PanelComponent: ({updateData: e, appState: t})=>p("button", {
        type: "button",
        className: "zIndexButton",
        onClick: ()=>e(null),
        title: `${_("labels.sendToBack")}  ${j(ui ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")}`,
        children: IO
    })
})
  , yH = J({
    name: "bringToFront",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: jz(e, t),
        appState: t,
        commitToHistory: !0
    }),
    contextItemLabel: "labels.bringToFront",
    keyTest: e=>ui ? e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.BRACKET_RIGHT : e[R.CTRL_OR_CMD] && e.shiftKey && e.code === Me.BRACKET_RIGHT,
    PanelComponent: ({updateData: e, appState: t})=>p("button", {
        type: "button",
        className: "zIndexButton",
        onClick: n=>e(null),
        title: `${_("labels.bringToFront")}  ${j(ui ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")}`,
        children: xO
    })
})
  , EH = J({
    name: "selectAll",
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        if (t.editingLinearElement)
            return !1;
        const i = y0(e.filter(o=>!o.isDeleted && !(ue(o) && o.containerId) && !o.locked)).reduce((o,s)=>(o[s.id] = !0,
        o), {});
        return {
            appState: {
                ...t,
                ...Nn({
                    editingGroupId: null,
                    selectedElementIds: i
                }, Pe(e), t, r),
                selectedLinearElement: Object.keys(i).length === 1 && ye(e[0]) ? new ce(e[0],r.scene) : null
            },
            commitToHistory: !0
        }
    }
    ,
    contextItemLabel: "labels.selectAll",
    keyTest: e=>e[R.CTRL_OR_CMD] && e.key === R.A
})
  , wH = e=>{
    const t = e.slice()
      , n = new Set
      , r = o=>{
        var c, u, d;
        const s = (u = (c = o[0]) == null ? void 0 : c.groupIds) == null ? void 0 : u.join("")
          , a = [o[0]]
          , l = [];
        for (const f of o.slice(1))
            ((d = f.groupIds) == null ? void 0 : d.join("")) === s ? a.push(f) : l.push(f);
        return l.length ? [...a, ...r(l)] : a
    }
      , i = new Map;
    return t.forEach((o,s)=>{
        var a;
        if (!i.has(o.id))
            if ((a = o.groupIds) != null && a.length) {
                const l = o.groupIds[o.groupIds.length - 1]
                  , c = t.slice(s).filter(u=>{
                    var f;
                    const d = (f = u == null ? void 0 : u.groupIds) == null ? void 0 : f.some(h=>h === l);
                    return d && i.set(u.id, !0),
                    d
                }
                );
                for (const u of r(c))
                    n.add(u)
            } else
                n.add(o)
    }
    ),
    n.size !== e.length ? (console.error("normalizeGroupElementOrder: lost some elements... bailing!"),
    e) : [...n]
}
  , bH = e=>{
    const t = Tx(e)
      , n = e.slice()
      , r = new Set;
    return n.forEach((i,o)=>{
        var s, a;
        if (i)
            if ((s = i.boundElements) != null && s.length)
                r.add(i),
                n[o] = null,
                i.boundElements.forEach(l=>{
                    const c = t.get(l.id);
                    c && l.type === "text" && (r.add(c[0]),
                    n[c[1]] = null)
                }
                );
            else if (i.type === "text" && i.containerId) {
                const l = t.get(i.containerId);
                (a = l == null ? void 0 : l[0].boundElements) != null && a.find(c=>c.id === i.id) || (r.add(i),
                n[o] = null)
            } else
                r.add(i),
                n[o] = null
    }
    ),
    r.size !== e.length ? (console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),
    e) : [...r]
}
  , _H = e=>bH(wH(e))
  , xH = J({
    name: "duplicateSelection",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>{
        if (t.editingLinearElement) {
            const n = ce.duplicateSelectedPoints(t);
            return n ? {
                elements: e,
                appState: n.appState,
                commitToHistory: !0
            } : !1
        }
        return {
            ...IH(e, t),
            commitToHistory: !0
        }
    }
    ,
    contextItemLabel: "labels.duplicateSelection",
    keyTest: e=>e[R.CTRL_OR_CMD] && e.key === R.D,
    PanelComponent: ({elements: e, appState: t, updateData: n})=>p(Ee, {
        type: "button",
        icon: nO,
        title: `${_("labels.duplicateSelection")}  ${j("CtrlOrCmd+D")}`,
        "aria-label": _("labels.duplicateSelection"),
        onClick: ()=>n(null),
        visible: Pt(Pe(e), t)
    })
})
  , IH = (e,t)=>{
    const n = _H(e)
      , r = new Map
      , i = []
      , o = []
      , s = new Map
      , a = v=>{
        const y = o7(t.editingGroupId, r, v, {
            x: v.x + tl / 2,
            y: v.y + tl / 2
        });
        return s.set(v.id, y.id),
        o.push(v),
        i.push(y),
        y
    }
      , l = Rt(it(n, t, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    }))
      , c = new Map
      , u = v=>{
        for (const y of v)
            c.set(y.id, !0);
        return v
    }
      , d = [];
    let f = -1;
    for (; ++f < n.length; ) {
        const v = n[f];
        if (c.get(v.id))
            continue;
        const y = Ae(v)
          , w = cn(v);
        if (l.get(v.id)) {
            if (v.groupIds.length || y || w) {
                const b = Qx(t, v);
                if (b) {
                    const I = Ft(n, b).flatMap(S=>cn(S) ? [...Rr(e, S.id), S] : [S]);
                    d.push(...u([...I, ...I.map(S=>a(S))]));
                    continue
                }
                if (y) {
                    d.push(...u([v, y, a(v), a(y)]));
                    continue
                }
                if (w) {
                    const I = Rr(n, v.id);
                    d.push(...u([...I, v, ...I.map(S=>a(S)), a(v)]));
                    continue
                }
            }
            (!v.frameId || !l.has(v.frameId)) && d.push(...u([v, a(v)]))
        } else
            d.push(...u([v]))
    }
    const h = []
      , m = new Map;
    for (f = d.length; --f >= 0; ) {
        const v = d[f];
        m.get(v.id) || (m.set(v.id, !0),
        h.push(v))
    }
    const g = h.reverse();
    GI(d, o, s),
    V7(d, o, s),
    yS(g, o, s);
    const E = y0(i);
    return {
        elements: g,
        appState: {
            ...t,
            ...Nn({
                editingGroupId: t.editingGroupId,
                selectedElementIds: E.reduce((v,y)=>(_t(y) || (v[y.id] = !0),
                v), {})
            }, Pe(g), t, null)
        }
    }
}
  , Yr = J({
    name: "finalize",
    trackEvent: !1,
    perform: (e,t,n,{interactiveCanvas: r, focusContainer: i, scene: o})=>{
        var u;
        if (t.editingLinearElement) {
            const {elementId: d, startBindingElement: f, endBindingElement: h} = t.editingLinearElement
              , m = ce.getElement(d);
            if (m)
                return sn(m) && Fl(m, f, h),
                {
                    elements: m.points.length < 2 || ta(m) ? e.filter(g=>g.id !== m.id) : void 0,
                    appState: {
                        ...t,
                        cursorButton: "up",
                        editingLinearElement: null
                    },
                    commitToHistory: !0
                }
        }
        let s = e;
        const a = t.pendingImageElementId && o.getElement(t.pendingImageElementId);
        a && Q(a, {
            isDeleted: !0
        }, !1),
        window.document.activeElement instanceof HTMLElement && i();
        const l = t.multiElement ? t.multiElement : ((u = t.editingElement) == null ? void 0 : u.type) === "freedraw" ? t.editingElement : null;
        if (l) {
            if (l.type !== "freedraw" && t.lastPointerDownWith !== "touch") {
                const {points: f, lastCommittedPoint: h} = l;
                (!h || f[f.length - 1] !== h) && Q(l, {
                    points: l.points.slice(0, -1)
                })
            }
            ta(l) && (s = s.filter(f=>f.id !== l.id));
            const d = qo(l.points, t.zoom.value);
            if ((l.type === "line" || l.type === "freedraw") && d) {
                const f = l.points
                  , h = f[0];
                Q(l, {
                    points: f.map((m,g)=>g === f.length - 1 ? [h[0], h[1]] : m)
                })
            }
            if (sn(l) && !d && l.points.length > 1) {
                const [f,h] = ce.getPointAtIndexGlobalCoordinates(l, -1);
                Tg(l, t, Fe.getScene(l), {
                    x: f,
                    y: h
                })
            }
        }
        (!t.activeTool.locked && t.activeTool.type !== "freedraw" || !l) && Er(r);
        let c;
        return t.activeTool.type === "eraser" ? c = Ct(t, {
            ...t.activeTool.lastActiveTool || {
                type: "selection"
            },
            lastActiveToolBeforeEraser: null
        }) : c = Ct(t, {
            type: "selection"
        }),
        {
            elements: s,
            appState: {
                ...t,
                cursorButton: "up",
                activeTool: (t.activeTool.locked || t.activeTool.type === "freedraw") && l ? t.activeTool : c,
                activeEmbeddable: null,
                draggingElement: null,
                multiElement: null,
                editingElement: null,
                startBoundElement: null,
                suggestedBindings: [],
                selectedElementIds: l && !t.activeTool.locked && t.activeTool.type !== "freedraw" ? {
                    ...t.selectedElementIds,
                    [l.id]: !0
                } : t.selectedElementIds,
                selectedLinearElement: l && ye(l) ? new ce(l,o) : t.selectedLinearElement,
                pendingImageElementId: null
            },
            commitToHistory: t.activeTool.type === "freedraw"
        }
    }
    ,
    keyTest: (e,t)=>e.key === R.ESCAPE && (t.editingLinearElement !== null || !t.draggingElement && t.multiElement === null) || (e.key === R.ESCAPE || e.key === R.ENTER) && t.multiElement !== null,
    PanelComponent: ({appState: e, updateData: t, data: n})=>p(Ee, {
        type: "button",
        icon: pO,
        title: _("buttons.done"),
        "aria-label": _("buttons.done"),
        onClick: t,
        visible: e.multiElement != null,
        size: (n == null ? void 0 : n.size) || "medium"
    })
});
const SH = e=>{
    const {id: t} = eo()
      , [n,r] = x.useState(e.value)
      , i = s=>{
        e.ignoreFocus || KL(s.target);
        const a = s.target.value;
        a !== e.value && e.onChange(a)
    }
      , o = s=>{
        if (s.key === R.ENTER) {
            if (s.preventDefault(),
            s.nativeEvent.isComposing || s.keyCode === 229)
                return;
            s.currentTarget.blur()
        }
    }
    ;
    return k("div", {
        className: "ProjectName",
        children: [p("label", {
            className: "ProjectName-label",
            htmlFor: "filename",
            children: `${e.label}${e.isNameEditable ? "" : ":"}`
        }), e.isNameEditable ? p("input", {
            type: "text",
            className: "TextInput",
            onBlur: i,
            onKeyDown: o,
            id: `${t}-filename`,
            value: n,
            onChange: s=>r(s.target.value)
        }) : p("span", {
            className: "TextInput TextInput--readonly",
            id: `${t}-filename`,
            children: e.value
        })]
    })
}
  , CH = e=>{
    const t = e.title || (e.value === "dark" ? _("buttons.lightMode") : _("buttons.darkMode"));
    return p(Ee, {
        type: "icon",
        icon: e.value === $t.LIGHT ? cb.MOON : cb.SUN,
        title: t,
        "aria-label": t,
        onClick: ()=>e.onChange(e.value === $t.DARK ? $t.LIGHT : $t.DARK),
        "data-testid": "toggle-dark-mode"
    })
}
  , cb = {
    SUN: p("svg", {
        width: "512",
        height: "512",
        className: "rtl-mirror",
        viewBox: "0 0 512 512",
        children: p("path", {
            fill: "currentColor",
            d: "M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"
        })
    }),
    MOON: p("svg", {
        width: "512",
        height: "512",
        className: "rtl-mirror",
        viewBox: "0 0 512 512",
        children: p("path", {
            fill: "currentColor",
            d: "M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"
        })
    })
}
  , E0 = async(e,t,n,r,{exportBackground: i, exportPadding: o=gd, viewBackgroundColor: s, name: a, fileHandle: l=null})=>{
    if (t.length === 0)
        throw new Error(_("alerts.cannotExportEmptyCanvas"));
    if (e === "svg" || e === "clipboard-svg") {
        const u = await Py(t, {
            exportBackground: i,
            exportWithDarkMode: n.exportWithDarkMode,
            viewBackgroundColor: s,
            exportPadding: o,
            exportScale: n.exportScale,
            exportEmbedScene: n.exportEmbedScene && e === "svg"
        }, r);
        if (e === "svg")
            return await n1(new Blob([u.outerHTML],{
                type: ve.svg
            }), {
                description: "Export to SVG",
                name: a,
                extension: n.exportEmbedScene ? "excalidraw.svg" : "svg",
                fileHandle: l
            });
        if (e === "clipboard-svg") {
            await Ul(u.outerHTML);
            return
        }
    }
    const c = await BI(t, n, r, {
        exportBackground: i,
        viewBackgroundColor: s,
        exportPadding: o
    });
    if (c.style.display = "none",
    document.body.appendChild(c),
    e === "png") {
        let u = await r1(c);
        return c.remove(),
        n.exportEmbedScene && (u = await (await ne(()=>import("./image-bb85c34d.js"), [])).encodePngMetadata({
            blob: u,
            metadata: Hl(t, n, r, "local")
        })),
        await n1(u, {
            description: "Export to PNG",
            name: a,
            extension: "png",
            fileHandle: l
        })
    } else if (e === "clipboard")
        try {
            const u = r1(c);
            await ez(u)
        } catch (u) {
            throw console.warn(u),
            u.name === "CANVAS_POSSIBLY_TOO_BIG" ? u : Mv && u.name === "TypeError" ? new Error(`${_("alerts.couldNotCopyToClipboard")}

${_("hints.firefox_clipboard_write")}`) : new Error(_("alerts.couldNotCopyToClipboard"))
        } finally {
            c.remove()
        }
    else
        throw c.remove(),
        new Error("Unsupported export type")
}
  , kH = async(e,t,n)=>{
    const {exportBackground: r, viewBackgroundColor: i, name: o, fileHandle: s} = t
      , a = MI(s);
    if (!s || !TB(a))
        throw new Error("fileHandle should exist and should be of type svg or png when resaving");
    return t = {
        ...t,
        exportEmbedScene: !0
    },
    await E0(a, Pe(e), t, n, {
        exportBackground: r,
        viewBackgroundColor: i,
        name: o,
        fileHandle: s
    }),
    {
        fileHandle: s
    }
}
;
const jy = ({children: e, checked: t, onChange: n, className: r})=>k("div", {
    className: le("Checkbox", r, {
        "is-checked": t
    }),
    onClick: i=>{
        n(!t, i),
        i.currentTarget.querySelector(".Checkbox-box").focus()
    }
    ,
    children: [p("button", {
        className: "Checkbox-box",
        role: "checkbox",
        "aria-checked": t,
        children: lO
    }), p("div", {
        className: "Checkbox-label",
        children: e
    })]
})
  , TH = J({
    name: "changeProjectName",
    trackEvent: !1,
    perform: (e,t,n)=>({
        appState: {
            ...t,
            name: n
        },
        commitToHistory: !1
    }),
    PanelComponent: ({appState: e, updateData: t, appProps: n, data: r})=>p(SH, {
        label: _("labels.fileTitle"),
        value: e.name || "Unnamed",
        onChange: i=>t(i),
        isNameEditable: typeof n.name > "u" && !e.viewModeEnabled,
        ignoreFocus: (r == null ? void 0 : r.ignoreFocus) ?? !1
    })
})
  , MH = J({
    name: "changeExportScale",
    trackEvent: {
        category: "export",
        action: "scale"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportScale: n
        },
        commitToHistory: !1
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = Pe(e)
          , o = Pt(r, t) ? it(r, t) : r;
        return p(re, {
            children: Ov.map(s=>{
                const [a,l] = zB(o, gd, s)
                  , c = `${_("imageExportDialog.label.scale")} ${s}x (${a}x ${l})`;
                return p(Ee, {
                    size: "small",
                    type: "radio",
                    icon: `${s}x`,
                    name: "export-canvas-scale",
                    title: c,
                    "aria-label": c,
                    id: "export-canvas-scale",
                    checked: s === t.exportScale,
                    onChange: ()=>n(s)
                }, s)
            }
            )
        })
    }
})
  , AH = J({
    name: "changeExportBackground",
    trackEvent: {
        category: "export",
        action: "toggleBackground"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportBackground: n
        },
        commitToHistory: !1
    }),
    PanelComponent: ({appState: e, updateData: t})=>p(jy, {
        checked: e.exportBackground,
        onChange: n=>t(n),
        children: _("imageExportDialog.label.withBackground")
    })
})
  , LS = J({
    name: "changeExportEmbedScene",
    trackEvent: {
        category: "export",
        action: "embedScene"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportEmbedScene: n
        },
        commitToHistory: !1
    }),
    PanelComponent: ({appState: e, updateData: t})=>k(jy, {
        checked: e.exportEmbedScene,
        onChange: n=>t(n),
        children: [_("imageExportDialog.label.embedScene"), p(Zo, {
            label: _("imageExportDialog.tooltip.embedScene"),
            long: !0,
            children: p("div", {
                className: "excalidraw-tooltip-icon",
                children: vO
            })
        })]
    })
})
  , ub = J({
    name: "saveToActiveFile",
    trackEvent: {
        category: "export"
    },
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile && !!t.fileHandle && !t.viewModeEnabled,
    perform: async(e,t,n,r)=>{
        const i = !!t.fileHandle;
        try {
            const {fileHandle: o} = My(t.fileHandle) ? await kH(e, t, r.files) : await PI(e, t, r.files);
            return {
                commitToHistory: !1,
                appState: {
                    ...t,
                    fileHandle: o,
                    toast: i ? {
                        message: o != null && o.name ? _("toast.fileSavedToFilename").replace("{filename}", `"${o.name}"`) : _("toast.fileSaved")
                    } : null
                }
            }
        } catch (o) {
            return (o == null ? void 0 : o.name) !== "AbortError" ? console.error(o) : console.warn(o),
            {
                commitToHistory: !1
            }
        }
    }
    ,
    keyTest: e=>e.key === R.S && e[R.CTRL_OR_CMD] && !e.shiftKey
})
  , PS = J({
    name: "saveFileToDisk",
    viewMode: !0,
    trackEvent: {
        category: "export"
    },
    perform: async(e,t,n,r)=>{
        try {
            const {fileHandle: i} = await PI(e, {
                ...t,
                fileHandle: null
            }, r.files);
            return {
                commitToHistory: !1,
                appState: {
                    ...t,
                    fileHandle: i
                }
            }
        } catch (i) {
            return (i == null ? void 0 : i.name) !== "AbortError" ? console.error(i) : console.warn(i),
            {
                commitToHistory: !1
            }
        }
    }
    ,
    keyTest: e=>e.key === R.S && e.shiftKey && e[R.CTRL_OR_CMD],
    PanelComponent: ({updateData: e})=>p(Ee, {
        type: "button",
        icon: uO,
        title: _("buttons.saveAs"),
        "aria-label": _("buttons.saveAs"),
        showAriaLabel: Xt().isMobile,
        hidden: !ha,
        onClick: ()=>e(null),
        "data-testid": "save-as-button"
    })
})
  , t2 = J({
    name: "loadScene",
    trackEvent: {
        category: "export"
    },
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene && !t.viewModeEnabled,
    perform: async(e,t,n,r)=>{
        try {
            const {elements: i, appState: o, files: s} = await DB(t, e);
            return {
                elements: i,
                appState: o,
                files: s,
                commitToHistory: !0
            }
        } catch (i) {
            return (i == null ? void 0 : i.name) === "AbortError" ? (console.warn(i),
            !1) : {
                elements: e,
                appState: {
                    ...t,
                    errorMessage: i.message
                },
                files: r.files,
                commitToHistory: !1
            }
        }
    }
    ,
    keyTest: e=>e[R.CTRL_OR_CMD] && e.key === R.O
})
  , LH = J({
    name: "exportWithDarkMode",
    trackEvent: {
        category: "export",
        action: "toggleTheme"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportWithDarkMode: n
        },
        commitToHistory: !1
    }),
    PanelComponent: ({appState: e, updateData: t})=>p("div", {
        style: {
            display: "flex",
            justifyContent: "flex-end",
            marginTop: "-45px",
            marginBottom: "10px"
        },
        children: p(CH, {
            value: e.exportWithDarkMode ? $t.DARK : $t.LIGHT,
            onChange: n=>{
                t(n === $t.DARK)
            }
            ,
            title: _("imageExportDialog.label.darkMode")
        })
    })
});
let RS = "{}";
const PH = J({
    name: "copyStyles",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>{
        const n = []
          , r = e.find(i=>t.selectedElementIds[i.id]);
        if (n.push(r),
        r && jo(r)) {
            const i = Ae(r);
            n.push(i)
        }
        return r && (RS = JSON.stringify(n)),
        {
            appState: {
                ...t,
                toast: {
                    message: _("toast.copyStyles")
                }
            },
            commitToHistory: !1
        }
    }
    ,
    contextItemLabel: "labels.copyStyles",
    keyTest: e=>e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.C
})
  , RH = J({
    name: "pasteStyles",
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>{
        const n = JSON.parse(RS)
          , r = n[0]
          , i = n[1];
        if (!NP(r))
            return {
                elements: e,
                commitToHistory: !1
            };
        const o = it(e, t, {
            includeBoundTextElement: !0
        })
          , s = o.map(a=>a.id);
        return {
            elements: e.map(a=>{
                if (s.includes(a.id)) {
                    let l = r;
                    if (ue(a) && a.containerId && (l = i),
                    !l)
                        return a;
                    let c = fe(a, {
                        backgroundColor: l == null ? void 0 : l.backgroundColor,
                        strokeWidth: l == null ? void 0 : l.strokeWidth,
                        strokeColor: l == null ? void 0 : l.strokeColor,
                        strokeStyle: l == null ? void 0 : l.strokeStyle,
                        fillStyle: l == null ? void 0 : l.fillStyle,
                        opacity: l == null ? void 0 : l.opacity,
                        roughness: l == null ? void 0 : l.roughness,
                        roundness: l.roundness ? FP(l.roundness.type, a) ? l.roundness : $P(a) : null
                    });
                    if (ue(c)) {
                        const u = (l == null ? void 0 : l.fontSize) || Ki
                          , d = (l == null ? void 0 : l.fontFamily) || Xi;
                        c = fe(c, {
                            fontSize: u,
                            fontFamily: d,
                            textAlign: (l == null ? void 0 : l.textAlign) || V1,
                            lineHeight: l.lineHeight || ea(d)
                        });
                        let f = null;
                        c.containerId && (f = o.find(h=>ue(c) && h.id === c.containerId) || null),
                        mi(c, f)
                    }
                    return c.type === "arrow" && (c = fe(c, {
                        startArrowhead: l.startArrowhead,
                        endArrowhead: l.endArrowhead
                    })),
                    cn(a) && (c = fe(c, {
                        roundness: null,
                        backgroundColor: "transparent"
                    })),
                    c
                }
                return a
            }
            ),
            commitToHistory: !0
        }
    }
    ,
    contextItemLabel: "labels.pasteStyles",
    keyTest: e=>e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.V
});
J({
    name: "toggleCanvasMenu",
    trackEvent: {
        category: "menu"
    },
    perform: (e,t)=>({
        appState: {
            ...t,
            openMenu: t.openMenu === "canvas" ? null : "canvas"
        },
        commitToHistory: !1
    }),
    PanelComponent: ({appState: e, updateData: t})=>p(Ee, {
        type: "button",
        icon: c7,
        "aria-label": _("buttons.menu"),
        onClick: t,
        selected: e.openMenu === "canvas"
    })
});
J({
    name: "toggleEditMenu",
    trackEvent: {
        category: "menu"
    },
    perform: (e,t)=>({
        appState: {
            ...t,
            openMenu: t.openMenu === "shape" ? null : "shape"
        },
        commitToHistory: !1
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>p(Ee, {
        visible: Wy(t, Pe(e)),
        type: "button",
        icon: dO,
        "aria-label": _("buttons.edit"),
        onClick: n,
        selected: t.openMenu === "shape"
    })
});
J({
    name: "toggleFullScreen",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!dp()
    },
    perform: ()=>(dp() || HL(),
    dp() && UL(),
    {
        commitToHistory: !1
    })
});
const Yy = J({
    name: "toggleShortcuts",
    viewMode: !0,
    trackEvent: {
        category: "menu",
        action: "toggleHelpDialog"
    },
    perform: (e,t,n,{focusContainer: r})=>(t.openDialog === "help" && r(),
    {
        appState: {
            ...t,
            openDialog: t.openDialog === "help" ? null : "help"
        },
        commitToHistory: !1
    }),
    keyTest: e=>e.key === R.QUESTION_MARK
})
  , OH = e=>{
    if (e.length >= 2) {
        const t = e[0].groupIds;
        for (const n of t)
            if (e.reduce((r,i)=>r && Bu(i, n), !0))
                return !0
    }
    return !1
}
  , db = (e,t,n)=>{
    const r = n.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !0
    });
    return r.length >= 2 && !OH(r)
}
  , DH = J({
    name: "group",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        });
        if (i.length < 2)
            return {
                appState: t,
                elements: e,
                commitToHistory: !1
            };
        const o = rl(t);
        if (o.length === 1) {
            const g = o[0]
              , E = new Set(Ft(e, g).map(w=>w.id))
              , v = new Set(i.map(w=>w.id));
            if (new Set([...Array.from(E), ...Array.from(v)]).size === E.size)
                return {
                    appState: t,
                    elements: e,
                    commitToHistory: !1
                }
        }
        let s = [...e];
        new Set(i.map(g=>g.frameId)).size > 1 && _S(i).forEach((E,v)=>{
            s = v0(s, E, t)
        }
        );
        const l = $r()
          , c = Rt(i);
        s = s.map(g=>c.get(g.id) ? fe(g, {
            groupIds: pR(g.groupIds, l, t.editingGroupId)
        }) : g);
        const u = Ft(s, l)
          , d = u[u.length - 1]
          , f = s.lastIndexOf(d)
          , h = s.slice(f + 1);
        return s = [...s.slice(0, f).filter(g=>!Bu(g, l)), ...u, ...h],
        {
            appState: {
                ...t,
                ...qx(l, {
                    ...t,
                    selectedGroupIds: {}
                }, Pe(s))
            },
            elements: s,
            commitToHistory: !0
        }
    }
    ,
    contextItemLabel: "labels.group",
    predicate: (e,t,n,r)=>db(e, t, r),
    keyTest: e=>!e.shiftKey && e[R.CTRL_OR_CMD] && e.key === R.G,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !db(e, t, r),
        type: "button",
        icon: p(DO, {
            theme: t.theme
        }),
        onClick: ()=>n(null),
        title: `${_("labels.group")}  ${j("CtrlOrCmd+G")}`,
        "aria-label": _("labels.group"),
        visible: Pt(Pe(e), t)
    })
})
  , NH = J({
    name: "ungroup",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        if (rl(t).length === 0)
            return {
                appState: t,
                elements: e,
                commitToHistory: !1
            };
        let o = [...e];
        const a = r.scene.getSelectedElements(t).filter(u=>u.frameId).map(u=>r.scene.getElement(u.frameId))
          , l = [];
        o = o.map(u=>{
            _t(u) && l.push(u.id);
            const d = mR(u.groupIds, t.selectedGroupIds);
            return d.length === u.groupIds.length ? u : fe(u, {
                groupIds: d
            })
        }
        );
        const c = Nn(t, Pe(o), t, null);
        return a.forEach(u=>{
            u && (o = IS(o, rh(o, u, t), u, t))
        }
        ),
        c.selectedElementIds = Object.entries(c.selectedElementIds).reduce((u,[d,f])=>(f && !l.includes(d) && (u[d] = !0),
        u), {}),
        {
            appState: {
                ...t,
                ...c
            },
            elements: o,
            commitToHistory: !0
        }
    }
    ,
    keyTest: e=>e.shiftKey && e[R.CTRL_OR_CMD] && e.key === R.G.toUpperCase(),
    contextItemLabel: "labels.ungroup",
    predicate: (e,t)=>rl(t).length > 0,
    PanelComponent: ({elements: e, appState: t, updateData: n})=>p(Ee, {
        type: "button",
        hidden: rl(t).length === 0,
        icon: p(NO, {
            theme: t.theme
        }),
        onClick: ()=>n(null),
        title: `${_("labels.ungroup")}  ${j("CtrlOrCmd+Shift+G")}`,
        "aria-label": _("labels.ungroup"),
        visible: Pt(Pe(e), t)
    })
});
const FH = ({color: e, onClick: t, name: n, src: r})=>{
    const i = uR(n)
      , [o,s] = x.useState(!1)
      , a = !o && r;
    return p("div", {
        className: "Avatar",
        style: a ? void 0 : {
            background: e
        },
        onClick: t,
        children: a ? p("img", {
            className: "Avatar-img",
            src: r,
            alt: i,
            referrerPolicy: "no-referrer",
            onError: ()=>s(!0)
        }) : i
    })
}
;
J({
    name: "goToCollaborator",
    viewMode: !0,
    trackEvent: {
        category: "collab"
    },
    perform: (e,t,n)=>{
        const r = n;
        return r ? {
            appState: {
                ...t,
                ...ky({
                    scenePoint: r,
                    viewportDimensions: {
                        width: t.width,
                        height: t.height
                    },
                    zoom: t.zoom
                }),
                openMenu: t.openMenu === "canvas" ? null : t.openMenu
            },
            commitToHistory: !1
        } : {
            appState: t,
            commitToHistory: !1
        }
    }
    ,
    PanelComponent: ({updateData: e, data: t})=>{
        const [n,r] = t
          , i = Gh(n);
        return p(FH, {
            color: i,
            onClick: ()=>e(r.pointer),
            name: r.username || "",
            src: r.avatarUrl
        })
    }
});
const $H = J({
    name: "addToLibrary",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        for (const o of H8)
            if (i.some(s=>s.type === o))
                return {
                    commitToHistory: !1,
                    appState: {
                        ...t,
                        errorMessage: _(`errors.libraryElementTypeError.${o}`)
                    }
                };
        return r.library.getLatestLibrary().then(o=>r.library.setLibrary([{
            id: $r(),
            status: "unpublished",
            elements: i.map(bd),
            created: Date.now()
        }, ...o])).then(()=>({
            commitToHistory: !1,
            appState: {
                ...t,
                toast: {
                    message: _("toast.addedToLibrary")
                }
            }
        })).catch(o=>({
            commitToHistory: !1,
            appState: {
                ...t,
                errorMessage: o.message
            }
        }))
    }
    ,
    contextItemLabel: "labels.addToLibrary"
})
  , BH = (e,t)=>{
    const n = q1(e)
      , r = Bi(e);
    return n.flatMap(i=>{
        const o = zH(i, r, t);
        return i.map(s=>fe(s, {
            x: s.x + o.x,
            y: s.y + o.y
        }))
    }
    )
}
  , zH = (e,t,{axis: n, position: r})=>{
    const i = Bi(e)
      , [o,s] = n === "x" ? ["minX", "maxX"] : ["minY", "maxY"]
      , a = {
        x: 0,
        y: 0
    };
    return r === "start" ? {
        ...a,
        [n]: t[o] - i[o]
    } : r === "end" ? {
        ...a,
        [n]: t[s] - i[s]
    } : {
        ...a,
        [n]: (t[o] + t[s]) / 2 - (i[o] + i[s]) / 2
    }
}
  , fr = (e,t,n,r)=>{
    const i = r.scene.getSelectedElements(t);
    return i.length > 1 && !i.some(o=>o.type === "frame")
}
  , Gl = (e,t,n,r)=>{
    const i = n.scene.getSelectedElements(t)
      , o = BH(i, r)
      , s = Rt(o);
    return Sl(e.map(a=>s.get(a.id) || a), t, n)
}
;
J({
    name: "alignTop",
    trackEvent: {
        category: "element"
    },
    predicate: fr,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Gl(e, t, r, {
            position: "start",
            axis: "y"
        }),
        commitToHistory: !0
    }),
    keyTest: e=>e[R.CTRL_OR_CMD] && e.shiftKey && e.key === R.ARROW_UP,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !fr(e, t, null, r),
        type: "button",
        icon: SO,
        onClick: ()=>n(null),
        title: `${_("labels.alignTop")}  ${j("CtrlOrCmd+Shift+Up")}`,
        "aria-label": _("labels.alignTop"),
        visible: Pt(Pe(e), t)
    })
});
J({
    name: "alignBottom",
    trackEvent: {
        category: "element"
    },
    predicate: fr,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Gl(e, t, r, {
            position: "end",
            axis: "y"
        }),
        commitToHistory: !0
    }),
    keyTest: e=>e[R.CTRL_OR_CMD] && e.shiftKey && e.key === R.ARROW_DOWN,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !fr(e, t, null, r),
        type: "button",
        icon: CO,
        onClick: ()=>n(null),
        title: `${_("labels.alignBottom")}  ${j("CtrlOrCmd+Shift+Down")}`,
        "aria-label": _("labels.alignBottom"),
        visible: Pt(Pe(e), t)
    })
});
J({
    name: "alignLeft",
    trackEvent: {
        category: "element"
    },
    predicate: fr,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Gl(e, t, r, {
            position: "start",
            axis: "x"
        }),
        commitToHistory: !0
    }),
    keyTest: e=>e[R.CTRL_OR_CMD] && e.shiftKey && e.key === R.ARROW_LEFT,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !fr(e, t, null, r),
        type: "button",
        icon: kO,
        onClick: ()=>n(null),
        title: `${_("labels.alignLeft")}  ${j("CtrlOrCmd+Shift+Left")}`,
        "aria-label": _("labels.alignLeft"),
        visible: Pt(Pe(e), t)
    })
});
J({
    name: "alignRight",
    trackEvent: {
        category: "element"
    },
    predicate: fr,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Gl(e, t, r, {
            position: "end",
            axis: "x"
        }),
        commitToHistory: !0
    }),
    keyTest: e=>e[R.CTRL_OR_CMD] && e.shiftKey && e.key === R.ARROW_RIGHT,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !fr(e, t, null, r),
        type: "button",
        icon: TO,
        onClick: ()=>n(null),
        title: `${_("labels.alignRight")}  ${j("CtrlOrCmd+Shift+Right")}`,
        "aria-label": _("labels.alignRight"),
        visible: Pt(Pe(e), t)
    })
});
J({
    name: "alignVerticallyCentered",
    trackEvent: {
        category: "element"
    },
    predicate: fr,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Gl(e, t, r, {
            position: "center",
            axis: "y"
        }),
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !fr(e, t, null, r),
        type: "button",
        icon: LO,
        onClick: ()=>n(null),
        title: _("labels.centerVertically"),
        "aria-label": _("labels.centerVertically"),
        visible: Pt(Pe(e), t)
    })
});
J({
    name: "alignHorizontallyCentered",
    trackEvent: {
        category: "element"
    },
    predicate: fr,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Gl(e, t, r, {
            position: "center",
            axis: "x"
        }),
        commitToHistory: !0
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !fr(e, t, null, r),
        type: "button",
        icon: PO,
        onClick: ()=>n(null),
        title: _("labels.centerHorizontally"),
        "aria-label": _("labels.centerHorizontally"),
        visible: Pt(Pe(e), t)
    })
});
const HH = (e,t)=>{
    const [n,r,i,o] = t.axis === "x" ? ["minX", "midX", "maxX", "width"] : ["minY", "midY", "maxY", "height"]
      , s = Bi(e)
      , a = q1(e).map(d=>[d, Bi(d)]).sort((d,f)=>d[1][r] - f[1][r]);
    let l = 0;
    for (const d of a)
        l += d[1][o];
    const c = (s[o] - l) / (a.length - 1);
    if (c < 0) {
        const d = a.findIndex(g=>g[1][n] === s[n])
          , f = a.findIndex(g=>g[1][i] === s[i])
          , h = (a[f][1][r] - a[d][1][r]) / (a.length - 1);
        let m = a[d][1][r];
        return a.flatMap(([g,E],v)=>{
            const y = {
                x: 0,
                y: 0
            };
            return v !== d && v !== f && (m += h,
            y[t.axis] = m - E[r]),
            g.map(w=>fe(w, {
                x: w.x + y.x,
                y: w.y + y.y
            }))
        }
        )
    }
    let u = s[n];
    return a.flatMap(([d,f])=>{
        const h = {
            x: 0,
            y: 0
        };
        return h[t.axis] = u - f[n],
        u += c,
        u += f[o],
        d.map(m=>fe(m, {
            x: m.x + h.x,
            y: m.y + h.y
        }))
    }
    )
}
  , OS = (e,t)=>{
    const n = t.scene.getSelectedElements(e);
    return n.length > 1 && !n.some(r=>r.type === "frame")
}
  , DS = (e,t,n,r)=>{
    const i = n.scene.getSelectedElements(t)
      , o = HH(i, r)
      , s = Rt(o);
    return Sl(e.map(a=>s.get(a.id) || a), t, n)
}
;
J({
    name: "distributeHorizontally",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        appState: t,
        elements: DS(e, t, r, {
            space: "between",
            axis: "x"
        }),
        commitToHistory: !0
    }),
    keyTest: e=>!e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.H,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !OS(t, r),
        type: "button",
        icon: MO,
        onClick: ()=>n(null),
        title: `${_("labels.distributeHorizontally")}  ${j("Alt+H")}`,
        "aria-label": _("labels.distributeHorizontally"),
        visible: Pt(Pe(e), t)
    })
});
J({
    name: "distributeVertically",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        appState: t,
        elements: DS(e, t, r, {
            space: "between",
            axis: "y"
        }),
        commitToHistory: !0
    }),
    keyTest: e=>!e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.V,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>p(Ee, {
        hidden: !OS(t, r),
        type: "button",
        icon: AO,
        onClick: ()=>n(null),
        title: `${_("labels.distributeVertically")}  ${j("Alt+V")}`,
        "aria-label": _("labels.distributeVertically"),
        visible: Pt(Pe(e), t)
    })
});
const UH = J({
    name: "flipHorizontal",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        elements: Sl(NS(e, t, "horizontal"), t, r),
        appState: t,
        commitToHistory: !0
    }),
    keyTest: e=>e.shiftKey && e.code === Me.H,
    contextItemLabel: "labels.flipHorizontal"
})
  , VH = J({
    name: "flipVertical",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        elements: Sl(NS(e, t, "vertical"), t, r),
        appState: t,
        commitToHistory: !0
    }),
    keyTest: e=>e.shiftKey && e.code === Me.V && !e[R.CTRL_OR_CMD],
    contextItemLabel: "labels.flipVertical"
})
  , NS = (e,t,n)=>{
    const r = it(Pe(e), t, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    })
      , i = WH(r, t, n)
      , o = Rt(i);
    return e.map(s=>o.get(s.id) || s)
}
  , WH = (e,t,n)=>{
    const {minX: r, minY: i, maxX: o, maxY: s} = Bi(e);
    return kS({
        originalElements: Rt(e)
    }, e, "nw", !0, n === "horizontal" ? o : r, n === "horizontal" ? i : s),
    (Ts(t) ? kg : Mg)(e),
    e
}
  , ih = J({
    name: "copy",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        return qB(i, r.files),
        {
            commitToHistory: !1
        }
    }
    ,
    predicate: (e,t,n,r)=>r.device.isMobile && !!navigator.clipboard,
    contextItemLabel: "labels.copy",
    keyTest: void 0
})
  , fb = J({
    name: "paste",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>(r.pasteFromClipboard(null),
    {
        commitToHistory: !1
    }),
    predicate: (e,t,n,r)=>r.device.isMobile && !!navigator.clipboard,
    contextItemLabel: "labels.paste",
    keyTest: void 0
})
  , hb = J({
    name: "cut",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>(ih.perform(e, t, n, r),
    AS.perform(e, t)),
    predicate: (e,t,n,r)=>r.device.isMobile && !!navigator.clipboard,
    contextItemLabel: "labels.cut",
    keyTest: e=>e[R.CTRL_OR_CMD] && e.key === R.X
})
  , pb = J({
    name: "copyAsSvg",
    trackEvent: {
        category: "element"
    },
    perform: async(e,t,n,r)=>{
        if (!r.canvas)
            return {
                commitToHistory: !1
            };
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        try {
            return await E0("clipboard-svg", i.length ? i : Pe(e), t, r.files, t),
            {
                commitToHistory: !1
            }
        } catch (o) {
            return console.error(o),
            {
                appState: {
                    ...t,
                    errorMessage: o.message
                },
                commitToHistory: !1
            }
        }
    }
    ,
    predicate: e=>Oy && e.length > 0,
    contextItemLabel: "labels.copyAsSvg"
})
  , mb = J({
    name: "copyAsPng",
    trackEvent: {
        category: "element"
    },
    perform: async(e,t,n,r)=>{
        if (!r.canvas)
            return {
                commitToHistory: !1
            };
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        try {
            return await E0("clipboard", i.length ? i : Pe(e), t, r.files, t),
            {
                appState: {
                    ...t,
                    toast: {
                        message: _("toast.copyToClipboardAsPng", {
                            exportSelection: i.length ? _("toast.selection") : _("toast.canvas"),
                            exportColorScheme: t.exportWithDarkMode ? _("buttons.darkMode") : _("buttons.lightMode")
                        })
                    }
                },
                commitToHistory: !1
            }
        } catch (o) {
            return console.error(o),
            {
                appState: {
                    ...t,
                    errorMessage: o.message
                },
                commitToHistory: !1
            }
        }
    }
    ,
    predicate: e=>Dy && e.length > 0,
    contextItemLabel: "labels.copyAsPng",
    keyTest: e=>e.code === Me.C && e.altKey && e.shiftKey
})
  , gb = J({
    name: "copyText",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const o = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        }).reduce((s,a)=>(ue(a) && s.push(a.text),
        s), []).join(`

`);
        return Ul(o),
        {
            commitToHistory: !1
        }
    }
    ,
    predicate: (e,t,n,r)=>Oy && r.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !0
    }).some(ue),
    contextItemLabel: "labels.copyText"
})
  , vb = J({
    name: "gridMode",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.gridSize
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                gridSize: this.checked(t) ? null : tl,
                objectsSnapModeEnabled: !1
            },
            commitToHistory: !1
        }
    },
    checked: e=>e.gridSize !== null,
    predicate: (e,t,n)=>typeof n.gridModeEnabled > "u",
    contextItemLabel: "labels.showGrid",
    keyTest: e=>e[R.CTRL_OR_CMD] && e.code === Me.QUOTE
})
  , n2 = J({
    name: "zenMode",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.zenModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                zenModeEnabled: !this.checked(t)
            },
            commitToHistory: !1
        }
    },
    checked: e=>e.zenModeEnabled,
    predicate: (e,t,n)=>typeof n.zenModeEnabled > "u",
    contextItemLabel: "buttons.zenMode",
    keyTest: e=>!e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.Z
})
  , GH = J({
    name: "objectsSnapMode",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.objectsSnapModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                objectsSnapModeEnabled: !this.checked(t),
                gridSize: null
            },
            commitToHistory: !1
        }
    },
    checked: e=>e.objectsSnapModeEnabled,
    predicate: (e,t,n)=>typeof n.objectsSnapModeEnabled > "u",
    contextItemLabel: "buttons.objectsSnapMode",
    keyTest: e=>!e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.S
})
  , d1 = J({
    name: "stats",
    viewMode: !0,
    trackEvent: {
        category: "menu"
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                showStats: !this.checked(t)
            },
            commitToHistory: !1
        }
    },
    checked: e=>e.showStats,
    contextItemLabel: "stats.title",
    keyTest: e=>!e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.SLASH
})
  , jH = J({
    name: "unbindText",
    contextItemLabel: "labels.unbindText",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>r.scene.getSelectedElements(t).some(o=>jo(o)),
    perform: (e,t,n,r)=>(r.scene.getSelectedElements(t).forEach(o=>{
        var a;
        const s = Ae(o);
        if (s) {
            const {width: l, height: c, baseline: u} = Yi(s.originalText, xt(s), s.lineHeight)
              , d = rz(o.id);
            WI(o.id);
            const {x: f, y: h} = h0(o, s);
            Q(s, {
                containerId: null,
                width: l,
                height: c,
                baseline: u,
                text: s.originalText,
                x: f,
                y: h
            }),
            Q(o, {
                boundElements: (a = o.boundElements) == null ? void 0 : a.filter(m=>m.id !== s.id),
                height: d || o.height
            })
        }
    }
    ),
    {
        elements: e,
        appState: t,
        commitToHistory: !0
    })
})
  , YH = J({
    name: "bindText",
    contextItemLabel: "labels.bindText",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        if (i.length === 2) {
            const o = ue(i[0]) || ue(i[1]);
            let s;
            if (zs(i[0]) ? s = i[0] : zs(i[1]) && (s = i[1]),
            o && s && Ae(s) === null)
                return !0
        }
        return !1
    }
    ,
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        let o, s;
        ue(i[0]) && zs(i[1]) ? (o = i[0],
        s = i[1]) : (o = i[1],
        s = i[0]),
        Q(o, {
            containerId: s.id,
            verticalAlign: Bn.MIDDLE,
            textAlign: Ru.CENTER
        }),
        Q(s, {
            boundElements: (s.boundElements || []).concat({
                type: "text",
                id: o.id
            })
        });
        const a = s.height;
        return mi(o, s),
        o1(s.id, a),
        {
            elements: ZH(e, s, o),
            appState: {
                ...t,
                selectedElementIds: {
                    [s.id]: !0
                }
            },
            commitToHistory: !0
        }
    }
})
  , ZH = (e,t,n)=>{
    const r = e.slice()
      , i = r.findIndex(s=>s.id === n.id);
    r.splice(i, 1);
    const o = r.findIndex(s=>s.id === t.id);
    return r.splice(o + 1, 0, n),
    r
}
  , KH = (e,t,n)=>{
    const r = e.slice()
      , i = r.findIndex(s=>s.id === t.id);
    r.splice(i, 1);
    const o = r.findIndex(s=>s.id === n.id);
    return r.splice(o, 0, t),
    r
}
  , XH = J({
    name: "wrapTextInContainer",
    contextItemLabel: "labels.createContainerFromText",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t)
          , o = i.every(s=>ue(s));
        return i.length > 0 && o
    }
    ,
    perform: (e,t,n,r)=>{
        var a;
        const i = r.scene.getSelectedElements(t);
        let o = e.slice();
        const s = {};
        for (const l of i)
            if (ue(l)) {
                const c = Yo({
                    type: "rectangle",
                    backgroundColor: t.currentItemBackgroundColor,
                    boundElements: [...l.boundElements || [], {
                        id: l.id,
                        type: "text"
                    }],
                    angle: l.angle,
                    fillStyle: t.currentItemFillStyle,
                    strokeColor: t.currentItemStrokeColor,
                    roughness: t.currentItemRoughness,
                    strokeWidth: t.currentItemStrokeWidth,
                    strokeStyle: t.currentItemStrokeStyle,
                    roundness: t.currentItemRoundness === "round" ? {
                        type: Nl("rectangle") ? zt.ADAPTIVE_RADIUS : zt.PROPORTIONAL_RADIUS
                    } : null,
                    opacity: 100,
                    locked: !1,
                    x: l.x - Mt,
                    y: l.y - Mt,
                    width: Js(l.width, "rectangle"),
                    height: Js(l.height, "rectangle"),
                    groupIds: l.groupIds,
                    frameId: l.frameId
                });
                if ((a = l.boundElements) != null && a.length) {
                    const u = l.boundElements.filter(f=>f.type === "arrow").map(f=>f.id);
                    o.filter(f=>u.includes(f.id)).forEach(f=>{
                        let h = f.startBinding
                          , m = f.endBinding;
                        (h == null ? void 0 : h.elementId) === l.id && (h = {
                            ...h,
                            elementId: c.id
                        }),
                        (m == null ? void 0 : m.elementId) === l.id && (m = {
                            ...m,
                            elementId: c.id
                        }),
                        (h || m) && Q(f, {
                            startBinding: h,
                            endBinding: m
                        }, !1)
                    }
                    )
                }
                Q(l, {
                    containerId: c.id,
                    verticalAlign: Bn.MIDDLE,
                    boundElements: null,
                    textAlign: Ru.CENTER
                }, !1),
                mi(l, c),
                o = KH([...o, c], c, l),
                s[c.id] = !0
            }
        return {
            elements: o,
            appState: {
                ...t,
                selectedElementIds: s
            },
            commitToHistory: !0
        }
    }
})
  , yb = e=>e.every(t=>!t.locked)
  , qH = J({
    name: "toggleElementLock",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>!r.scene.getSelectedElements(t).some(o=>o.locked && o.frameId),
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        if (!i.length)
            return !1;
        const o = yb(i)
          , s = Rt(i);
        return {
            elements: e.map(a=>s.has(a.id) ? fe(a, {
                locked: o
            }) : a),
            appState: {
                ...t,
                selectedLinearElement: o ? null : t.selectedLinearElement
            },
            commitToHistory: !0
        }
    }
    ,
    contextItemLabel: (e,t,n)=>{
        const r = n.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !1
        });
        return r.length === 1 && r[0].type !== "frame" ? r[0].locked ? "labels.elementLock.unlock" : "labels.elementLock.lock" : yb(r) ? "labels.elementLock.lockAll" : "labels.elementLock.unlockAll"
    }
    ,
    keyTest: (e,t,n,r)=>e.key.toLocaleLowerCase() === R.L && e[R.CTRL_OR_CMD] && e.shiftKey && r.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !1
    }).length > 0
})
  , QH = J({
    name: "unlockAllElements",
    trackEvent: {
        category: "canvas"
    },
    viewMode: !1,
    predicate: e=>e.some(t=>t.locked),
    perform: (e,t)=>{
        const n = e.filter(r=>r.locked);
        return {
            elements: e.map(r=>r.locked ? fe(r, {
                locked: !1
            }) : r),
            appState: {
                ...t,
                selectedElementIds: Object.fromEntries(n.map(r=>[r.id, !0]))
            },
            commitToHistory: !0
        }
    }
    ,
    contextItemLabel: "labels.elementLock.unlockAll"
})
  , JH = J({
    name: "toggleLinearEditor",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return !!(i.length === 1 && ye(i[0]))
    }
    ,
    perform(e, t, n, r) {
        var s;
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        })[0]
          , o = ((s = t.editingLinearElement) == null ? void 0 : s.elementId) === i.id ? null : new ce(i,r.scene);
        return {
            appState: {
                ...t,
                editingLinearElement: o
            },
            commitToHistory: !1
        }
    },
    contextItemLabel: (e,t,n)=>{
        var i;
        const r = n.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        })[0];
        return ((i = t.editingLinearElement) == null ? void 0 : i.elementId) === r.id ? "labels.lineEditor.exit" : "labels.lineEditor.edit"
    }
})
  , FS = (e,t,n)=>{
    if (!t.multiElement && !t.resizingElement && !t.editingElement && !t.draggingElement) {
        const i = n();
        if (i === null)
            return {
                commitToHistory: !1
            };
        const o = Rt(e)
          , s = i.elements
          , a = Rt(s)
          , l = e.filter(u=>!a.has(u.id))
          , c = s.map(u=>fe(o.get(u.id) || u, u)).concat(l.map(u=>fe(u, {
            isDeleted: !0
        })));
        return py(c, l),
        {
            elements: c,
            appState: {
                ...t,
                ...i.appState
            },
            commitToHistory: !1,
            syncHistory: !0
        }
    }
    return {
        commitToHistory: !1
    }
}
  , eU = e=>({
    name: "undo",
    trackEvent: {
        category: "history"
    },
    perform: (t,n)=>FS(t, n, ()=>e.undoOnce()),
    keyTest: t=>t[R.CTRL_OR_CMD] && t.key.toLowerCase() === R.Z && !t.shiftKey,
    PanelComponent: ({updateData: t, data: n})=>p(Ee, {
        type: "button",
        icon: mO,
        "aria-label": _("buttons.undo"),
        onClick: t,
        size: (n == null ? void 0 : n.size) || "medium"
    }),
    commitToHistory: ()=>!1
})
  , tU = e=>({
    name: "redo",
    trackEvent: {
        category: "history"
    },
    perform: (t,n)=>FS(t, n, ()=>e.redoOnce()),
    keyTest: t=>t[R.CTRL_OR_CMD] && t.shiftKey && t.key.toLowerCase() === R.Z || D8 && t.ctrlKey && !t.shiftKey && t.key === R.Y,
    PanelComponent: ({updateData: t, data: n})=>p(Ee, {
        type: "button",
        icon: gO,
        "aria-label": _("buttons.redo"),
        onClick: t,
        size: (n == null ? void 0 : n.size) || "medium"
    }),
    commitToHistory: ()=>!1
})
  , Pp = (e,t,n,r,i,o)=>{
    if (e.trackEvent)
        try {
            typeof e.trackEvent == "object" && (!e.trackEvent.predicate || e.trackEvent.predicate(n, r, o)) && nt(e.trackEvent.category, e.trackEvent.action || e.name, `${t} (${i.device.isMobile ? "mobile" : "desktop"})`)
        } catch (s) {
            console.error("error while logging action:", s)
        }
}
;
class nU {
    constructor(t, n, r, i) {
        M(this, "actions", {});
        M(this, "updater");
        M(this, "getAppState");
        M(this, "getElementsIncludingDeleted");
        M(this, "app");
        M(this, "renderAction", (t,n)=>{
            const r = this.app.props.UIOptions.canvasActions;
            if (this.actions[t] && "PanelComponent"in this.actions[t] && (!(t in r) || r[t])) {
                const i = this.actions[t]
                  , o = i.PanelComponent;
                o.displayName = "PanelComponent";
                const s = this.getElementsIncludingDeleted()
                  , a = this.getAppState()
                  , l = c=>{
                    Pp(i, "ui", a, s, this.app, c),
                    this.updater(i.perform(this.getElementsIncludingDeleted(), this.getAppState(), c, this.app))
                }
                ;
                return p(o, {
                    elements: this.getElementsIncludingDeleted(),
                    appState: this.getAppState(),
                    updateData: l,
                    appProps: this.app.props,
                    app: this.app,
                    data: n
                })
            }
            return null
        }
        );
        M(this, "isActionEnabled", t=>{
            const n = this.getElementsIncludingDeleted()
              , r = this.getAppState();
            return !t.predicate || t.predicate(n, r, this.app.props, this.app)
        }
        );
        this.updater = o=>{
            if (o && "then"in o)
                o.then(s=>t(s));
            else
                return t(o)
        }
        ,
        this.getAppState = n,
        this.getElementsIncludingDeleted = r,
        this.app = i
    }
    registerAction(t) {
        this.actions[t.name] = t
    }
    registerAll(t) {
        t.forEach(n=>this.registerAction(n))
    }
    handleKeyDown(t) {
        const n = this.app.props.UIOptions.canvasActions
          , r = Object.values(this.actions).sort((l,c)=>(c.keyPriority || 0) - (l.keyPriority || 0)).filter(l=>(l.name in n ? n[l.name] : !0) && l.keyTest && l.keyTest(t, this.getAppState(), this.getElementsIncludingDeleted(), this.app));
        if (r.length !== 1)
            return r.length > 1 && console.warn("Canceling as multiple actions match this shortcut", r),
            !1;
        const i = r[0];
        if (this.getAppState().viewModeEnabled && i.viewMode !== !0)
            return !1;
        const o = this.getElementsIncludingDeleted()
          , s = this.getAppState()
          , a = null;
        return Pp(i, "keyboard", s, o, this.app, null),
        t.preventDefault(),
        t.stopPropagation(),
        this.updater(r[0].perform(o, s, a, this.app)),
        !0
    }
    executeAction(t, n="api", r=null) {
        const i = this.getElementsIncludingDeleted()
          , o = this.getAppState();
        Pp(t, n, o, i, this.app, r),
        this.updater(t.perform(i, o, r, this.app))
    }
}
var Zy = {};
(function(e) {
    (function(t) {
        t(typeof DO_NOT_EXPORT_CRC > "u" ? e : {})
    }
    )(function(t) {
        t.version = "0.3.0";
        function n() {
            for (var c = 0, u = new Array(256), d = 0; d != 256; ++d)
                c = d,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                u[d] = c;
            return typeof Int32Array < "u" ? new Int32Array(u) : u
        }
        var r = n()
          , i = typeof Buffer < "u";
        function o(c) {
            if (c.length > 32768 && i)
                return a(new Buffer(c));
            for (var u = -1, d = c.length - 1, f = 0; f < d; )
                u = r[(u ^ c.charCodeAt(f++)) & 255] ^ u >>> 8,
                u = r[(u ^ c.charCodeAt(f++)) & 255] ^ u >>> 8;
            return f === d && (u = u >>> 8 ^ r[(u ^ c.charCodeAt(f)) & 255]),
            u ^ -1
        }
        function s(c) {
            if (c.length > 1e4)
                return a(c);
            for (var u = -1, d = 0, f = c.length - 3; d < f; )
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255];
            for (; d < f + 3; )
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255];
            return u ^ -1
        }
        function a(c) {
            for (var u = -1, d = 0, f = c.length - 7; d < f; )
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255];
            for (; d < f + 7; )
                u = u >>> 8 ^ r[(u ^ c[d++]) & 255];
            return u ^ -1
        }
        function l(c) {
            for (var u = -1, d = 0, f = c.length, h, m; d < f; )
                h = c.charCodeAt(d++),
                h < 128 ? u = u >>> 8 ^ r[(u ^ h) & 255] : h < 2048 ? (u = u >>> 8 ^ r[(u ^ (192 | h >> 6 & 31)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | h & 63)) & 255]) : h >= 55296 && h < 57344 ? (h = (h & 1023) + 64,
                m = c.charCodeAt(d++) & 1023,
                u = u >>> 8 ^ r[(u ^ (240 | h >> 8 & 7)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | h >> 2 & 63)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | m >> 6 & 15 | h & 3)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | m & 63)) & 255]) : (u = u >>> 8 ^ r[(u ^ (224 | h >> 12 & 15)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | h >> 6 & 63)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | h & 63)) & 255]);
            return u ^ -1
        }
        t.table = r,
        t.bstr = o,
        t.buf = s,
        t.str = l
    })
}
)(Zy);
var rU = Zy
  , iU = aU
  , qr = new Uint8Array(4)
  , oU = new Int32Array(qr.buffer)
  , sU = new Uint32Array(qr.buffer);
function aU(e) {
    if (e[0] !== 137)
        throw new Error("Invalid .png file header");
    if (e[1] !== 80)
        throw new Error("Invalid .png file header");
    if (e[2] !== 78)
        throw new Error("Invalid .png file header");
    if (e[3] !== 71)
        throw new Error("Invalid .png file header");
    if (e[4] !== 13)
        throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
    if (e[5] !== 10)
        throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
    if (e[6] !== 26)
        throw new Error("Invalid .png file header");
    if (e[7] !== 10)
        throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
    for (var t = !1, n = [], r = 8; r < e.length; ) {
        qr[3] = e[r++],
        qr[2] = e[r++],
        qr[1] = e[r++],
        qr[0] = e[r++];
        var i = sU[0] + 4
          , o = new Uint8Array(i);
        o[0] = e[r++],
        o[1] = e[r++],
        o[2] = e[r++],
        o[3] = e[r++];
        var s = String.fromCharCode(o[0]) + String.fromCharCode(o[1]) + String.fromCharCode(o[2]) + String.fromCharCode(o[3]);
        if (!n.length && s !== "IHDR")
            throw new Error("IHDR header missing");
        if (s === "IEND") {
            t = !0,
            n.push({
                name: s,
                data: new Uint8Array(0)
            });
            break
        }
        for (var a = 4; a < i; a++)
            o[a] = e[r++];
        qr[3] = e[r++],
        qr[2] = e[r++],
        qr[1] = e[r++],
        qr[0] = e[r++];
        var l = oU[0]
          , c = rU.buf(o);
        if (c !== l)
            throw new Error("CRC values for " + s + " header do not match, PNG file is likely corrupted");
        var u = new Uint8Array(o.buffer.slice(4));
        n.push({
            name: s,
            data: u
        })
    }
    if (!t)
        throw new Error(".png file ended prematurely: no IEND header was found");
    return n
}
const UX = Al(iU);
var $S = {}
  , lU = cU;
function cU(e, t) {
    if (e = String(e),
    t = String(t),
    !/^[\x00-\xFF]+$/.test(e) || !/^[\x00-\xFF]+$/.test(t))
        throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");
    if (e.length >= 80)
        throw new Error('Keyword "' + e + '" is longer than the 79-character limit imposed by the PNG specification');
    for (var n = e.length + t.length + 1, r = new Uint8Array(n), i = 0, o, s = 0; s < e.length; s++) {
        if (!(o = e.charCodeAt(s)))
            throw new Error("0x00 character is not permitted in tEXt keywords");
        r[i++] = o
    }
    r[i++] = 0;
    for (var a = 0; a < t.length; a++) {
        if (!(o = t.charCodeAt(a)))
            throw new Error("0x00 character is not permitted in tEXt content");
        r[i++] = o
    }
    return {
        name: "tEXt",
        data: r
    }
}
var uU = dU;
function dU(e) {
    e.data && e.name && (e = e.data);
    for (var t = !0, n = "", r = "", i = 0; i < e.length; i++) {
        var o = e[i];
        if (t)
            o ? r += String.fromCharCode(o) : t = !1;
        else if (o)
            n += String.fromCharCode(o);
        else
            throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")
    }
    return {
        keyword: r,
        text: n
    }
}
$S.encode = lU;
$S.decode = uU;
var fU = function(e, t, n) {
    var r = []
      , i = e.length;
    if (i === 0)
        return r;
    var o = t < 0 ? Math.max(0, t + i) : t || 0;
    for (n !== void 0 && (i = n < 0 ? n + i : n); i-- > o; )
        r[i - o] = e[i];
    return r
}
  , hU = fU
  , pU = Zy
  , mU = yU
  , Qr = new Uint8Array(4)
  , gU = new Int32Array(Qr.buffer)
  , vU = new Uint32Array(Qr.buffer);
function yU(e) {
    var t = 8, n = t, r;
    for (r = 0; r < e.length; r++)
        t += e[r].data.length,
        t += 12;
    var i = new Uint8Array(t);
    for (i[0] = 137,
    i[1] = 80,
    i[2] = 78,
    i[3] = 71,
    i[4] = 13,
    i[5] = 10,
    i[6] = 26,
    i[7] = 10,
    r = 0; r < e.length; r++) {
        var o = e[r]
          , s = o.name
          , a = o.data
          , l = a.length
          , c = [s.charCodeAt(0), s.charCodeAt(1), s.charCodeAt(2), s.charCodeAt(3)];
        vU[0] = l,
        i[n++] = Qr[3],
        i[n++] = Qr[2],
        i[n++] = Qr[1],
        i[n++] = Qr[0],
        i[n++] = c[0],
        i[n++] = c[1],
        i[n++] = c[2],
        i[n++] = c[3];
        for (var u = 0; u < l; )
            i[n++] = a[u++];
        var d = c.concat(hU(a))
          , f = pU.buf(d);
        gU[0] = f,
        i[n++] = Qr[3],
        i[n++] = Qr[2],
        i[n++] = Qr[1],
        i[n++] = Qr[0]
    }
    return i
}
const VX = Al(mU);
var Ji = {};
(function(e) {
    var t = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Int32Array < "u";
    function n(o, s) {
        return Object.prototype.hasOwnProperty.call(o, s)
    }
    e.assign = function(o) {
        for (var s = Array.prototype.slice.call(arguments, 1); s.length; ) {
            var a = s.shift();
            if (a) {
                if (typeof a != "object")
                    throw new TypeError(a + "must be non-object");
                for (var l in a)
                    n(a, l) && (o[l] = a[l])
            }
        }
        return o
    }
    ,
    e.shrinkBuf = function(o, s) {
        return o.length === s ? o : o.subarray ? o.subarray(0, s) : (o.length = s,
        o)
    }
    ;
    var r = {
        arraySet: function(o, s, a, l, c) {
            if (s.subarray && o.subarray) {
                o.set(s.subarray(a, a + l), c);
                return
            }
            for (var u = 0; u < l; u++)
                o[c + u] = s[a + u]
        },
        flattenChunks: function(o) {
            var s, a, l, c, u, d;
            for (l = 0,
            s = 0,
            a = o.length; s < a; s++)
                l += o[s].length;
            for (d = new Uint8Array(l),
            c = 0,
            s = 0,
            a = o.length; s < a; s++)
                u = o[s],
                d.set(u, c),
                c += u.length;
            return d
        }
    }
      , i = {
        arraySet: function(o, s, a, l, c) {
            for (var u = 0; u < l; u++)
                o[c + u] = s[a + u]
        },
        flattenChunks: function(o) {
            return [].concat.apply([], o)
        }
    };
    e.setTyped = function(o) {
        o ? (e.Buf8 = Uint8Array,
        e.Buf16 = Uint16Array,
        e.Buf32 = Int32Array,
        e.assign(e, r)) : (e.Buf8 = Array,
        e.Buf16 = Array,
        e.Buf32 = Array,
        e.assign(e, i))
    }
    ,
    e.setTyped(t)
}
)(Ji);
var Ad = {}
  , gi = {}
  , jl = {}
  , EU = Ji
  , wU = 4
  , Eb = 0
  , wb = 1
  , bU = 2;
function Yl(e) {
    for (var t = e.length; --t >= 0; )
        e[t] = 0
}
var _U = 0
  , BS = 1
  , xU = 2
  , IU = 3
  , SU = 258
  , Ky = 29
  , Ld = 256
  , Qu = Ld + 1 + Ky
  , il = 30
  , Xy = 19
  , zS = 2 * Qu + 1
  , Ls = 15
  , Rp = 16
  , CU = 7
  , qy = 256
  , HS = 16
  , US = 17
  , VS = 18
  , r2 = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
  , oh = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
  , kU = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
  , WS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
  , TU = 512
  , Ai = new Array((Qu + 2) * 2);
Yl(Ai);
var iu = new Array(il * 2);
Yl(iu);
var Ju = new Array(TU);
Yl(Ju);
var ed = new Array(SU - IU + 1);
Yl(ed);
var Qy = new Array(Ky);
Yl(Qy);
var f1 = new Array(il);
Yl(f1);
function Op(e, t, n, r, i) {
    this.static_tree = e,
    this.extra_bits = t,
    this.extra_base = n,
    this.elems = r,
    this.max_length = i,
    this.has_stree = e && e.length
}
var GS, jS, YS;
function Dp(e, t) {
    this.dyn_tree = e,
    this.max_code = 0,
    this.stat_desc = t
}
function ZS(e) {
    return e < 256 ? Ju[e] : Ju[256 + (e >>> 7)]
}
function td(e, t) {
    e.pending_buf[e.pending++] = t & 255,
    e.pending_buf[e.pending++] = t >>> 8 & 255
}
function kn(e, t, n) {
    e.bi_valid > Rp - n ? (e.bi_buf |= t << e.bi_valid & 65535,
    td(e, e.bi_buf),
    e.bi_buf = t >> Rp - e.bi_valid,
    e.bi_valid += n - Rp) : (e.bi_buf |= t << e.bi_valid & 65535,
    e.bi_valid += n)
}
function ri(e, t, n) {
    kn(e, n[t * 2], n[t * 2 + 1])
}
function KS(e, t) {
    var n = 0;
    do
        n |= e & 1,
        e >>>= 1,
        n <<= 1;
    while (--t > 0);
    return n >>> 1
}
function MU(e) {
    e.bi_valid === 16 ? (td(e, e.bi_buf),
    e.bi_buf = 0,
    e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = e.bi_buf & 255,
    e.bi_buf >>= 8,
    e.bi_valid -= 8)
}
function AU(e, t) {
    var n = t.dyn_tree, r = t.max_code, i = t.stat_desc.static_tree, o = t.stat_desc.has_stree, s = t.stat_desc.extra_bits, a = t.stat_desc.extra_base, l = t.stat_desc.max_length, c, u, d, f, h, m, g = 0;
    for (f = 0; f <= Ls; f++)
        e.bl_count[f] = 0;
    for (n[e.heap[e.heap_max] * 2 + 1] = 0,
    c = e.heap_max + 1; c < zS; c++)
        u = e.heap[c],
        f = n[n[u * 2 + 1] * 2 + 1] + 1,
        f > l && (f = l,
        g++),
        n[u * 2 + 1] = f,
        !(u > r) && (e.bl_count[f]++,
        h = 0,
        u >= a && (h = s[u - a]),
        m = n[u * 2],
        e.opt_len += m * (f + h),
        o && (e.static_len += m * (i[u * 2 + 1] + h)));
    if (g !== 0) {
        do {
            for (f = l - 1; e.bl_count[f] === 0; )
                f--;
            e.bl_count[f]--,
            e.bl_count[f + 1] += 2,
            e.bl_count[l]--,
            g -= 2
        } while (g > 0);
        for (f = l; f !== 0; f--)
            for (u = e.bl_count[f]; u !== 0; )
                d = e.heap[--c],
                !(d > r) && (n[d * 2 + 1] !== f && (e.opt_len += (f - n[d * 2 + 1]) * n[d * 2],
                n[d * 2 + 1] = f),
                u--)
    }
}
function XS(e, t, n) {
    var r = new Array(Ls + 1), i = 0, o, s;
    for (o = 1; o <= Ls; o++)
        r[o] = i = i + n[o - 1] << 1;
    for (s = 0; s <= t; s++) {
        var a = e[s * 2 + 1];
        a !== 0 && (e[s * 2] = KS(r[a]++, a))
    }
}
function LU() {
    var e, t, n, r, i, o = new Array(Ls + 1);
    for (n = 0,
    r = 0; r < Ky - 1; r++)
        for (Qy[r] = n,
        e = 0; e < 1 << r2[r]; e++)
            ed[n++] = r;
    for (ed[n - 1] = r,
    i = 0,
    r = 0; r < 16; r++)
        for (f1[r] = i,
        e = 0; e < 1 << oh[r]; e++)
            Ju[i++] = r;
    for (i >>= 7; r < il; r++)
        for (f1[r] = i << 7,
        e = 0; e < 1 << oh[r] - 7; e++)
            Ju[256 + i++] = r;
    for (t = 0; t <= Ls; t++)
        o[t] = 0;
    for (e = 0; e <= 143; )
        Ai[e * 2 + 1] = 8,
        e++,
        o[8]++;
    for (; e <= 255; )
        Ai[e * 2 + 1] = 9,
        e++,
        o[9]++;
    for (; e <= 279; )
        Ai[e * 2 + 1] = 7,
        e++,
        o[7]++;
    for (; e <= 287; )
        Ai[e * 2 + 1] = 8,
        e++,
        o[8]++;
    for (XS(Ai, Qu + 1, o),
    e = 0; e < il; e++)
        iu[e * 2 + 1] = 5,
        iu[e * 2] = KS(e, 5);
    GS = new Op(Ai,r2,Ld + 1,Qu,Ls),
    jS = new Op(iu,oh,0,il,Ls),
    YS = new Op(new Array(0),kU,0,Xy,CU)
}
function qS(e) {
    var t;
    for (t = 0; t < Qu; t++)
        e.dyn_ltree[t * 2] = 0;
    for (t = 0; t < il; t++)
        e.dyn_dtree[t * 2] = 0;
    for (t = 0; t < Xy; t++)
        e.bl_tree[t * 2] = 0;
    e.dyn_ltree[qy * 2] = 1,
    e.opt_len = e.static_len = 0,
    e.last_lit = e.matches = 0
}
function QS(e) {
    e.bi_valid > 8 ? td(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf),
    e.bi_buf = 0,
    e.bi_valid = 0
}
function PU(e, t, n, r) {
    QS(e),
    r && (td(e, n),
    td(e, ~n)),
    EU.arraySet(e.pending_buf, e.window, t, n, e.pending),
    e.pending += n
}
function bb(e, t, n, r) {
    var i = t * 2
      , o = n * 2;
    return e[i] < e[o] || e[i] === e[o] && r[t] <= r[n]
}
function Np(e, t, n) {
    for (var r = e.heap[n], i = n << 1; i <= e.heap_len && (i < e.heap_len && bb(t, e.heap[i + 1], e.heap[i], e.depth) && i++,
    !bb(t, r, e.heap[i], e.depth)); )
        e.heap[n] = e.heap[i],
        n = i,
        i <<= 1;
    e.heap[n] = r
}
function _b(e, t, n) {
    var r, i, o = 0, s, a;
    if (e.last_lit !== 0)
        do
            r = e.pending_buf[e.d_buf + o * 2] << 8 | e.pending_buf[e.d_buf + o * 2 + 1],
            i = e.pending_buf[e.l_buf + o],
            o++,
            r === 0 ? ri(e, i, t) : (s = ed[i],
            ri(e, s + Ld + 1, t),
            a = r2[s],
            a !== 0 && (i -= Qy[s],
            kn(e, i, a)),
            r--,
            s = ZS(r),
            ri(e, s, n),
            a = oh[s],
            a !== 0 && (r -= f1[s],
            kn(e, r, a)));
        while (o < e.last_lit);
    ri(e, qy, t)
}
function i2(e, t) {
    var n = t.dyn_tree, r = t.stat_desc.static_tree, i = t.stat_desc.has_stree, o = t.stat_desc.elems, s, a, l = -1, c;
    for (e.heap_len = 0,
    e.heap_max = zS,
    s = 0; s < o; s++)
        n[s * 2] !== 0 ? (e.heap[++e.heap_len] = l = s,
        e.depth[s] = 0) : n[s * 2 + 1] = 0;
    for (; e.heap_len < 2; )
        c = e.heap[++e.heap_len] = l < 2 ? ++l : 0,
        n[c * 2] = 1,
        e.depth[c] = 0,
        e.opt_len--,
        i && (e.static_len -= r[c * 2 + 1]);
    for (t.max_code = l,
    s = e.heap_len >> 1; s >= 1; s--)
        Np(e, n, s);
    c = o;
    do
        s = e.heap[1],
        e.heap[1] = e.heap[e.heap_len--],
        Np(e, n, 1),
        a = e.heap[1],
        e.heap[--e.heap_max] = s,
        e.heap[--e.heap_max] = a,
        n[c * 2] = n[s * 2] + n[a * 2],
        e.depth[c] = (e.depth[s] >= e.depth[a] ? e.depth[s] : e.depth[a]) + 1,
        n[s * 2 + 1] = n[a * 2 + 1] = c,
        e.heap[1] = c++,
        Np(e, n, 1);
    while (e.heap_len >= 2);
    e.heap[--e.heap_max] = e.heap[1],
    AU(e, t),
    XS(n, l, e.bl_count)
}
function xb(e, t, n) {
    var r, i = -1, o, s = t[0 * 2 + 1], a = 0, l = 7, c = 4;
    for (s === 0 && (l = 138,
    c = 3),
    t[(n + 1) * 2 + 1] = 65535,
    r = 0; r <= n; r++)
        o = s,
        s = t[(r + 1) * 2 + 1],
        !(++a < l && o === s) && (a < c ? e.bl_tree[o * 2] += a : o !== 0 ? (o !== i && e.bl_tree[o * 2]++,
        e.bl_tree[HS * 2]++) : a <= 10 ? e.bl_tree[US * 2]++ : e.bl_tree[VS * 2]++,
        a = 0,
        i = o,
        s === 0 ? (l = 138,
        c = 3) : o === s ? (l = 6,
        c = 3) : (l = 7,
        c = 4))
}
function Ib(e, t, n) {
    var r, i = -1, o, s = t[0 * 2 + 1], a = 0, l = 7, c = 4;
    for (s === 0 && (l = 138,
    c = 3),
    r = 0; r <= n; r++)
        if (o = s,
        s = t[(r + 1) * 2 + 1],
        !(++a < l && o === s)) {
            if (a < c)
                do
                    ri(e, o, e.bl_tree);
                while (--a !== 0);
            else
                o !== 0 ? (o !== i && (ri(e, o, e.bl_tree),
                a--),
                ri(e, HS, e.bl_tree),
                kn(e, a - 3, 2)) : a <= 10 ? (ri(e, US, e.bl_tree),
                kn(e, a - 3, 3)) : (ri(e, VS, e.bl_tree),
                kn(e, a - 11, 7));
            a = 0,
            i = o,
            s === 0 ? (l = 138,
            c = 3) : o === s ? (l = 6,
            c = 3) : (l = 7,
            c = 4)
        }
}
function RU(e) {
    var t;
    for (xb(e, e.dyn_ltree, e.l_desc.max_code),
    xb(e, e.dyn_dtree, e.d_desc.max_code),
    i2(e, e.bl_desc),
    t = Xy - 1; t >= 3 && e.bl_tree[WS[t] * 2 + 1] === 0; t--)
        ;
    return e.opt_len += 3 * (t + 1) + 5 + 5 + 4,
    t
}
function OU(e, t, n, r) {
    var i;
    for (kn(e, t - 257, 5),
    kn(e, n - 1, 5),
    kn(e, r - 4, 4),
    i = 0; i < r; i++)
        kn(e, e.bl_tree[WS[i] * 2 + 1], 3);
    Ib(e, e.dyn_ltree, t - 1),
    Ib(e, e.dyn_dtree, n - 1)
}
function DU(e) {
    var t = 4093624447, n;
    for (n = 0; n <= 31; n++,
    t >>>= 1)
        if (t & 1 && e.dyn_ltree[n * 2] !== 0)
            return Eb;
    if (e.dyn_ltree[9 * 2] !== 0 || e.dyn_ltree[10 * 2] !== 0 || e.dyn_ltree[13 * 2] !== 0)
        return wb;
    for (n = 32; n < Ld; n++)
        if (e.dyn_ltree[n * 2] !== 0)
            return wb;
    return Eb
}
var Sb = !1;
function NU(e) {
    Sb || (LU(),
    Sb = !0),
    e.l_desc = new Dp(e.dyn_ltree,GS),
    e.d_desc = new Dp(e.dyn_dtree,jS),
    e.bl_desc = new Dp(e.bl_tree,YS),
    e.bi_buf = 0,
    e.bi_valid = 0,
    qS(e)
}
function JS(e, t, n, r) {
    kn(e, (_U << 1) + (r ? 1 : 0), 3),
    PU(e, t, n, !0)
}
function FU(e) {
    kn(e, BS << 1, 3),
    ri(e, qy, Ai),
    MU(e)
}
function $U(e, t, n, r) {
    var i, o, s = 0;
    e.level > 0 ? (e.strm.data_type === bU && (e.strm.data_type = DU(e)),
    i2(e, e.l_desc),
    i2(e, e.d_desc),
    s = RU(e),
    i = e.opt_len + 3 + 7 >>> 3,
    o = e.static_len + 3 + 7 >>> 3,
    o <= i && (i = o)) : i = o = n + 5,
    n + 4 <= i && t !== -1 ? JS(e, t, n, r) : e.strategy === wU || o === i ? (kn(e, (BS << 1) + (r ? 1 : 0), 3),
    _b(e, Ai, iu)) : (kn(e, (xU << 1) + (r ? 1 : 0), 3),
    OU(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, s + 1),
    _b(e, e.dyn_ltree, e.dyn_dtree)),
    qS(e),
    r && QS(e)
}
function BU(e, t, n) {
    return e.pending_buf[e.d_buf + e.last_lit * 2] = t >>> 8 & 255,
    e.pending_buf[e.d_buf + e.last_lit * 2 + 1] = t & 255,
    e.pending_buf[e.l_buf + e.last_lit] = n & 255,
    e.last_lit++,
    t === 0 ? e.dyn_ltree[n * 2]++ : (e.matches++,
    t--,
    e.dyn_ltree[(ed[n] + Ld + 1) * 2]++,
    e.dyn_dtree[ZS(t) * 2]++),
    e.last_lit === e.lit_bufsize - 1
}
jl._tr_init = NU;
jl._tr_stored_block = JS;
jl._tr_flush_block = $U;
jl._tr_tally = BU;
jl._tr_align = FU;
function zU(e, t, n, r) {
    for (var i = e & 65535 | 0, o = e >>> 16 & 65535 | 0, s = 0; n !== 0; ) {
        s = n > 2e3 ? 2e3 : n,
        n -= s;
        do
            i = i + t[r++] | 0,
            o = o + i | 0;
        while (--s);
        i %= 65521,
        o %= 65521
    }
    return i | o << 16 | 0
}
var eC = zU;
function HU() {
    for (var e, t = [], n = 0; n < 256; n++) {
        e = n;
        for (var r = 0; r < 8; r++)
            e = e & 1 ? 3988292384 ^ e >>> 1 : e >>> 1;
        t[n] = e
    }
    return t
}
var UU = HU();
function VU(e, t, n, r) {
    var i = UU
      , o = r + n;
    e ^= -1;
    for (var s = r; s < o; s++)
        e = e >>> 8 ^ i[(e ^ t[s]) & 255];
    return e ^ -1
}
var tC = VU
  , Jy = {
    2: "need dictionary",
    1: "stream end",
    0: "",
    "-1": "file error",
    "-2": "stream error",
    "-3": "data error",
    "-4": "insufficient memory",
    "-5": "buffer error",
    "-6": "incompatible version"
}
  , En = Ji
  , ar = jl
  , nC = eC
  , so = tC
  , WU = Jy
  , pa = 0
  , GU = 1
  , jU = 3
  , Bo = 4
  , Cb = 5
  , ii = 0
  , kb = 1
  , lr = -2
  , YU = -3
  , Fp = -5
  , ZU = -1
  , KU = 1
  , bf = 2
  , XU = 3
  , qU = 4
  , QU = 0
  , JU = 2
  , w0 = 8
  , eV = 9
  , tV = 15
  , nV = 8
  , rV = 29
  , iV = 256
  , o2 = iV + 1 + rV
  , oV = 30
  , sV = 19
  , aV = 2 * o2 + 1
  , lV = 15
  , xe = 3
  , So = 258
  , Or = So + xe + 1
  , cV = 32
  , b0 = 42
  , s2 = 69
  , sh = 73
  , ah = 91
  , lh = 103
  , Ps = 113
  , Dc = 666
  , kt = 1
  , Pd = 2
  , na = 3
  , Zl = 4
  , uV = 3;
function Co(e, t) {
    return e.msg = WU[t],
    t
}
function Tb(e) {
    return (e << 1) - (e > 4 ? 9 : 0)
}
function mo(e) {
    for (var t = e.length; --t >= 0; )
        e[t] = 0
}
function ao(e) {
    var t = e.state
      , n = t.pending;
    n > e.avail_out && (n = e.avail_out),
    n !== 0 && (En.arraySet(e.output, t.pending_buf, t.pending_out, n, e.next_out),
    e.next_out += n,
    t.pending_out += n,
    e.total_out += n,
    e.avail_out -= n,
    t.pending -= n,
    t.pending === 0 && (t.pending_out = 0))
}
function jt(e, t) {
    ar._tr_flush_block(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t),
    e.block_start = e.strstart,
    ao(e.strm)
}
function Le(e, t) {
    e.pending_buf[e.pending++] = t
}
function Ec(e, t) {
    e.pending_buf[e.pending++] = t >>> 8 & 255,
    e.pending_buf[e.pending++] = t & 255
}
function dV(e, t, n, r) {
    var i = e.avail_in;
    return i > r && (i = r),
    i === 0 ? 0 : (e.avail_in -= i,
    En.arraySet(t, e.input, e.next_in, i, n),
    e.state.wrap === 1 ? e.adler = nC(e.adler, t, i, n) : e.state.wrap === 2 && (e.adler = so(e.adler, t, i, n)),
    e.next_in += i,
    e.total_in += i,
    i)
}
function rC(e, t) {
    var n = e.max_chain_length, r = e.strstart, i, o, s = e.prev_length, a = e.nice_match, l = e.strstart > e.w_size - Or ? e.strstart - (e.w_size - Or) : 0, c = e.window, u = e.w_mask, d = e.prev, f = e.strstart + So, h = c[r + s - 1], m = c[r + s];
    e.prev_length >= e.good_match && (n >>= 2),
    a > e.lookahead && (a = e.lookahead);
    do
        if (i = t,
        !(c[i + s] !== m || c[i + s - 1] !== h || c[i] !== c[r] || c[++i] !== c[r + 1])) {
            r += 2,
            i++;
            do
                ;
            while (c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && r < f);
            if (o = So - (f - r),
            r = f - So,
            o > s) {
                if (e.match_start = t,
                s = o,
                o >= a)
                    break;
                h = c[r + s - 1],
                m = c[r + s]
            }
        }
    while ((t = d[t & u]) > l && --n !== 0);
    return s <= e.lookahead ? s : e.lookahead
}
function ra(e) {
    var t = e.w_size, n, r, i, o, s;
    do {
        if (o = e.window_size - e.lookahead - e.strstart,
        e.strstart >= t + (t - Or)) {
            En.arraySet(e.window, e.window, t, t, 0),
            e.match_start -= t,
            e.strstart -= t,
            e.block_start -= t,
            r = e.hash_size,
            n = r;
            do
                i = e.head[--n],
                e.head[n] = i >= t ? i - t : 0;
            while (--r);
            r = t,
            n = r;
            do
                i = e.prev[--n],
                e.prev[n] = i >= t ? i - t : 0;
            while (--r);
            o += t
        }
        if (e.strm.avail_in === 0)
            break;
        if (r = dV(e.strm, e.window, e.strstart + e.lookahead, o),
        e.lookahead += r,
        e.lookahead + e.insert >= xe)
            for (s = e.strstart - e.insert,
            e.ins_h = e.window[s],
            e.ins_h = (e.ins_h << e.hash_shift ^ e.window[s + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[s + xe - 1]) & e.hash_mask,
            e.prev[s & e.w_mask] = e.head[e.ins_h],
            e.head[e.ins_h] = s,
            s++,
            e.insert--,
            !(e.lookahead + e.insert < xe)); )
                ;
    } while (e.lookahead < Or && e.strm.avail_in !== 0)
}
function fV(e, t) {
    var n = 65535;
    for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5); ; ) {
        if (e.lookahead <= 1) {
            if (ra(e),
            e.lookahead === 0 && t === pa)
                return kt;
            if (e.lookahead === 0)
                break
        }
        e.strstart += e.lookahead,
        e.lookahead = 0;
        var r = e.block_start + n;
        if ((e.strstart === 0 || e.strstart >= r) && (e.lookahead = e.strstart - r,
        e.strstart = r,
        jt(e, !1),
        e.strm.avail_out === 0) || e.strstart - e.block_start >= e.w_size - Or && (jt(e, !1),
        e.strm.avail_out === 0))
            return kt
    }
    return e.insert = 0,
    t === Bo ? (jt(e, !0),
    e.strm.avail_out === 0 ? na : Zl) : (e.strstart > e.block_start && (jt(e, !1),
    e.strm.avail_out === 0),
    kt)
}
function $p(e, t) {
    for (var n, r; ; ) {
        if (e.lookahead < Or) {
            if (ra(e),
            e.lookahead < Or && t === pa)
                return kt;
            if (e.lookahead === 0)
                break
        }
        if (n = 0,
        e.lookahead >= xe && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + xe - 1]) & e.hash_mask,
        n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
        e.head[e.ins_h] = e.strstart),
        n !== 0 && e.strstart - n <= e.w_size - Or && (e.match_length = rC(e, n)),
        e.match_length >= xe)
            if (r = ar._tr_tally(e, e.strstart - e.match_start, e.match_length - xe),
            e.lookahead -= e.match_length,
            e.match_length <= e.max_lazy_match && e.lookahead >= xe) {
                e.match_length--;
                do
                    e.strstart++,
                    e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + xe - 1]) & e.hash_mask,
                    n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
                    e.head[e.ins_h] = e.strstart;
                while (--e.match_length !== 0);
                e.strstart++
            } else
                e.strstart += e.match_length,
                e.match_length = 0,
                e.ins_h = e.window[e.strstart],
                e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask;
        else
            r = ar._tr_tally(e, 0, e.window[e.strstart]),
            e.lookahead--,
            e.strstart++;
        if (r && (jt(e, !1),
        e.strm.avail_out === 0))
            return kt
    }
    return e.insert = e.strstart < xe - 1 ? e.strstart : xe - 1,
    t === Bo ? (jt(e, !0),
    e.strm.avail_out === 0 ? na : Zl) : e.last_lit && (jt(e, !1),
    e.strm.avail_out === 0) ? kt : Pd
}
function _a(e, t) {
    for (var n, r, i; ; ) {
        if (e.lookahead < Or) {
            if (ra(e),
            e.lookahead < Or && t === pa)
                return kt;
            if (e.lookahead === 0)
                break
        }
        if (n = 0,
        e.lookahead >= xe && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + xe - 1]) & e.hash_mask,
        n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
        e.head[e.ins_h] = e.strstart),
        e.prev_length = e.match_length,
        e.prev_match = e.match_start,
        e.match_length = xe - 1,
        n !== 0 && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - Or && (e.match_length = rC(e, n),
        e.match_length <= 5 && (e.strategy === KU || e.match_length === xe && e.strstart - e.match_start > 4096) && (e.match_length = xe - 1)),
        e.prev_length >= xe && e.match_length <= e.prev_length) {
            i = e.strstart + e.lookahead - xe,
            r = ar._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - xe),
            e.lookahead -= e.prev_length - 1,
            e.prev_length -= 2;
            do
                ++e.strstart <= i && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + xe - 1]) & e.hash_mask,
                n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
                e.head[e.ins_h] = e.strstart);
            while (--e.prev_length !== 0);
            if (e.match_available = 0,
            e.match_length = xe - 1,
            e.strstart++,
            r && (jt(e, !1),
            e.strm.avail_out === 0))
                return kt
        } else if (e.match_available) {
            if (r = ar._tr_tally(e, 0, e.window[e.strstart - 1]),
            r && jt(e, !1),
            e.strstart++,
            e.lookahead--,
            e.strm.avail_out === 0)
                return kt
        } else
            e.match_available = 1,
            e.strstart++,
            e.lookahead--
    }
    return e.match_available && (r = ar._tr_tally(e, 0, e.window[e.strstart - 1]),
    e.match_available = 0),
    e.insert = e.strstart < xe - 1 ? e.strstart : xe - 1,
    t === Bo ? (jt(e, !0),
    e.strm.avail_out === 0 ? na : Zl) : e.last_lit && (jt(e, !1),
    e.strm.avail_out === 0) ? kt : Pd
}
function hV(e, t) {
    for (var n, r, i, o, s = e.window; ; ) {
        if (e.lookahead <= So) {
            if (ra(e),
            e.lookahead <= So && t === pa)
                return kt;
            if (e.lookahead === 0)
                break
        }
        if (e.match_length = 0,
        e.lookahead >= xe && e.strstart > 0 && (i = e.strstart - 1,
        r = s[i],
        r === s[++i] && r === s[++i] && r === s[++i])) {
            o = e.strstart + So;
            do
                ;
            while (r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && i < o);
            e.match_length = So - (o - i),
            e.match_length > e.lookahead && (e.match_length = e.lookahead)
        }
        if (e.match_length >= xe ? (n = ar._tr_tally(e, 1, e.match_length - xe),
        e.lookahead -= e.match_length,
        e.strstart += e.match_length,
        e.match_length = 0) : (n = ar._tr_tally(e, 0, e.window[e.strstart]),
        e.lookahead--,
        e.strstart++),
        n && (jt(e, !1),
        e.strm.avail_out === 0))
            return kt
    }
    return e.insert = 0,
    t === Bo ? (jt(e, !0),
    e.strm.avail_out === 0 ? na : Zl) : e.last_lit && (jt(e, !1),
    e.strm.avail_out === 0) ? kt : Pd
}
function pV(e, t) {
    for (var n; ; ) {
        if (e.lookahead === 0 && (ra(e),
        e.lookahead === 0)) {
            if (t === pa)
                return kt;
            break
        }
        if (e.match_length = 0,
        n = ar._tr_tally(e, 0, e.window[e.strstart]),
        e.lookahead--,
        e.strstart++,
        n && (jt(e, !1),
        e.strm.avail_out === 0))
            return kt
    }
    return e.insert = 0,
    t === Bo ? (jt(e, !0),
    e.strm.avail_out === 0 ? na : Zl) : e.last_lit && (jt(e, !1),
    e.strm.avail_out === 0) ? kt : Pd
}
function Zr(e, t, n, r, i) {
    this.good_length = e,
    this.max_lazy = t,
    this.nice_length = n,
    this.max_chain = r,
    this.func = i
}
var Ya;
Ya = [new Zr(0,0,0,0,fV), new Zr(4,4,8,4,$p), new Zr(4,5,16,8,$p), new Zr(4,6,32,32,$p), new Zr(4,4,16,16,_a), new Zr(8,16,32,32,_a), new Zr(8,16,128,128,_a), new Zr(8,32,128,256,_a), new Zr(32,128,258,1024,_a), new Zr(32,258,258,4096,_a)];
function mV(e) {
    e.window_size = 2 * e.w_size,
    mo(e.head),
    e.max_lazy_match = Ya[e.level].max_lazy,
    e.good_match = Ya[e.level].good_length,
    e.nice_match = Ya[e.level].nice_length,
    e.max_chain_length = Ya[e.level].max_chain,
    e.strstart = 0,
    e.block_start = 0,
    e.lookahead = 0,
    e.insert = 0,
    e.match_length = e.prev_length = xe - 1,
    e.match_available = 0,
    e.ins_h = 0
}
function gV() {
    this.strm = null,
    this.status = 0,
    this.pending_buf = null,
    this.pending_buf_size = 0,
    this.pending_out = 0,
    this.pending = 0,
    this.wrap = 0,
    this.gzhead = null,
    this.gzindex = 0,
    this.method = w0,
    this.last_flush = -1,
    this.w_size = 0,
    this.w_bits = 0,
    this.w_mask = 0,
    this.window = null,
    this.window_size = 0,
    this.prev = null,
    this.head = null,
    this.ins_h = 0,
    this.hash_size = 0,
    this.hash_bits = 0,
    this.hash_mask = 0,
    this.hash_shift = 0,
    this.block_start = 0,
    this.match_length = 0,
    this.prev_match = 0,
    this.match_available = 0,
    this.strstart = 0,
    this.match_start = 0,
    this.lookahead = 0,
    this.prev_length = 0,
    this.max_chain_length = 0,
    this.max_lazy_match = 0,
    this.level = 0,
    this.strategy = 0,
    this.good_match = 0,
    this.nice_match = 0,
    this.dyn_ltree = new En.Buf16(aV * 2),
    this.dyn_dtree = new En.Buf16((2 * oV + 1) * 2),
    this.bl_tree = new En.Buf16((2 * sV + 1) * 2),
    mo(this.dyn_ltree),
    mo(this.dyn_dtree),
    mo(this.bl_tree),
    this.l_desc = null,
    this.d_desc = null,
    this.bl_desc = null,
    this.bl_count = new En.Buf16(lV + 1),
    this.heap = new En.Buf16(2 * o2 + 1),
    mo(this.heap),
    this.heap_len = 0,
    this.heap_max = 0,
    this.depth = new En.Buf16(2 * o2 + 1),
    mo(this.depth),
    this.l_buf = 0,
    this.lit_bufsize = 0,
    this.last_lit = 0,
    this.d_buf = 0,
    this.opt_len = 0,
    this.static_len = 0,
    this.matches = 0,
    this.insert = 0,
    this.bi_buf = 0,
    this.bi_valid = 0
}
function iC(e) {
    var t;
    return !e || !e.state ? Co(e, lr) : (e.total_in = e.total_out = 0,
    e.data_type = JU,
    t = e.state,
    t.pending = 0,
    t.pending_out = 0,
    t.wrap < 0 && (t.wrap = -t.wrap),
    t.status = t.wrap ? b0 : Ps,
    e.adler = t.wrap === 2 ? 0 : 1,
    t.last_flush = pa,
    ar._tr_init(t),
    ii)
}
function oC(e) {
    var t = iC(e);
    return t === ii && mV(e.state),
    t
}
function vV(e, t) {
    return !e || !e.state || e.state.wrap !== 2 ? lr : (e.state.gzhead = t,
    ii)
}
function sC(e, t, n, r, i, o) {
    if (!e)
        return lr;
    var s = 1;
    if (t === ZU && (t = 6),
    r < 0 ? (s = 0,
    r = -r) : r > 15 && (s = 2,
    r -= 16),
    i < 1 || i > eV || n !== w0 || r < 8 || r > 15 || t < 0 || t > 9 || o < 0 || o > qU)
        return Co(e, lr);
    r === 8 && (r = 9);
    var a = new gV;
    return e.state = a,
    a.strm = e,
    a.wrap = s,
    a.gzhead = null,
    a.w_bits = r,
    a.w_size = 1 << a.w_bits,
    a.w_mask = a.w_size - 1,
    a.hash_bits = i + 7,
    a.hash_size = 1 << a.hash_bits,
    a.hash_mask = a.hash_size - 1,
    a.hash_shift = ~~((a.hash_bits + xe - 1) / xe),
    a.window = new En.Buf8(a.w_size * 2),
    a.head = new En.Buf16(a.hash_size),
    a.prev = new En.Buf16(a.w_size),
    a.lit_bufsize = 1 << i + 6,
    a.pending_buf_size = a.lit_bufsize * 4,
    a.pending_buf = new En.Buf8(a.pending_buf_size),
    a.d_buf = 1 * a.lit_bufsize,
    a.l_buf = (1 + 2) * a.lit_bufsize,
    a.level = t,
    a.strategy = o,
    a.method = n,
    oC(e)
}
function yV(e, t) {
    return sC(e, t, w0, tV, nV, QU)
}
function EV(e, t) {
    var n, r, i, o;
    if (!e || !e.state || t > Cb || t < 0)
        return e ? Co(e, lr) : lr;
    if (r = e.state,
    !e.output || !e.input && e.avail_in !== 0 || r.status === Dc && t !== Bo)
        return Co(e, e.avail_out === 0 ? Fp : lr);
    if (r.strm = e,
    n = r.last_flush,
    r.last_flush = t,
    r.status === b0)
        if (r.wrap === 2)
            e.adler = 0,
            Le(r, 31),
            Le(r, 139),
            Le(r, 8),
            r.gzhead ? (Le(r, (r.gzhead.text ? 1 : 0) + (r.gzhead.hcrc ? 2 : 0) + (r.gzhead.extra ? 4 : 0) + (r.gzhead.name ? 8 : 0) + (r.gzhead.comment ? 16 : 0)),
            Le(r, r.gzhead.time & 255),
            Le(r, r.gzhead.time >> 8 & 255),
            Le(r, r.gzhead.time >> 16 & 255),
            Le(r, r.gzhead.time >> 24 & 255),
            Le(r, r.level === 9 ? 2 : r.strategy >= bf || r.level < 2 ? 4 : 0),
            Le(r, r.gzhead.os & 255),
            r.gzhead.extra && r.gzhead.extra.length && (Le(r, r.gzhead.extra.length & 255),
            Le(r, r.gzhead.extra.length >> 8 & 255)),
            r.gzhead.hcrc && (e.adler = so(e.adler, r.pending_buf, r.pending, 0)),
            r.gzindex = 0,
            r.status = s2) : (Le(r, 0),
            Le(r, 0),
            Le(r, 0),
            Le(r, 0),
            Le(r, 0),
            Le(r, r.level === 9 ? 2 : r.strategy >= bf || r.level < 2 ? 4 : 0),
            Le(r, uV),
            r.status = Ps);
        else {
            var s = w0 + (r.w_bits - 8 << 4) << 8
              , a = -1;
            r.strategy >= bf || r.level < 2 ? a = 0 : r.level < 6 ? a = 1 : r.level === 6 ? a = 2 : a = 3,
            s |= a << 6,
            r.strstart !== 0 && (s |= cV),
            s += 31 - s % 31,
            r.status = Ps,
            Ec(r, s),
            r.strstart !== 0 && (Ec(r, e.adler >>> 16),
            Ec(r, e.adler & 65535)),
            e.adler = 1
        }
    if (r.status === s2)
        if (r.gzhead.extra) {
            for (i = r.pending; r.gzindex < (r.gzhead.extra.length & 65535) && !(r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (e.adler = so(e.adler, r.pending_buf, r.pending - i, i)),
            ao(e),
            i = r.pending,
            r.pending === r.pending_buf_size)); )
                Le(r, r.gzhead.extra[r.gzindex] & 255),
                r.gzindex++;
            r.gzhead.hcrc && r.pending > i && (e.adler = so(e.adler, r.pending_buf, r.pending - i, i)),
            r.gzindex === r.gzhead.extra.length && (r.gzindex = 0,
            r.status = sh)
        } else
            r.status = sh;
    if (r.status === sh)
        if (r.gzhead.name) {
            i = r.pending;
            do {
                if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (e.adler = so(e.adler, r.pending_buf, r.pending - i, i)),
                ao(e),
                i = r.pending,
                r.pending === r.pending_buf_size)) {
                    o = 1;
                    break
                }
                r.gzindex < r.gzhead.name.length ? o = r.gzhead.name.charCodeAt(r.gzindex++) & 255 : o = 0,
                Le(r, o)
            } while (o !== 0);
            r.gzhead.hcrc && r.pending > i && (e.adler = so(e.adler, r.pending_buf, r.pending - i, i)),
            o === 0 && (r.gzindex = 0,
            r.status = ah)
        } else
            r.status = ah;
    if (r.status === ah)
        if (r.gzhead.comment) {
            i = r.pending;
            do {
                if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (e.adler = so(e.adler, r.pending_buf, r.pending - i, i)),
                ao(e),
                i = r.pending,
                r.pending === r.pending_buf_size)) {
                    o = 1;
                    break
                }
                r.gzindex < r.gzhead.comment.length ? o = r.gzhead.comment.charCodeAt(r.gzindex++) & 255 : o = 0,
                Le(r, o)
            } while (o !== 0);
            r.gzhead.hcrc && r.pending > i && (e.adler = so(e.adler, r.pending_buf, r.pending - i, i)),
            o === 0 && (r.status = lh)
        } else
            r.status = lh;
    if (r.status === lh && (r.gzhead.hcrc ? (r.pending + 2 > r.pending_buf_size && ao(e),
    r.pending + 2 <= r.pending_buf_size && (Le(r, e.adler & 255),
    Le(r, e.adler >> 8 & 255),
    e.adler = 0,
    r.status = Ps)) : r.status = Ps),
    r.pending !== 0) {
        if (ao(e),
        e.avail_out === 0)
            return r.last_flush = -1,
            ii
    } else if (e.avail_in === 0 && Tb(t) <= Tb(n) && t !== Bo)
        return Co(e, Fp);
    if (r.status === Dc && e.avail_in !== 0)
        return Co(e, Fp);
    if (e.avail_in !== 0 || r.lookahead !== 0 || t !== pa && r.status !== Dc) {
        var l = r.strategy === bf ? pV(r, t) : r.strategy === XU ? hV(r, t) : Ya[r.level].func(r, t);
        if ((l === na || l === Zl) && (r.status = Dc),
        l === kt || l === na)
            return e.avail_out === 0 && (r.last_flush = -1),
            ii;
        if (l === Pd && (t === GU ? ar._tr_align(r) : t !== Cb && (ar._tr_stored_block(r, 0, 0, !1),
        t === jU && (mo(r.head),
        r.lookahead === 0 && (r.strstart = 0,
        r.block_start = 0,
        r.insert = 0))),
        ao(e),
        e.avail_out === 0))
            return r.last_flush = -1,
            ii
    }
    return t !== Bo ? ii : r.wrap <= 0 ? kb : (r.wrap === 2 ? (Le(r, e.adler & 255),
    Le(r, e.adler >> 8 & 255),
    Le(r, e.adler >> 16 & 255),
    Le(r, e.adler >> 24 & 255),
    Le(r, e.total_in & 255),
    Le(r, e.total_in >> 8 & 255),
    Le(r, e.total_in >> 16 & 255),
    Le(r, e.total_in >> 24 & 255)) : (Ec(r, e.adler >>> 16),
    Ec(r, e.adler & 65535)),
    ao(e),
    r.wrap > 0 && (r.wrap = -r.wrap),
    r.pending !== 0 ? ii : kb)
}
function wV(e) {
    var t;
    return !e || !e.state ? lr : (t = e.state.status,
    t !== b0 && t !== s2 && t !== sh && t !== ah && t !== lh && t !== Ps && t !== Dc ? Co(e, lr) : (e.state = null,
    t === Ps ? Co(e, YU) : ii))
}
function bV(e, t) {
    var n = t.length, r, i, o, s, a, l, c, u;
    if (!e || !e.state || (r = e.state,
    s = r.wrap,
    s === 2 || s === 1 && r.status !== b0 || r.lookahead))
        return lr;
    for (s === 1 && (e.adler = nC(e.adler, t, n, 0)),
    r.wrap = 0,
    n >= r.w_size && (s === 0 && (mo(r.head),
    r.strstart = 0,
    r.block_start = 0,
    r.insert = 0),
    u = new En.Buf8(r.w_size),
    En.arraySet(u, t, n - r.w_size, r.w_size, 0),
    t = u,
    n = r.w_size),
    a = e.avail_in,
    l = e.next_in,
    c = e.input,
    e.avail_in = n,
    e.next_in = 0,
    e.input = t,
    ra(r); r.lookahead >= xe; ) {
        i = r.strstart,
        o = r.lookahead - (xe - 1);
        do
            r.ins_h = (r.ins_h << r.hash_shift ^ r.window[i + xe - 1]) & r.hash_mask,
            r.prev[i & r.w_mask] = r.head[r.ins_h],
            r.head[r.ins_h] = i,
            i++;
        while (--o);
        r.strstart = i,
        r.lookahead = xe - 1,
        ra(r)
    }
    return r.strstart += r.lookahead,
    r.block_start = r.strstart,
    r.insert = r.lookahead,
    r.lookahead = 0,
    r.match_length = r.prev_length = xe - 1,
    r.match_available = 0,
    e.next_in = l,
    e.input = c,
    e.avail_in = a,
    r.wrap = s,
    ii
}
gi.deflateInit = yV;
gi.deflateInit2 = sC;
gi.deflateReset = oC;
gi.deflateResetKeep = iC;
gi.deflateSetHeader = vV;
gi.deflate = EV;
gi.deflateEnd = wV;
gi.deflateSetDictionary = bV;
gi.deflateInfo = "pako deflate (from Nodeca project)";
var ma = {}
  , _0 = Ji
  , aC = !0
  , lC = !0;
try {
    String.fromCharCode.apply(null, [0])
} catch {
    aC = !1
}
try {
    String.fromCharCode.apply(null, new Uint8Array(1))
} catch {
    lC = !1
}
var nd = new _0.Buf8(256);
for (var no = 0; no < 256; no++)
    nd[no] = no >= 252 ? 6 : no >= 248 ? 5 : no >= 240 ? 4 : no >= 224 ? 3 : no >= 192 ? 2 : 1;
nd[254] = nd[254] = 1;
ma.string2buf = function(e) {
    var t, n, r, i, o, s = e.length, a = 0;
    for (i = 0; i < s; i++)
        n = e.charCodeAt(i),
        (n & 64512) === 55296 && i + 1 < s && (r = e.charCodeAt(i + 1),
        (r & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (r - 56320),
        i++)),
        a += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
    for (t = new _0.Buf8(a),
    o = 0,
    i = 0; o < a; i++)
        n = e.charCodeAt(i),
        (n & 64512) === 55296 && i + 1 < s && (r = e.charCodeAt(i + 1),
        (r & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (r - 56320),
        i++)),
        n < 128 ? t[o++] = n : n < 2048 ? (t[o++] = 192 | n >>> 6,
        t[o++] = 128 | n & 63) : n < 65536 ? (t[o++] = 224 | n >>> 12,
        t[o++] = 128 | n >>> 6 & 63,
        t[o++] = 128 | n & 63) : (t[o++] = 240 | n >>> 18,
        t[o++] = 128 | n >>> 12 & 63,
        t[o++] = 128 | n >>> 6 & 63,
        t[o++] = 128 | n & 63);
    return t
}
;
function cC(e, t) {
    if (t < 65534 && (e.subarray && lC || !e.subarray && aC))
        return String.fromCharCode.apply(null, _0.shrinkBuf(e, t));
    for (var n = "", r = 0; r < t; r++)
        n += String.fromCharCode(e[r]);
    return n
}
ma.buf2binstring = function(e) {
    return cC(e, e.length)
}
;
ma.binstring2buf = function(e) {
    for (var t = new _0.Buf8(e.length), n = 0, r = t.length; n < r; n++)
        t[n] = e.charCodeAt(n);
    return t
}
;
ma.buf2string = function(e, t) {
    var n, r, i, o, s = t || e.length, a = new Array(s * 2);
    for (r = 0,
    n = 0; n < s; ) {
        if (i = e[n++],
        i < 128) {
            a[r++] = i;
            continue
        }
        if (o = nd[i],
        o > 4) {
            a[r++] = 65533,
            n += o - 1;
            continue
        }
        for (i &= o === 2 ? 31 : o === 3 ? 15 : 7; o > 1 && n < s; )
            i = i << 6 | e[n++] & 63,
            o--;
        if (o > 1) {
            a[r++] = 65533;
            continue
        }
        i < 65536 ? a[r++] = i : (i -= 65536,
        a[r++] = 55296 | i >> 10 & 1023,
        a[r++] = 56320 | i & 1023)
    }
    return cC(a, r)
}
;
ma.utf8border = function(e, t) {
    var n;
    for (t = t || e.length,
    t > e.length && (t = e.length),
    n = t - 1; n >= 0 && (e[n] & 192) === 128; )
        n--;
    return n < 0 || n === 0 ? t : n + nd[e[n]] > t ? n : t
}
;
function _V() {
    this.input = null,
    this.next_in = 0,
    this.avail_in = 0,
    this.total_in = 0,
    this.output = null,
    this.next_out = 0,
    this.avail_out = 0,
    this.total_out = 0,
    this.msg = "",
    this.state = null,
    this.data_type = 2,
    this.adler = 0
}
var uC = _V
  , ou = gi
  , su = Ji
  , a2 = ma
  , l2 = Jy
  , xV = uC
  , dC = Object.prototype.toString
  , IV = 0
  , Bp = 4
  , ol = 0
  , Mb = 1
  , Ab = 2
  , SV = -1
  , CV = 0
  , kV = 8;
function ia(e) {
    if (!(this instanceof ia))
        return new ia(e);
    this.options = su.assign({
        level: SV,
        method: kV,
        chunkSize: 16384,
        windowBits: 15,
        memLevel: 8,
        strategy: CV,
        to: ""
    }, e || {});
    var t = this.options;
    t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16),
    this.err = 0,
    this.msg = "",
    this.ended = !1,
    this.chunks = [],
    this.strm = new xV,
    this.strm.avail_out = 0;
    var n = ou.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
    if (n !== ol)
        throw new Error(l2[n]);
    if (t.header && ou.deflateSetHeader(this.strm, t.header),
    t.dictionary) {
        var r;
        if (typeof t.dictionary == "string" ? r = a2.string2buf(t.dictionary) : dC.call(t.dictionary) === "[object ArrayBuffer]" ? r = new Uint8Array(t.dictionary) : r = t.dictionary,
        n = ou.deflateSetDictionary(this.strm, r),
        n !== ol)
            throw new Error(l2[n]);
        this._dict_set = !0
    }
}
ia.prototype.push = function(e, t) {
    var n = this.strm, r = this.options.chunkSize, i, o;
    if (this.ended)
        return !1;
    o = t === ~~t ? t : t === !0 ? Bp : IV,
    typeof e == "string" ? n.input = a2.string2buf(e) : dC.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e,
    n.next_in = 0,
    n.avail_in = n.input.length;
    do {
        if (n.avail_out === 0 && (n.output = new su.Buf8(r),
        n.next_out = 0,
        n.avail_out = r),
        i = ou.deflate(n, o),
        i !== Mb && i !== ol)
            return this.onEnd(i),
            this.ended = !0,
            !1;
        (n.avail_out === 0 || n.avail_in === 0 && (o === Bp || o === Ab)) && (this.options.to === "string" ? this.onData(a2.buf2binstring(su.shrinkBuf(n.output, n.next_out))) : this.onData(su.shrinkBuf(n.output, n.next_out)))
    } while ((n.avail_in > 0 || n.avail_out === 0) && i !== Mb);
    return o === Bp ? (i = ou.deflateEnd(this.strm),
    this.onEnd(i),
    this.ended = !0,
    i === ol) : (o === Ab && (this.onEnd(ol),
    n.avail_out = 0),
    !0)
}
;
ia.prototype.onData = function(e) {
    this.chunks.push(e)
}
;
ia.prototype.onEnd = function(e) {
    e === ol && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = su.flattenChunks(this.chunks)),
    this.chunks = [],
    this.err = e,
    this.msg = this.strm.msg
}
;
function e3(e, t) {
    var n = new ia(t);
    if (n.push(e, !0),
    n.err)
        throw n.msg || l2[n.err];
    return n.result
}
function TV(e, t) {
    return t = t || {},
    t.raw = !0,
    e3(e, t)
}
function MV(e, t) {
    return t = t || {},
    t.gzip = !0,
    e3(e, t)
}
Ad.Deflate = ia;
Ad.deflate = e3;
Ad.deflateRaw = TV;
Ad.gzip = MV;
var Rd = {}
  , Hr = {}
  , _f = 30
  , AV = 12
  , LV = function(t, n) {
    var r, i, o, s, a, l, c, u, d, f, h, m, g, E, v, y, w, b, I, S, C, T, L, A, P;
    r = t.state,
    i = t.next_in,
    A = t.input,
    o = i + (t.avail_in - 5),
    s = t.next_out,
    P = t.output,
    a = s - (n - t.avail_out),
    l = s + (t.avail_out - 257),
    c = r.dmax,
    u = r.wsize,
    d = r.whave,
    f = r.wnext,
    h = r.window,
    m = r.hold,
    g = r.bits,
    E = r.lencode,
    v = r.distcode,
    y = (1 << r.lenbits) - 1,
    w = (1 << r.distbits) - 1;
    e: do {
        g < 15 && (m += A[i++] << g,
        g += 8,
        m += A[i++] << g,
        g += 8),
        b = E[m & y];
        t: for (; ; ) {
            if (I = b >>> 24,
            m >>>= I,
            g -= I,
            I = b >>> 16 & 255,
            I === 0)
                P[s++] = b & 65535;
            else if (I & 16) {
                S = b & 65535,
                I &= 15,
                I && (g < I && (m += A[i++] << g,
                g += 8),
                S += m & (1 << I) - 1,
                m >>>= I,
                g -= I),
                g < 15 && (m += A[i++] << g,
                g += 8,
                m += A[i++] << g,
                g += 8),
                b = v[m & w];
                n: for (; ; ) {
                    if (I = b >>> 24,
                    m >>>= I,
                    g -= I,
                    I = b >>> 16 & 255,
                    I & 16) {
                        if (C = b & 65535,
                        I &= 15,
                        g < I && (m += A[i++] << g,
                        g += 8,
                        g < I && (m += A[i++] << g,
                        g += 8)),
                        C += m & (1 << I) - 1,
                        C > c) {
                            t.msg = "invalid distance too far back",
                            r.mode = _f;
                            break e
                        }
                        if (m >>>= I,
                        g -= I,
                        I = s - a,
                        C > I) {
                            if (I = C - I,
                            I > d && r.sane) {
                                t.msg = "invalid distance too far back",
                                r.mode = _f;
                                break e
                            }
                            if (T = 0,
                            L = h,
                            f === 0) {
                                if (T += u - I,
                                I < S) {
                                    S -= I;
                                    do
                                        P[s++] = h[T++];
                                    while (--I);
                                    T = s - C,
                                    L = P
                                }
                            } else if (f < I) {
                                if (T += u + f - I,
                                I -= f,
                                I < S) {
                                    S -= I;
                                    do
                                        P[s++] = h[T++];
                                    while (--I);
                                    if (T = 0,
                                    f < S) {
                                        I = f,
                                        S -= I;
                                        do
                                            P[s++] = h[T++];
                                        while (--I);
                                        T = s - C,
                                        L = P
                                    }
                                }
                            } else if (T += f - I,
                            I < S) {
                                S -= I;
                                do
                                    P[s++] = h[T++];
                                while (--I);
                                T = s - C,
                                L = P
                            }
                            for (; S > 2; )
                                P[s++] = L[T++],
                                P[s++] = L[T++],
                                P[s++] = L[T++],
                                S -= 3;
                            S && (P[s++] = L[T++],
                            S > 1 && (P[s++] = L[T++]))
                        } else {
                            T = s - C;
                            do
                                P[s++] = P[T++],
                                P[s++] = P[T++],
                                P[s++] = P[T++],
                                S -= 3;
                            while (S > 2);
                            S && (P[s++] = P[T++],
                            S > 1 && (P[s++] = P[T++]))
                        }
                    } else if (I & 64) {
                        t.msg = "invalid distance code",
                        r.mode = _f;
                        break e
                    } else {
                        b = v[(b & 65535) + (m & (1 << I) - 1)];
                        continue n
                    }
                    break
                }
            } else if (I & 64)
                if (I & 32) {
                    r.mode = AV;
                    break e
                } else {
                    t.msg = "invalid literal/length code",
                    r.mode = _f;
                    break e
                }
            else {
                b = E[(b & 65535) + (m & (1 << I) - 1)];
                continue t
            }
            break
        }
    } while (i < o && s < l);
    S = g >> 3,
    i -= S,
    g -= S << 3,
    m &= (1 << g) - 1,
    t.next_in = i,
    t.next_out = s,
    t.avail_in = i < o ? 5 + (o - i) : 5 - (i - o),
    t.avail_out = s < l ? 257 + (l - s) : 257 - (s - l),
    r.hold = m,
    r.bits = g
}
  , Lb = Ji
  , xa = 15
  , Pb = 852
  , Rb = 592
  , Ob = 0
  , zp = 1
  , Db = 2
  , PV = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]
  , RV = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]
  , OV = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]
  , DV = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]
  , NV = function(t, n, r, i, o, s, a, l) {
    var c = l.bits, u = 0, d = 0, f = 0, h = 0, m = 0, g = 0, E = 0, v = 0, y = 0, w = 0, b, I, S, C, T, L = null, A = 0, P, O = new Lb.Buf16(xa + 1), N = new Lb.Buf16(xa + 1), $ = null, V = 0, te, Z, z;
    for (u = 0; u <= xa; u++)
        O[u] = 0;
    for (d = 0; d < i; d++)
        O[n[r + d]]++;
    for (m = c,
    h = xa; h >= 1 && O[h] === 0; h--)
        ;
    if (m > h && (m = h),
    h === 0)
        return o[s++] = 1 << 24 | 64 << 16 | 0,
        o[s++] = 1 << 24 | 64 << 16 | 0,
        l.bits = 1,
        0;
    for (f = 1; f < h && O[f] === 0; f++)
        ;
    for (m < f && (m = f),
    v = 1,
    u = 1; u <= xa; u++)
        if (v <<= 1,
        v -= O[u],
        v < 0)
            return -1;
    if (v > 0 && (t === Ob || h !== 1))
        return -1;
    for (N[1] = 0,
    u = 1; u < xa; u++)
        N[u + 1] = N[u] + O[u];
    for (d = 0; d < i; d++)
        n[r + d] !== 0 && (a[N[n[r + d]]++] = d);
    if (t === Ob ? (L = $ = a,
    P = 19) : t === zp ? (L = PV,
    A -= 257,
    $ = RV,
    V -= 257,
    P = 256) : (L = OV,
    $ = DV,
    P = -1),
    w = 0,
    d = 0,
    u = f,
    T = s,
    g = m,
    E = 0,
    S = -1,
    y = 1 << m,
    C = y - 1,
    t === zp && y > Pb || t === Db && y > Rb)
        return 1;
    for (; ; ) {
        te = u - E,
        a[d] < P ? (Z = 0,
        z = a[d]) : a[d] > P ? (Z = $[V + a[d]],
        z = L[A + a[d]]) : (Z = 32 + 64,
        z = 0),
        b = 1 << u - E,
        I = 1 << g,
        f = I;
        do
            I -= b,
            o[T + (w >> E) + I] = te << 24 | Z << 16 | z | 0;
        while (I !== 0);
        for (b = 1 << u - 1; w & b; )
            b >>= 1;
        if (b !== 0 ? (w &= b - 1,
        w += b) : w = 0,
        d++,
        --O[u] === 0) {
            if (u === h)
                break;
            u = n[r + a[d]]
        }
        if (u > m && (w & C) !== S) {
            for (E === 0 && (E = m),
            T += f,
            g = u - E,
            v = 1 << g; g + E < h && (v -= O[g + E],
            !(v <= 0)); )
                g++,
                v <<= 1;
            if (y += 1 << g,
            t === zp && y > Pb || t === Db && y > Rb)
                return 1;
            S = w & C,
            o[S] = m << 24 | g << 16 | T - s | 0
        }
    }
    return w !== 0 && (o[T + w] = u - E << 24 | 64 << 16 | 0),
    l.bits = m,
    0
}
  , zn = Ji
  , c2 = eC
  , Kr = tC
  , FV = LV
  , au = NV
  , $V = 0
  , fC = 1
  , hC = 2
  , Nb = 4
  , BV = 5
  , xf = 6
  , oa = 0
  , zV = 1
  , HV = 2
  , hr = -2
  , pC = -3
  , mC = -4
  , UV = -5
  , Fb = 8
  , gC = 1
  , $b = 2
  , Bb = 3
  , zb = 4
  , Hb = 5
  , Ub = 6
  , Vb = 7
  , Wb = 8
  , Gb = 9
  , jb = 10
  , h1 = 11
  , Ii = 12
  , Hp = 13
  , Yb = 14
  , Up = 15
  , Zb = 16
  , Kb = 17
  , Xb = 18
  , qb = 19
  , If = 20
  , Sf = 21
  , Qb = 22
  , Jb = 23
  , e4 = 24
  , t4 = 25
  , n4 = 26
  , Vp = 27
  , r4 = 28
  , i4 = 29
  , Qe = 30
  , vC = 31
  , VV = 32
  , WV = 852
  , GV = 592
  , jV = 15
  , YV = jV;
function o4(e) {
    return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((e & 65280) << 8) + ((e & 255) << 24)
}
function ZV() {
    this.mode = 0,
    this.last = !1,
    this.wrap = 0,
    this.havedict = !1,
    this.flags = 0,
    this.dmax = 0,
    this.check = 0,
    this.total = 0,
    this.head = null,
    this.wbits = 0,
    this.wsize = 0,
    this.whave = 0,
    this.wnext = 0,
    this.window = null,
    this.hold = 0,
    this.bits = 0,
    this.length = 0,
    this.offset = 0,
    this.extra = 0,
    this.lencode = null,
    this.distcode = null,
    this.lenbits = 0,
    this.distbits = 0,
    this.ncode = 0,
    this.nlen = 0,
    this.ndist = 0,
    this.have = 0,
    this.next = null,
    this.lens = new zn.Buf16(320),
    this.work = new zn.Buf16(288),
    this.lendyn = null,
    this.distdyn = null,
    this.sane = 0,
    this.back = 0,
    this.was = 0
}
function yC(e) {
    var t;
    return !e || !e.state ? hr : (t = e.state,
    e.total_in = e.total_out = t.total = 0,
    e.msg = "",
    t.wrap && (e.adler = t.wrap & 1),
    t.mode = gC,
    t.last = 0,
    t.havedict = 0,
    t.dmax = 32768,
    t.head = null,
    t.hold = 0,
    t.bits = 0,
    t.lencode = t.lendyn = new zn.Buf32(WV),
    t.distcode = t.distdyn = new zn.Buf32(GV),
    t.sane = 1,
    t.back = -1,
    oa)
}
function EC(e) {
    var t;
    return !e || !e.state ? hr : (t = e.state,
    t.wsize = 0,
    t.whave = 0,
    t.wnext = 0,
    yC(e))
}
function wC(e, t) {
    var n, r;
    return !e || !e.state || (r = e.state,
    t < 0 ? (n = 0,
    t = -t) : (n = (t >> 4) + 1,
    t < 48 && (t &= 15)),
    t && (t < 8 || t > 15)) ? hr : (r.window !== null && r.wbits !== t && (r.window = null),
    r.wrap = n,
    r.wbits = t,
    EC(e))
}
function bC(e, t) {
    var n, r;
    return e ? (r = new ZV,
    e.state = r,
    r.window = null,
    n = wC(e, t),
    n !== oa && (e.state = null),
    n) : hr
}
function KV(e) {
    return bC(e, YV)
}
var s4 = !0, Wp, Gp;
function XV(e) {
    if (s4) {
        var t;
        for (Wp = new zn.Buf32(512),
        Gp = new zn.Buf32(32),
        t = 0; t < 144; )
            e.lens[t++] = 8;
        for (; t < 256; )
            e.lens[t++] = 9;
        for (; t < 280; )
            e.lens[t++] = 7;
        for (; t < 288; )
            e.lens[t++] = 8;
        for (au(fC, e.lens, 0, 288, Wp, 0, e.work, {
            bits: 9
        }),
        t = 0; t < 32; )
            e.lens[t++] = 5;
        au(hC, e.lens, 0, 32, Gp, 0, e.work, {
            bits: 5
        }),
        s4 = !1
    }
    e.lencode = Wp,
    e.lenbits = 9,
    e.distcode = Gp,
    e.distbits = 5
}
function _C(e, t, n, r) {
    var i, o = e.state;
    return o.window === null && (o.wsize = 1 << o.wbits,
    o.wnext = 0,
    o.whave = 0,
    o.window = new zn.Buf8(o.wsize)),
    r >= o.wsize ? (zn.arraySet(o.window, t, n - o.wsize, o.wsize, 0),
    o.wnext = 0,
    o.whave = o.wsize) : (i = o.wsize - o.wnext,
    i > r && (i = r),
    zn.arraySet(o.window, t, n - r, i, o.wnext),
    r -= i,
    r ? (zn.arraySet(o.window, t, n - r, r, 0),
    o.wnext = r,
    o.whave = o.wsize) : (o.wnext += i,
    o.wnext === o.wsize && (o.wnext = 0),
    o.whave < o.wsize && (o.whave += i))),
    0
}
function qV(e, t) {
    var n, r, i, o, s, a, l, c, u, d, f, h, m, g, E = 0, v, y, w, b, I, S, C, T, L = new zn.Buf8(4), A, P, O = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    if (!e || !e.state || !e.output || !e.input && e.avail_in !== 0)
        return hr;
    n = e.state,
    n.mode === Ii && (n.mode = Hp),
    s = e.next_out,
    i = e.output,
    l = e.avail_out,
    o = e.next_in,
    r = e.input,
    a = e.avail_in,
    c = n.hold,
    u = n.bits,
    d = a,
    f = l,
    T = oa;
    e: for (; ; )
        switch (n.mode) {
        case gC:
            if (n.wrap === 0) {
                n.mode = Hp;
                break
            }
            for (; u < 16; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (n.wrap & 2 && c === 35615) {
                n.check = 0,
                L[0] = c & 255,
                L[1] = c >>> 8 & 255,
                n.check = Kr(n.check, L, 2, 0),
                c = 0,
                u = 0,
                n.mode = $b;
                break
            }
            if (n.flags = 0,
            n.head && (n.head.done = !1),
            !(n.wrap & 1) || (((c & 255) << 8) + (c >> 8)) % 31) {
                e.msg = "incorrect header check",
                n.mode = Qe;
                break
            }
            if ((c & 15) !== Fb) {
                e.msg = "unknown compression method",
                n.mode = Qe;
                break
            }
            if (c >>>= 4,
            u -= 4,
            C = (c & 15) + 8,
            n.wbits === 0)
                n.wbits = C;
            else if (C > n.wbits) {
                e.msg = "invalid window size",
                n.mode = Qe;
                break
            }
            n.dmax = 1 << C,
            e.adler = n.check = 1,
            n.mode = c & 512 ? jb : Ii,
            c = 0,
            u = 0;
            break;
        case $b:
            for (; u < 16; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (n.flags = c,
            (n.flags & 255) !== Fb) {
                e.msg = "unknown compression method",
                n.mode = Qe;
                break
            }
            if (n.flags & 57344) {
                e.msg = "unknown header flags set",
                n.mode = Qe;
                break
            }
            n.head && (n.head.text = c >> 8 & 1),
            n.flags & 512 && (L[0] = c & 255,
            L[1] = c >>> 8 & 255,
            n.check = Kr(n.check, L, 2, 0)),
            c = 0,
            u = 0,
            n.mode = Bb;
        case Bb:
            for (; u < 32; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            n.head && (n.head.time = c),
            n.flags & 512 && (L[0] = c & 255,
            L[1] = c >>> 8 & 255,
            L[2] = c >>> 16 & 255,
            L[3] = c >>> 24 & 255,
            n.check = Kr(n.check, L, 4, 0)),
            c = 0,
            u = 0,
            n.mode = zb;
        case zb:
            for (; u < 16; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            n.head && (n.head.xflags = c & 255,
            n.head.os = c >> 8),
            n.flags & 512 && (L[0] = c & 255,
            L[1] = c >>> 8 & 255,
            n.check = Kr(n.check, L, 2, 0)),
            c = 0,
            u = 0,
            n.mode = Hb;
        case Hb:
            if (n.flags & 1024) {
                for (; u < 16; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.length = c,
                n.head && (n.head.extra_len = c),
                n.flags & 512 && (L[0] = c & 255,
                L[1] = c >>> 8 & 255,
                n.check = Kr(n.check, L, 2, 0)),
                c = 0,
                u = 0
            } else
                n.head && (n.head.extra = null);
            n.mode = Ub;
        case Ub:
            if (n.flags & 1024 && (h = n.length,
            h > a && (h = a),
            h && (n.head && (C = n.head.extra_len - n.length,
            n.head.extra || (n.head.extra = new Array(n.head.extra_len)),
            zn.arraySet(n.head.extra, r, o, h, C)),
            n.flags & 512 && (n.check = Kr(n.check, r, h, o)),
            a -= h,
            o += h,
            n.length -= h),
            n.length))
                break e;
            n.length = 0,
            n.mode = Vb;
        case Vb:
            if (n.flags & 2048) {
                if (a === 0)
                    break e;
                h = 0;
                do
                    C = r[o + h++],
                    n.head && C && n.length < 65536 && (n.head.name += String.fromCharCode(C));
                while (C && h < a);
                if (n.flags & 512 && (n.check = Kr(n.check, r, h, o)),
                a -= h,
                o += h,
                C)
                    break e
            } else
                n.head && (n.head.name = null);
            n.length = 0,
            n.mode = Wb;
        case Wb:
            if (n.flags & 4096) {
                if (a === 0)
                    break e;
                h = 0;
                do
                    C = r[o + h++],
                    n.head && C && n.length < 65536 && (n.head.comment += String.fromCharCode(C));
                while (C && h < a);
                if (n.flags & 512 && (n.check = Kr(n.check, r, h, o)),
                a -= h,
                o += h,
                C)
                    break e
            } else
                n.head && (n.head.comment = null);
            n.mode = Gb;
        case Gb:
            if (n.flags & 512) {
                for (; u < 16; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                if (c !== (n.check & 65535)) {
                    e.msg = "header crc mismatch",
                    n.mode = Qe;
                    break
                }
                c = 0,
                u = 0
            }
            n.head && (n.head.hcrc = n.flags >> 9 & 1,
            n.head.done = !0),
            e.adler = n.check = 0,
            n.mode = Ii;
            break;
        case jb:
            for (; u < 32; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            e.adler = n.check = o4(c),
            c = 0,
            u = 0,
            n.mode = h1;
        case h1:
            if (n.havedict === 0)
                return e.next_out = s,
                e.avail_out = l,
                e.next_in = o,
                e.avail_in = a,
                n.hold = c,
                n.bits = u,
                HV;
            e.adler = n.check = 1,
            n.mode = Ii;
        case Ii:
            if (t === BV || t === xf)
                break e;
        case Hp:
            if (n.last) {
                c >>>= u & 7,
                u -= u & 7,
                n.mode = Vp;
                break
            }
            for (; u < 3; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            switch (n.last = c & 1,
            c >>>= 1,
            u -= 1,
            c & 3) {
            case 0:
                n.mode = Yb;
                break;
            case 1:
                if (XV(n),
                n.mode = If,
                t === xf) {
                    c >>>= 2,
                    u -= 2;
                    break e
                }
                break;
            case 2:
                n.mode = Kb;
                break;
            case 3:
                e.msg = "invalid block type",
                n.mode = Qe
            }
            c >>>= 2,
            u -= 2;
            break;
        case Yb:
            for (c >>>= u & 7,
            u -= u & 7; u < 32; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if ((c & 65535) !== (c >>> 16 ^ 65535)) {
                e.msg = "invalid stored block lengths",
                n.mode = Qe;
                break
            }
            if (n.length = c & 65535,
            c = 0,
            u = 0,
            n.mode = Up,
            t === xf)
                break e;
        case Up:
            n.mode = Zb;
        case Zb:
            if (h = n.length,
            h) {
                if (h > a && (h = a),
                h > l && (h = l),
                h === 0)
                    break e;
                zn.arraySet(i, r, o, h, s),
                a -= h,
                o += h,
                l -= h,
                s += h,
                n.length -= h;
                break
            }
            n.mode = Ii;
            break;
        case Kb:
            for (; u < 14; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (n.nlen = (c & 31) + 257,
            c >>>= 5,
            u -= 5,
            n.ndist = (c & 31) + 1,
            c >>>= 5,
            u -= 5,
            n.ncode = (c & 15) + 4,
            c >>>= 4,
            u -= 4,
            n.nlen > 286 || n.ndist > 30) {
                e.msg = "too many length or distance symbols",
                n.mode = Qe;
                break
            }
            n.have = 0,
            n.mode = Xb;
        case Xb:
            for (; n.have < n.ncode; ) {
                for (; u < 3; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.lens[O[n.have++]] = c & 7,
                c >>>= 3,
                u -= 3
            }
            for (; n.have < 19; )
                n.lens[O[n.have++]] = 0;
            if (n.lencode = n.lendyn,
            n.lenbits = 7,
            A = {
                bits: n.lenbits
            },
            T = au($V, n.lens, 0, 19, n.lencode, 0, n.work, A),
            n.lenbits = A.bits,
            T) {
                e.msg = "invalid code lengths set",
                n.mode = Qe;
                break
            }
            n.have = 0,
            n.mode = qb;
        case qb:
            for (; n.have < n.nlen + n.ndist; ) {
                for (; E = n.lencode[c & (1 << n.lenbits) - 1],
                v = E >>> 24,
                y = E >>> 16 & 255,
                w = E & 65535,
                !(v <= u); ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                if (w < 16)
                    c >>>= v,
                    u -= v,
                    n.lens[n.have++] = w;
                else {
                    if (w === 16) {
                        for (P = v + 2; u < P; ) {
                            if (a === 0)
                                break e;
                            a--,
                            c += r[o++] << u,
                            u += 8
                        }
                        if (c >>>= v,
                        u -= v,
                        n.have === 0) {
                            e.msg = "invalid bit length repeat",
                            n.mode = Qe;
                            break
                        }
                        C = n.lens[n.have - 1],
                        h = 3 + (c & 3),
                        c >>>= 2,
                        u -= 2
                    } else if (w === 17) {
                        for (P = v + 3; u < P; ) {
                            if (a === 0)
                                break e;
                            a--,
                            c += r[o++] << u,
                            u += 8
                        }
                        c >>>= v,
                        u -= v,
                        C = 0,
                        h = 3 + (c & 7),
                        c >>>= 3,
                        u -= 3
                    } else {
                        for (P = v + 7; u < P; ) {
                            if (a === 0)
                                break e;
                            a--,
                            c += r[o++] << u,
                            u += 8
                        }
                        c >>>= v,
                        u -= v,
                        C = 0,
                        h = 11 + (c & 127),
                        c >>>= 7,
                        u -= 7
                    }
                    if (n.have + h > n.nlen + n.ndist) {
                        e.msg = "invalid bit length repeat",
                        n.mode = Qe;
                        break
                    }
                    for (; h--; )
                        n.lens[n.have++] = C
                }
            }
            if (n.mode === Qe)
                break;
            if (n.lens[256] === 0) {
                e.msg = "invalid code -- missing end-of-block",
                n.mode = Qe;
                break
            }
            if (n.lenbits = 9,
            A = {
                bits: n.lenbits
            },
            T = au(fC, n.lens, 0, n.nlen, n.lencode, 0, n.work, A),
            n.lenbits = A.bits,
            T) {
                e.msg = "invalid literal/lengths set",
                n.mode = Qe;
                break
            }
            if (n.distbits = 6,
            n.distcode = n.distdyn,
            A = {
                bits: n.distbits
            },
            T = au(hC, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, A),
            n.distbits = A.bits,
            T) {
                e.msg = "invalid distances set",
                n.mode = Qe;
                break
            }
            if (n.mode = If,
            t === xf)
                break e;
        case If:
            n.mode = Sf;
        case Sf:
            if (a >= 6 && l >= 258) {
                e.next_out = s,
                e.avail_out = l,
                e.next_in = o,
                e.avail_in = a,
                n.hold = c,
                n.bits = u,
                FV(e, f),
                s = e.next_out,
                i = e.output,
                l = e.avail_out,
                o = e.next_in,
                r = e.input,
                a = e.avail_in,
                c = n.hold,
                u = n.bits,
                n.mode === Ii && (n.back = -1);
                break
            }
            for (n.back = 0; E = n.lencode[c & (1 << n.lenbits) - 1],
            v = E >>> 24,
            y = E >>> 16 & 255,
            w = E & 65535,
            !(v <= u); ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (y && !(y & 240)) {
                for (b = v,
                I = y,
                S = w; E = n.lencode[S + ((c & (1 << b + I) - 1) >> b)],
                v = E >>> 24,
                y = E >>> 16 & 255,
                w = E & 65535,
                !(b + v <= u); ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                c >>>= b,
                u -= b,
                n.back += b
            }
            if (c >>>= v,
            u -= v,
            n.back += v,
            n.length = w,
            y === 0) {
                n.mode = n4;
                break
            }
            if (y & 32) {
                n.back = -1,
                n.mode = Ii;
                break
            }
            if (y & 64) {
                e.msg = "invalid literal/length code",
                n.mode = Qe;
                break
            }
            n.extra = y & 15,
            n.mode = Qb;
        case Qb:
            if (n.extra) {
                for (P = n.extra; u < P; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.length += c & (1 << n.extra) - 1,
                c >>>= n.extra,
                u -= n.extra,
                n.back += n.extra
            }
            n.was = n.length,
            n.mode = Jb;
        case Jb:
            for (; E = n.distcode[c & (1 << n.distbits) - 1],
            v = E >>> 24,
            y = E >>> 16 & 255,
            w = E & 65535,
            !(v <= u); ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (!(y & 240)) {
                for (b = v,
                I = y,
                S = w; E = n.distcode[S + ((c & (1 << b + I) - 1) >> b)],
                v = E >>> 24,
                y = E >>> 16 & 255,
                w = E & 65535,
                !(b + v <= u); ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                c >>>= b,
                u -= b,
                n.back += b
            }
            if (c >>>= v,
            u -= v,
            n.back += v,
            y & 64) {
                e.msg = "invalid distance code",
                n.mode = Qe;
                break
            }
            n.offset = w,
            n.extra = y & 15,
            n.mode = e4;
        case e4:
            if (n.extra) {
                for (P = n.extra; u < P; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.offset += c & (1 << n.extra) - 1,
                c >>>= n.extra,
                u -= n.extra,
                n.back += n.extra
            }
            if (n.offset > n.dmax) {
                e.msg = "invalid distance too far back",
                n.mode = Qe;
                break
            }
            n.mode = t4;
        case t4:
            if (l === 0)
                break e;
            if (h = f - l,
            n.offset > h) {
                if (h = n.offset - h,
                h > n.whave && n.sane) {
                    e.msg = "invalid distance too far back",
                    n.mode = Qe;
                    break
                }
                h > n.wnext ? (h -= n.wnext,
                m = n.wsize - h) : m = n.wnext - h,
                h > n.length && (h = n.length),
                g = n.window
            } else
                g = i,
                m = s - n.offset,
                h = n.length;
            h > l && (h = l),
            l -= h,
            n.length -= h;
            do
                i[s++] = g[m++];
            while (--h);
            n.length === 0 && (n.mode = Sf);
            break;
        case n4:
            if (l === 0)
                break e;
            i[s++] = n.length,
            l--,
            n.mode = Sf;
            break;
        case Vp:
            if (n.wrap) {
                for (; u < 32; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c |= r[o++] << u,
                    u += 8
                }
                if (f -= l,
                e.total_out += f,
                n.total += f,
                f && (e.adler = n.check = n.flags ? Kr(n.check, i, f, s - f) : c2(n.check, i, f, s - f)),
                f = l,
                (n.flags ? c : o4(c)) !== n.check) {
                    e.msg = "incorrect data check",
                    n.mode = Qe;
                    break
                }
                c = 0,
                u = 0
            }
            n.mode = r4;
        case r4:
            if (n.wrap && n.flags) {
                for (; u < 32; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                if (c !== (n.total & 4294967295)) {
                    e.msg = "incorrect length check",
                    n.mode = Qe;
                    break
                }
                c = 0,
                u = 0
            }
            n.mode = i4;
        case i4:
            T = zV;
            break e;
        case Qe:
            T = pC;
            break e;
        case vC:
            return mC;
        case VV:
        default:
            return hr
        }
    return e.next_out = s,
    e.avail_out = l,
    e.next_in = o,
    e.avail_in = a,
    n.hold = c,
    n.bits = u,
    (n.wsize || f !== e.avail_out && n.mode < Qe && (n.mode < Vp || t !== Nb)) && _C(e, e.output, e.next_out, f - e.avail_out),
    d -= e.avail_in,
    f -= e.avail_out,
    e.total_in += d,
    e.total_out += f,
    n.total += f,
    n.wrap && f && (e.adler = n.check = n.flags ? Kr(n.check, i, f, e.next_out - f) : c2(n.check, i, f, e.next_out - f)),
    e.data_type = n.bits + (n.last ? 64 : 0) + (n.mode === Ii ? 128 : 0) + (n.mode === If || n.mode === Up ? 256 : 0),
    (d === 0 && f === 0 || t === Nb) && T === oa && (T = UV),
    T
}
function QV(e) {
    if (!e || !e.state)
        return hr;
    var t = e.state;
    return t.window && (t.window = null),
    e.state = null,
    oa
}
function JV(e, t) {
    var n;
    return !e || !e.state || (n = e.state,
    !(n.wrap & 2)) ? hr : (n.head = t,
    t.done = !1,
    oa)
}
function eW(e, t) {
    var n = t.length, r, i, o;
    return !e || !e.state || (r = e.state,
    r.wrap !== 0 && r.mode !== h1) ? hr : r.mode === h1 && (i = 1,
    i = c2(i, t, n, 0),
    i !== r.check) ? pC : (o = _C(e, t, n, n),
    o ? (r.mode = vC,
    mC) : (r.havedict = 1,
    oa))
}
Hr.inflateReset = EC;
Hr.inflateReset2 = wC;
Hr.inflateResetKeep = yC;
Hr.inflateInit = KV;
Hr.inflateInit2 = bC;
Hr.inflate = qV;
Hr.inflateEnd = QV;
Hr.inflateGetHeader = JV;
Hr.inflateSetDictionary = eW;
Hr.inflateInfo = "pako inflate (from Nodeca project)";
var xC = {
    Z_NO_FLUSH: 0,
    Z_PARTIAL_FLUSH: 1,
    Z_SYNC_FLUSH: 2,
    Z_FULL_FLUSH: 3,
    Z_FINISH: 4,
    Z_BLOCK: 5,
    Z_TREES: 6,
    Z_OK: 0,
    Z_STREAM_END: 1,
    Z_NEED_DICT: 2,
    Z_ERRNO: -1,
    Z_STREAM_ERROR: -2,
    Z_DATA_ERROR: -3,
    Z_BUF_ERROR: -5,
    Z_NO_COMPRESSION: 0,
    Z_BEST_SPEED: 1,
    Z_BEST_COMPRESSION: 9,
    Z_DEFAULT_COMPRESSION: -1,
    Z_FILTERED: 1,
    Z_HUFFMAN_ONLY: 2,
    Z_RLE: 3,
    Z_FIXED: 4,
    Z_DEFAULT_STRATEGY: 0,
    Z_BINARY: 0,
    Z_TEXT: 1,
    Z_UNKNOWN: 2,
    Z_DEFLATED: 8
};
function tW() {
    this.text = 0,
    this.time = 0,
    this.xflags = 0,
    this.os = 0,
    this.extra = null,
    this.extra_len = 0,
    this.name = "",
    this.comment = "",
    this.hcrc = 0,
    this.done = !1
}
var nW = tW
  , sl = Hr
  , lu = Ji
  , ch = ma
  , gt = xC
  , u2 = Jy
  , rW = uC
  , iW = nW
  , IC = Object.prototype.toString;
function sa(e) {
    if (!(this instanceof sa))
        return new sa(e);
    this.options = lu.assign({
        chunkSize: 16384,
        windowBits: 0,
        to: ""
    }, e || {});
    var t = this.options;
    t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits,
    t.windowBits === 0 && (t.windowBits = -15)),
    t.windowBits >= 0 && t.windowBits < 16 && !(e && e.windowBits) && (t.windowBits += 32),
    t.windowBits > 15 && t.windowBits < 48 && (t.windowBits & 15 || (t.windowBits |= 15)),
    this.err = 0,
    this.msg = "",
    this.ended = !1,
    this.chunks = [],
    this.strm = new rW,
    this.strm.avail_out = 0;
    var n = sl.inflateInit2(this.strm, t.windowBits);
    if (n !== gt.Z_OK)
        throw new Error(u2[n]);
    if (this.header = new iW,
    sl.inflateGetHeader(this.strm, this.header),
    t.dictionary && (typeof t.dictionary == "string" ? t.dictionary = ch.string2buf(t.dictionary) : IC.call(t.dictionary) === "[object ArrayBuffer]" && (t.dictionary = new Uint8Array(t.dictionary)),
    t.raw && (n = sl.inflateSetDictionary(this.strm, t.dictionary),
    n !== gt.Z_OK)))
        throw new Error(u2[n])
}
sa.prototype.push = function(e, t) {
    var n = this.strm, r = this.options.chunkSize, i = this.options.dictionary, o, s, a, l, c, u = !1;
    if (this.ended)
        return !1;
    s = t === ~~t ? t : t === !0 ? gt.Z_FINISH : gt.Z_NO_FLUSH,
    typeof e == "string" ? n.input = ch.binstring2buf(e) : IC.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e,
    n.next_in = 0,
    n.avail_in = n.input.length;
    do {
        if (n.avail_out === 0 && (n.output = new lu.Buf8(r),
        n.next_out = 0,
        n.avail_out = r),
        o = sl.inflate(n, gt.Z_NO_FLUSH),
        o === gt.Z_NEED_DICT && i && (o = sl.inflateSetDictionary(this.strm, i)),
        o === gt.Z_BUF_ERROR && u === !0 && (o = gt.Z_OK,
        u = !1),
        o !== gt.Z_STREAM_END && o !== gt.Z_OK)
            return this.onEnd(o),
            this.ended = !0,
            !1;
        n.next_out && (n.avail_out === 0 || o === gt.Z_STREAM_END || n.avail_in === 0 && (s === gt.Z_FINISH || s === gt.Z_SYNC_FLUSH)) && (this.options.to === "string" ? (a = ch.utf8border(n.output, n.next_out),
        l = n.next_out - a,
        c = ch.buf2string(n.output, a),
        n.next_out = l,
        n.avail_out = r - l,
        l && lu.arraySet(n.output, n.output, a, l, 0),
        this.onData(c)) : this.onData(lu.shrinkBuf(n.output, n.next_out))),
        n.avail_in === 0 && n.avail_out === 0 && (u = !0)
    } while ((n.avail_in > 0 || n.avail_out === 0) && o !== gt.Z_STREAM_END);
    return o === gt.Z_STREAM_END && (s = gt.Z_FINISH),
    s === gt.Z_FINISH ? (o = sl.inflateEnd(this.strm),
    this.onEnd(o),
    this.ended = !0,
    o === gt.Z_OK) : (s === gt.Z_SYNC_FLUSH && (this.onEnd(gt.Z_OK),
    n.avail_out = 0),
    !0)
}
;
sa.prototype.onData = function(e) {
    this.chunks.push(e)
}
;
sa.prototype.onEnd = function(e) {
    e === gt.Z_OK && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = lu.flattenChunks(this.chunks)),
    this.chunks = [],
    this.err = e,
    this.msg = this.strm.msg
}
;
function t3(e, t) {
    var n = new sa(t);
    if (n.push(e, !0),
    n.err)
        throw n.msg || u2[n.err];
    return n.result
}
function oW(e, t) {
    return t = t || {},
    t.raw = !0,
    t3(e, t)
}
Rd.Inflate = sa;
Rd.inflate = t3;
Rd.inflateRaw = oW;
Rd.ungzip = t3;
var sW = Ji.assign
  , aW = Ad
  , lW = Rd
  , cW = xC
  , SC = {};
sW(SC, aW, lW, cW);
var x0 = SC;
const uh = 12
  , uW = ()=>{
    const e = new Uint8Array(uh);
    return window.crypto.getRandomValues(e)
}
  , n3 = async e=>{
    const t = await window.crypto.subtle.generateKey({
        name: "AES-GCM",
        length: z8
    }, !0, ["encrypt", "decrypt"]);
    return e === "cryptoKey" ? t : (await window.crypto.subtle.exportKey("jwk", t)).k
}
  , CC = (e,t)=>window.crypto.subtle.importKey("jwk", {
    alg: "A128GCM",
    ext: !0,
    k: e,
    key_ops: ["encrypt", "decrypt"],
    kty: "oct"
}, {
    name: "AES-GCM",
    length: z8
}, !1, [t])
  , I0 = async(e,t)=>{
    const n = typeof e == "string" ? await CC(e, "encrypt") : e
      , r = uW()
      , i = typeof t == "string" ? new TextEncoder().encode(t) : t instanceof Uint8Array ? t : t instanceof Blob ? await Ga(t) : t;
    return {
        encryptedBuffer: await window.crypto.subtle.encrypt({
            name: "AES-GCM",
            iv: r
        }, n, i),
        iv: r
    }
}
  , rd = async(e,t,n)=>{
    const r = await CC(n, "decrypt");
    return window.crypto.subtle.decrypt({
        name: "AES-GCM",
        iv: e
    }, r, t)
}
  , d2 = e=>new Promise((t,n)=>{
    const r = typeof e == "string" ? new Blob([new TextEncoder().encode(e)]) : new Blob([e instanceof Uint8Array ? e : new Uint8Array(e)])
      , i = new FileReader;
    i.onload = o=>{
        if (!o.target || typeof o.target.result != "string")
            return n(new Error("couldn't convert to byte string"));
        t(o.target.result)
    }
    ,
    i.readAsBinaryString(r)
}
)
  , kC = e=>{
    const t = new ArrayBuffer(e.length)
      , n = new Uint8Array(t);
    for (let r = 0, i = e.length; r < i; r++)
        n[r] = e.charCodeAt(r);
    return t
}
  , TC = e=>new TextDecoder("utf-8").decode(kC(e))
  , WX = async(e,t=!1)=>t ? window.btoa(e) : window.btoa(await d2(e))
  , GX = async(e,t=!1)=>t ? window.atob(e) : TC(window.atob(e))
  , jX = async({text: e, compress: t})=>{
    let n;
    if (t !== !1)
        try {
            n = await d2(x0.deflate(e))
        } catch (r) {
            console.error("encode: cannot deflate", r)
        }
    return {
        version: "1",
        encoding: "bstring",
        compressed: !!n,
        encoded: n || await d2(e)
    }
}
  , YX = async e=>{
    let t;
    switch (e.encoding) {
    case "bstring":
        t = e.compressed ? e.encoded : await TC(e.encoded);
        break;
    default:
        throw new Error(`decode: unknown encoding "${e.encoding}"`)
    }
    return e.compressed ? x0.inflate(new Uint8Array(kC(t)), {
        to: "string"
    }) : t
}
  , MC = 1
  , dh = 4
  , al = 4
  , jp = {
    1: 8,
    2: 16,
    4: 32
};
function p1(e, t, n, r) {
    if (r != null) {
        if (r > Math.pow(2, jp[t]) - 1)
            throw new Error(`attempting to set value higher than the allocated bytes (value: ${r}, bytes: ${t})`);
        const o = `setUint ${jp[t]}`;
        return new DataView(e.buffer)[o](n, r),
        e
    }
    const i = `getUint ${jp[t]}`;
    return new DataView(e.buffer)[i](n)
}
const a4 = (...e)=>{
    const t = new Uint8Array(dh + al * e.length + e.reduce((r,i)=>r + i.byteLength, 0));
    let n = 0;
    p1(t, dh, n, MC),
    n += dh;
    for (const r of e)
        p1(t, al, n, r.byteLength),
        n += al,
        t.set(r, n),
        n += r.byteLength;
    return t
}
  , l4 = e=>{
    const t = [];
    let n = 0;
    const r = p1(e, al, n);
    if (r > MC)
        throw new Error(`invalid version ${r}`);
    for (n += dh; ; ) {
        const i = p1(e, al, n);
        if (n += al,
        t.push(e.slice(n, n + i)),
        n += i,
        n >= e.byteLength)
            break
    }
    return t
}
  , dW = async(e,t)=>{
    const {encryptedBuffer: n, iv: r} = await I0(t, x0.deflate(e));
    return {
        iv: r,
        buffer: new Uint8Array(n)
    }
}
  , AC = async(e,t)=>{
    const n = {
        version: 2,
        compression: "pako@1",
        encryption: "AES-GCM"
    }
      , r = new TextEncoder().encode(JSON.stringify(n))
      , i = new TextEncoder().encode(JSON.stringify(t.metadata || null))
      , {iv: o, buffer: s} = await dW(a4(i, e), t.encryptionKey);
    return a4(r, o, s)
}
  , fW = async(e,t,n,r)=>(t = new Uint8Array(await rd(e, t, n)),
r ? x0.inflate(t) : t)
  , LC = async(e,t)=>{
    const [n,r,i] = l4(e)
      , o = JSON.parse(new TextDecoder().decode(n));
    try {
        const [s,a] = l4(await fW(r, i, t.decryptionKey, !!o.compression));
        return {
            metadata: JSON.parse(new TextDecoder().decode(s)),
            data: a
        }
    } catch (s) {
        throw console.error("Error during decompressing and decrypting the file.", o),
        s
    }
}
  , PC = e=>{
    const t = new Fe;
    return t.replaceAllElements(ey(e)),
    t.getNonDeletedElements()
}
  , RC = ({elements: e, appState: t, files: n, maxWidthOrHeight: r, getDimensions: i, exportPadding: o})=>{
    const {elements: s, appState: a} = qs({
        elements: e,
        appState: t
    }, null, null)
      , {exportBackground: l, viewBackgroundColor: c} = a;
    return BI(PC(s), {
        ...a,
        offsetTop: 0,
        offsetLeft: 0,
        width: 0,
        height: 0
    }, n || {}, {
        exportBackground: l,
        exportPadding: o,
        viewBackgroundColor: c
    }, (u,d)=>{
        const f = document.createElement("canvas");
        if (r) {
            typeof i == "function" && console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");
            const m = Math.max(u, d)
              , g = r < m ? r / m : (t == null ? void 0 : t.exportScale) ?? 1;
            return f.width = u * g,
            f.height = d * g,
            {
                canvas: f,
                scale: g
            }
        }
        const h = (i == null ? void 0 : i(u, d)) || {
            width: u,
            height: d
        };
        return f.width = h.width,
        f.height = h.height,
        {
            canvas: f,
            scale: h.scale ?? 1
        }
    }
    )
}
  , OC = async({elements: e, appState: t=di(), files: n={}, exportPadding: r, renderEmbeddables: i})=>{
    const {elements: o, appState: s} = qs({
        elements: e,
        appState: t
    }, null, null)
      , a = {
        ...s,
        exportPadding: r
    };
    return Py(PC(o), a, n, {
        renderEmbeddables: i,
        serializeAsJSON: ()=>Hl(o, a, n || {}, "local")
    })
}
  , DC = un(new Map)
  , c4 = async e=>await OC({
    elements: e,
    appState: {
        exportBackground: !1,
        viewBackgroundColor: ge.white
    },
    files: null,
    renderEmbeddables: !1
})
  , hW = (e,t,n)=>{
    const [r,i] = x.useState();
    return x.useEffect(()=>{
        if (t)
            if (e) {
                const o = n.get(e);
                o ? i(o) : (async()=>{
                    var a;
                    const s = await c4(t);
                    (a = s.querySelector(".style-fonts")) == null || a.remove(),
                    s && (n.set(e, s),
                    i(s))
                }
                )()
            } else
                (async()=>{
                    const o = await c4(t);
                    i(o)
                }
                )()
    }
    , [e, t, n, i]),
    r
}
  , NC = ()=>{
    const [e] = ut(DC, Kt);
    return {
        clearLibraryCache: ()=>e.clear(),
        deleteItemsFromLibraryCache: r=>{
            r.forEach(i=>e.delete(i))
        }
        ,
        svgCache: e
    }
}
  , id = un({
    status: "loaded",
    isInitialized: !0,
    libraryItems: []
})
  , Yp = e=>JSON.parse(JSON.stringify(e))
  , pW = (e,t)=>!e.find(n=>n.elements.length !== t.elements.length ? !1 : n.elements.every((r,i)=>r.id === t.elements[i].id && r.versionNonce === t.elements[i].versionNonce))
  , mW = (e,t)=>{
    const n = [];
    for (const r of t)
        pW(e, r) && n.push(r);
    return [...n, ...e]
}
;
class gW {
    constructor(t) {
        M(this, "lastLibraryItems", []);
        M(this, "isInitialized", !1);
        M(this, "app");
        M(this, "updateQueue", []);
        M(this, "getLastUpdateTask", ()=>this.updateQueue[this.updateQueue.length - 1]);
        M(this, "notifyListeners", ()=>{
            var t, n;
            if (this.updateQueue.length > 0)
                Di.set(id, {
                    status: "loading",
                    libraryItems: this.lastLibraryItems,
                    isInitialized: this.isInitialized
                });
            else {
                this.isInitialized = !0,
                Di.set(id, {
                    status: "loaded",
                    libraryItems: this.lastLibraryItems,
                    isInitialized: this.isInitialized
                });
                try {
                    (n = (t = this.app.props).onLibraryChange) == null || n.call(t, Yp(this.lastLibraryItems))
                } catch (r) {
                    console.error(r)
                }
            }
        }
        );
        M(this, "destroy", ()=>{
            this.isInitialized = !1,
            this.updateQueue = [],
            this.lastLibraryItems = [],
            Di.set(DC, new Map)
        }
        );
        M(this, "resetLibrary", ()=>this.setLibrary([]));
        M(this, "getLatestLibrary", ()=>new Promise(async t=>{
            try {
                const n = await (this.getLastUpdateTask() || this.lastLibraryItems);
                this.updateQueue.length > 0 ? t(this.getLatestLibrary()) : t(Yp(n))
            } catch {
                return t(this.lastLibraryItems)
            }
        }
        ));
        M(this, "updateLibrary", async({libraryItems: t, prompt: n=!1, merge: r=!1, openLibraryMenu: i=!1, defaultStatus: o="unpublished"})=>(i && this.app.setState({
            openSidebar: {
                name: nl.name,
                tab: Dv
            }
        }),
        this.setLibrary(()=>new Promise(async(s,a)=>{
            try {
                const l = await (typeof t == "function" && !(t instanceof Blob) ? t(this.lastLibraryItems) : t);
                let c;
                l instanceof Blob ? c = await MB(l, o) : c = kI(l, o),
                !n || window.confirm(_("alerts.confirmAddLibrary", {
                    numShapes: c.length
                })) ? (n && this.app.focusContainer(),
                s(r ? mW(this.lastLibraryItems, c) : c)) : a(new zu)
            } catch (l) {
                a(l)
            }
        }
        ))));
        M(this, "setLibrary", t=>{
            const n = new Promise(async(r,i)=>{
                try {
                    await this.getLastUpdateTask(),
                    typeof t == "function" && (t = t(this.lastLibraryItems)),
                    this.lastLibraryItems = Yp(await t),
                    r(this.lastLibraryItems)
                } catch (o) {
                    i(o)
                }
            }
            ).catch(r=>{
                if (r.name === "AbortError")
                    return console.warn("Library update aborted by user"),
                    this.lastLibraryItems;
                throw r
            }
            ).finally(()=>{
                this.updateQueue = this.updateQueue.filter(r=>r !== n),
                this.notifyListeners()
            }
            );
            return this.updateQueue.push(n),
            this.notifyListeners(),
            n
        }
        );
        this.app = t
    }
}
const FC = e=>{
    const n = Math.ceil(Math.sqrt(e.length))
      , r = []
      , i = h=>e.slice(h * n, h * n + n).reduce((g,E)=>{
        const {height: v} = Bi(E.elements);
        return Math.max(g, v)
    }
    , 0)
      , o = h=>{
        let m = 0
          , g = 0
          , E = 0;
        for (const v of e) {
            if (m % n === 0 && (g = 0),
            g === h) {
                const {width: y} = Bi(v.elements);
                E = Math.max(E, y)
            }
            m++,
            g++
        }
        return E
    }
    ;
    let s = 0
      , a = 0
      , l = 0
      , c = 0
      , u = 0
      , d = 0
      , f = 0;
    for (const h of e) {
        u && u % n === 0 && (a += l + 50,
        s = 0,
        d = 0,
        f++),
        d === 0 && (l = i(f)),
        c = o(d);
        const {minX: m, minY: g, width: E, height: v} = Bi(h.elements)
          , y = (c - E) / 2
          , w = (l - v) / 2;
        r.push(...h.elements.map(b=>({
            ...b,
            x: b.x + s + y - m,
            y: b.y + a + w - g
        }))),
        s += c + 50,
        u++,
        d++
    }
    return r
}
  , f2 = ()=>{
    const e = new URLSearchParams(window.location.hash.slice(1)).get(cg.addLibrary) || new URLSearchParams(window.location.search).get(lg.addLibrary)
      , t = e ? new URLSearchParams(window.location.hash.slice(1)).get("token") : null;
    return e ? {
        libraryUrl: e,
        idToken: t
    } : null
}
  , vW = ({excalidrawAPI: e, getInitialLibraryItems: t})=>{
    const n = x.useRef(t);
    x.useEffect(()=>{
        if (!e)
            return;
        const r = async({libraryUrl: s, idToken: a})=>{
            const l = new Promise(async(u,d)=>{
                try {
                    const h = await (await fetch(decodeURIComponent(s))).blob();
                    u(h)
                } catch (f) {
                    d(f)
                }
            }
            )
              , c = a !== e.id;
            await (c && document.hidden ? new Promise(u=>{
                window.addEventListener("focus", ()=>u(), {
                    once: !0
                })
            }
            ) : null);
            try {
                await e.updateLibrary({
                    libraryItems: l,
                    prompt: c,
                    merge: !0,
                    defaultStatus: "published",
                    openLibraryMenu: !0
                })
            } catch (u) {
                throw u
            } finally {
                if (window.location.hash.includes(cg.addLibrary)) {
                    const u = new URLSearchParams(window.location.hash.slice(1));
                    u.delete(cg.addLibrary),
                    window.history.replaceState({}, Oi, `#${u.toString()}`)
                } else if (window.location.search.includes(lg.addLibrary)) {
                    const u = new URLSearchParams(window.location.search);
                    u.delete(lg.addLibrary),
                    window.history.replaceState({}, Oi, `?${u.toString()}`)
                }
            }
        }
          , i = s=>{
            s.preventDefault();
            const a = f2();
            a && (s.stopImmediatePropagation(),
            window.history.replaceState({}, "", s.oldURL),
            r(a))
        }
        ;
        n.current && e.updateLibrary({
            libraryItems: n.current()
        });
        const o = f2();
        return o && r(o),
        window.addEventListener(U.HASHCHANGE, i),
        ()=>{
            window.removeEventListener(U.HASHCHANGE, i)
        }
    }
    , [e])
}
  , u4 = e=>{
    const t = Array.from(e.values());
    return {
        x: f4(t, n=>n.x) / t.length,
        y: f4(t, n=>n.y) / t.length
    }
}
  , d4 = ([e,t])=>Math.hypot(e.x - t.x, e.y - t.y)
  , f4 = (e,t)=>e.reduce((n,r)=>n + t(r), 0)
  , yW = e=>({
    selectedElementIds: e.selectedElementIds,
    selectedGroupIds: e.selectedGroupIds,
    viewBackgroundColor: e.viewBackgroundColor,
    editingLinearElement: e.editingLinearElement,
    editingGroupId: e.editingGroupId,
    name: e.name
});
class EW {
    constructor() {
        M(this, "elementCache", new Map);
        M(this, "recording", !0);
        M(this, "stateHistory", []);
        M(this, "redoStack", []);
        M(this, "lastEntry", null);
        M(this, "generateEntry", (t,n)=>this.dehydrateHistoryEntry({
            appState: yW(t),
            elements: n.reduce((r,i)=>{
                if (ye(i) && t.multiElement && t.multiElement.id === i.id) {
                    if (t.multiElement && t.multiElement.id === i.id && i.points.length < 2)
                        return r;
                    r.push({
                        ...i,
                        points: i.lastCommittedPoint !== i.points[i.points.length - 1] ? i.points.slice(0, -1) : i.points
                    })
                } else
                    r.push(i);
                return r
            }
            , [])
        }))
    }
    hydrateHistoryEntry({appState: t, elements: n}) {
        return {
            appState: JSON.parse(t),
            elements: n.map(r=>{
                var o;
                const i = (o = this.elementCache.get(r.id)) == null ? void 0 : o.get(r.versionNonce);
                if (!i)
                    throw new Error(`Element not found: ${r.id}:${r.versionNonce}`);
                return i
            }
            )
        }
    }
    dehydrateHistoryEntry({appState: t, elements: n}) {
        return {
            appState: JSON.stringify(t),
            elements: n.map(r=>{
                this.elementCache.has(r.id) || this.elementCache.set(r.id, new Map);
                const i = this.elementCache.get(r.id);
                return i.has(r.versionNonce) || i.set(r.versionNonce, bd(r)),
                {
                    id: r.id,
                    versionNonce: r.versionNonce
                }
            }
            )
        }
    }
    getSnapshotForTest() {
        return {
            recording: this.recording,
            stateHistory: this.stateHistory.map(t=>this.hydrateHistoryEntry(t)),
            redoStack: this.redoStack.map(t=>this.hydrateHistoryEntry(t))
        }
    }
    clear() {
        this.stateHistory.length = 0,
        this.redoStack.length = 0,
        this.lastEntry = null,
        this.elementCache.clear()
    }
    shouldCreateEntry(t) {
        var i, o;
        const {lastEntry: n} = this;
        if (!n || t.elements.length !== n.elements.length)
            return !0;
        for (let s = t.elements.length - 1; s > -1; s--) {
            const a = t.elements[s]
              , l = n.elements[s];
            if (!a || !l || a.id !== l.id || a.versionNonce !== l.versionNonce)
                return !0
        }
        let r;
        for (r in t.appState)
            if (!(r === "editingLinearElement" && ((i = t.appState[r]) == null ? void 0 : i.elementId) === ((o = n.appState[r]) == null ? void 0 : o.elementId)) && !(r === "selectedElementIds" || r === "selectedGroupIds") && t.appState[r] !== n.appState[r])
                return !0;
        return !1
    }
    pushEntry(t, n) {
        const r = this.generateEntry(t, n)
          , i = this.hydrateHistoryEntry(r);
        if (i) {
            if (!this.shouldCreateEntry(i))
                return;
            this.stateHistory.push(r),
            this.lastEntry = i,
            this.clearRedoStack()
        }
    }
    clearRedoStack() {
        this.redoStack.splice(0, this.redoStack.length)
    }
    redoOnce() {
        if (this.redoStack.length === 0)
            return null;
        const t = this.redoStack.pop();
        return t !== void 0 ? (this.stateHistory.push(t),
        this.hydrateHistoryEntry(t)) : null
    }
    undoOnce() {
        if (this.stateHistory.length === 1)
            return null;
        const t = this.stateHistory.pop()
          , n = this.stateHistory[this.stateHistory.length - 1];
        return t !== void 0 ? (this.redoStack.push(t),
        this.hydrateHistoryEntry(n)) : null
    }
    setCurrentState(t, n) {
        this.lastEntry = this.hydrateHistoryEntry(this.generateEntry(t, n))
    }
    resumeRecording() {
        this.recording = !0
    }
    record(t, n) {
        this.recording && (this.pushEntry(t, n),
        this.recording = !1)
    }
}
const $C = [{
    icon: WR,
    value: "selection",
    key: R.V,
    numericKey: R[1],
    fillable: !0
}, {
    icon: GR,
    value: "rectangle",
    key: R.R,
    numericKey: R[2],
    fillable: !0
}, {
    icon: jR,
    value: "diamond",
    key: R.D,
    numericKey: R[3],
    fillable: !0
}, {
    icon: YR,
    value: "ellipse",
    key: R.O,
    numericKey: R[4],
    fillable: !0
}, {
    icon: ZR,
    value: "arrow",
    key: R.A,
    numericKey: R[5],
    fillable: !0
}, {
    icon: KR,
    value: "line",
    key: R.L,
    numericKey: R[6],
    fillable: !0
}, {
    icon: ty,
    value: "freedraw",
    key: [R.P, R.X],
    numericKey: R[7],
    fillable: !1
}, {
    icon: qR,
    value: "text",
    key: R.T,
    numericKey: R[8],
    fillable: !1
}, {
    icon: QR,
    value: "image",
    key: null,
    numericKey: R[9],
    fillable: !1
}, {
    icon: JR,
    value: "eraser",
    key: R.E,
    numericKey: R[0],
    fillable: !1
}]
  , wW = e=>{
    const t = $C.find((n,r)=>n.numericKey != null && e === n.numericKey.toString() || n.key && (typeof n.key == "string" ? n.key === e : n.key.includes(e)));
    return (t == null ? void 0 : t.value) || null
}
;
const bW = {
    toggleTheme: [j("Shift+Alt+D")],
    saveScene: [j("CtrlOrCmd+S")],
    loadScene: [j("CtrlOrCmd+O")],
    clearCanvas: [j("CtrlOrCmd+Delete")],
    imageExport: [j("CtrlOrCmd+Shift+E")],
    cut: [j("CtrlOrCmd+X")],
    copy: [j("CtrlOrCmd+C")],
    paste: [j("CtrlOrCmd+V")],
    copyStyles: [j("CtrlOrCmd+Alt+C")],
    pasteStyles: [j("CtrlOrCmd+Alt+V")],
    selectAll: [j("CtrlOrCmd+A")],
    deleteSelectedElements: [j("Delete")],
    duplicateSelection: [j("CtrlOrCmd+D"), j(`Alt+${_("helpDialog.drag")}`)],
    sendBackward: [j("CtrlOrCmd+[")],
    bringForward: [j("CtrlOrCmd+]")],
    sendToBack: [j(ui ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")],
    bringToFront: [j(ui ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")],
    copyAsPng: [j("Shift+Alt+C")],
    copyAsSvg: [],
    group: [j("CtrlOrCmd+G")],
    ungroup: [j("CtrlOrCmd+Shift+G")],
    gridMode: [j("CtrlOrCmd+'")],
    zenMode: [j("Alt+Z")],
    objectsSnapMode: [j("Alt+S")],
    stats: [j("Alt+/")],
    addToLibrary: [],
    flipHorizontal: [j("Shift+H")],
    flipVertical: [j("Shift+V")],
    viewMode: [j("Alt+R")],
    hyperlink: [j("CtrlOrCmd+K")],
    toggleElementLock: [j("CtrlOrCmd+Shift+L")]
}
  , Kl = e=>{
    const t = bW[e];
    return t && t.length > 0 ? t[0] : ""
}
  , In = "separator"
  , _W = ee.memo(({actionManager: e, items: t, top: n, left: r})=>{
    const i = jk()
      , o = Xn()
      , s = A0()
      , a = t.reduce((l,c)=>(c && (c === In || !c.predicate || c.predicate(s, i, e.app.props, e.app)) && l.push(c),
    l), []);
    return p(xI, {
        onCloseRequest: ()=>o({
            contextMenu: null
        }),
        top: n,
        left: r,
        fitInViewport: !0,
        offsetLeft: i.offsetLeft,
        offsetTop: i.offsetTop,
        viewportWidth: i.width,
        viewportHeight: i.height,
        children: p("ul", {
            className: "context-menu",
            onContextMenu: l=>l.preventDefault(),
            children: a.map((l,c)=>{
                var f;
                if (l === In)
                    return !a[c - 1] || a[c - 1] === In ? null : p("hr", {
                        className: "context-menu-item-separator"
                    }, c);
                const u = l.name;
                let d = "";
                return l.contextItemLabel && (typeof l.contextItemLabel == "function" ? d = _(l.contextItemLabel(s, i, e.app)) : d = _(l.contextItemLabel)),
                p("li", {
                    "data-testid": u,
                    onClick: ()=>{
                        o({
                            contextMenu: null
                        }, ()=>{
                            e.executeAction(l, "contextMenu")
                        }
                        )
                    }
                    ,
                    children: k("button", {
                        className: le("context-menu-item", {
                            dangerous: u === "deleteSelectedElements",
                            checkmark: (f = l.checked) == null ? void 0 : f.call(l, i)
                        }),
                        children: [p("div", {
                            className: "context-menu-item__label",
                            children: d
                        }), p("kbd", {
                            className: "context-menu-item__shortcut",
                            children: u ? Kl(u) : ""
                        })]
                    })
                }, c)
            }
            )
        })
    })
}
);
const xW = x.forwardRef(({children: e, gap: t, align: n, justifyContent: r, className: i, style: o},s)=>p("div", {
    className: le("Stack Stack_horizontal", i),
    style: {
        "--gap": t,
        alignItems: n,
        justifyContent: r,
        ...o
    },
    ref: s,
    children: e
}))
  , IW = x.forwardRef(({children: e, gap: t, align: n, justifyContent: r, className: i, style: o},s)=>p("div", {
    className: le("Stack Stack_vertical", i),
    style: {
        "--gap": t,
        justifyItems: n,
        justifyContent: r,
        ...o
    },
    ref: s,
    children: e
}))
  , ir = {
    Row: xW,
    Col: IW
};
const BC = ({className: e="", children: t, onToggle: n, title: r, ...i})=>{
    const o = Xt()
      , s = le(`dropdown-menu-button ${e}`, "zen-mode-transition", {
        "dropdown-menu-button--mobile": o.isMobile
    }).trim();
    return p("button", {
        "data-prevent-outside-click": !0,
        className: s,
        onClick: n,
        type: "button",
        "data-testid": "dropdown-menu-button",
        title: r,
        ...i,
        children: t
    })
}
;
BC.displayName = "DropdownMenuTrigger";
const zC = ee.createContext({})
  , HC = (e="",t=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e} ${t ? "dropdown-menu-item--selected" : ""}`.trim()
  , UC = (e,t)=>{
    const n = x.useContext(zC);
    return j1(e, r=>{
        var o;
        const i = new CustomEvent(U.MENU_ITEM_SELECT,{
            bubbles: !0,
            cancelable: !0
        });
        t == null || t(i),
        i.defaultPrevented || (o = n.onSelect) == null || o.call(n, i)
    }
    )
}
  , VC = ({icon: e, shortcut: t, children: n})=>{
    const r = Xt();
    return k(re, {
        children: [p("div", {
            className: "dropdown-menu-item__icon",
            children: e
        }), p("div", {
            className: "dropdown-menu-item__text",
            children: n
        }), t && !r.isMobile && p("div", {
            className: "dropdown-menu-item__shortcut",
            children: t
        })]
    })
}
  , vi = ({icon: e, onSelect: t, children: n, shortcut: r, className: i, selected: o, ...s})=>{
    const a = UC(s.onClick, t);
    return p("button", {
        ...s,
        onClick: a,
        type: "button",
        className: HC(i, o),
        title: s.title ?? s["aria-label"],
        children: p(VC, {
            icon: e,
            shortcut: r,
            children: n
        })
    })
}
;
vi.displayName = "DropdownMenuItem";
const WC = ()=>p("div", {
    style: {
        height: "1px",
        backgroundColor: "var(--default-border-color)",
        margin: ".5rem 0"
    }
});
WC.displayName = "DropdownMenuSeparator";
const GC = ({children: e, className: t="", style: n, title: r})=>k("div", {
    className: `dropdown-menu-group ${t}`,
    style: n,
    children: [r && p("p", {
        className: "dropdown-menu-group-title",
        children: r
    }), e]
});
GC.displayName = "DropdownMenuGroup";
const zi = ee.forwardRef(({children: e, padding: t, className: n, style: r},i)=>p("div", {
    className: le("Island", n),
    style: {
        "--padding": t,
        ...r
    },
    ref: i,
    children: e
}))
  , jC = ({children: e, onClickOutside: t, className: n="", onSelect: r, style: i})=>{
    const o = Xt()
      , s = x.useRef(null);
    Iy(s, ()=>{
        t == null || t()
    }
    );
    const a = le(`dropdown-menu ${n}`, {
        "dropdown-menu--mobile": o.isMobile
    }).trim();
    return p(zC.Provider, {
        value: {
            onSelect: r
        },
        children: p("div", {
            ref: s,
            className: a,
            style: i,
            "data-testid": "dropdown-menu",
            children: o.isMobile ? p(ir.Col, {
                className: "dropdown-menu-container",
                children: e
            }) : p(zi, {
                className: "dropdown-menu-container",
                padding: 2,
                style: {
                    zIndex: 2
                },
                children: e
            })
        })
    })
}
;
jC.displayName = "DropdownMenuContent";
const cu = ({icon: e, shortcut: t, href: n, children: r, onSelect: i, className: o="", selected: s, ...a})=>{
    const l = UC(a.onClick, i);
    return p("a", {
        ...a,
        href: n,
        target: "_blank",
        rel: "noreferrer",
        className: HC(o, s),
        title: a.title ?? a["aria-label"],
        onClick: l,
        children: p(VC, {
            icon: e,
            shortcut: t,
            children: r
        })
    })
}
;
cu.displayName = "DropdownMenuItemLink";
const SW = ({children: e, className: t="", selected: n, ...r})=>p("div", {
    ...r,
    className: `dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n ? "dropdown-menu-item--selected" : ""}`.trim(),
    children: e
})
  , CW = e=>{
    const t = ee.Children.toArray(e).find(n=>ee.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuTrigger");
    return t || null
}
  , kW = e=>{
    const t = ee.Children.toArray(e).find(n=>ee.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuContent");
    return t || null
}
;
const Ne = ({children: e, open: t})=>{
    const n = CW(e)
      , r = kW(e);
    return k(re, {
        children: [n, t && r]
    })
}
;
Ne.Trigger = BC;
Ne.Content = jC;
Ne.Item = vi;
Ne.ItemLink = cu;
Ne.ItemCustom = SW;
Ne.Group = GC;
Ne.Separator = WC;
Ne.displayName = "DropdownMenu";
const YC = ({appState: e, elements: t, renderAction: n})=>{
    var f;
    const r = Uy(Pe(t), e);
    let i = !1;
    r.length === 2 && (jo(r[0]) || jo(r[1])) && (i = !0);
    const o = !!e.editingElement
      , s = Xt()
      , a = document.documentElement.getAttribute("dir") === "rtl"
      , l = Wa(e.activeTool.type) || r.some(h=>Wa(h.type) && !Ys(h.backgroundColor))
      , c = Wa(e.activeTool.type) || r.some(h=>Wa(h.type))
      , u = r.length === 1 || i;
    let d = ((f = r[0]) == null ? void 0 : f.type) || null;
    for (const h of r)
        if (h.type !== d) {
            d = null;
            break
        }
    return k("div", {
        className: "panelColumn",
        children: [p("div", {
            children: (Bg(e.activeTool.type) && e.activeTool.type !== "image" && d !== "image" && d !== "frame" || r.some(h=>Bg(h.type))) && n("changeStrokeColor")
        }), c && p("div", {
            children: n("changeBackgroundColor")
        }), l && n("changeFillStyle"), (C6(e.activeTool.type) || r.some(h=>C6(h.type))) && n("changeStrokeWidth"), (e.activeTool.type === "freedraw" || r.some(h=>h.type === "freedraw")) && n("changeStrokeShape"), (k6(e.activeTool.type) || r.some(h=>k6(h.type))) && k(re, {
            children: [n("changeStrokeStyle"), n("changeSloppiness")]
        }), (zg(e.activeTool.type) || r.some(h=>zg(h.type))) && p(re, {
            children: n("changeRoundness")
        }), (T6(e.activeTool.type) || r.some(h=>T6(h.type))) && k(re, {
            children: [n("changeFontSize"), n("changeFontFamily"), cz(r) && n("changeTextAlign")]
        }), lz(r) && n("changeVerticalAlign"), (t1(e.activeTool.type) || r.some(h=>t1(h.type))) && p(re, {
            children: n("changeArrowhead")
        }), n("changeOpacity"), k("fieldset", {
            children: [p("legend", {
                children: _("labels.layers")
            }), k("div", {
                className: "buttonList",
                children: [n("sendToBack"), n("sendBackward"), n("bringToFront"), n("bringForward")]
            })]
        }), r.length > 1 && !i && k("fieldset", {
            children: [p("legend", {
                children: _("labels.align")
            }), k("div", {
                className: "buttonList",
                children: [a ? k(re, {
                    children: [n("alignRight"), n("alignHorizontallyCentered"), n("alignLeft")]
                }) : k(re, {
                    children: [n("alignLeft"), n("alignHorizontallyCentered"), n("alignRight")]
                }), r.length > 2 && n("distributeHorizontally"), p("div", {
                    style: {
                        flexBasis: "100%",
                        height: 0
                    }
                }), k("div", {
                    style: {
                        display: "flex",
                        flexWrap: "wrap",
                        gap: ".5rem",
                        marginTop: "-0.5rem"
                    },
                    children: [n("alignTop"), n("alignVerticallyCentered"), n("alignBottom"), r.length > 2 && n("distributeVertically")]
                })]
            })]
        }), !o && r.length > 0 && k("fieldset", {
            children: [p("legend", {
                children: _("labels.actions")
            }), k("div", {
                className: "buttonList",
                children: [!s.isMobile && n("duplicateSelection"), !s.isMobile && n("deleteSelectedElements"), n("group"), n("ungroup"), u && n("hyperlink")]
            })]
        })]
    })
}
  , ZC = ({activeTool: e, appState: t, app: n})=>{
    const [r,i] = x.useState(!1)
      , o = Xt()
      , s = e.type === "frame"
      , a = e.type === "laser"
      , l = e.type === "embeddable";
    return k(re, {
        children: [$C.map(({value: c, icon: u, key: d, numericKey: f, fillable: h},m)=>{
            const g = _(`toolBar.${c}`)
              , E = d && oo(typeof d == "string" ? d : d[0])
              , v = E ? `${E} ${_("helpDialog.or")} ${f}` : `${f}`;
            return p(Ee, {
                className: le("Shape", {
                    fillable: h
                }),
                type: "radio",
                icon: u,
                checked: e.type === c,
                name: "editor-current-shape",
                title: `${oo(g)}  ${v}`,
                keyBindingLabel: f || E,
                "aria-label": oo(g),
                "aria-keyshortcuts": v,
                "data-testid": `toolbar-${c}`,
                onPointerDown: ({pointerType: y})=>{
                    !t.penDetected && y === "pen" && n.togglePenMode(!0)
                }
                ,
                onChange: ({pointerType: y})=>{
                    t.activeTool.type !== c && nt("toolbar", c, "ui"),
                    c === "image" ? n.setActiveTool({
                        type: c,
                        insertOnCanvasDirectly: y !== "mouse"
                    }) : n.setActiveTool({
                        type: c
                    })
                }
            }, c)
        }
        ), p("div", {
            className: "App-toolbar__divider"
        }), o.isMobile ? k(re, {
            children: [p(Ee, {
                className: le("Shape", {
                    fillable: !1
                }),
                type: "radio",
                icon: Hw,
                checked: e.type === "frame",
                name: "editor-current-shape",
                title: `${oo(_("toolBar.frame"))}  ${R.F.toLocaleUpperCase()}`,
                keyBindingLabel: R.F.toLocaleUpperCase(),
                "aria-label": oo(_("toolBar.frame")),
                "aria-keyshortcuts": R.F.toLocaleUpperCase(),
                "data-testid": "toolbar-frame",
                onPointerDown: ({pointerType: c})=>{
                    !t.penDetected && c === "pen" && n.togglePenMode(!0)
                }
                ,
                onChange: ({pointerType: c})=>{
                    nt("toolbar", "frame", "ui"),
                    n.setActiveTool({
                        type: "frame"
                    })
                }
                ,
                selected: e.type === "frame"
            }), p(Ee, {
                className: le("Shape", {
                    fillable: !1
                }),
                type: "radio",
                icon: Ow,
                checked: e.type === "embeddable",
                name: "editor-current-shape",
                title: oo(_("toolBar.embeddable")),
                "aria-label": oo(_("toolBar.embeddable")),
                "data-testid": "toolbar-embeddable",
                onPointerDown: ({pointerType: c})=>{
                    !t.penDetected && c === "pen" && n.togglePenMode(!0)
                }
                ,
                onChange: ({pointerType: c})=>{
                    nt("toolbar", "embeddable", "ui"),
                    n.setActiveTool({
                        type: "embeddable"
                    })
                }
                ,
                selected: e.type === "embeddable"
            })]
        }) : k(Ne, {
            open: r,
            children: [p(Ne.Trigger, {
                className: le("App-toolbar__extra-tools-trigger", {
                    "App-toolbar__extra-tools-trigger--selected": s || l || a && !n.props.isCollaborating
                }),
                onToggle: ()=>i(!r),
                title: _("toolBar.extraTools"),
                children: mD
            }), k(Ne.Content, {
                onClickOutside: ()=>i(!1),
                onSelect: ()=>i(!1),
                className: "App-toolbar__extra-tools-dropdown",
                children: [p(Ne.Item, {
                    onSelect: ()=>{
                        n.setActiveTool({
                            type: "frame"
                        })
                    }
                    ,
                    icon: Hw,
                    shortcut: R.F.toLocaleUpperCase(),
                    "data-testid": "toolbar-frame",
                    selected: s,
                    children: _("toolBar.frame")
                }), p(Ne.Item, {
                    onSelect: ()=>{
                        n.setActiveTool({
                            type: "embeddable"
                        })
                    }
                    ,
                    icon: Ow,
                    "data-testid": "toolbar-embeddable",
                    selected: l,
                    children: _("toolBar.embeddable")
                }), p(Ne.Item, {
                    onSelect: ()=>{
                        n.setActiveTool({
                            type: "laser"
                        })
                    }
                    ,
                    icon: p7,
                    "data-testid": "toolbar-laser",
                    selected: a,
                    shortcut: R.K.toLocaleUpperCase(),
                    children: _("toolBar.laser")
                })]
            })]
        })]
    })
}
  , TW = ({renderAction: e, zoom: t})=>p(ir.Col, {
    gap: 1,
    className: "zoom-actions",
    children: k(ir.Row, {
        align: "center",
        children: [e("zoomOut"), e("resetZoom"), e("zoomIn")]
    })
})
  , MW = ({renderAction: e, className: t})=>k("div", {
    className: `undo-redo-buttons ${t}`,
    children: [p("div", {
        className: "undo-button-container",
        children: p(Zo, {
            label: _("buttons.undo"),
            children: e("undo")
        })
    }), p("div", {
        className: "redo-button-container",
        children: k(Zo, {
            label: _("buttons.redo"),
            children: [" ", e("redo")]
        })
    })]
})
  , AW = ({actionManager: e, showExitZenModeBtn: t})=>p("button", {
    className: le("disable-zen-mode", {
        "disable-zen-mode--visible": t
    }),
    onClick: ()=>e.executeAction(n2),
    children: _("buttons.exitZenMode")
})
  , LW = ({renderAction: e, className: t})=>p("div", {
    className: `finalize-button ${t}`,
    children: e("finalize", {
        size: "small"
    })
});
const PW = function({onChange: e, value: t, choices: n, name: r}) {
    return p("div", {
        className: "RadioGroup",
        children: n.map(i=>k("div", {
            className: le("RadioGroup__choice", {
                active: i.value === t
            }),
            children: [p("input", {
                name: r,
                type: "radio",
                checked: i.value === t,
                onChange: ()=>e(i.value)
            }), i.label]
        }, i.label))
    })
};
const Cf = ({title: e, name: t, checked: n, onChange: r, disabled: i=!1})=>p("div", {
    className: le("Switch", {
        toggled: n,
        disabled: i
    }),
    children: p("input", {
        name: t,
        id: t,
        title: e,
        type: "checkbox",
        checked: n,
        disabled: i,
        onChange: ()=>r(!n),
        onKeyDown: o=>{
            o.key === " " && r(!n)
        }
    })
});
const oi = x.forwardRef(({children: e, startIcon: t, onClick: n, label: r, variant: i="filled", color: o="primary", size: s="medium", fullWidth: a, className: l},c)=>k("button", {
    className: le("ExcButton", `ExcButton--color-${o}`, `ExcButton--variant-${i}`, `ExcButton--size-${s}`, {
        "ExcButton--fullWidth": a
    }, l),
    onClick: n,
    type: "button",
    "aria-label": r,
    ref: c,
    children: [t && p("div", {
        className: "ExcButton__icon",
        "aria-hidden": !0,
        children: t
    }), i !== "icon" && (e ?? r)]
}))
  , RW = "filter"in document.createElement("canvas").getContext("2d")
  , OW = ()=>k("div", {
    children: [p("h3", {
        children: _("canvasError.cannotShowPreview")
    }), p("p", {
        children: p("span", {
            children: _("canvasError.canvasTooBig")
        })
    }), k("em", {
        children: ["(", _("canvasError.canvasTooBigTip"), ")"]
    })]
})
  , DW = ({appState: e, elements: t, files: n, actionManager: r, onExportImage: i})=>{
    const o = M0()
      , [s,a] = x.useState(e.name)
      , l = Pt(t, e)
      , [c,u] = x.useState(l)
      , [d,f] = x.useState(e.exportBackground)
      , [h,m] = x.useState(e.exportWithDarkMode)
      , [g,E] = x.useState(e.exportEmbedScene)
      , [v,y] = x.useState(e.exportScale)
      , w = x.useRef(null)
      , [b,I] = x.useState(null)
      , S = c ? it(t, e, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    }) : t;
    return x.useEffect(()=>{
        const C = w.current;
        if (!C)
            return;
        const T = C.offsetWidth
          , L = C.offsetHeight;
        T && RC({
            elements: S,
            appState: e,
            files: n,
            exportPadding: gd,
            maxWidthOrHeight: Math.max(T, L)
        }).then(A=>(I(null),
        r1(A).then(()=>{
            C.replaceChildren(A)
        }
        ))).catch(A=>{
            console.error(A),
            I(A)
        }
        )
    }
    , [e, n, S]),
    k("div", {
        className: "ImageExportModal",
        children: [p("h3", {
            children: _("imageExportDialog.header")
        }), k("div", {
            className: "ImageExportModal__preview",
            children: [p("div", {
                className: "ImageExportModal__preview__canvas",
                ref: w,
                children: b && p(OW, {})
            }), p("div", {
                className: "ImageExportModal__preview__filename",
                children: !ha && p("input", {
                    type: "text",
                    className: "TextInput",
                    value: s,
                    style: {
                        width: "30ch"
                    },
                    disabled: typeof o.name < "u" || e.viewModeEnabled,
                    onChange: C=>{
                        a(C.target.value),
                        r.executeAction(TH, "ui", C.target.value)
                    }
                })
            })]
        }), k("div", {
            className: "ImageExportModal__settings",
            children: [p("h3", {
                children: _("imageExportDialog.header")
            }), l && p(wc, {
                label: _("imageExportDialog.label.onlySelected"),
                name: "exportOnlySelected",
                children: p(Cf, {
                    name: "exportOnlySelected",
                    checked: c,
                    onChange: C=>{
                        u(C)
                    }
                })
            }), p(wc, {
                label: _("imageExportDialog.label.withBackground"),
                name: "exportBackgroundSwitch",
                children: p(Cf, {
                    name: "exportBackgroundSwitch",
                    checked: d,
                    onChange: C=>{
                        f(C),
                        r.executeAction(AH, "ui", C)
                    }
                })
            }), RW && p(wc, {
                label: _("imageExportDialog.label.darkMode"),
                name: "exportDarkModeSwitch",
                children: p(Cf, {
                    name: "exportDarkModeSwitch",
                    checked: h,
                    onChange: C=>{
                        m(C),
                        r.executeAction(LH, "ui", C)
                    }
                })
            }), p(wc, {
                label: _("imageExportDialog.label.embedScene"),
                tooltip: _("imageExportDialog.tooltip.embedScene"),
                name: "exportEmbedSwitch",
                children: p(Cf, {
                    name: "exportEmbedSwitch",
                    checked: g,
                    onChange: C=>{
                        E(C),
                        r.executeAction(LS, "ui", C)
                    }
                })
            }), p(wc, {
                label: _("imageExportDialog.label.scale"),
                name: "exportScale",
                children: p(PW, {
                    name: "exportScale",
                    value: v,
                    onChange: C=>{
                        y(C),
                        r.executeAction(MH, "ui", C)
                    }
                    ,
                    choices: Ov.map(C=>({
                        value: C,
                        label: `${C}`
                    }))
                })
            }), k("div", {
                className: "ImageExportModal__settings__buttons",
                children: [p(oi, {
                    className: "ImageExportModal__settings__buttons__button",
                    label: _("imageExportDialog.title.exportToPng"),
                    onClick: ()=>i(lp.png, S),
                    startIcon: zw,
                    children: _("imageExportDialog.button.exportToPng")
                }), p(oi, {
                    className: "ImageExportModal__settings__buttons__button",
                    label: _("imageExportDialog.title.exportToSvg"),
                    onClick: ()=>i(lp.svg, S),
                    startIcon: zw,
                    children: _("imageExportDialog.button.exportToSvg")
                }), (Dy || Mv) && p(oi, {
                    className: "ImageExportModal__settings__buttons__button",
                    label: _("imageExportDialog.title.copyPngToClipboard"),
                    onClick: ()=>i(lp.clipboard, S),
                    startIcon: oy,
                    children: _("imageExportDialog.button.copyPngToClipboard")
                })]
            })]
        })]
    })
}
  , wc = ({label: e, children: t, tooltip: n, name: r})=>k("div", {
    className: "ImageExportModal__settings__setting",
    title: e,
    children: [k("label", {
        htmlFor: r,
        className: "ImageExportModal__settings__setting__label",
        children: [e, n && p(Zo, {
            label: n,
            long: !0,
            children: uD
        })]
    }), p("div", {
        className: "ImageExportModal__settings__setting__content",
        children: t
    })]
})
  , NW = ({elements: e, appState: t, files: n, actionManager: r, onExportImage: i, onCloseRequest: o})=>t.openDialog !== "imageExport" ? null : p(Ur, {
    onCloseRequest: o,
    size: "wide",
    title: !1,
    children: p(DW, {
        elements: e,
        appState: t,
        files: n,
        actionManager: r,
        onExportImage: i
    })
});
const KC = ({children: e, side: t, className: n})=>p("div", {
    className: le("FixedSideContainer", `FixedSideContainer_side_ ${t}`, n),
    children: e
});
const FW = ({appState: e, isMobile: t, device: n, app: r})=>{
    var u;
    const {activeTool: i, isResizing: o, isRotating: s, lastPointerDownWith: a} = e
      , l = e.multiElement !== null;
    if (e.openSidebar && !n.canDeviceFitSidebar)
        return null;
    if (Cs(e))
        return _("hints.eraserRevert");
    if (i.type === "arrow" || i.type === "line")
        return _(l ? "hints.linearElementMulti" : "hints.linearElement");
    if (i.type === "freedraw")
        return _("hints.freeDraw");
    if (i.type === "text")
        return _("hints.text");
    if (i.type === "embeddable")
        return _("hints.embeddable");
    if (e.activeTool.type === "image" && e.pendingImageElementId)
        return _("hints.placeImage");
    const c = r.scene.getSelectedElements(e);
    if (o && a === "mouse" && c.length === 1) {
        const d = c[0];
        return ye(d) && d.points.length === 2 ? _("hints.lockAngle") : Ni(d) ? _("hints.resizeImage") : _("hints.resize")
    }
    if (s && a === "mouse")
        return _("hints.rotate");
    if (c.length === 1 && ue(c[0]))
        return _("hints.text_selected");
    if (e.editingElement && ue(e.editingElement))
        return _("hints.text_editing");
    if (i.type === "selection") {
        if (((u = e.draggingElement) == null ? void 0 : u.type) === "selection" && !c.length && !e.editingElement && !e.editingLinearElement)
            return _("hints.deepBoxSelect");
        if (e.gridSize && e.draggingElement)
            return _("hints.disableSnapping");
        if (!c.length && !t)
            return _("hints.canvasPanning");
        if (c.length === 1) {
            if (ye(c[0]))
                return e.editingLinearElement ? e.editingLinearElement.selectedPointsIndices ? _("hints.lineEditor_pointSelected") : _("hints.lineEditor_nothingSelected") : _("hints.lineEditor_info");
            if (!e.draggingElement && zs(c[0]))
                return _("hints.bindTextToElement")
        }
    }
    return null
}
  , XC = ({appState: e, isMobile: t, device: n, app: r})=>{
    let i = FW({
        appState: e,
        isMobile: t,
        device: n,
        app: r
    });
    return i ? (i = j(i),
    p("div", {
        className: "HintViewer",
        children: p("span", {
            children: i
        })
    })) : null
}
  , qC = ({delay: e, theme: t})=>{
    const [n,r] = x.useState(!!e);
    return x.useEffect(()=>{
        if (!e)
            return;
        const i = setTimeout(()=>{
            r(!1)
        }
        , e);
        return ()=>clearTimeout(i)
    }
    , [e]),
    n ? null : k("div", {
        className: le("LoadingMessage", {
            "LoadingMessage--dark": t === $t.DARK
        }),
        children: [p("div", {
            children: p(bl, {})
        }), p("div", {
            className: "LoadingMessage-text",
            children: _("labels.loadingScene")
        })]
    })
}
  , $W = "medium"
  , h4 = {
    CHECKED: zR,
    UNCHECKED: BR
}
  , QC = e=>k("label", {
    className: le("ToolIcon ToolIcon__lock", `ToolIcon_size_ ${$W}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title}  Q`,
    children: [p("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title,
        "data-testid": "toolbar-lock"
    }), p("div", {
        className: "ToolIcon__icon",
        children: e.checked ? h4.CHECKED : h4.UNCHECKED
    })]
})
  , od = ({heading: e, children: t, ...n})=>{
    const {id: r} = eo()
      , i = p("h2", {
        className: "visually-hidden",
        id: `${r}-${e}-title`,
        children: _(`headings.${e}`)
    });
    return p("section", {
        ...n,
        "aria-labelledby": `${r}-${e}-title`,
        children: typeof t == "function" ? t(i) : k(re, {
            children: [i, t]
        })
    })
}
  , BW = "medium"
  , JC = e=>e.penDetected ? k("label", {
    className: le("ToolIcon ToolIcon__penMode", `ToolIcon_size_ ${BW}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title}`,
    children: [p("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title
    }), p("div", {
        className: "ToolIcon__icon",
        children: XR
    })]
}) : null;
const ek = e=>{
    var i;
    const t = mt(e.elements)
      , n = Uy(e.elements, e.appState)
      , r = mt(n);
    return p("div", {
        className: "Stats",
        children: k(zi, {
            padding: 2,
            children: [p("div", {
                className: "close",
                onClick: e.onClose,
                children: _d
            }), p("h3", {
                children: _("stats.title")
            }), p("table", {
                children: k("tbody", {
                    children: [p("tr", {
                        children: p("th", {
                            colSpan: 2,
                            children: _("stats.scene")
                        })
                    }), k("tr", {
                        children: [p("td", {
                            children: _("stats.elements")
                        }), p("td", {
                            children: e.elements.length
                        })]
                    }), k("tr", {
                        children: [p("td", {
                            children: _("stats.width")
                        }), p("td", {
                            children: Math.round(t[2]) - Math.round(t[0])
                        })]
                    }), k("tr", {
                        children: [p("td", {
                            children: _("stats.height")
                        }), p("td", {
                            children: Math.round(t[3]) - Math.round(t[1])
                        })]
                    }), n.length === 1 && p("tr", {
                        children: p("th", {
                            colSpan: 2,
                            children: _("stats.element")
                        })
                    }), n.length > 1 && k(re, {
                        children: [p("tr", {
                            children: p("th", {
                                colSpan: 2,
                                children: _("stats.selected")
                            })
                        }), k("tr", {
                            children: [p("td", {
                                children: _("stats.elements")
                            }), p("td", {
                                children: n.length
                            })]
                        })]
                    }), n.length > 0 && k(re, {
                        children: [k("tr", {
                            children: [p("td", {
                                children: "x"
                            }), p("td", {
                                children: Math.round(r[0])
                            })]
                        }), k("tr", {
                            children: [p("td", {
                                children: "y"
                            }), p("td", {
                                children: Math.round(r[1])
                            })]
                        }), k("tr", {
                            children: [p("td", {
                                children: _("stats.width")
                            }), p("td", {
                                children: Math.round(r[2] - r[0])
                            })]
                        }), k("tr", {
                            children: [p("td", {
                                children: _("stats.height")
                            }), p("td", {
                                children: Math.round(r[3] - r[1])
                            })]
                        })]
                    }), n.length === 1 && k("tr", {
                        children: [p("td", {
                            children: _("stats.angle")
                        }), p("td", {
                            children: `${Math.round(n[0].angle * 180 / Math.PI)}`
                        })]
                    }), (i = e.renderCustomStats) == null ? void 0 : i.call(e, e.elements, e.appState)]
                })
            })]
        })
    })
}
  , tk = e=>p(Ee, {
    className: le("Shape", {
        fillable: !1
    }),
    type: "radio",
    icon: cD,
    name: "editor-current-shape",
    checked: e.checked,
    title: `${e.title}  H`,
    keyBindingLabel: e.isMobile ? void 0 : R.H.toLocaleUpperCase(),
    "aria-label": `${e.title}  H`,
    "aria-keyshortcuts": R.H,
    "data-testid": "toolbar-hand",
    onChange: ()=>{
        var t;
        return (t = e.onChange) == null ? void 0 : t.call(e)
    }
})
  , p4 = e=>{
    let t;
    const n = new Set
      , r = (l,c)=>{
        const u = typeof l == "function" ? l(t) : l;
        if (!Object.is(u, t)) {
            const d = t;
            t = c ?? typeof u != "object" ? u : Object.assign({}, t, u),
            n.forEach(f=>f(t, d))
        }
    }
      , i = ()=>t
      , a = {
        setState: r,
        getState: i,
        subscribe: l=>(n.add(l),
        ()=>n.delete(l)),
        destroy: ()=>{
            ({
                VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
                VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
                VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
                VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
                VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
                VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
                VITE_APP_PLUS_APP: "https://app.excalidraw.com",
                VITE_APP_WS_SERVER_URL: "",
                VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
                VITE_APP_DISABLE_TRACKING: "",
                VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
                BASE_URL: "/",
                MODE: "production",
                DEV: !1,
                PROD: !0,
                SSR: !1
            } && "production") !== "production" && console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),
            n.clear()
        }
    };
    return t = e(r, i, a),
    a
}
  , zW = e=>e ? p4(e) : p4;
var nk = {
    exports: {}
}
  , rk = {}
  , ik = {
    exports: {}
}
  , ok = {};
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Cl = x;
function HW(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t
}
var UW = typeof Object.is == "function" ? Object.is : HW
  , VW = Cl.useState
  , WW = Cl.useEffect
  , GW = Cl.useLayoutEffect
  , jW = Cl.useDebugValue;
function YW(e, t) {
    var n = t()
      , r = VW({
        inst: {
            value: n,
            getSnapshot: t
        }
    })
      , i = r[0].inst
      , o = r[1];
    return GW(function() {
        i.value = n,
        i.getSnapshot = t,
        Zp(i) && o({
            inst: i
        })
    }, [e, n, t]),
    WW(function() {
        return Zp(i) && o({
            inst: i
        }),
        e(function() {
            Zp(i) && o({
                inst: i
            })
        })
    }, [e]),
    jW(n),
    n
}
function Zp(e) {
    var t = e.getSnapshot;
    e = e.value;
    try {
        var n = t();
        return !UW(e, n)
    } catch {
        return !0
    }
}
function ZW(e, t) {
    return t()
}
var KW = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? ZW : YW;
ok.useSyncExternalStore = Cl.useSyncExternalStore !== void 0 ? Cl.useSyncExternalStore : KW;
ik.exports = ok;
var XW = ik.exports;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var S0 = x
  , qW = XW;
function QW(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t
}
var JW = typeof Object.is == "function" ? Object.is : QW
  , eG = qW.useSyncExternalStore
  , tG = S0.useRef
  , nG = S0.useEffect
  , rG = S0.useMemo
  , iG = S0.useDebugValue;
rk.useSyncExternalStoreWithSelector = function(e, t, n, r, i) {
    var o = tG(null);
    if (o.current === null) {
        var s = {
            hasValue: !1,
            value: null
        };
        o.current = s
    } else
        s = o.current;
    o = rG(function() {
        function l(h) {
            if (!c) {
                if (c = !0,
                u = h,
                h = r(h),
                i !== void 0 && s.hasValue) {
                    var m = s.value;
                    if (i(m, h))
                        return d = m
                }
                return d = h
            }
            if (m = d,
            JW(u, h))
                return m;
            var g = r(h);
            return i !== void 0 && i(m, g) ? m : (u = h,
            d = g)
        }
        var c = !1, u, d, f = n === void 0 ? null : n;
        return [function() {
            return l(t())
        }
        , f === null ? void 0 : function() {
            return l(f())
        }
        ]
    }, [t, n, r, i]);
    var a = eG(e, o[0], o[1]);
    return nG(function() {
        s.hasValue = !0,
        s.value = a
    }, [a]),
    iG(a),
    a
}
;
nk.exports = rk;
var oG = nk.exports;
const sG = Al(oG)
  , {useSyncExternalStoreWithSelector: aG} = sG;
function lG(e, t=e.getState, n) {
    const r = aG(e.subscribe, e.getState, e.getServerState || e.getState, t, n);
    return x.useDebugValue(r),
    r
}
const m4 = e=>{
    ({
        VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
        VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
        VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
        VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
        VITE_APP_PORTAL_URL: "https://portal.excalidraw.com",
        VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
        VITE_APP_PLUS_APP: "https://app.excalidraw.com",
        VITE_APP_WS_SERVER_URL: "",
        VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
        VITE_APP_DISABLE_TRACKING: "",
        VITE_APP_GIT_SHA: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
        BASE_URL: "/",
        MODE: "production",
        DEV: !1,
        PROD: !0,
        SSR: !1
    } && "production") !== "production" && typeof e != "function" && console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");
    const t = typeof e == "function" ? zW(e) : e
      , n = (r,i)=>lG(t, r, i);
    return Object.assign(n, t),
    n
}
  , cG = e=>e ? m4(e) : m4;
var g4, v4;
const y4 = typeof window < "u" && ((g4 = window.document) != null && g4.createElement || ((v4 = window.navigator) == null ? void 0 : v4.product) === "ReactNative") ? ee.useLayoutEffect : ee.useEffect;
function Si() {
    const e = cG(t=>({
        current: new Array,
        version: 0,
        set: t
    }));
    return {
        In: ({children: t})=>{
            const n = e(i=>i.set)
              , r = e(i=>i.version);
            return y4(()=>{
                n(i=>({
                    version: i.version + 1
                }))
            }
            , []),
            y4(()=>(n(({current: i})=>({
                current: [...i, t]
            })),
            ()=>n(({current: i})=>({
                current: i.filter(o=>o !== t)
            }))), [t, r]),
            null
        }
        ,
        Out: ()=>{
            const t = e(n=>n.current);
            return ee.createElement(ee.Fragment, null, t)
        }
    }
}
const sk = ee.createContext(null)
  , Kn = ()=>ee.useContext(sk)
  , uG = ()=>ee.useMemo(()=>({
    MainMenuTunnel: Si(),
    WelcomeScreenMenuHintTunnel: Si(),
    WelcomeScreenToolbarHintTunnel: Si(),
    WelcomeScreenHelpHintTunnel: Si(),
    WelcomeScreenCenterTunnel: Si(),
    FooterCenterTunnel: Si(),
    DefaultSidebarTriggerTunnel: Si(),
    DefaultSidebarTabTriggersTunnel: Si(),
    OverwriteConfirmDialogTunnel: Si(),
    jotaiScope: Symbol()
}), [])
  , dG = ({appState: e, elements: t, actionManager: n, setAppState: r, onLockToggle: i, onHandToolToggle: o, onPenModeToggle: s, renderTopRightUI: a, renderCustomStats: l, renderSidebars: c, device: u, renderWelcomeScreen: d, app: f})=>{
    const {WelcomeScreenCenterTunnel: h, MainMenuTunnel: m, DefaultSidebarTriggerTunnel: g} = Kn()
      , E = ()=>k(KC, {
        side: "top",
        className: "App-top-bar",
        children: [d && p(h.Out, {}), p(od, {
            heading: "shapes",
            children: y=>p(ir.Col, {
                gap: 4,
                align: "center",
                children: k(ir.Row, {
                    gap: 1,
                    className: "App-toolbar-container",
                    children: [k(zi, {
                        padding: 1,
                        className: "App-toolbar App-toolbar--mobile",
                        children: [y, p(ir.Row, {
                            gap: 1,
                            children: p(ZC, {
                                appState: e,
                                activeTool: e.activeTool,
                                app: f
                            })
                        })]
                    }), a && a(!0, e), k("div", {
                        className: "mobile-misc-tools-container",
                        children: [!e.viewModeEnabled && p(g.Out, {}), p(JC, {
                            checked: e.penMode,
                            onChange: s,
                            title: _("toolBar.penMode"),
                            isMobile: !0,
                            penDetected: e.penDetected
                        }), p(QC, {
                            checked: e.activeTool.locked,
                            onChange: i,
                            title: _("toolBar.lock"),
                            isMobile: !0
                        }), p(tk, {
                            checked: El(e),
                            onChange: ()=>o(),
                            title: _("toolBar.hand"),
                            isMobile: !0
                        })]
                    })]
                })
            })
        }), p(XC, {
            appState: e,
            isMobile: !0,
            device: u,
            app: f
        })]
    })
      , v = ()=>e.viewModeEnabled ? p("div", {
        className: "App-toolbar-content",
        children: p(m.Out, {})
    }) : k("div", {
        className: "App-toolbar-content",
        children: [p(m.Out, {}), n.renderAction("toggleEditMenu"), n.renderAction("undo"), n.renderAction("redo"), n.renderAction(e.multiElement ? "finalize" : "duplicateSelection"), n.renderAction("deleteSelectedElements")]
    });
    return k(re, {
        children: [c(), !e.viewModeEnabled && E(), !e.openMenu && e.showStats && p(ek, {
            appState: e,
            setAppState: r,
            elements: t,
            onClose: ()=>{
                n.executeAction(d1)
            }
            ,
            renderCustomStats: l
        }), p("div", {
            className: "App-bottom-bar",
            style: {
                marginBottom: Io + ei * 2,
                marginLeft: Io + ei * 2,
                marginRight: Io + ei * 2
            },
            children: k(zi, {
                padding: 0,
                children: [e.openMenu === "shape" && !e.viewModeEnabled && Wy(e, t) ? p(od, {
                    className: "App-mobile-menu",
                    heading: "selectedShapeActions",
                    children: p(YC, {
                        appState: e,
                        elements: t,
                        renderAction: n.renderAction
                    })
                }) : null, k("footer", {
                    className: "App-toolbar",
                    children: [v(), e.scrolledOutside && !e.openMenu && !e.openSidebar && p("button", {
                        className: "scroll-back-to-content",
                        onClick: ()=>{
                            r(y=>({
                                ...Yu(t, y)
                            }))
                        }
                        ,
                        children: _("buttons.scrollBackToContent")
                    })]
                })]
            })
        })]
    })
}
;
const E4 = e=>{
    const t = x.useRef(null)
      , [n,r] = x.useState(null);
    return x.useLayoutEffect(()=>{
        if (!e.spreadsheet)
            return;
        const i = ZB(e.chartType, e.spreadsheet, 0, 0);
        r(i);
        let o;
        const s = t.current;
        return (async()=>{
            var a;
            o = await Py(i, {
                exportBackground: !1,
                viewBackgroundColor: ot.white
            }, null),
            (a = o.querySelector(".style-fonts")) == null || a.remove(),
            s.replaceChildren(),
            s.appendChild(o),
            e.selected && s.parentNode.focus()
        }
        )(),
        ()=>{
            s.replaceChildren()
        }
    }
    , [e.spreadsheet, e.chartType, e.selected]),
    p("button", {
        className: "ChartPreview",
        onClick: ()=>{
            n && e.onClick(e.chartType, n)
        }
        ,
        children: p("div", {
            ref: t
        })
    })
}
  , fG = ({setAppState: e, appState: t, onClose: n})=>{
    const {onInsertElements: r} = T0()
      , i = ee.useCallback(()=>{
        n && n()
    }
    , [n])
      , o = (s,a)=>{
        r(a),
        nt("magic", "chart", s),
        e({
            currentChartType: s,
            pasteDialog: {
                shown: !1,
                data: null
            }
        })
    }
    ;
    return p(Ur, {
        size: "small",
        onCloseRequest: i,
        title: _("labels.pasteCharts"),
        className: "PasteChartDialog",
        autofocus: !1,
        children: k("div", {
            className: "container",
            children: [p(E4, {
                chartType: "bar",
                spreadsheet: t.pasteDialog.data,
                selected: t.currentChartType === "bar",
                onClick: o
            }), p(E4, {
                chartType: "line",
                spreadsheet: t.pasteDialog.data,
                selected: t.currentChartType === "line",
                onClick: o
            })]
        })
    })
}
;
const hG = ()=>k("div", {
    className: "HelpDialog__header",
    children: [k("a", {
        className: "HelpDialog__btn",
        href: "https://docs.excalidraw.com",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [_("helpDialog.documentation"), p("div", {
            className: "HelpDialog__link-icon",
            children: pp
        })]
    }), k("a", {
        className: "HelpDialog__btn",
        href: "https://blog.excalidraw.com",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [_("helpDialog.blog"), p("div", {
            className: "HelpDialog__link-icon",
            children: pp
        })]
    }), k("a", {
        className: "HelpDialog__btn",
        href: "https://github.com/excalidraw/excalidraw/issues",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [_("helpDialog.github"), p("div", {
            className: "HelpDialog__link-icon",
            children: pp
        })]
    })]
})
  , pG = e=>k(re, {
    children: [p("h3", {
        children: e.title
    }), p("div", {
        className: "HelpDialog__islands-container",
        children: e.children
    })]
})
  , Kp = e=>k("div", {
    className: `HelpDialog__island ${e.className}`,
    children: [p("h4", {
        className: "HelpDialog__island-title",
        children: e.caption
    }), p("div", {
        className: "HelpDialog__island-content",
        children: e.children
    })]
});
function *mG(e, t) {
    let n = !0;
    for (const r of e)
        n || (yield t),
        n = !1,
        yield r
}
const gG = e=>e.replace(/\b[a-z]\b/, t=>t.toUpperCase())
  , ie = ({label: e, shortcuts: t, isOr: n=!0})=>{
    const r = t.map(i=>(i.endsWith("++") ? [...i.slice(0, -2).split("+"), "+"] : i.split("+")).map(s=>p(vG, {
        children: gG(s)
    }, s)));
    return k("div", {
        className: "HelpDialog__shortcut",
        children: [p("div", {
            children: e
        }), p("div", {
            className: "HelpDialog__key-container",
            children: [...mG(r, n ? _("helpDialog.or") : null)]
        })]
    })
}
  , vG = e=>p("kbd", {
    className: "HelpDialog__key",
    ...e
})
  , yG = ({onClose: e})=>{
    const t = ee.useCallback(()=>{
        e && e()
    }
    , [e]);
    return p(re, {
        children: k(Ur, {
            onCloseRequest: t,
            title: _("helpDialog.title"),
            className: "HelpDialog",
            children: [p(hG, {}), k(pG, {
                title: _("helpDialog.shortcuts"),
                children: [k(Kp, {
                    className: "HelpDialog__island--tools",
                    caption: _("helpDialog.tools"),
                    children: [p(ie, {
                        label: _("toolBar.hand"),
                        shortcuts: [R.H]
                    }), p(ie, {
                        label: _("toolBar.selection"),
                        shortcuts: [R.V, R[1]]
                    }), p(ie, {
                        label: _("toolBar.rectangle"),
                        shortcuts: [R.R, R[2]]
                    }), p(ie, {
                        label: _("toolBar.diamond"),
                        shortcuts: [R.D, R[3]]
                    }), p(ie, {
                        label: _("toolBar.ellipse"),
                        shortcuts: [R.O, R[4]]
                    }), p(ie, {
                        label: _("toolBar.arrow"),
                        shortcuts: [R.A, R[5]]
                    }), p(ie, {
                        label: _("toolBar.line"),
                        shortcuts: [R.L, R[6]]
                    }), p(ie, {
                        label: _("toolBar.freedraw"),
                        shortcuts: [R.P, R[7]]
                    }), p(ie, {
                        label: _("toolBar.text"),
                        shortcuts: [R.T, R[8]]
                    }), p(ie, {
                        label: _("toolBar.image"),
                        shortcuts: [R[9]]
                    }), p(ie, {
                        label: _("toolBar.eraser"),
                        shortcuts: [R.E, R[0]]
                    }), p(ie, {
                        label: _("toolBar.frame"),
                        shortcuts: [R.F]
                    }), p(ie, {
                        label: _("toolBar.laser"),
                        shortcuts: [R.K]
                    }), p(ie, {
                        label: _("labels.eyeDropper"),
                        shortcuts: [R.I, "Shift+S", "Shift+G"]
                    }), p(ie, {
                        label: _("helpDialog.editLineArrowPoints"),
                        shortcuts: [j("CtrlOrCmd+Enter")]
                    }), p(ie, {
                        label: _("helpDialog.editText"),
                        shortcuts: [j("Enter")]
                    }), p(ie, {
                        label: _("helpDialog.textNewLine"),
                        shortcuts: [j("Enter"), j("Shift+Enter")]
                    }), p(ie, {
                        label: _("helpDialog.textFinish"),
                        shortcuts: [j("Esc"), j("CtrlOrCmd+Enter")]
                    }), p(ie, {
                        label: _("helpDialog.curvedArrow"),
                        shortcuts: ["A", _("helpDialog.click"), _("helpDialog.click"), _("helpDialog.click")],
                        isOr: !1
                    }), p(ie, {
                        label: _("helpDialog.curvedLine"),
                        shortcuts: ["L", _("helpDialog.click"), _("helpDialog.click"), _("helpDialog.click")],
                        isOr: !1
                    }), p(ie, {
                        label: _("toolBar.lock"),
                        shortcuts: [R.Q]
                    }), p(ie, {
                        label: _("helpDialog.preventBinding"),
                        shortcuts: [j("CtrlOrCmd")]
                    }), p(ie, {
                        label: _("toolBar.link"),
                        shortcuts: [j("CtrlOrCmd+K")]
                    })]
                }), k(Kp, {
                    className: "HelpDialog__island--view",
                    caption: _("helpDialog.view"),
                    children: [p(ie, {
                        label: _("buttons.zoomIn"),
                        shortcuts: [j("CtrlOrCmd++")]
                    }), p(ie, {
                        label: _("buttons.zoomOut"),
                        shortcuts: [j("CtrlOrCmd+-")]
                    }), p(ie, {
                        label: _("buttons.resetZoom"),
                        shortcuts: [j("CtrlOrCmd+0")]
                    }), p(ie, {
                        label: _("helpDialog.zoomToFit"),
                        shortcuts: ["Shift+1"]
                    }), p(ie, {
                        label: _("helpDialog.zoomToSelection"),
                        shortcuts: ["Shift+2"]
                    }), p(ie, {
                        label: _("helpDialog.movePageUpDown"),
                        shortcuts: ["PgUp/PgDn"]
                    }), p(ie, {
                        label: _("helpDialog.movePageLeftRight"),
                        shortcuts: ["Shift+PgUp/PgDn"]
                    }), p(ie, {
                        label: _("buttons.fullScreen"),
                        shortcuts: ["F"]
                    }), p(ie, {
                        label: _("buttons.zenMode"),
                        shortcuts: [j("Alt+Z")]
                    }), p(ie, {
                        label: _("buttons.objectsSnapMode"),
                        shortcuts: [j("Alt+S")]
                    }), p(ie, {
                        label: _("labels.showGrid"),
                        shortcuts: [j("CtrlOrCmd+'")]
                    }), p(ie, {
                        label: _("labels.viewMode"),
                        shortcuts: [j("Alt+R")]
                    }), p(ie, {
                        label: _("labels.toggleTheme"),
                        shortcuts: [j("Alt+Shift+D")]
                    }), p(ie, {
                        label: _("stats.title"),
                        shortcuts: [j("Alt+/")]
                    })]
                }), k(Kp, {
                    className: "HelpDialog__island--editor",
                    caption: _("helpDialog.editor"),
                    children: [p(ie, {
                        label: _("labels.moveCanvas"),
                        shortcuts: [j(`Space+${_("helpDialog.drag")}`), j(`Wheel+${_("helpDialog.drag")}`)],
                        isOr: !0
                    }), p(ie, {
                        label: _("buttons.clearReset"),
                        shortcuts: [j("CtrlOrCmd+Delete")]
                    }), p(ie, {
                        label: _("labels.delete"),
                        shortcuts: [j("Delete")]
                    }), p(ie, {
                        label: _("labels.cut"),
                        shortcuts: [j("CtrlOrCmd+X")]
                    }), p(ie, {
                        label: _("labels.copy"),
                        shortcuts: [j("CtrlOrCmd+C")]
                    }), p(ie, {
                        label: _("labels.paste"),
                        shortcuts: [j("CtrlOrCmd+V")]
                    }), p(ie, {
                        label: _("labels.pasteAsPlaintext"),
                        shortcuts: [j("CtrlOrCmd+Shift+V")]
                    }), p(ie, {
                        label: _("labels.selectAll"),
                        shortcuts: [j("CtrlOrCmd+A")]
                    }), p(ie, {
                        label: _("labels.multiSelect"),
                        shortcuts: [j(`Shift+${_("helpDialog.click")}`)]
                    }), p(ie, {
                        label: _("helpDialog.deepSelect"),
                        shortcuts: [j(`CtrlOrCmd+${_("helpDialog.click")}`)]
                    }), p(ie, {
                        label: _("helpDialog.deepBoxSelect"),
                        shortcuts: [j(`CtrlOrCmd+${_("helpDialog.drag")}`)]
                    }), (Dy || Mv) && p(ie, {
                        label: _("labels.copyAsPng"),
                        shortcuts: [j("Shift+Alt+C")]
                    }), p(ie, {
                        label: _("labels.copyStyles"),
                        shortcuts: [j("CtrlOrCmd+Alt+C")]
                    }), p(ie, {
                        label: _("labels.pasteStyles"),
                        shortcuts: [j("CtrlOrCmd+Alt+V")]
                    }), p(ie, {
                        label: _("labels.sendToBack"),
                        shortcuts: [j(ui ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")]
                    }), p(ie, {
                        label: _("labels.bringToFront"),
                        shortcuts: [j(ui ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")]
                    }), p(ie, {
                        label: _("labels.sendBackward"),
                        shortcuts: [j("CtrlOrCmd+[")]
                    }), p(ie, {
                        label: _("labels.bringForward"),
                        shortcuts: [j("CtrlOrCmd+]")]
                    }), p(ie, {
                        label: _("labels.alignTop"),
                        shortcuts: [j("CtrlOrCmd+Shift+Up")]
                    }), p(ie, {
                        label: _("labels.alignBottom"),
                        shortcuts: [j("CtrlOrCmd+Shift+Down")]
                    }), p(ie, {
                        label: _("labels.alignLeft"),
                        shortcuts: [j("CtrlOrCmd+Shift+Left")]
                    }), p(ie, {
                        label: _("labels.alignRight"),
                        shortcuts: [j("CtrlOrCmd+Shift+Right")]
                    }), p(ie, {
                        label: _("labels.duplicateSelection"),
                        shortcuts: [j("CtrlOrCmd+D"), j(`Alt+${_("helpDialog.drag")}`)]
                    }), p(ie, {
                        label: _("helpDialog.toggleElementLock"),
                        shortcuts: [j("CtrlOrCmd+Shift+L")]
                    }), p(ie, {
                        label: _("buttons.undo"),
                        shortcuts: [j("CtrlOrCmd+Z")]
                    }), p(ie, {
                        label: _("buttons.redo"),
                        shortcuts: D8 ? [j("CtrlOrCmd+Y"), j("CtrlOrCmd+Shift+Z")] : [j("CtrlOrCmd+Shift+Z")]
                    }), p(ie, {
                        label: _("labels.group"),
                        shortcuts: [j("CtrlOrCmd+G")]
                    }), p(ie, {
                        label: _("labels.ungroup"),
                        shortcuts: [j("CtrlOrCmd+Shift+G")]
                    }), p(ie, {
                        label: _("labels.flipHorizontal"),
                        shortcuts: [j("Shift+H")]
                    }), p(ie, {
                        label: _("labels.flipVertical"),
                        shortcuts: [j("Shift+V")]
                    }), p(ie, {
                        label: _("labels.showStroke"),
                        shortcuts: [j("S")]
                    }), p(ie, {
                        label: _("labels.showBackground"),
                        shortcuts: [j("G")]
                    }), p(ie, {
                        label: _("labels.decreaseFontSize"),
                        shortcuts: [j("CtrlOrCmd+Shift+<")]
                    }), p(ie, {
                        label: _("labels.increaseFontSize"),
                        shortcuts: [j("CtrlOrCmd+Shift+>")]
                    })]
                })]
            })]
        })
    })
}
;
const ak = ({className: e, mobile: t, collaborators: n})=>{
    const r = pr()
      , i = new Map;
    n.forEach((s,a)=>{
        i.set(s.id || a, s)
    }
    );
    const o = i.size > 0 && Array.from(i).filter(([s,a])=>Object.keys(a).length !== 0).map(([s,a])=>{
        const l = r.renderAction("goToCollaborator", [s, a]);
        return t ? p(Zo, {
            label: a.username || "Unknown user",
            children: l
        }, s) : p(ee.Fragment, {
            children: l
        }, s)
    }
    );
    return p("div", {
        className: le("UserList", e, {
            UserList_mobile: t
        }),
        children: o
    })
}
;
const h2 = ({children: e, color: t})=>p("div", {
    className: "Card",
    style: {
        "--card-color": t === "primary" ? "var(--color-primary)" : ot[t][7],
        "--card-color-darker": t === "primary" ? "var(--color-primary-darker)" : ot[t][8],
        "--card-color-darkest": t === "primary" ? "var(--color-primary-darkest)" : ot[t][9]
    },
    children: e
});
const EG = ({elements: e, appState: t, files: n, actionManager: r, exportOpts: i, canvas: o})=>{
    const {onExportToBackend: s} = i;
    return p("div", {
        className: "ExportDialog ExportDialog--json",
        children: k("div", {
            className: "ExportDialog-cards",
            children: [i.saveFileToDisk && k(h2, {
                color: "lime",
                children: [p("div", {
                    className: "Card-icon",
                    children: hO
                }), p("h2", {
                    children: _("exportDialog.disk_title")
                }), k("div", {
                    className: "Card-details",
                    children: [_("exportDialog.disk_details"), !ha && r.renderAction("changeProjectName")]
                }), p(Ee, {
                    className: "Card-button",
                    type: "button",
                    title: _("exportDialog.disk_button"),
                    "aria-label": _("exportDialog.disk_button"),
                    showAriaLabel: !0,
                    onClick: ()=>{
                        r.executeAction(PS, "ui")
                    }
                })]
            }), s && k(h2, {
                color: "pink",
                children: [p("div", {
                    className: "Card-icon",
                    children: d7
                }), p("h2", {
                    children: _("exportDialog.link_title")
                }), p("div", {
                    className: "Card-details",
                    children: _("exportDialog.link_details")
                }), p(Ee, {
                    className: "Card-button",
                    type: "button",
                    title: _("exportDialog.link_button"),
                    "aria-label": _("exportDialog.link_button"),
                    showAriaLabel: !0,
                    onClick: ()=>{
                        s(e, t, n, o),
                        nt("export", "link", `ui (${yd()})`)
                    }
                })]
            }), i.renderCustomUI && i.renderCustomUI(e, t, n, o)]
        })
    })
}
  , wG = ({elements: e, appState: t, files: n, actionManager: r, exportOpts: i, canvas: o, setAppState: s})=>{
    const a = ee.useCallback(()=>{
        s({
            openDialog: null
        })
    }
    , [s]);
    return p(re, {
        children: t.openDialog === "jsonExport" && p(Ur, {
            onCloseRequest: a,
            title: _("buttons.export"),
            children: p(EG, {
                elements: e,
                appState: t,
                files: n,
                actionManager: r,
                onCloseRequest: a,
                exportOpts: i,
                canvas: o
            })
        })
    })
}
  , bG = e=>p("button", {
    className: "help-icon",
    onClick: e.onClick,
    type: "button",
    title: `${_("helpDialog.title")}  ?`,
    "aria-label": _("helpDialog.title"),
    children: ny
})
  , lk = ({appState: e, actionManager: t, showExitZenModeBtn: n, renderWelcomeScreen: r})=>{
    const {FooterCenterTunnel: i, WelcomeScreenHelpHintTunnel: o} = Kn()
      , s = Xt()
      , a = !e.viewModeEnabled && e.multiElement && s.isTouchScreen;
    return k("footer", {
        role: "contentinfo",
        className: "layer-ui__wrapper__footer App-menu App-menu_bottom",
        children: [p("div", {
            className: le("layer-ui__wrapper__footer-left zen-mode-transition", {
                "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled
            }),
            children: p(ir.Col, {
                gap: 2,
                children: k(od, {
                    heading: "canvasActions",
                    children: [p(TW, {
                        renderAction: t.renderAction,
                        zoom: e.zoom
                    }), !e.viewModeEnabled && p(MW, {
                        renderAction: t.renderAction,
                        className: le("zen-mode-transition", {
                            "layer-ui__wrapper__footer-left--transition-bottom": e.zenModeEnabled
                        })
                    }), a && p(LW, {
                        renderAction: t.renderAction,
                        className: le("zen-mode-transition", {
                            "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled
                        })
                    })]
                })
            })
        }), p(i.Out, {}), p("div", {
            className: le("layer-ui__wrapper__footer-right zen-mode-transition", {
                "transition-right": e.zenModeEnabled
            }),
            children: k("div", {
                style: {
                    position: "relative"
                },
                children: [r && p(o.Out, {}), p(bG, {
                    onClick: ()=>t.executeAction(Yy)
                })]
            })
        }), p(AW, {
            actionManager: t,
            showExitZenModeBtn: n
        })]
    })
}
;
lk.displayName = "Footer";
const ck = ee.createContext({});
const p2 = ({type: e="button", onSelect: t, selected: n, children: r, className: i="", ...o})=>p("button", {
    onClick: j1(o.onClick, s=>{
        t()
    }
    ),
    type: e,
    className: le("excalidraw-button", i, {
        selected: n
    }),
    ...o,
    children: r
})
  , uk = ({children: e, className: t})=>{
    const n = Xt()
      , r = x.useContext(ck)
      , i = !!(n.canDeviceFitSidebar && r.shouldRenderDockButton);
    return k("div", {
        className: le("sidebar__header", t),
        "data-testid": "sidebar-header",
        children: [e, k("div", {
            className: "sidebar__header__buttons",
            children: [i && p(Zo, {
                label: _("labels.sidebarLock"),
                children: p(p2, {
                    onSelect: ()=>{
                        var o;
                        return (o = r.onDock) == null ? void 0 : o.call(r, !r.docked)
                    }
                    ,
                    selected: !!r.docked,
                    className: "sidebar__dock",
                    "data-testid": "sidebar-dock",
                    "aria-label": _("labels.sidebarLock"),
                    children: $R
                })
            }), p(p2, {
                "data-testid": "sidebar-close",
                className: "sidebar__close",
                onSelect: r.onCloseRequest,
                "aria-label": _("buttons.close"),
                children: _d
            })]
        })]
    })
}
;
uk.displayName = "SidebarHeader";
const dk = ({name: e, tab: t, icon: n, title: r, children: i, onToggle: o, className: s, style: a})=>{
    var u;
    const l = Xn()
      , c = On();
    return k("label", {
        title: r,
        children: [p("input", {
            className: "ToolIcon_type_checkbox",
            type: "checkbox",
            onChange: d=>{
                var h;
                (h = document.querySelector(".layer-ui__wrapper")) == null || h.classList.remove("animate");
                const f = d.target.checked;
                l({
                    openSidebar: f ? {
                        name: e,
                        tab: t
                    } : null
                }),
                o == null || o(f)
            }
            ,
            checked: ((u = c.openSidebar) == null ? void 0 : u.name) === e,
            "aria-label": r,
            "aria-keyshortcuts": "0"
        }), k("div", {
            className: le("sidebar-trigger", s),
            style: a,
            children: [n && p("div", {
                children: n
            }), i && p("div", {
                className: "sidebar-trigger__label",
                children: i
            })]
        })]
    })
}
;
dk.displayName = "SidebarTrigger";
function _G(e) {
    const t = e + "CollectionProvider"
      , [n,r] = Id(t)
      , [i,o] = n(t, {
        collectionRef: {
            current: null
        },
        itemMap: new Map
    })
      , s = h=>{
        const {scope: m, children: g} = h
          , E = ee.useRef(null)
          , v = ee.useRef(new Map).current;
        return ee.createElement(i, {
            scope: m,
            itemMap: v,
            collectionRef: E
        }, g)
    }
      , a = e + "CollectionSlot"
      , l = ee.forwardRef((h,m)=>{
        const {scope: g, children: E} = h
          , v = o(a, g)
          , y = fi(m, v.collectionRef);
        return ee.createElement(Wu, {
            ref: y
        }, E)
    }
    )
      , c = e + "CollectionItemSlot"
      , u = "data-radix-collection-item"
      , d = ee.forwardRef((h,m)=>{
        const {scope: g, children: E, ...v} = h
          , y = ee.useRef(null)
          , w = fi(m, y)
          , b = o(c, g);
        return ee.useEffect(()=>(b.itemMap.set(y, {
            ref: y,
            ...v
        }),
        ()=>void b.itemMap.delete(y))),
        ee.createElement(Wu, {
            [u]: "",
            ref: w
        }, E)
    }
    );
    function f(h) {
        const m = o(e + "CollectionConsumer", h);
        return ee.useCallback(()=>{
            const E = m.collectionRef.current;
            if (!E)
                return [];
            const v = Array.from(E.querySelectorAll(`[${u}]`));
            return Array.from(m.itemMap.values()).sort((b,I)=>v.indexOf(b.ref.current) - v.indexOf(I.ref.current))
        }
        , [m.collectionRef, m.itemMap])
    }
    return [{
        Provider: s,
        Slot: l,
        ItemSlot: d
    }, f, r]
}
const xG = x.createContext(void 0);
function fk(e) {
    const t = x.useContext(xG);
    return e || t || "ltr"
}
const Xp = "rovingFocusGroup.onEntryFocus"
  , IG = {
    bubbles: !1,
    cancelable: !0
}
  , r3 = "RovingFocusGroup"
  , [m2,hk,SG] = _G(r3)
  , [CG,pk] = Id(r3, [SG])
  , [kG,TG] = CG(r3)
  , MG = x.forwardRef((e,t)=>x.createElement(m2.Provider, {
    scope: e.__scopeRovingFocusGroup
}, x.createElement(m2.Slot, {
    scope: e.__scopeRovingFocusGroup
}, x.createElement(AG, Ge({}, e, {
    ref: t
})))))
  , AG = x.forwardRef((e,t)=>{
    const {__scopeRovingFocusGroup: n, orientation: r, loop: i=!1, dir: o, currentTabStopId: s, defaultCurrentTabStopId: a, onCurrentTabStopIdChange: l, onEntryFocus: c, ...u} = e
      , d = x.useRef(null)
      , f = fi(t, d)
      , h = fk(o)
      , [m=null,g] = wy({
        prop: s,
        defaultProp: a,
        onChange: l
    })
      , [E,v] = x.useState(!1)
      , y = ji(c)
      , w = hk(n)
      , b = x.useRef(!1)
      , [I,S] = x.useState(0);
    return x.useEffect(()=>{
        const C = d.current;
        if (C)
            return C.addEventListener(Xp, y),
            ()=>C.removeEventListener(Xp, y)
    }
    , [y]),
    x.createElement(kG, {
        scope: n,
        orientation: r,
        dir: h,
        loop: i,
        currentTabStopId: m,
        onItemFocus: x.useCallback(C=>g(C), [g]),
        onItemShiftTab: x.useCallback(()=>v(!0), []),
        onFocusableItemAdd: x.useCallback(()=>S(C=>C + 1), []),
        onFocusableItemRemove: x.useCallback(()=>S(C=>C - 1), [])
    }, x.createElement(Pn.div, Ge({
        tabIndex: E || I === 0 ? -1 : 0,
        "data-orientation": r
    }, u, {
        ref: f,
        style: {
            outline: "none",
            ...e.style
        },
        onMouseDown: an(e.onMouseDown, ()=>{
            b.current = !0
        }
        ),
        onFocus: an(e.onFocus, C=>{
            const T = !b.current;
            if (C.target === C.currentTarget && T && !E) {
                const L = new CustomEvent(Xp,IG);
                if (C.currentTarget.dispatchEvent(L),
                !L.defaultPrevented) {
                    const A = w().filter(V=>V.focusable)
                      , P = A.find(V=>V.active)
                      , O = A.find(V=>V.id === m)
                      , $ = [P, O, ...A].filter(Boolean).map(V=>V.ref.current);
                    mk($)
                }
            }
            b.current = !1
        }
        ),
        onBlur: an(e.onBlur, ()=>v(!1))
    })))
}
)
  , LG = "RovingFocusGroupItem"
  , PG = x.forwardRef((e,t)=>{
    const {__scopeRovingFocusGroup: n, focusable: r=!0, active: i=!1, tabStopId: o, ...s} = e
      , a = gy()
      , l = o || a
      , c = TG(LG, n)
      , u = c.currentTabStopId === l
      , d = hk(n)
      , {onFocusableItemAdd: f, onFocusableItemRemove: h} = c;
    return x.useEffect(()=>{
        if (r)
            return f(),
            ()=>h()
    }
    , [r, f, h]),
    x.createElement(m2.ItemSlot, {
        scope: n,
        id: l,
        focusable: r,
        active: i
    }, x.createElement(Pn.span, Ge({
        tabIndex: u ? 0 : -1,
        "data-orientation": c.orientation
    }, s, {
        ref: t,
        onMouseDown: an(e.onMouseDown, m=>{
            r ? c.onItemFocus(l) : m.preventDefault()
        }
        ),
        onFocus: an(e.onFocus, ()=>c.onItemFocus(l)),
        onKeyDown: an(e.onKeyDown, m=>{
            if (m.key === "Tab" && m.shiftKey) {
                c.onItemShiftTab();
                return
            }
            if (m.target !== m.currentTarget)
                return;
            const g = DG(m, c.orientation, c.dir);
            if (g !== void 0) {
                m.preventDefault();
                let v = d().filter(y=>y.focusable).map(y=>y.ref.current);
                if (g === "last")
                    v.reverse();
                else if (g === "prev" || g === "next") {
                    g === "prev" && v.reverse();
                    const y = v.indexOf(m.currentTarget);
                    v = c.loop ? NG(v, y + 1) : v.slice(y + 1)
                }
                setTimeout(()=>mk(v))
            }
        }
        )
    })))
}
)
  , RG = {
    ArrowLeft: "prev",
    ArrowUp: "prev",
    ArrowRight: "next",
    ArrowDown: "next",
    PageUp: "first",
    Home: "first",
    PageDown: "last",
    End: "last"
};
function OG(e, t) {
    return t !== "rtl" ? e : e === "ArrowLeft" ? "ArrowRight" : e === "ArrowRight" ? "ArrowLeft" : e
}
function DG(e, t, n) {
    const r = OG(e.key, n);
    if (!(t === "vertical" && ["ArrowLeft", "ArrowRight"].includes(r)) && !(t === "horizontal" && ["ArrowUp", "ArrowDown"].includes(r)))
        return RG[r]
}
function mk(e) {
    const t = document.activeElement;
    for (const n of e)
        if (n === t || (n.focus(),
        document.activeElement !== t))
            return
}
function NG(e, t) {
    return e.map((n,r)=>e[(t + r) % e.length])
}
const FG = MG
  , $G = PG
  , gk = "Tabs"
  , [BG,ZX] = Id(gk, [pk])
  , vk = pk()
  , [zG,i3] = BG(gk)
  , HG = x.forwardRef((e,t)=>{
    const {__scopeTabs: n, value: r, onValueChange: i, defaultValue: o, orientation: s="horizontal", dir: a, activationMode: l="automatic", ...c} = e
      , u = fk(a)
      , [d,f] = wy({
        prop: r,
        onChange: i,
        defaultProp: o
    });
    return x.createElement(zG, {
        scope: n,
        baseId: gy(),
        value: d,
        onValueChange: f,
        orientation: s,
        dir: u,
        activationMode: l
    }, x.createElement(Pn.div, Ge({
        dir: u,
        "data-orientation": s
    }, c, {
        ref: t
    })))
}
)
  , UG = "TabsList"
  , VG = x.forwardRef((e,t)=>{
    const {__scopeTabs: n, loop: r=!0, ...i} = e
      , o = i3(UG, n)
      , s = vk(n);
    return x.createElement(FG, Ge({
        asChild: !0
    }, s, {
        orientation: o.orientation,
        dir: o.dir,
        loop: r
    }), x.createElement(Pn.div, Ge({
        role: "tablist",
        "aria-orientation": o.orientation
    }, i, {
        ref: t
    })))
}
)
  , WG = "TabsTrigger"
  , GG = x.forwardRef((e,t)=>{
    const {__scopeTabs: n, value: r, disabled: i=!1, ...o} = e
      , s = i3(WG, n)
      , a = vk(n)
      , l = yk(s.baseId, r)
      , c = Ek(s.baseId, r)
      , u = r === s.value;
    return x.createElement($G, Ge({
        asChild: !0
    }, a, {
        focusable: !i,
        active: u
    }), x.createElement(Pn.button, Ge({
        type: "button",
        role: "tab",
        "aria-selected": u,
        "aria-controls": c,
        "data-state": u ? "active" : "inactive",
        "data-disabled": i ? "" : void 0,
        disabled: i,
        id: l
    }, o, {
        ref: t,
        onMouseDown: an(e.onMouseDown, d=>{
            !i && d.button === 0 && d.ctrlKey === !1 ? s.onValueChange(r) : d.preventDefault()
        }
        ),
        onKeyDown: an(e.onKeyDown, d=>{
            [" ", "Enter"].includes(d.key) && s.onValueChange(r)
        }
        ),
        onFocus: an(e.onFocus, ()=>{
            const d = s.activationMode !== "manual";
            !u && !i && d && s.onValueChange(r)
        }
        )
    })))
}
)
  , jG = "TabsContent"
  , YG = x.forwardRef((e,t)=>{
    const {__scopeTabs: n, value: r, forceMount: i, children: o, ...s} = e
      , a = i3(jG, n)
      , l = yk(a.baseId, r)
      , c = Ek(a.baseId, r)
      , u = r === a.value
      , d = x.useRef(u);
    return x.useEffect(()=>{
        const f = requestAnimationFrame(()=>d.current = !1);
        return ()=>cancelAnimationFrame(f)
    }
    , []),
    x.createElement(a0, {
        present: i || u
    }, ({present: f})=>x.createElement(Pn.div, Ge({
        "data-state": u ? "active" : "inactive",
        "data-orientation": a.orientation,
        role: "tabpanel",
        "aria-labelledby": l,
        hidden: !f,
        id: c,
        tabIndex: 0
    }, s, {
        ref: t,
        style: {
            ...e.style,
            animationDuration: d.current ? "0s" : void 0
        }
    }), f && o))
}
);
function yk(e, t) {
    return `${e}-trigger-${t}`
}
function Ek(e, t) {
    return `${e}-content-${t}`
}
const ZG = HG
  , KG = VG
  , XG = GG
  , qG = YG
  , wk = ({children: e, ...t})=>p(KG, {
    className: "sidebar-triggers",
    ...t,
    children: e
});
wk.displayName = "SidebarTabTriggers";
const bk = ({children: e, tab: t, onSelect: n, ...r})=>p(XG, {
    value: t,
    asChild: !0,
    onSelect: n,
    children: p("button", {
        type: "button",
        className: "excalidraw-button sidebar-tab-trigger",
        ...r,
        children: e
    })
});
bk.displayName = "SidebarTabTrigger";
const _k = ({children: e, ...t})=>{
    const n = On()
      , r = Xn();
    if (!n.openSidebar)
        return null;
    const {name: i} = n.openSidebar;
    return p(ZG, {
        className: "sidebar-tabs-root",
        value: n.openSidebar.tab,
        onValueChange: o=>r(s=>({
            ...s,
            openSidebar: {
                ...s.openSidebar,
                name: i,
                tab: o
            }
        })),
        ...t,
        children: e
    })
}
;
_k.displayName = "SidebarTabs";
const xk = ({tab: e, children: t, ...n})=>p(qG, {
    ...n,
    value: e,
    children: t
});
xk.displayName = "SidebarTab";
const o3 = un(!1)
  , Ik = x.forwardRef(({name: e, children: t, onDock: n, docked: r, className: i, ...o},s)=>{
    const a = Xn()
      , l = Ol(o3, Kt);
    x.useLayoutEffect(()=>(l(!!r),
    ()=>{
        l(!1)
    }
    ), [l, r]);
    const c = x.useRef({});
    c.current.onCloseRequest = ()=>{
        a({
            openSidebar: null
        })
    }
    ,
    c.current.onDock = h=>n == null ? void 0 : n(h),
    c.current = Zf(c.current, {
        docked: r,
        shouldRenderDockButton: !!n && r != null
    });
    const u = x.useRef(null);
    x.useImperativeHandle(s, ()=>u.current);
    const d = Xt()
      , f = x.useCallback(()=>{
        document.querySelector(".Dialog") || a({
            openSidebar: null
        })
    }
    , [a]);
    return Iy(u, x.useCallback(h=>{
        h.target.closest(".sidebar-trigger") || (!r || !d.canDeviceFitSidebar) && f()
    }
    , [f, r, d.canDeviceFitSidebar])),
    x.useEffect(()=>{
        const h = m=>{
            m.key === R.ESCAPE && (!r || !d.canDeviceFitSidebar) && f()
        }
        ;
        return document.addEventListener(U.KEYDOWN, h),
        ()=>{
            document.removeEventListener(U.KEYDOWN, h)
        }
    }
    , [f, r, d.canDeviceFitSidebar]),
    p(zi, {
        ...o,
        className: le("sidebar", {
            "sidebar--docked": r
        }, i),
        ref: u,
        children: p(ck.Provider, {
            value: c.current,
            children: t
        })
    })
}
);
Ik.displayName = "SidebarInner";
const Rs = Object.assign(x.forwardRef((e,t)=>{
    var l;
    const n = On()
      , {onStateChange: r} = e
      , i = x.useRef(n.openSidebar);
    x.useEffect(()=>{
        var c, u, d, f, h;
        (!n.openSidebar && ((c = i == null ? void 0 : i.current) == null ? void 0 : c.name) === e.name || ((u = n.openSidebar) == null ? void 0 : u.name) === e.name && ((d = i == null ? void 0 : i.current) == null ? void 0 : d.name) !== e.name || ((f = i.current) == null ? void 0 : f.name) === e.name) && n.openSidebar !== i.current && (r == null || r(((h = n.openSidebar) == null ? void 0 : h.name) !== e.name ? null : n.openSidebar)),
        i.current = n.openSidebar
    }
    , [n.openSidebar, r, e.name]);
    const [o,s] = x.useState(!1);
    return x.useLayoutEffect(()=>(s(!0),
    ()=>s(!1)), []),
    o && ((l = n.openSidebar) == null ? void 0 : l.name) === e.name ? x.createElement(Ik, {
        ...e,
        ref: t,
        key: e.name
    }) : null
}
), {
    Header: uk,
    TabTriggers: wk,
    TabTrigger: bk,
    Tabs: _k,
    Tab: xk,
    Trigger: dk
});
Rs.displayName = "Sidebar";
const m1 = ({label: e, onClick: t, className: n, children: r, actionType: i, type: o="button", isLoading: s, ...a})=>{
    const l = i ? `Dialog__action-button--${i}` : "";
    return k("button", {
        className: le("Dialog__action-button", l, n),
        type: o,
        "aria-label": e,
        onClick: t,
        ...a,
        children: [r && p("div", {
            style: s ? {
                visibility: "hidden"
            } : {},
            children: r
        }), p("div", {
            style: s ? {
                visibility: "hidden"
            } : {},
            children: e
        }), s && p("div", {
            style: {
                position: "absolute",
                inset: 0
            },
            children: p(bl, {})
        })]
    })
}
  , QG = ({theme: e, id: t, libraryReturnUrl: n})=>{
    const r = n || window.location.origin + window.location.pathname;
    return p("a", {
        className: "library-menu-browse-button",
        href: `https://libraries.excalidraw.com?target=${window.name || "_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${W1.excalidrawLibrary}`,
        target: "_excalidraw_libraries",
        children: _("labels.libraries")
    })
}
  , Sk = ({libraryReturnUrl: e, theme: t, id: n, style: r, children: i, className: o})=>k("div", {
    className: le("library-menu-control-buttons", o),
    style: r,
    children: [p(QG, {
        id: n,
        libraryReturnUrl: e,
        theme: t
    }), i]
})
  , JG = /({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g
  , ej = /{{([\w-]+)}}/
  , tj = /<([\w-]+)>/
  , nj = /<\/([\w-]+)>/
  , rj = (e,t)=>{
    const n = [{
        name: "",
        children: []
    }];
    return e.split(JG).filter(Boolean).forEach(r=>{
        const i = r.match(tj)
          , o = r.match(nj)
          , s = r.match(ej);
        if (i !== null) {
            const a = i[1];
            t.hasOwnProperty(a) ? n.push({
                name: a,
                children: []
            }) : console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)
        } else if (o !== null)
            if (o[1] === n[n.length - 1].name) {
                const l = n.pop()
                  , c = ee.createElement(ee.Fragment, {}, ...l.children)
                  , u = t[l.name];
                typeof u == "function" && n[n.length - 1].children.push(u(c))
            } else
                console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);
        else if (s !== null) {
            const a = s[1];
            t.hasOwnProperty(a) ? n[n.length - 1].children.push(t[a]) : console.warn(`Trans: key ${a} not in props for interpolating ${e}`)
        } else
            n[n.length - 1].children.push(r)
    }
    ),
    n.length !== 1 && console.warn(`Trans: stack not empty for interpolating ${e}`),
    n[0].children
}
  , Hn = ({i18nKey: e, children: t, ...n})=>{
    const {t: r} = Ot();
    return ee.createElement(ee.Fragment, {}, ...rj(r(e), n))
}
;
const s3 = "publish-library-data"
  , ij = e=>{
    try {
        localStorage.setItem(s3, JSON.stringify(e))
    } catch (t) {
        console.error(t)
    }
}
  , oj = ()=>{
    try {
        const e = localStorage.getItem(s3);
        if (e)
            return JSON.parse(e)
    } catch (e) {
        console.error(e)
    }
    return null
}
  , sj = async e=>{
    const r = Math.round(8)
      , i = Math.max(Math.round(128 / 64), 2)
      , o = zL(e, 6)
      , s = document.createElement("canvas");
    s.width = o[0].length * 128 + (o[0].length + 1) * (r * 2) - r * 2,
    s.height = o.length * 128 + (o.length + 1) * (r * 2) - r * 2;
    const a = s.getContext("2d");
    a.fillStyle = ot.white,
    a.fillRect(0, 0, s.width, s.height);
    for (const [l,c] of e.entries()) {
        const u = await RC({
            elements: c.elements,
            files: null,
            maxWidthOrHeight: 128
        })
          , {width: d, height: f} = u
          , h = Math.floor(l / 6) * (128 + r * 2)
          , m = l % 6 * (128 + r * 2);
        a.drawImage(u, m + (128 - d) / 2 + r, h + (128 - f) / 2 + r),
        a.lineWidth = i,
        a.strokeStyle = ot.gray[4],
        a.strokeRect(m + r / 2, h + r / 2, 128 + r, 128 + r)
    }
    return await Hg(new File([await r1(s)],"preview",{
        type: ve.png
    }), {
        outputType: ve.jpg,
        maxWidthOrHeight: 5e3
    })
}
  , aj = ({libItem: e, appState: t, index: n, onChange: r, onRemove: i})=>{
    const o = x.useRef(null)
      , s = x.useRef(null);
    return x.useEffect(()=>{
        const a = o.current;
        a && (async()=>{
            const l = await OC({
                elements: e.elements,
                appState: {
                    ...t,
                    viewBackgroundColor: ot.white,
                    exportBackground: !0
                },
                files: null
            });
            a.innerHTML = l.outerHTML
        }
        )()
    }
    , [e.elements, t]),
    k("div", {
        className: "single-library-item",
        children: [e.status === "published" && p("span", {
            className: "single-library-item-status",
            children: _("labels.statusPublished")
        }), p("div", {
            ref: o,
            className: "single-library-item__svg"
        }), p(Ee, {
            "aria-label": _("buttons.remove"),
            type: "button",
            icon: _d,
            className: "single-library-item--remove",
            onClick: i.bind(null, e.id),
            title: _("buttons.remove")
        }), k("div", {
            style: {
                display: "flex",
                margin: "0.8rem 0",
                width: "100%",
                fontSize: "14px",
                fontWeight: 500,
                flexDirection: "column"
            },
            children: [k("label", {
                style: {
                    display: "flex",
                    justifyContent: "space-between",
                    flexDirection: "column"
                },
                children: [k("div", {
                    style: {
                        padding: "0.5em 0"
                    },
                    children: [p("span", {
                        style: {
                            fontWeight: 500,
                            color: ot.gray[6]
                        },
                        children: _("publishDialog.itemName")
                    }), p("span", {
                        "aria-hidden": "true",
                        className: "required",
                        children: "*"
                    })]
                }), p("input", {
                    type: "text",
                    ref: s,
                    style: {
                        width: "80%",
                        padding: "0.2rem"
                    },
                    defaultValue: e.name,
                    placeholder: "Item name",
                    onChange: a=>{
                        r(a.target.value, n)
                    }
                })]
            }), p("span", {
                className: "error",
                children: e.error
            })]
        })]
    })
}
  , lj = ({onClose: e, libraryItems: t, appState: n, onSuccess: r, onError: i, updateItemsInStorage: o, onRemove: s})=>{
    const [a,l] = x.useState({
        authorName: "",
        githubHandle: "",
        name: "",
        description: "",
        twitterHandle: "",
        website: ""
    })
      , [c,u] = x.useState(!1);
    x.useEffect(()=>{
        const w = oj();
        w && l(w)
    }
    , []);
    const [d,f] = x.useState(t.slice());
    x.useEffect(()=>{
        f(t.slice())
    }
    , [t]);
    const h = w=>{
        l({
            ...a,
            [w.target.name]: w.target.value
        })
    }
      , m = async w=>{
        w.preventDefault(),
        u(!0);
        const b = [];
        let I = !1;
        if (d.forEach(P=>{
            let O = "";
            P.name || (O = _("publishDialog.errors.required"),
            I = !0),
            b.push({
                ...P,
                error: O
            })
        }
        ),
        I) {
            f(b),
            u(!1);
            return
        }
        const S = await sj(d)
          , C = {
            type: li.excalidrawLibrary,
            version: W1.excalidrawLibrary,
            source: Pv,
            libraryItems: d
        }
          , T = JSON.stringify(C, null, 2)
          , L = new Blob([T],{
            type: "application/json"
        })
          , A = new FormData;
        A.append("excalidrawLib", L),
        A.append("previewImage", S),
        A.append("previewImageType", S.type),
        A.append("title", a.name),
        A.append("authorName", a.authorName),
        A.append("githubHandle", a.githubHandle),
        A.append("name", a.name),
        A.append("description", a.description),
        A.append("twitterHandle", a.twitterHandle),
        A.append("website", a.website),
        fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit", {
            method: "post",
            body: A
        }).then(P=>P.ok ? P.json().then(({url: O})=>{
            localStorage.removeItem(s3),
            r({
                url: O,
                authorName: a.authorName,
                items: d
            })
        }
        ) : P.json().catch(()=>{
            throw new Error(P.statusText || "something went wrong")
        }
        ).then(O=>{
            throw new Error(O.message || P.statusText || "something went wrong")
        }
        ), P=>{
            console.error(P),
            i(P),
            u(!1)
        }
        ).catch(P=>{
            console.error(P),
            i(P),
            u(!1)
        }
        )
    }
      , g = ()=>{
        const w = [];
        return d.forEach((b,I)=>{
            w.push(p("div", {
                className: "single-library-item-wrapper",
                children: p(aj, {
                    libItem: b,
                    appState: n,
                    index: I,
                    onChange: (S,C)=>{
                        const T = d.slice();
                        T[C].name = S,
                        f(T)
                    }
                    ,
                    onRemove: s
                })
            }, I))
        }
        ),
        p("div", {
            className: "selected-library-items",
            children: w
        })
    }
      , E = x.useCallback(()=>{
        o(d),
        ij(a),
        e()
    }
    , [d, e, o, a])
      , v = !!t.length
      , y = t.some(w=>w.status === "published");
    return p(Ur, {
        onCloseRequest: E,
        title: _("publishDialog.title"),
        className: "publish-library",
        children: v ? k("form", {
            onSubmit: m,
            children: [p("div", {
                className: "publish-library-note",
                children: p(Hn, {
                    i18nKey: "publishDialog.noteDescription",
                    link: w=>p("a", {
                        href: "https://libraries.excalidraw.com",
                        target: "_blank",
                        rel: "noopener noreferrer",
                        children: w
                    })
                })
            }), p("span", {
                className: "publish-library-note",
                children: p(Hn, {
                    i18nKey: "publishDialog.noteGuidelines",
                    link: w=>p("a", {
                        href: "https://github.com/excalidraw/excalidraw-libraries#guidelines",
                        target: "_blank",
                        rel: "noopener noreferrer",
                        children: w
                    })
                })
            }), p("div", {
                className: "publish-library-note",
                children: _("publishDialog.noteItems")
            }), y && p("span", {
                className: "publish-library-note publish-library-warning",
                children: _("publishDialog.republishWarning")
            }), g(), k("div", {
                className: "publish-library__fields",
                children: [k("label", {
                    children: [k("div", {
                        children: [p("span", {
                            children: _("publishDialog.libraryName")
                        }), p("span", {
                            "aria-hidden": "true",
                            className: "required",
                            children: "*"
                        })]
                    }), p("input", {
                        type: "text",
                        name: "name",
                        required: !0,
                        value: a.name,
                        onChange: h,
                        placeholder: _("publishDialog.placeholder.libraryName")
                    })]
                }), k("label", {
                    style: {
                        alignItems: "flex-start"
                    },
                    children: [k("div", {
                        children: [p("span", {
                            children: _("publishDialog.libraryDesc")
                        }), p("span", {
                            "aria-hidden": "true",
                            className: "required",
                            children: "*"
                        })]
                    }), p("textarea", {
                        name: "description",
                        rows: 4,
                        required: !0,
                        value: a.description,
                        onChange: h,
                        placeholder: _("publishDialog.placeholder.libraryDesc")
                    })]
                }), k("label", {
                    children: [k("div", {
                        children: [p("span", {
                            children: _("publishDialog.authorName")
                        }), p("span", {
                            "aria-hidden": "true",
                            className: "required",
                            children: "*"
                        })]
                    }), p("input", {
                        type: "text",
                        name: "authorName",
                        required: !0,
                        value: a.authorName,
                        onChange: h,
                        placeholder: _("publishDialog.placeholder.authorName")
                    })]
                }), k("label", {
                    children: [p("span", {
                        children: _("publishDialog.githubUsername")
                    }), p("input", {
                        type: "text",
                        name: "githubHandle",
                        value: a.githubHandle,
                        onChange: h,
                        placeholder: _("publishDialog.placeholder.githubHandle")
                    })]
                }), k("label", {
                    children: [p("span", {
                        children: _("publishDialog.twitterUsername")
                    }), p("input", {
                        type: "text",
                        name: "twitterHandle",
                        value: a.twitterHandle,
                        onChange: h,
                        placeholder: _("publishDialog.placeholder.twitterHandle")
                    })]
                }), k("label", {
                    children: [p("span", {
                        children: _("publishDialog.website")
                    }), p("input", {
                        type: "text",
                        name: "website",
                        pattern: "https?://.+",
                        title: _("publishDialog.errors.website"),
                        value: a.website,
                        onChange: h,
                        placeholder: _("publishDialog.placeholder.website")
                    })]
                }), p("span", {
                    className: "publish-library-note",
                    children: p(Hn, {
                        i18nKey: "publishDialog.noteLicense",
                        link: w=>p("a", {
                            href: "https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: w
                        })
                    })
                })]
            }), k("div", {
                className: "publish-library__buttons",
                children: [p(m1, {
                    label: _("buttons.cancel"),
                    onClick: E,
                    "data-testid": "cancel-clear-canvas-button"
                }), p(m1, {
                    type: "submit",
                    label: _("buttons.submit"),
                    actionType: "primary",
                    isLoading: c
                })]
            })]
        }) : p("p", {
            style: {
                padding: "1em",
                textAlign: "center",
                fontWeight: 500
            },
            children: _("publishDialog.atleastOneLibItem")
        })
    })
}
  , cj = (e,t)=>e.filter(n=>t.includes(n.id))
  , uj = ({setAppState: e, selectedItems: t, library: n, onRemoveFromLibrary: r, resetLibrary: i, onSelectItems: o, appState: s, className: a})=>{
    const [l] = ut(id, Kt)
      , [c,u] = ut(a3, Kt)
      , d = ()=>{
        const A = t.length ? _("alerts.removeItemsFromsLibrary", {
            count: t.length
        }) : _("alerts.resetLibrary")
          , P = t.length ? _("confirmDialog.removeItemsFromLib") : _("confirmDialog.resetLibrary");
        return p(kk, {
            onConfirm: ()=>{
                t.length ? r() : i(),
                h(!1)
            }
            ,
            onCancel: ()=>{
                h(!1)
            }
            ,
            title: P,
            children: p("p", {
                children: A
            })
        })
    }
      , [f,h] = x.useState(!1)
      , m = !!t.length
      , g = m ? l.libraryItems.filter(A=>t.includes(A.id)) : l.libraryItems
      , E = _(m ? "buttons.remove" : "buttons.resetLibrary")
      , [v,y] = x.useState(!1)
      , [w,b] = x.useState(null)
      , I = x.useCallback(()=>k(Ur, {
        onCloseRequest: ()=>b(null),
        title: _("publishSuccessDialog.title"),
        className: "publish-library-success",
        size: "small",
        children: [p("p", {
            children: p(Hn, {
                i18nKey: "publishSuccessDialog.content",
                authorName: w.authorName,
                link: A=>p("a", {
                    href: w == null ? void 0 : w.url,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    children: A
                })
            })
        }), p(Ee, {
            type: "button",
            title: _("buttons.close"),
            "aria-label": _("buttons.close"),
            label: _("buttons.close"),
            onClick: ()=>b(null),
            "data-testid": "publish-library-success-close",
            className: "publish-library-success-close"
        })]
    }), [b, w])
      , S = (A,P)=>{
        y(!1),
        b({
            url: A.url,
            authorName: A.authorName
        });
        const O = P.slice();
        O.forEach(N=>{
            t.includes(N.id) && (N.status = "published")
        }
        ),
        n.setLibrary(O)
    }
      , C = async()=>{
        try {
            await n.updateLibrary({
                libraryItems: Ty({
                    description: "Excalidraw library files"
                }),
                merge: !0,
                openLibraryMenu: !0
            })
        } catch (A) {
            if ((A == null ? void 0 : A.name) === "AbortError") {
                console.warn(A);
                return
            }
            e({
                errorMessage: _("errors.importLibraryError")
            })
        }
    }
      , T = async()=>{
        const A = m ? g : await n.getLatestLibrary();
        FB(A).catch(Sx).catch(P=>{
            e({
                errorMessage: P.message
            })
        }
        )
    }
      , L = ()=>k(Ne, {
        open: c,
        children: [p(Ne.Trigger, {
            onToggle: ()=>u(!c),
            children: FR
        }), k(Ne.Content, {
            onClickOutside: ()=>u(!1),
            onSelect: ()=>u(!1),
            className: "library-menu",
            children: [!m && p(Ne.Item, {
                onSelect: C,
                icon: ry,
                "data-testid": "lib-dropdown--load",
                children: _("buttons.load")
            }), !!g.length && p(Ne.Item, {
                onSelect: T,
                icon: u7,
                "data-testid": "lib-dropdown--export",
                children: _("buttons.export")
            }), !!g.length && p(Ne.Item, {
                onSelect: ()=>h(!0),
                icon: Q1,
                children: E
            }), m && p(Ne.Item, {
                icon: lD,
                onSelect: ()=>y(!0),
                "data-testid": "lib-dropdown--remove",
                children: _("buttons.publishLibrary")
            })]
        })]
    });
    return k("div", {
        className: le("library-menu-dropdown-container", a),
        children: [L(), t.length > 0 && p("div", {
            className: "library-actions-counter",
            children: t.length
        }), f && d(), v && p(lj, {
            onClose: ()=>y(!1),
            libraryItems: cj(l.libraryItems, t),
            appState: s,
            onSuccess: A=>S(A, l.libraryItems),
            onError: A=>window.alert(A),
            updateItemsInStorage: ()=>n.setLibrary(l.libraryItems),
            onRemove: A=>o(t.filter(P=>P !== A))
        }), w && I()]
    })
}
  , w4 = ({selectedItems: e, onSelectItems: t, className: n})=>{
    const {library: r} = T0()
      , {clearLibraryCache: i, deleteItemsFromLibraryCache: o} = NC()
      , s = On()
      , a = Xn()
      , [l] = ut(id, Kt)
      , c = async d=>{
        const f = d.filter(h=>!e.includes(h.id));
        r.setLibrary(f).catch(()=>{
            a({
                errorMessage: _("alerts.errorRemovingFromLibrary")
            })
        }
        ),
        o(e),
        t([])
    }
    ;
    return p(uj, {
        appState: s,
        setAppState: a,
        selectedItems: e,
        onSelectItems: t,
        library: r,
        onRemoveFromLibrary: ()=>c(l.libraryItems),
        resetLibrary: ()=>{
            r.resetLibrary(),
            i()
        }
        ,
        className: n
    })
}
;
const dj = x.memo(({id: e, elements: t, isPending: n, onClick: r, selected: i, onToggle: o, onDrag: s, svgCache: a})=>{
    const l = x.useRef(null)
      , c = hW(e, t, a);
    x.useEffect(()=>{
        const m = l.current;
        if (m)
            return c && (m.innerHTML = c.outerHTML),
            ()=>{
                m.innerHTML = ""
            }
    }
    , [c]);
    const [u,d] = x.useState(!1)
      , f = Xt().isMobile
      , h = n && p("div", {
        className: "library-unit__adder",
        children: NR
    });
    return k("div", {
        className: le("library-unit", {
            "library-unit__active": t,
            "library-unit--hover": t && u,
            "library-unit--selected": i,
            "library-unit--skeleton": !c
        }),
        onMouseEnter: ()=>d(!0),
        onMouseLeave: ()=>d(!1),
        children: [p("div", {
            className: le("library-unit__dragger", {
                "library-unit__pulse": !!n
            }),
            ref: l,
            draggable: !!t,
            onClick: t || n ? m=>{
                e && m.shiftKey ? o(e, m) : r(e)
            }
            : void 0,
            onDragStart: m=>{
                if (!e) {
                    m.preventDefault();
                    return
                }
                d(!1),
                s(e, m)
            }
        }), h, e && t && (u || f || i) && p(jy, {
            checked: i,
            onChange: (m,g)=>o(e, g),
            className: "library-unit__checkbox"
        })]
    })
}
)
  , fj = ()=>p("div", {
    className: "library-unit library-unit--skeleton"
});
function hj() {
    return [!1, x.useCallback(t=>t(), [])]
}
const pj = ee.useTransition || hj
  , b4 = ({children: e})=>p("div", {
    className: "library-menu-items-container__grid",
    children: e
})
  , qp = x.memo(({items: e, onItemSelectToggle: t, onItemDrag: n, isItemSelected: r, onClick: i, svgCache: o, itemsRenderedPerBatch: s})=>{
    const [,a] = pj()
      , [l,c] = x.useState(0);
    return x.useEffect(()=>{
        l < e.length && a(()=>{
            c(l + s)
        }
        )
    }
    , [l, e.length, a, s]),
    p(re, {
        children: e.map((u,d)=>d < l ? p(dj, {
            elements: u == null ? void 0 : u.elements,
            isPending: !(u != null && u.id) && !!(u != null && u.elements),
            onClick: i,
            svgCache: o,
            id: u == null ? void 0 : u.id,
            selected: r(u.id),
            onToggle: t,
            onDrag: n
        }, (u == null ? void 0 : u.id) ?? d) : p(fj, {}, d))
    })
}
);
var Ck = "Expected a function"
  , _4 = 0 / 0
  , mj = "[object Symbol]"
  , gj = /^\s+|\s+$/g
  , vj = /^[-+]0x[0-9a-f]+$/i
  , yj = /^0b[01]+$/i
  , Ej = /^0o[0-7]+$/i
  , wj = parseInt
  , bj = typeof $d == "object" && $d && $d.Object === Object && $d
  , _j = typeof self == "object" && self && self.Object === Object && self
  , xj = bj || _j || Function("return this")()
  , Ij = Object.prototype
  , Sj = Ij.toString
  , Cj = Math.max
  , kj = Math.min
  , Qp = function() {
    return xj.Date.now()
};
function Tj(e, t, n) {
    var r, i, o, s, a, l, c = 0, u = !1, d = !1, f = !0;
    if (typeof e != "function")
        throw new TypeError(Ck);
    t = x4(t) || 0,
    g1(n) && (u = !!n.leading,
    d = "maxWait"in n,
    o = d ? Cj(x4(n.maxWait) || 0, t) : o,
    f = "trailing"in n ? !!n.trailing : f);
    function h(S) {
        var C = r
          , T = i;
        return r = i = void 0,
        c = S,
        s = e.apply(T, C),
        s
    }
    function m(S) {
        return c = S,
        a = setTimeout(v, t),
        u ? h(S) : s
    }
    function g(S) {
        var C = S - l
          , T = S - c
          , L = t - C;
        return d ? kj(L, o - T) : L
    }
    function E(S) {
        var C = S - l
          , T = S - c;
        return l === void 0 || C >= t || C < 0 || d && T >= o
    }
    function v() {
        var S = Qp();
        if (E(S))
            return y(S);
        a = setTimeout(v, g(S))
    }
    function y(S) {
        return a = void 0,
        f && r ? h(S) : (r = i = void 0,
        s)
    }
    function w() {
        a !== void 0 && clearTimeout(a),
        c = 0,
        r = l = i = a = void 0
    }
    function b() {
        return a === void 0 ? s : y(Qp())
    }
    function I() {
        var S = Qp()
          , C = E(S);
        if (r = arguments,
        i = this,
        l = S,
        C) {
            if (a === void 0)
                return m(l);
            if (d)
                return a = setTimeout(v, t),
                h(l)
        }
        return a === void 0 && (a = setTimeout(v, t)),
        s
    }
    return I.cancel = w,
    I.flush = b,
    I
}
function Mj(e, t, n) {
    var r = !0
      , i = !0;
    if (typeof e != "function")
        throw new TypeError(Ck);
    return g1(n) && (r = "leading"in n ? !!n.leading : r,
    i = "trailing"in n ? !!n.trailing : i),
    Tj(e, t, {
        leading: r,
        maxWait: t,
        trailing: i
    })
}
function g1(e) {
    var t = typeof e;
    return !!e && (t == "object" || t == "function")
}
function Aj(e) {
    return !!e && typeof e == "object"
}
function Lj(e) {
    return typeof e == "symbol" || Aj(e) && Sj.call(e) == mj
}
function x4(e) {
    if (typeof e == "number")
        return e;
    if (Lj(e))
        return _4;
    if (g1(e)) {
        var t = typeof e.valueOf == "function" ? e.valueOf() : e;
        e = g1(t) ? t + "" : t
    }
    if (typeof e != "string")
        return e === 0 ? e : +e;
    e = e.replace(gj, "");
    var n = yj.test(e);
    return n || Ej.test(e) ? wj(e.slice(2), n ? 2 : 8) : vj.test(e) ? _4 : +e
}
var Pj = Mj;
const Os = Al(Pj)
  , Rj = un(0)
  , Oj = e=>{
    const [t,n] = ut(Rj);
    return x.useEffect(()=>{
        const {current: r} = e;
        if (!r)
            return;
        const i = Os(()=>{
            const {scrollTop: o} = r;
            n(o)
        }
        , 200);
        return r.addEventListener("scroll", i),
        ()=>{
            i.cancel(),
            r.removeEventListener("scroll", i)
        }
    }
    , [e, n]),
    t
}
;
const Dj = 17
  , Nj = 64;
function Fj({isLoading: e, libraryItems: t, onAddToLibrary: n, onInsertLibraryItems: r, pendingElements: i, theme: o, id: s, libraryReturnUrl: a, onSelectItems: l, selectedItems: c}) {
    const u = x.useRef(null)
      , d = Oj(u);
    x.useEffect(()=>{
        var A;
        d > 0 && ((A = u.current) == null || A.scrollTo(0, d))
    }
    , []);
    const {svgCache: f} = NC()
      , h = x.useMemo(()=>t.filter(A=>A.status !== "published"), [t])
      , m = x.useMemo(()=>t.filter(A=>A.status === "published"), [t])
      , g = !t.length && !i.length
      , E = !i.length && !h.length && !m.length
      , [v,y] = x.useState(null)
      , w = x.useCallback((A,P)=>{
        const O = !c.includes(A)
          , N = [...h, ...m];
        if (O) {
            if (P.shiftKey && v) {
                const $ = N.findIndex(z=>z.id === v)
                  , V = N.findIndex(z=>z.id === A);
                if ($ === -1 || V === -1) {
                    l([...c, A]);
                    return
                }
                const te = Rt(c)
                  , Z = N.reduce((z,W,D)=>((D >= $ && D <= V || te.has(W.id)) && z.push(W.id),
                z), []);
                l(Z)
            } else
                l([...c, A]);
            y(A)
        } else
            y(null),
            l(c.filter($=>$ !== A))
    }
    , [v, l, m, c, h])
      , b = x.useCallback(A=>{
        let P;
        return c.includes(A) ? P = t.filter(O=>c.includes(O.id)) : P = t.filter(O=>O.id === A),
        P.map(O=>({
            ...O,
            elements: ey(O.elements, {
                randomizeSeed: !0
            })
        }))
    }
    , [t, c])
      , I = x.useCallback((A,P)=>{
        P.dataTransfer.setData(ve.excalidrawlib, OI(b(A)))
    }
    , [b])
      , S = x.useCallback(A=>A ? c.includes(A) : !1, [c])
      , C = x.useCallback(()=>{
        n(i)
    }
    , [i, n])
      , T = x.useCallback(A=>{
        A && r(b(A))
    }
    , [b, r])
      , L = f.size >= t.length ? Nj : Dj;
    return k("div", {
        className: "library-menu-items-container",
        style: i.length || h.length || m.length ? {
            justifyContent: "flex-start"
        } : {
            borderBottom: 0
        },
        children: [!E && p(w4, {
            selectedItems: c,
            onSelectItems: l,
            className: "library-menu-dropdown-container--in-heading"
        }), k(ir.Col, {
            className: "library-menu-items-container__items",
            align: "start",
            gap: 1,
            style: {
                flex: m.length > 0 ? 1 : "0 1 auto",
                marginBottom: 0
            },
            ref: u,
            children: [k(re, {
                children: [!E && p("div", {
                    className: "library-menu-items-container__header",
                    children: _("labels.personalLib")
                }), e && p("div", {
                    style: {
                        position: "absolute",
                        top: "var(--container-padding-y)",
                        right: "var(--container-padding-x)",
                        transform: "translateY(50%)"
                    },
                    children: p(bl, {})
                }), !i.length && !h.length ? k("div", {
                    className: "library-menu-items__no-items",
                    children: [p("div", {
                        className: "library-menu-items__no-items__label",
                        children: _("library.noItems")
                    }), p("div", {
                        className: "library-menu-items__no-items__hint",
                        children: m.length > 0 ? _("library.hint_emptyPrivateLibrary") : _("library.hint_emptyLibrary")
                    })]
                }) : k(b4, {
                    children: [i.length > 0 && p(qp, {
                        itemsRenderedPerBatch: L,
                        items: [{
                            id: null,
                            elements: i
                        }],
                        onItemSelectToggle: w,
                        onItemDrag: I,
                        onClick: C,
                        isItemSelected: S,
                        svgCache: f
                    }), p(qp, {
                        itemsRenderedPerBatch: L,
                        items: h,
                        onItemSelectToggle: w,
                        onItemDrag: I,
                        onClick: T,
                        isItemSelected: S,
                        svgCache: f
                    })]
                })]
            }), k(re, {
                children: [(m.length > 0 || i.length > 0 || h.length > 0) && p("div", {
                    className: "library-menu-items-container__header library-menu-items-container__header--excal",
                    children: _("labels.excalidrawLib")
                }), m.length > 0 ? p(b4, {
                    children: p(qp, {
                        itemsRenderedPerBatch: L,
                        items: m,
                        onItemSelectToggle: w,
                        onItemDrag: I,
                        onClick: T,
                        isItemSelected: S,
                        svgCache: f
                    })
                }) : h.length > 0 ? p("div", {
                    style: {
                        margin: "1rem 0",
                        display: "flex",
                        flexDirection: "column",
                        alignItems: "center",
                        justifyContent: "center",
                        width: "100%",
                        fontSize: ".9rem"
                    },
                    children: _("library.noItems")
                }) : null]
            }), g && p(Sk, {
                style: {
                    padding: "16px 0",
                    width: "100%"
                },
                id: s,
                libraryReturnUrl: a,
                theme: o,
                children: p(w4, {
                    selectedItems: c,
                    onSelectItems: l
                })
            })]
        })]
    })
}
const a3 = un(!1)
  , I4 = ({children: e})=>p("div", {
    className: "layer-ui__library",
    children: e
})
  , $j = ({onInsertLibraryItems: e, pendingElements: t, onAddToLibrary: n, setAppState: r, libraryReturnUrl: i, library: o, id: s, theme: a, selectedItems: l, onSelectItems: c})=>{
    const [u] = ut(id, Kt)
      , d = x.useCallback(m=>{
        (async(E,v)=>{
            nt("element", "addToLibrary", "ui");
            for (const w of H8)
                if (E.some(b=>b.type === w))
                    return r({
                        errorMessage: _(`errors.libraryElementTypeError.${w}`)
                    });
            const y = [{
                status: "unpublished",
                elements: E,
                id: $r(),
                created: Date.now()
            }, ...v];
            n(),
            o.setLibrary(y).catch(()=>{
                r({
                    errorMessage: _("alerts.errorAddingToLibrary")
                })
            }
            )
        }
        )(m, u.libraryItems)
    }
    , [n, o, r, u.libraryItems])
      , f = x.useMemo(()=>u.libraryItems, [u]);
    if (u.status === "loading" && !u.isInitialized)
        return p(I4, {
            children: p("div", {
                className: "layer-ui__library-message",
                children: k("div", {
                    children: [p(bl, {
                        size: "2em"
                    }), p("span", {
                        children: _("labels.libraryLoadingMessage")
                    })]
                })
            })
        });
    const h = u.libraryItems.length > 0 || t.length > 0;
    return k(I4, {
        children: [p(Fj, {
            isLoading: u.status === "loading",
            libraryItems: f,
            onAddToLibrary: d,
            onInsertLibraryItems: e,
            pendingElements: t,
            id: s,
            libraryReturnUrl: i,
            theme: a,
            onSelectItems: c,
            selectedItems: l
        }), h && p(Sk, {
            className: "library-menu-control-buttons--at-bottom",
            style: {
                padding: "16px 12px 0 12px"
            },
            id: s,
            libraryReturnUrl: i,
            theme: a
        })]
    })
}
  , Bj = (e,t)=>{
    const n = ()=>it(t, e, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    })
      , r = x.useRef(n())
      , i = x.useRef(e)
      , o = x.useRef(t);
    return (!Tr(e.selectedElementIds, i.current.selectedElementIds) || !Tr(t, o.current)) && (r.current = n(),
    i.current = e,
    o.current = t),
    r.current
}
  , zj = ()=>{
    const {library: e, id: t, onInsertElements: n} = T0()
      , r = M0()
      , i = On()
      , o = Xn()
      , s = A0()
      , [a,l] = x.useState([])
      , c = x.useMemo(()=>e, [e])
      , u = Bj(i, s)
      , d = x.useCallback(h=>{
        n(FC(h))
    }
    , [n])
      , f = x.useCallback(()=>{
        o({
            selectedElementIds: {},
            selectedGroupIds: {},
            activeEmbeddable: null
        })
    }
    , [o]);
    return p($j, {
        pendingElements: u,
        onInsertLibraryItems: d,
        onAddToLibrary: f,
        setAppState: o,
        libraryReturnUrl: r.libraryReturnUrl,
        library: c,
        id: t,
        theme: i.theme,
        selectedItems: a,
        onSelectItems: l
    })
}
  , kk = e=>{
    const {onConfirm: t, onCancel: n, children: r, confirmText: i=_("buttons.confirm"), cancelText: o=_("buttons.cancel"), className: s="", ...a} = e
      , l = Xn()
      , c = Ol(a3, Kt)
      , {container: u} = eo();
    return k(Ur, {
        onCloseRequest: n,
        size: "small",
        ...a,
        className: `confirm-dialog ${s}`,
        children: [r, k("div", {
            className: "confirm-dialog-buttons",
            children: [p(m1, {
                label: o,
                onClick: ()=>{
                    l({
                        openMenu: null
                    }),
                    c(!1),
                    n(),
                    u == null || u.focus()
                }
            }), p(m1, {
                label: i,
                onClick: ()=>{
                    l({
                        openMenu: null
                    }),
                    c(!1),
                    t(),
                    u == null || u.focus()
                }
                ,
                actionType: "danger"
            })]
        })]
    })
}
  , l3 = un(null)
  , Hj = ()=>{
    const [e,t] = ut(l3, Kt)
      , n = pr();
    return e && e === "clearCanvas" ? p(kk, {
        onConfirm: ()=>{
            n.executeAction(SI),
            t(null)
        }
        ,
        onCancel: ()=>t(null),
        title: _("clearCanvasDialog.title"),
        children: k("p", {
            className: "clear-canvas__content",
            children: [" ", _("alerts.clearReset")]
        })
    }) : null
}
  , Tk = un({
    active: !1
});
async function g2({title: e, description: t, actionLabel: n, color: r}) {
    return new Promise(i=>{
        Di.set(Tk, {
            active: !0,
            onConfirm: ()=>i(!0),
            onClose: ()=>i(!1),
            onReject: ()=>i(!1),
            title: e,
            description: t,
            actionLabel: n,
            color: r
        })
    }
    )
}
const Mk = ()=>{
    const {t: e} = Ot()
      , t = pr()
      , n = A0();
    return t.isActionEnabled(t2) ? p(vi, {
        icon: ry,
        onSelect: async()=>{
            (!n.length || await g2({
                title: e("overwriteConfirm.modal.loadFromFile.title"),
                actionLabel: e("overwriteConfirm.modal.loadFromFile.button"),
                color: "warning",
                description: p(Hn, {
                    i18nKey: "overwriteConfirm.modal.loadFromFile.description",
                    bold: i=>p("strong", {
                        children: i
                    }),
                    br: ()=>p("br", {})
                })
            })) && t.executeAction(t2)
        }
        ,
        "data-testid": "load-button",
        shortcut: Kl("loadScene"),
        "aria-label": e("buttons.load"),
        children: e("buttons.load")
    }) : null
}
;
Mk.displayName = "LoadScene";
const Ak = ()=>{
    const {t: e} = Ot()
      , t = pr();
    return t.isActionEnabled(ub) ? p(vi, {
        shortcut: Kl("saveScene"),
        "data-testid": "save-button",
        onSelect: ()=>t.executeAction(ub),
        icon: cO,
        "aria-label": `${e("buttons.save")}`,
        children: `${e("buttons.save")}`
    }) : null
}
;
Ak.displayName = "SaveToActiveFile";
const Lk = ()=>{
    const e = Xn()
      , {t} = Ot();
    return p(vi, {
        icon: fO,
        "data-testid": "image-export-button",
        onSelect: ()=>e({
            openDialog: "imageExport"
        }),
        shortcut: Kl("imageExport"),
        "aria-label": t("buttons.exportImage"),
        children: t("buttons.exportImage")
    })
}
;
Lk.displayName = "SaveAsImage";
const Pk = ()=>{
    const {t: e} = Ot()
      , t = pr();
    return p(vi, {
        "data-testid": "help-menu-item",
        icon: ny,
        onSelect: ()=>t.executeAction(Yy),
        shortcut: "?",
        "aria-label": e("helpDialog.title"),
        children: e("helpDialog.title")
    })
}
;
Pk.displayName = "Help";
const Rk = ()=>{
    const {t: e} = Ot()
      , t = Ol(l3, Kt);
    return pr().isActionEnabled(SI) ? p(vi, {
        icon: Q1,
        onSelect: ()=>t("clearCanvas"),
        "data-testid": "clear-canvas-button",
        "aria-label": e("buttons.clearReset"),
        children: e("buttons.clearReset")
    }) : null
}
;
Rk.displayName = "ClearCanvas";
const Ok = ()=>{
    const {t: e} = Ot()
      , t = On()
      , n = pr();
    return n.isActionEnabled(R6) ? p(vi, {
        onSelect: r=>(r.preventDefault(),
        n.executeAction(R6)),
        icon: t.theme === "dark" ? iO : rO,
        "data-testid": "toggle-dark-mode",
        shortcut: Kl("toggleTheme"),
        "aria-label": t.theme === "dark" ? e("buttons.lightMode") : e("buttons.darkMode"),
        children: t.theme === "dark" ? e("buttons.lightMode") : e("buttons.darkMode")
    }) : null
}
;
Ok.displayName = "ToggleTheme";
const Dk = ()=>{
    const {t: e} = Ot()
      , t = On()
      , n = pr()
      , r = M0();
    return t.viewModeEnabled || !r.UIOptions.canvasActions.changeViewBackgroundColor ? null : k("div", {
        style: {
            marginTop: "0.5rem"
        },
        children: [p("div", {
            "data-testid": "canvas-background-label",
            style: {
                fontSize: ".75rem",
                marginBottom: ".5rem"
            },
            children: e("labels.canvasBackground")
        }), p("div", {
            style: {
                padding: "0 0.625rem"
            },
            children: n.renderAction("changeViewBackgroundColor")
        })]
    })
}
;
Dk.displayName = "ChangeCanvasBackground";
const Nk = ()=>{
    const {t: e} = Ot()
      , t = Xn();
    return p(vi, {
        icon: u7,
        onSelect: ()=>{
            t({
                openDialog: "jsonExport"
            })
        }
        ,
        "data-testid": "json-export-button",
        "aria-label": e("buttons.export"),
        children: e("buttons.export")
    })
}
;
Nk.displayName = "Export";
const Fk = ()=>k(re, {
    children: [p(cu, {
        icon: oO,
        href: "https://github.com/excalidraw/excalidraw",
        "aria-label": "GitHub",
        children: "GitHub"
    }), p(cu, {
        icon: sO,
        href: "https://discord.gg/UexuTaE",
        "aria-label": "Discord",
        children: "Discord"
    }), p(cu, {
        icon: aO,
        href: "https://twitter.com/excalidraw",
        "aria-label": "Twitter",
        children: "Twitter"
    })]
});
Fk.displayName = "Socials";
const $k = ({onSelect: e, isCollaborating: t})=>{
    const {t: n} = Ot();
    return p(vi, {
        "data-testid": "collab-button",
        icon: iy,
        className: le({
            "active-collab": t
        }),
        onSelect: e,
        children: n("labels.liveCollaboration")
    })
}
;
$k.displayName = "LiveCollaborationTrigger";
const Uj = Object.freeze(Object.defineProperty({
    __proto__: null,
    ChangeCanvasBackground: Dk,
    ClearCanvas: Rk,
    Export: Nk,
    Help: Pk,
    LiveCollaborationTrigger: $k,
    LoadScene: Mk,
    SaveAsImage: Lk,
    SaveToActiveFile: Ak,
    Socials: Fk,
    ToggleTheme: Ok
}, Symbol.toStringTag, {
    value: "Module"
}))
  , C0 = (e,t)=>{
    const n = un(0)
      , r = i=>{
        const {jotaiScope: o} = Kn()
          , [,s] = ut(n, o)
          , a = x.useRef({
            preferHost: !1,
            counter: 0
        });
        return x.useLayoutEffect(()=>{
            const l = a.current;
            return s(c=>{
                const u = c + 1;
                return l.counter = u,
                u
            }
            ),
            ()=>{
                s(c=>{
                    const u = c - 1;
                    return l.counter = u,
                    u || (l.preferHost = !1),
                    u
                }
                )
            }
        }
        , [s]),
        i.__fallback || (a.current.preferHost = !0),
        !a.current.counter && i.__fallback && a.current.preferHost || a.current.counter > 1 && i.__fallback ? null : p(t, {
            ...i
        })
    }
    ;
    return r.displayName = e,
    r
}
  , He = Object.assign(C0("MainMenu", ({children: e, onSelect: t})=>{
    const {MainMenuTunnel: n} = Kn()
      , r = Xt()
      , i = On()
      , o = Xn()
      , s = r.isMobile ? void 0 : ()=>o({
        openMenu: null
    });
    return p(n.In, {
        children: k(Ne, {
            open: i.openMenu === "canvas",
            children: [p(Ne.Trigger, {
                onToggle: ()=>{
                    o({
                        openMenu: i.openMenu === "canvas" ? null : "canvas"
                    })
                }
                ,
                "data-testid": "main-menu-trigger",
                className: "main-menu-trigger",
                children: c7
            }), k(Ne.Content, {
                onClickOutside: s,
                onSelect: j1(t, ()=>{
                    o({
                        openMenu: null
                    })
                }
                ),
                children: [e, r.isMobile && i.collaborators.size > 0 && k("fieldset", {
                    className: "UserList-Wrapper",
                    children: [p("legend", {
                        children: _("labels.collaborators")
                    }), p(ak, {
                        mobile: !0,
                        collaborators: i.collaborators
                    })]
                })]
            })]
        })
    })
}
), {
    Trigger: Ne.Trigger,
    Item: Ne.Item,
    ItemLink: Ne.ItemLink,
    ItemCustom: Ne.ItemCustom,
    Group: Ne.Group,
    Separator: Ne.Separator,
    DefaultItems: Uj
})
  , c3 = ({title: e, children: t, actionLabel: n, onClick: r})=>k("div", {
    className: "OverwriteConfirm__Actions__Action",
    children: [p("h4", {
        children: e
    }), p("div", {
        className: "OverwriteConfirm__Actions__Action__content",
        children: t
    }), p(oi, {
        variant: "outlined",
        color: "muted",
        label: n,
        size: "large",
        fullWidth: !0,
        onClick: r
    })]
})
  , Vj = ()=>{
    const {t: e} = Ot()
      , t = pr()
      , n = Xn();
    return p(c3, {
        title: e("overwriteConfirm.action.exportToImage.title"),
        actionLabel: e("overwriteConfirm.action.exportToImage.button"),
        onClick: ()=>{
            t.executeAction(LS, "ui", !0),
            n({
                openDialog: "imageExport"
            })
        }
        ,
        children: e("overwriteConfirm.action.exportToImage.description")
    })
}
  , Wj = ()=>{
    const {t: e} = Ot()
      , t = pr();
    return p(c3, {
        title: e("overwriteConfirm.action.saveToDisk.title"),
        actionLabel: e("overwriteConfirm.action.saveToDisk.button"),
        onClick: ()=>{
            t.executeAction(PS, "ui")
        }
        ,
        children: e("overwriteConfirm.action.saveToDisk.description")
    })
}
  , S4 = Object.assign(({children: e})=>p("div", {
    className: "OverwriteConfirm__Actions",
    children: e
}), {
    ExportToImage: Vj,
    SaveToDisk: Wj
});
const Ds = Object.assign(C0("OverwriteConfirmDialog", ({children: e})=>{
    const {OverwriteConfirmDialogTunnel: t} = Kn()
      , [n,r] = ut(Tk, Kt);
    if (!n.active)
        return null;
    const i = ()=>{
        n.onClose(),
        r(s=>({
            ...s,
            active: !1
        }))
    }
      , o = ()=>{
        n.onConfirm(),
        r(s=>({
            ...s,
            active: !1
        }))
    }
    ;
    return p(t.In, {
        children: p(Ur, {
            onCloseRequest: i,
            title: !1,
            size: 916,
            children: k("div", {
                className: "OverwriteConfirm",
                children: [p("h3", {
                    children: n.title
                }), k("div", {
                    className: `OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,
                    children: [p("div", {
                        className: "OverwriteConfirm__Description__icon",
                        children: hD
                    }), p("div", {
                        children: n.description
                    }), p("div", {
                        className: "OverwriteConfirm__Description__spacer"
                    }), p(oi, {
                        color: n.color,
                        size: "large",
                        label: n.actionLabel,
                        onClick: o
                    })]
                }), p(S4, {
                    children: e
                })]
            })
        })
    })
}
), {
    Actions: S4,
    Action: c3
})
  , Bk = C0("DefaultSidebarTrigger", e=>{
    const {DefaultSidebarTriggerTunnel: t} = Kn();
    return p(t.In, {
        children: p(Rs.Trigger, {
            ...e,
            className: "default-sidebar-trigger",
            name: nl.name
        })
    })
}
);
Bk.displayName = "DefaultSidebarTrigger";
const zk = ({children: e, ...t})=>{
    const {DefaultSidebarTabTriggersTunnel: n} = Kn();
    return p(n.In, {
        children: p(Rs.TabTriggers, {
            ...t,
            children: e
        })
    })
}
;
zk.displayName = "DefaultTabTriggers";
const C4 = Object.assign(C0("DefaultSidebar", ({children: e, className: t, onDock: n, docked: r, ...i})=>{
    const o = On()
      , s = Xn()
      , {DefaultSidebarTabTriggersTunnel: a} = Kn();
    return x.createElement(Rs, {
        ...i,
        name: "default",
        key: "default",
        className: le("default-sidebar", t),
        docked: r ?? o.defaultSidebarDockedPreference,
        onDock: n === !1 || !n && r != null ? void 0 : j1(n, l=>{
            s({
                defaultSidebarDockedPreference: l
            })
        }
        )
    }, k(Rs.Tabs, {
        children: [k(Rs.Header, {
            children: [i.__fallback && p("div", {
                style: {
                    color: "var(--color-primary)",
                    fontSize: "1.2em",
                    fontWeight: "bold",
                    textOverflow: "ellipsis",
                    overflow: "hidden",
                    whiteSpace: "nowrap",
                    paddingRight: "1em"
                },
                children: _("toolBar.library")
            }), p(a.Out, {})]
        }), p(Rs.Tab, {
            tab: Dv,
            children: p(zj, {})
        }), e]
    }))
}
), {
    Trigger: Bk,
    TabTriggers: zk
});
const Gj = "small"
  , jj = e=>k("label", {
    className: le("ToolIcon ToolIcon__LaserPointer", `ToolIcon_size_ ${Gj}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title}`,
    children: [p("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title,
        "data-testid": "toolbar-LaserPointer"
    }), p("div", {
        className: "ToolIcon__icon",
        children: p7
    })]
})
  , Yj = ({UIOptions: e})=>k(He, {
    __fallback: !0,
    children: [p(He.DefaultItems.LoadScene, {}), p(He.DefaultItems.SaveToActiveFile, {}), e.canvasActions.export && p(He.DefaultItems.Export, {}), e.canvasActions.saveAsImage && p(He.DefaultItems.SaveAsImage, {}), p(He.DefaultItems.Help, {}), p(He.DefaultItems.ClearCanvas, {}), p(He.Separator, {}), p(He.Group, {
        title: "Excalidraw links",
        children: p(He.DefaultItems.Socials, {})
    }), p(He.Separator, {}), p(He.DefaultItems.ToggleTheme, {}), p(He.DefaultItems.ChangeCanvasBackground, {})]
})
  , Zj = ()=>k(Ds, {
    __fallback: !0,
    children: [p(Ds.Actions.SaveToDisk, {}), p(Ds.Actions.ExportToImage, {})]
})
  , Kj = ({actionManager: e, appState: t, files: n, setAppState: r, elements: i, canvas: o, onLockToggle: s, onHandToolToggle: a, onPenModeToggle: l, showExitZenModeBtn: c, renderTopRightUI: u, renderCustomStats: d, UIOptions: f, onExportImage: h, renderWelcomeScreen: m, children: g, app: E, isCollaborating: v})=>{
    const y = Xt()
      , w = uG()
      , [b,I] = ut(u0, Kt)
      , S = ()=>f.canvasActions.export ? p(wG, {
        elements: i,
        appState: t,
        files: n,
        actionManager: e,
        exportOpts: f.canvasActions.export,
        canvas: o,
        setAppState: r
    }) : null
      , C = ()=>f.canvasActions.saveAsImage ? p(NW, {
        elements: i,
        appState: t,
        files: n,
        actionManager: e,
        onExportImage: h,
        onCloseRequest: ()=>r({
            openDialog: null
        })
    }) : null
      , T = ()=>k("div", {
        style: {
            position: "relative"
        },
        children: [p(w.MainMenuTunnel.Out, {}), m && p(w.WelcomeScreenMenuHintTunnel.Out, {})]
    })
      , L = ()=>p(od, {
        heading: "selectedShapeActions",
        className: le("selected-shape-actions zen-mode-transition", {
            "transition-left": t.zenModeEnabled
        }),
        children: p(zi, {
            className: F8.SHAPE_ACTIONS_MENU,
            padding: 2,
            style: {
                maxHeight: `${t.height - 166}px`
            },
            children: p(YC, {
                appState: t,
                elements: i,
                renderAction: e.renderAction
            })
        })
    })
      , A = ()=>{
        var V;
        const $ = Wy(t, i);
        return p(KC, {
            side: "top",
            children: k("div", {
                className: "App-menu App-menu_top",
                children: [k(ir.Col, {
                    gap: 6,
                    className: le("App-menu_top__left"),
                    children: [T(), $ && L()]
                }), !t.viewModeEnabled && p(od, {
                    heading: "shapes",
                    className: "shapes-section",
                    children: te=>k("div", {
                        style: {
                            position: "relative"
                        },
                        children: [m && p(w.WelcomeScreenToolbarHintTunnel.Out, {}), p(ir.Col, {
                            gap: 4,
                            align: "start",
                            children: k(ir.Row, {
                                gap: 1,
                                className: le("App-toolbar-container", {
                                    "zen-mode": t.zenModeEnabled
                                }),
                                children: [k(zi, {
                                    padding: 1,
                                    className: le("App-toolbar", {
                                        "zen-mode": t.zenModeEnabled
                                    }),
                                    children: [p(XC, {
                                        appState: t,
                                        isMobile: y.isMobile,
                                        device: y,
                                        app: E
                                    }), te, k(ir.Row, {
                                        gap: 1,
                                        children: [p(JC, {
                                            zenModeEnabled: t.zenModeEnabled,
                                            checked: t.penMode,
                                            onChange: l,
                                            title: _("toolBar.penMode"),
                                            penDetected: t.penDetected
                                        }), p(QC, {
                                            checked: t.activeTool.locked,
                                            onChange: s,
                                            title: _("toolBar.lock")
                                        }), p("div", {
                                            className: "App-toolbar__divider"
                                        }), p(tk, {
                                            checked: El(t),
                                            onChange: ()=>a(),
                                            title: _("toolBar.hand"),
                                            isMobile: !0
                                        }), p(ZC, {
                                            appState: t,
                                            activeTool: t.activeTool,
                                            app: E
                                        })]
                                    })]
                                }), v && p(zi, {
                                    style: {
                                        marginLeft: 8,
                                        alignSelf: "center",
                                        height: "fit-content"
                                    },
                                    children: p(jj, {
                                        title: _("toolBar.laser"),
                                        checked: t.activeTool.type === "laser",
                                        onChange: ()=>E.setActiveTool({
                                            type: "laser"
                                        }),
                                        isMobile: !0
                                    })
                                })]
                            })
                        })]
                    })
                }), k("div", {
                    className: le("layer-ui__wrapper__top-right zen-mode-transition", {
                        "transition-right": t.zenModeEnabled
                    }),
                    children: [p(ak, {
                        collaborators: t.collaborators
                    }), u == null ? void 0 : u(y.isMobile, t), !t.viewModeEnabled && (!O || ((V = t.openSidebar) == null ? void 0 : V.name) !== nl.name) && p(w.DefaultSidebarTriggerTunnel.Out, {})]
                })]
            })
        })
    }
      , P = ()=>p(C4, {
        __fallback: !0,
        onDock: $=>{
            nt("sidebar", `toggleDock (${$ ? "dock" : "undock"})`, `(${y.isMobile ? "mobile" : "desktop"})`)
        }
    })
      , O = G1(o3, Kt)
      , N = k(re, {
        children: [g, p(Yj, {
            UIOptions: f
        }), p(C4.Trigger, {
            __fallback: !0,
            icon: DR,
            title: oo(_("toolBar.library")),
            onToggle: $=>{
                $ && nt("sidebar", `${nl.name} (open)`, `button (${y.isMobile ? "mobile" : "desktop"})`)
            }
            ,
            tab: nl.defaultTab,
            children: _("toolBar.library")
        }), p(Zj, {}), t.isLoading && p(qC, {
            delay: 250
        }), t.errorMessage && p(v3, {
            onClose: ()=>r({
                errorMessage: null
            }),
            children: t.errorMessage
        }), b && !y.isMobile && p(oB, {
            colorPickerType: b.colorPickerType,
            onCancel: ()=>{
                I(null)
            }
            ,
            onChange: ($,V,te,{altKey: Z})=>{
                var z;
                if (!($ !== "elementBackground" && $ !== "elementStroke"))
                    if (te.length) {
                        for (const W of te)
                            Q(W, {
                                [Z && b.swapPreviewOnAlt ? $ === "elementBackground" ? "strokeColor" : "backgroundColor" : $ === "elementBackground" ? "backgroundColor" : "strokeColor"]: V
                            }, !1),
                            We.delete(W);
                        (z = Fe.getScene(te[0])) == null || z.informMutation()
                    } else
                        r($ === "elementBackground" ? {
                            currentItemBackgroundColor: V
                        } : {
                            currentItemStrokeColor: V
                        })
            }
            ,
            onSelect: ($,V)=>{
                var te;
                I(Z=>Z != null && Z.keepOpenOnAlt && V.altKey ? Z : null),
                (te = b == null ? void 0 : b.onSelect) == null || te.call(b, $, V)
            }
        }), t.openDialog === "help" && p(yG, {
            onClose: ()=>{
                r({
                    openDialog: null
                })
            }
        }), p(Hj, {}), p(w.OverwriteConfirmDialogTunnel.Out, {}), C(), S(), t.pasteDialog.shown && p(fG, {
            setAppState: r,
            appState: t,
            onClose: ()=>r({
                pasteDialog: {
                    shown: !1,
                    data: null
                }
            })
        }), y.isMobile && p(dG, {
            app: E,
            appState: t,
            elements: i,
            actionManager: e,
            renderJSONExportDialog: S,
            renderImageExportDialog: C,
            setAppState: r,
            onLockToggle: s,
            onHandToolToggle: a,
            onPenModeToggle: l,
            renderTopRightUI: u,
            renderCustomStats: d,
            renderSidebars: P,
            device: y,
            renderWelcomeScreen: m
        }), !y.isMobile && k(re, {
            children: [k("div", {
                className: "layer-ui__wrapper",
                style: t.openSidebar && O && y.canDeviceFitSidebar ? {
                    width: `calc(100% - ${mL}px)`
                } : {},
                children: [m && p(w.WelcomeScreenCenterTunnel.Out, {}), A(), p(lk, {
                    appState: t,
                    actionManager: e,
                    showExitZenModeBtn: c,
                    renderWelcomeScreen: m
                }), t.showStats && p(ek, {
                    appState: t,
                    setAppState: r,
                    elements: i,
                    onClose: ()=>{
                        e.executeAction(d1)
                    }
                    ,
                    renderCustomStats: d
                }), t.scrolledOutside && p("button", {
                    className: "scroll-back-to-content",
                    onClick: ()=>{
                        r($=>({
                            ...Yu(i, $)
                        }))
                    }
                    ,
                    children: _("buttons.scrollBackToContent")
                })]
            }), P()]
        })]
    });
    return p(bI.Provider, {
        value: t,
        children: p($v, {
            scope: w.jotaiScope,
            children: p(sk.Provider, {
                value: w,
                children: N
            })
        })
    })
}
  , k4 = e=>{
    const {suggestedBindings: t, startBoundElement: n, cursorButton: r, scrollX: i, scrollY: o, ...s} = e;
    return s
}
  , Xj = (e,t)=>{
    if (e.children !== t.children)
        return !1;
    const {canvas: n, appState: r, ...i} = e
      , {canvas: o, appState: s, ...a} = t;
    return Tr(k4(r), k4(s), {
        selectedElementIds: Tr,
        selectedGroupIds: Tr
    }) && Tr(i, a)
}
  , qj = ee.memo(Kj, Xj);
const Qj = 5e3
  , Jj = ({message: e, onClose: t, closable: n=!1, duration: r=Qj})=>{
    const i = x.useRef(0)
      , o = r !== 1 / 0
      , s = x.useCallback(()=>{
        o && (i.current = window.setTimeout(()=>t(), r))
    }
    , [t, r, o]);
    return x.useEffect(()=>{
        if (o)
            return s(),
            ()=>clearTimeout(i.current)
    }
    , [s, e, r, o]),
    k("div", {
        className: "Toast",
        onMouseEnter: o ? ()=>clearTimeout(i == null ? void 0 : i.current) : void 0,
        onMouseLeave: o ? s : void 0,
        children: [p("p", {
            className: "Toast__message",
            children: e
        }), n && p(Ee, {
            icon: _d,
            "aria-label": "close",
            type: "icon",
            onClick: t,
            className: "close"
        })]
    })
}
  , T4 = J({
    name: "viewMode",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.viewModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                viewModeEnabled: !this.checked(t)
            },
            commitToHistory: !1
        }
    },
    checked: e=>e.viewModeEnabled,
    predicate: (e,t,n)=>typeof n.viewModeEnabled > "u",
    contextItemLabel: "labels.viewMode",
    keyTest: e=>!e[R.CTRL_OR_CMD] && e.altKey && e.code === Me.R
})
  , hu = class hu {
    constructor({scene: t, onSceneUpdated: n}) {
        M(this, "scene");
        M(this, "onSceneUpdated");
        M(this, "onFontsLoaded", t=>{
            if (t.every(r=>{
                const i = `${r.family}-${r.style}-${r.weight}`;
                return hu.loadedFontFaces.has(i) ? !0 : (hu.loadedFontFaces.add(i),
                !1)
            }
            ))
                return !1;
            let n = !1;
            this.scene.mapElements(r=>ue(r) && !_t(r) ? (We.delete(r),
            n = !0,
            fe(r, {
                ...Jv(r)
            })) : r),
            n && this.onSceneUpdated()
        }
        );
        M(this, "loadFontsForElements", async t=>{
            const n = await Promise.all([...new Set(t.filter(r=>ue(r)).map(r=>r.fontFamily))].map(r=>{
                var o, s, a, l;
                const i = xt({
                    fontFamily: r,
                    fontSize: 16
                });
                if (!((s = (o = document.fonts) == null ? void 0 : o.check) != null && s.call(o, i)))
                    return (l = (a = document.fonts) == null ? void 0 : a.load) == null ? void 0 : l.call(a, i)
            }
            ));
            this.onFontsLoaded(n.flat().filter(Boolean))
        }
        );
        this.scene = t,
        this.onSceneUpdated = n
    }
}
;
M(hu, "loadedFontFaces", new Set);
let v2 = hu;
const Hk = (e,t)=>{
    const n = t.scene.getSelectedElements(e);
    return n.length === 1 && n[0].type === "frame"
}
  , eY = J({
    name: "selectAllElementsInFrame",
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t)[0];
        if (i && i.type === "frame") {
            const o = Rr(Pe(e), i.id).filter(s=>!(s.type === "text" && s.containerId));
            return {
                elements: e,
                appState: {
                    ...t,
                    selectedElementIds: o.reduce((s,a)=>(s[a.id] = !0,
                    s), {})
                },
                commitToHistory: !1
            }
        }
        return {
            elements: e,
            appState: t,
            commitToHistory: !1
        }
    }
    ,
    contextItemLabel: "labels.selectAllElementsInFrame",
    predicate: (e,t,n,r)=>Hk(t, r)
})
  , tY = J({
    name: "removeAllElementsFromFrame",
    trackEvent: {
        category: "history"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t)[0];
        return i && i.type === "frame" ? {
            elements: xS(e, i, t),
            appState: {
                ...t,
                selectedElementIds: {
                    [i.id]: !0
                }
            },
            commitToHistory: !0
        } : {
            elements: e,
            appState: t,
            commitToHistory: !1
        }
    }
    ,
    contextItemLabel: "labels.removeAllElementsFromFrame",
    predicate: (e,t,n,r)=>Hk(t, r)
});
J({
    name: "updateFrameRendering",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t)=>({
        elements: e,
        appState: {
            ...t,
            frameRendering: {
                ...t.frameRendering,
                enabled: !t.frameRendering.enabled
            }
        },
        commitToHistory: !1
    }),
    contextItemLabel: "labels.updateFrameRendering",
    checked: e=>e.frameRendering.enabled
});
J({
    name: "setFrameAsActiveTool",
    trackEvent: {
        category: "toolbar"
    },
    perform: (e,t,n,r)=>{
        const i = Ct(t, {
            type: "frame"
        });
        return ki(r.interactiveCanvas, {
            ...t,
            activeTool: i
        }),
        {
            elements: e,
            appState: {
                ...t,
                activeTool: Ct(t, {
                    type: "frame"
                })
            },
            commitToHistory: !1
        }
    }
    ,
    keyTest: e=>!e[R.CTRL_OR_CMD] && !e.shiftKey && !e.altKey && e.key.toLocaleLowerCase() === R.F
});
const nY = 8
  , M4 = 99999
  , k0 = e=>nY / e
  , pn = class pn {
}
;
M(pn, "referenceSnapPoints", null),
M(pn, "visibleGaps", null),
M(pn, "setReferenceSnapPoints", t=>{
    pn.referenceSnapPoints = t
}
),
M(pn, "getReferenceSnapPoints", ()=>pn.referenceSnapPoints),
M(pn, "setVisibleGaps", t=>{
    pn.visibleGaps = t
}
),
M(pn, "getVisibleGaps", ()=>pn.visibleGaps),
M(pn, "destroy", ()=>{
    pn.referenceSnapPoints = null,
    pn.visibleGaps = null
}
);
let xr = pn;
const Qo = ({event: e, appState: t, selectedElements: n})=>e ? t.objectsSnapModeEnabled && !e[R.CTRL_OR_CMD] || !t.objectsSnapModeEnabled && e[R.CTRL_OR_CMD] && t.gridSize === null : n.length === 1 && n[0].type === "arrow" ? !1 : t.objectsSnapModeEnabled
  , rY = (e,t,n=.01)=>Math.abs(e - t) <= n
  , sd = (e,{omitCenter: t, boundingBoxCorners: n, dragOffset: r}={
    omitCenter: !1,
    boundingBoxCorners: !1
})=>{
    let i = [];
    if (e.length === 1) {
        const o = e[0];
        let[s,a,l,c,u,d] = me(o);
        r && (s += r.x,
        l += r.x,
        u += r.x,
        a += r.y,
        c += r.y,
        d += r.y);
        const f = (l - s) / 2
          , h = (c - a) / 2;
        if ((o.type === "diamond" || o.type === "ellipse") && !n) {
            const m = lt([s, a + h], [u, d], o.angle)
              , g = lt([s + f, a], [u, d], o.angle)
              , E = lt([l, a + h], [u, d], o.angle)
              , v = lt([s + f, c], [u, d], o.angle);
            i = t ? [m, g, E, v] : [m, g, E, v, [u, d]]
        } else {
            const m = lt([s, a], [u, d], o.angle)
              , g = lt([l, a], [u, d], o.angle)
              , E = lt([s, c], [u, d], o.angle)
              , v = lt([l, c], [u, d], o.angle);
            i = t ? [m, g, E, v] : [m, g, E, v, [u, d]]
        }
    } else if (e.length > 1) {
        const [o,s,a,l] = $y(e, r ?? {
            x: 0,
            y: 0
        })
          , c = a - o
          , u = l - s
          , d = [o, s]
          , f = [a, s]
          , h = [o, l]
          , m = [a, l]
          , g = [o + c / 2, s + u / 2];
        i = t ? [d, f, h, m] : [d, f, h, m, g]
    }
    return i.map(o=>[Je(o[0]), Je(o[1])])
}
  , Uk = (e,t,n)=>{
    const r = t.filter(i=>cn(i)).map(i=>i.id);
    return SS(e, t, n).filter(i=>!(i.frameId && r.includes(i.frameId)))
}
  , iY = (e,t,n)=>{
    const r = Uk(e, t, n)
      , i = q1(r).filter(u=>!(u.length === 1 && _t(u[0]))).map(u=>mt(u).map(d=>Je(d)))
      , o = i.sort((u,d)=>u[0] - d[0])
      , s = [];
    let a = 0;
    e: for (let u = 0; u < o.length; u++) {
        const d = o[u];
        for (let f = u + 1; f < o.length; f++) {
            if (++a > M4)
                break e;
            const h = o[f]
              , [,m,g,E] = d
              , [v,y,,w] = h;
            g < v && a1([m, E], [y, w]) && s.push({
                startBounds: d,
                endBounds: h,
                startSide: [[g, m], [g, E]],
                endSide: [[v, y], [v, w]],
                length: v - g,
                overlap: l1([m, E], [y, w])
            })
        }
    }
    const l = i.sort((u,d)=>u[1] - d[1])
      , c = [];
    a = 0;
    e: for (let u = 0; u < l.length; u++) {
        const d = l[u];
        for (let f = u + 1; f < l.length; f++) {
            if (++a > M4)
                break e;
            const h = l[f]
              , [m,,g,E] = d
              , [v,y,w] = h;
            E < y && a1([m, g], [v, w]) && c.push({
                startBounds: d,
                endBounds: h,
                startSide: [[m, E], [g, E]],
                endSide: [[v, y], [w, y]],
                length: y - E,
                overlap: l1([m, g], [v, w])
            })
        }
    }
    return {
        horizontalGaps: s,
        verticalGaps: c
    }
}
  , A4 = (e,t,n,r,i,o,s)=>{
    if (!Qo({
        appState: n,
        event: r,
        selectedElements: e
    }))
        return [];
    if (e.length === 0)
        return [];
    const a = xr.getVisibleGaps();
    if (a) {
        const {horizontalGaps: l, verticalGaps: c} = a
          , [u,d,f,h] = $y(e, t).map(E=>Je(E))
          , m = (u + f) / 2
          , g = (d + h) / 2;
        for (const E of l) {
            if (!a1([d, h], E.overlap))
                continue;
            const v = E.startSide[0][0] + E.length / 2
              , y = Je(v - m);
            if (E.length > f - u && Math.abs(y) <= s.x) {
                Math.abs(y) < s.x && (i.length = 0),
                s.x = Math.abs(y);
                const A = {
                    type: "gap",
                    direction: "center_horizontal",
                    gap: E,
                    offset: y
                };
                i.push(A);
                continue
            }
            const [,,b] = E.endBounds
              , I = u - b
              , S = Je(E.length - I);
            if (Math.abs(S) <= s.x) {
                Math.abs(S) < s.x && (i.length = 0),
                s.x = Math.abs(S);
                const A = {
                    type: "gap",
                    direction: "side_right",
                    gap: E,
                    offset: S
                };
                i.push(A);
                continue
            }
            const [C,,,] = E.startBounds
              , T = C - f
              , L = Je(T - E.length);
            if (Math.abs(L) <= s.x) {
                Math.abs(L) < s.x && (i.length = 0),
                s.x = Math.abs(L);
                const A = {
                    type: "gap",
                    direction: "side_left",
                    gap: E,
                    offset: L
                };
                i.push(A);
                continue
            }
        }
        for (const E of c) {
            if (!a1([u, f], E.overlap))
                continue;
            const v = E.startSide[0][1] + E.length / 2
              , y = Je(v - g);
            if (E.length > h - d && Math.abs(y) <= s.y) {
                Math.abs(y) < s.y && (o.length = 0),
                s.y = Math.abs(y);
                const A = {
                    type: "gap",
                    direction: "center_vertical",
                    gap: E,
                    offset: y
                };
                o.push(A);
                continue
            }
            const [,b,,] = E.startBounds
              , I = b - h
              , S = Je(I - E.length);
            if (Math.abs(S) <= s.y) {
                Math.abs(S) < s.y && (o.length = 0),
                s.y = Math.abs(S);
                const A = {
                    type: "gap",
                    direction: "side_top",
                    gap: E,
                    offset: S
                };
                o.push(A);
                continue
            }
            const [,,,C] = E.endBounds
              , T = Je(d - C)
              , L = E.length - T;
            if (Math.abs(L) <= s.y) {
                Math.abs(L) < s.y && (o.length = 0),
                s.y = Math.abs(L);
                const A = {
                    type: "gap",
                    direction: "side_bottom",
                    gap: E,
                    offset: L
                };
                o.push(A);
                continue
            }
        }
    }
}
  , oY = (e,t,n)=>{
    const r = Uk(e, t, n);
    return q1(r).filter(i=>!(i.length === 1 && _t(i[0]))).flatMap(i=>sd(i))
}
  , kl = (e,t,n,r,i,o,s)=>{
    if (!Qo({
        appState: n,
        event: r,
        selectedElements: e
    }) || e.length === 0 && t.length === 0)
        return [];
    const a = xr.getReferenceSnapPoints();
    if (a)
        for (const l of t)
            for (const c of a) {
                const u = c[0] - l[0]
                  , d = c[1] - l[1];
                Math.abs(u) <= s.x && (Math.abs(u) < s.x && (i.length = 0),
                i.push({
                    type: "point",
                    points: [l, c],
                    offset: u
                }),
                s.x = Math.abs(u)),
                Math.abs(d) <= s.y && (Math.abs(d) < s.y && (o.length = 0),
                o.push({
                    type: "point",
                    points: [l, c],
                    offset: d
                }),
                s.y = Math.abs(d))
            }
}
  , sY = (e,t,n,r)=>{
    var h, m;
    if (!Qo({
        appState: n,
        event: r,
        selectedElements: e
    }) || e.length === 0)
        return {
            snapOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    t.x = Je(t.x),
    t.y = Je(t.y);
    const i = []
      , o = []
      , s = k0(n.zoom.value)
      , a = {
        x: s,
        y: s
    }
      , l = sd(e, {
        dragOffset: t
    });
    kl(e, l, n, r, i, o, a),
    A4(e, t, n, r, i, o, a);
    const c = {
        x: ((h = i[0]) == null ? void 0 : h.offset) ?? 0,
        y: ((m = o[0]) == null ? void 0 : m.offset) ?? 0
    };
    a.x = 0,
    a.y = 0,
    i.length = 0,
    o.length = 0;
    const u = {
        x: Je(t.x + c.x),
        y: Je(t.y + c.y)
    };
    kl(e, sd(e, {
        dragOffset: u
    }), n, r, i, o, a),
    A4(e, u, n, r, i, o, a);
    const d = u3(i, o)
      , f = lY(e, u, [...i, ...o].filter(g=>g.type === "gap"));
    return {
        snapOffset: c,
        snapLines: [...d, ...f]
    }
}
  , Je = e=>Math.round(e * 10 ** 6) / 10 ** 6
  , L4 = e=>{
    const t = new Map;
    for (const n of e) {
        const r = n.join(",");
        t.has(r) || t.set(r, n)
    }
    return Array.from(t.values())
}
  , u3 = (e,t)=>{
    const n = {}
      , r = {};
    if (e.length > 0) {
        for (const i of e)
            if (i.type === "point") {
                const o = Je(i.points[0][0]);
                n[o] || (n[o] = []),
                n[o].push(...i.points.map(s=>[Je(s[0]), Je(s[1])]))
            }
    }
    if (t.length > 0) {
        for (const i of t)
            if (i.type === "point") {
                const o = Je(i.points[0][1]);
                r[o] || (r[o] = []),
                r[o].push(...i.points.map(s=>[Je(s[0]), Je(s[1])]))
            }
    }
    return Object.entries(n).map(([i,o])=>({
        type: "points",
        points: L4(o.map(s=>[Number(i), s[1]]).sort((s,a)=>s[1] - a[1]))
    })).concat(Object.entries(r).map(([i,o])=>({
        type: "points",
        points: L4(o.map(s=>[s[0], Number(i)]).sort((s,a)=>s[0] - a[0]))
    })))
}
  , aY = e=>{
    const t = new Map;
    for (const n of e) {
        const r = n.points.flat().map(i=>[Je(i)]).join(",");
        t.has(r) || t.set(r, n)
    }
    return Array.from(t.values())
}
  , lY = (e,t,n)=>{
    const [r,i,o,s] = $y(e, t)
      , a = [];
    for (const l of n) {
        const [c,u,d,f] = l.gap.startBounds
          , [h,m,g,E] = l.gap.endBounds
          , v = l1([i, s], l.gap.overlap)
          , y = l1([r, o], l.gap.overlap);
        switch (l.direction) {
        case "center_horizontal":
            {
                if (v) {
                    const w = (v[0] + v[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "horizontal",
                        points: [[l.gap.startSide[0][0], w], [r, w]]
                    }, {
                        type: "gap",
                        direction: "horizontal",
                        points: [[o, w], [l.gap.endSide[0][0], w]]
                    })
                }
                break
            }
        case "center_vertical":
            {
                if (y) {
                    const w = (y[0] + y[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "vertical",
                        points: [[w, l.gap.startSide[0][1]], [w, i]]
                    }, {
                        type: "gap",
                        direction: "vertical",
                        points: [[w, s], [w, l.gap.endSide[0][1]]]
                    })
                }
                break
            }
        case "side_right":
            {
                if (v) {
                    const w = (v[0] + v[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "horizontal",
                        points: [[d, w], [h, w]]
                    }, {
                        type: "gap",
                        direction: "horizontal",
                        points: [[g, w], [r, w]]
                    })
                }
                break
            }
        case "side_left":
            {
                if (v) {
                    const w = (v[0] + v[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "horizontal",
                        points: [[o, w], [c, w]]
                    }, {
                        type: "gap",
                        direction: "horizontal",
                        points: [[d, w], [h, w]]
                    })
                }
                break
            }
        case "side_top":
            {
                if (y) {
                    const w = (y[0] + y[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "vertical",
                        points: [[w, s], [w, u]]
                    }, {
                        type: "gap",
                        direction: "vertical",
                        points: [[w, f], [w, m]]
                    })
                }
                break
            }
        case "side_bottom":
            {
                if (y) {
                    const w = (y[0] + y[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "vertical",
                        points: [[w, f], [w, m]]
                    }, {
                        type: "gap",
                        direction: "vertical",
                        points: [[w, E], [w, i]]
                    })
                }
                break
            }
        }
    }
    return aY(a.map(l=>({
        ...l,
        points: l.points.map(c=>[Je(c[0]), Je(c[1])])
    })))
}
  , cY = (e,t,n,r,i,o)=>{
    var S, C;
    if (!Qo({
        event: r,
        selectedElements: e,
        appState: n
    }) || e.length === 0 || e.length === 1 && !rY(e[0].angle, 0))
        return {
            snapOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    let[s,a,l,c] = mt(t);
    o && (o.includes("e") ? l += i.x : o.includes("w") && (s += i.x),
    o.includes("n") ? a += i.y : o.includes("s") && (c += i.y));
    const u = [];
    if (o)
        switch (o) {
        case "e":
            {
                u.push([l, a], [l, c]);
                break
            }
        case "w":
            {
                u.push([s, a], [s, c]);
                break
            }
        case "n":
            {
                u.push([s, a], [l, a]);
                break
            }
        case "s":
            {
                u.push([s, c], [l, c]);
                break
            }
        case "ne":
            {
                u.push([l, a]);
                break
            }
        case "nw":
            {
                u.push([s, a]);
                break
            }
        case "se":
            {
                u.push([l, c]);
                break
            }
        case "sw":
            {
                u.push([s, c]);
                break
            }
        }
    const d = k0(n.zoom.value)
      , f = {
        x: d,
        y: d
    }
      , h = []
      , m = [];
    kl(t, u, n, r, h, m, f);
    const g = {
        x: ((S = h[0]) == null ? void 0 : S.offset) ?? 0,
        y: ((C = m[0]) == null ? void 0 : C.offset) ?? 0
    };
    f.x = 0,
    f.y = 0,
    h.length = 0,
    m.length = 0;
    const [E,v,y,w] = mt(e).map(T=>Je(T));
    kl(e, [[E, v], [E, w], [y, v], [y, w]], n, r, h, m, f);
    const I = u3(h, m);
    return {
        snapOffset: g,
        snapLines: I
    }
}
  , uY = (e,t,n,r,i)=>{
    var h, m;
    if (!Qo({
        event: n,
        selectedElements: [e],
        appState: t
    }))
        return {
            snapOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    const o = [[r.x + i.x, r.y + i.y]]
      , s = k0(t.zoom.value)
      , a = {
        x: s,
        y: s
    }
      , l = []
      , c = [];
    kl([e], o, t, n, l, c, a);
    const u = {
        x: ((h = l[0]) == null ? void 0 : h.offset) ?? 0,
        y: ((m = c[0]) == null ? void 0 : m.offset) ?? 0
    };
    a.x = 0,
    a.y = 0,
    l.length = 0,
    c.length = 0;
    const d = sd([e], {
        boundingBoxCorners: !0,
        omitCenter: !0
    });
    kl([e], d, t, n, l, c, a);
    const f = u3(l, c);
    return {
        snapOffset: u,
        snapLines: f
    }
}
  , dY = (e,t,n,r)=>{
    if (!Qo({
        event: r,
        selectedElements: [],
        appState: t
    }))
        return {
            originOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    const i = SS(e, [], t)
      , o = k0(t.zoom.value)
      , s = {
        x: o,
        y: o
    }
      , a = []
      , l = [];
    for (const c of i) {
        const u = sd([c]);
        for (const d of u) {
            const f = d[0] - n.x;
            Math.abs(f) <= Math.abs(s.x) && (Math.abs(f) < Math.abs(s.x) && (l.length = 0),
            l.push({
                type: "pointer",
                points: [d, [d[0], n.y]],
                direction: "vertical"
            }),
            s.x = f);
            const h = d[1] - n.y;
            Math.abs(h) <= Math.abs(s.y) && (Math.abs(h) < Math.abs(s.y) && (a.length = 0),
            a.push({
                type: "pointer",
                points: [d, [n.x, d[1]]],
                direction: "horizontal"
            }),
            s.y = h)
        }
    }
    return {
        originOffset: {
            x: l.length > 0 ? l[0].points[0][0] - n.x : 0,
            y: a.length > 0 ? a[0].points[0][1] - n.y : 0
        },
        snapLines: [...l, ...a]
    }
}
  , fY = e=>e === "rectangle" || e === "ellipse" || e === "diamond" || e === "frame" || e === "image"
  , hY = ()=>k("div", {
    "data-testid": "brave-measure-text-error",
    children: [p("p", {
        children: p(Hn, {
            i18nKey: "errors.brave_measure_text_error.line1",
            bold: e=>p("span", {
                style: {
                    fontWeight: 600
                },
                children: e
            })
        })
    }), p("p", {
        children: p(Hn, {
            i18nKey: "errors.brave_measure_text_error.line2",
            bold: e=>p("span", {
                style: {
                    fontWeight: 600
                },
                children: e
            })
        })
    }), p("p", {
        children: p(Hn, {
            i18nKey: "errors.brave_measure_text_error.line3",
            link: e=>p("a", {
                href: "http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",
                children: e
            })
        })
    }), p("p", {
        children: p(Hn, {
            i18nKey: "errors.brave_measure_text_error.line4",
            issueLink: e=>p("a", {
                href: "https://github.com/excalidraw/excalidraw/issues/new",
                children: e
            }),
            discordLink: e=>k("a", {
                href: "https://discord.gg/UexuTaE",
                children: [e, "."]
            })
        })
    })]
})
  , kf = {
    width: 300,
    height: 0
}
  , ko = 100
  , pY = (e,t)=>{
    const n = Br({
        x: 0,
        y: 0,
        textAlign: Ru.CENTER,
        verticalAlign: Bn.MIDDLE,
        ...t,
        containerId: e.id,
        strokeColor: t.strokeColor || e.strokeColor
    });
    return Object.assign(e, {
        boundElements: (e.boundElements || []).concat({
            type: "text",
            id: n.id
        })
    }),
    mi(n, e),
    [e, n]
}
  , P4 = (e,t,n,r)=>{
    let i, o;
    if (Object.assign(e, {
        startBinding: (e == null ? void 0 : e.startBinding) || null,
        endBinding: e.endBinding || null
    }),
    t) {
        const s = (t == null ? void 0 : t.width) ?? ko
          , a = (t == null ? void 0 : t.height) ?? ko;
        let l;
        t.id && (l = r.getElement(t.id),
        l || console.error(`No element for start binding with id ${t.id} found`));
        const c = t.x || e.x - s
          , u = t.y || e.y - a / 2
          , d = l ? l.type : t.type;
        if (d) {
            if (d === "text") {
                let f = "";
                l && l.type === "text" ? f = l.text : t.type === "text" && (f = t.text),
                f || console.error(`No text found for start binding text element for ${e.id}`),
                i = Br({
                    x: c,
                    y: u,
                    type: "text",
                    ...l,
                    ...t,
                    text: f
                }),
                Object.assign(i, {
                    x: t.x || e.x - i.width,
                    y: t.y || e.y - i.height / 2
                })
            } else
                switch (d) {
                case "rectangle":
                case "ellipse":
                case "diamond":
                    {
                        i = Yo({
                            x: c,
                            y: u,
                            width: s,
                            height: a,
                            ...l,
                            ...t,
                            type: d
                        });
                        break
                    }
                default:
                    zh(e, `Unhandled element start type "${t.type}"`, !0)
                }
            Vu(e, i, "start")
        }
    }
    if (n) {
        const s = (n == null ? void 0 : n.height) ?? ko
          , a = (n == null ? void 0 : n.width) ?? ko;
        let l;
        n.id && (l = r.getElement(n.id),
        l || console.error(`No element for end binding with id ${n.id} found`));
        const c = n.x || e.x + e.width
          , u = n.y || e.y - s / 2
          , d = l ? l.type : n.type;
        if (d) {
            if (d === "text") {
                let f = "";
                l && l.type === "text" ? f = l.text : n.type === "text" && (f = n.text),
                f || console.error(`No text found for end binding text element for ${e.id}`),
                o = Br({
                    x: c,
                    y: u,
                    type: "text",
                    ...l,
                    ...n,
                    text: f
                }),
                Object.assign(o, {
                    y: n.y || e.y - o.height / 2
                })
            } else
                switch (d) {
                case "rectangle":
                case "ellipse":
                case "diamond":
                    {
                        o = Yo({
                            x: c,
                            y: u,
                            width: a,
                            height: s,
                            ...l,
                            ...n,
                            type: d
                        });
                        break
                    }
                default:
                    zh(e, `Unhandled element end type "${d}"`, !0)
                }
            Vu(e, o, "end")
        }
    }
    return {
        linearElement: e,
        startBoundElement: i,
        endBoundElement: o
    }
}
;
class mY {
    constructor() {
        M(this, "excalidrawElements", new Map);
        M(this, "add", t=>{
            t && this.excalidrawElements.set(t.id, t)
        }
        );
        M(this, "getElements", ()=>Array.from(this.excalidrawElements.values()));
        M(this, "getElement", t=>this.excalidrawElements.get(t))
    }
}
const gY = e=>{
    var r, i, o;
    if (!e)
        return [];
    const t = new mY
      , n = new Map;
    for (const s of e) {
        let a;
        switch (s.type) {
        case "rectangle":
        case "ellipse":
        case "diamond":
            {
                const c = (r = s == null ? void 0 : s.label) != null && r.text && s.width === void 0 ? 0 : (s == null ? void 0 : s.width) || ko
                  , u = (i = s == null ? void 0 : s.label) != null && i.text && s.height === void 0 ? 0 : (s == null ? void 0 : s.height) || ko;
                a = Yo({
                    ...s,
                    width: c,
                    height: u
                });
                break
            }
        case "line":
            {
                const c = s.width || kf.width
                  , u = s.height || kf.height;
                a = No({
                    width: c,
                    height: u,
                    points: [[0, 0], [c, u]],
                    ...s
                });
                break
            }
        case "arrow":
            {
                const c = s.width || kf.width
                  , u = s.height || kf.height;
                a = No({
                    width: c,
                    height: u,
                    endArrowhead: "arrow",
                    points: [[0, 0], [c, u]],
                    ...s
                });
                break
            }
        case "text":
            {
                const c = (s == null ? void 0 : s.fontFamily) || Xi
                  , u = (s == null ? void 0 : s.fontSize) || Ki
                  , d = (s == null ? void 0 : s.lineHeight) || ea(c)
                  , f = s.text ?? ""
                  , h = Ku(f)
                  , m = Yi(h, xt({
                    fontFamily: c,
                    fontSize: u
                }), d);
                a = Br({
                    width: m.width,
                    height: m.height,
                    fontFamily: c,
                    fontSize: u,
                    ...s
                });
                break
            }
        case "image":
            {
                a = i7({
                    width: (s == null ? void 0 : s.width) || ko,
                    height: (s == null ? void 0 : s.height) || ko,
                    ...s
                });
                break
            }
        case "freedraw":
        case "frame":
        case "embeddable":
            {
                a = s;
                break
            }
        default:
            a = s,
            zh(s, `Unhandled element type "${s.type}"`, !0)
        }
        t.getElement(a.id) ? console.error(`Duplicate id found for ${a.id}`) : (t.add(a),
        n.set(a.id, s))
    }
    for (const [s,a] of n) {
        const l = t.getElement(s);
        switch (a.type) {
        case "rectangle":
        case "ellipse":
        case "diamond":
        case "arrow":
            {
                if ((o = a.label) != null && o.text) {
                    let[c,u] = pY(l, a == null ? void 0 : a.label);
                    if (t.add(c),
                    t.add(u),
                    c.type === "arrow") {
                        const d = a.type === "arrow" ? a == null ? void 0 : a.start : void 0
                          , f = a.type === "arrow" ? a == null ? void 0 : a.end : void 0
                          , {linearElement: h, startBoundElement: m, endBoundElement: g} = P4(c, d, f, t);
                        c = h,
                        t.add(h),
                        t.add(m),
                        t.add(g)
                    }
                } else
                    switch (a.type) {
                    case "arrow":
                        {
                            const {linearElement: c, startBoundElement: u, endBoundElement: d} = P4(l, a.start, a.end, t);
                            t.add(c),
                            t.add(u),
                            t.add(d);
                            break
                        }
                    }
                break
            }
        }
    }
    return t.getElements()
}
  , vY = e=>{
    const t = x.useRef(!1);
    return x.useEffect(()=>{
        var l;
        if (!t.current) {
            t.current = !0;
            return
        }
        const n = {}
          , r = {}
          , i = {}
          , o = {}
          , s = {};
        e.appState.collaborators.forEach((c,u)=>{
            if (c.selectedElementIds)
                for (const d of Object.keys(c.selectedElementIds))
                    d in i || (i[d] = []),
                    i[d].push(u);
            c.pointer && (c.username && (o[u] = c.username),
            c.userState && (s[u] = c.userState),
            r[u] = Cr({
                sceneX: c.pointer.x,
                sceneY: c.pointer.y
            }, e.appState),
            n[u] = c.button)
        }
        );
        const a = ((l = e.containerRef) == null ? void 0 : l.current) && getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection") || "#6965db";
        WD({
            canvas: e.canvas,
            elements: e.elements,
            visibleElements: e.visibleElements,
            selectedElements: e.selectedElements,
            scale: window.devicePixelRatio,
            appState: e.appState,
            renderConfig: {
                remotePointerViewportCoords: r,
                remotePointerButton: n,
                remoteSelectedElementIds: i,
                remotePointerUsernames: o,
                remotePointerUserStates: s,
                selectionColor: a,
                renderScrollbars: !1
            },
            callback: e.renderInteractiveSceneCallback
        }, Ax())
    }
    ),
    p("canvas", {
        className: "excalidraw__canvas interactive",
        style: {
            width: e.appState.width,
            height: e.appState.height,
            cursor: e.appState.viewModeEnabled ? De.GRAB : De.AUTO
        },
        width: e.appState.width * e.scale,
        height: e.appState.height * e.scale,
        ref: e.handleCanvasRef,
        onContextMenu: e.onContextMenu,
        onPointerMove: e.onPointerMove,
        onPointerUp: e.onPointerUp,
        onPointerCancel: e.onPointerCancel,
        onTouchMove: e.onTouchMove,
        onPointerDown: e.onPointerDown,
        onDoubleClick: e.appState.viewModeEnabled ? void 0 : e.onDoubleClick,
        children: _("labels.drawingCanvas")
    })
}
  , R4 = e=>({
    zoom: e.zoom,
    scrollX: e.scrollX,
    scrollY: e.scrollY,
    width: e.width,
    height: e.height,
    viewModeEnabled: e.viewModeEnabled,
    editingGroupId: e.editingGroupId,
    editingLinearElement: e.editingLinearElement,
    selectedElementIds: e.selectedElementIds,
    frameToHighlight: e.frameToHighlight,
    offsetLeft: e.offsetLeft,
    offsetTop: e.offsetTop,
    theme: e.theme,
    pendingImageElementId: e.pendingImageElementId,
    selectionElement: e.selectionElement,
    selectedGroupIds: e.selectedGroupIds,
    selectedLinearElement: e.selectedLinearElement,
    multiElement: e.multiElement,
    isBindingEnabled: e.isBindingEnabled,
    suggestedBindings: e.suggestedBindings,
    isRotating: e.isRotating,
    elementsToHighlight: e.elementsToHighlight,
    openSidebar: e.openSidebar,
    showHyperlinkPopup: e.showHyperlinkPopup,
    collaborators: e.collaborators,
    activeEmbeddable: e.activeEmbeddable,
    snapLines: e.snapLines,
    zenModeEnabled: e.zenModeEnabled
})
  , yY = (e,t)=>e.selectionNonce !== t.selectionNonce || e.versionNonce !== t.versionNonce || e.scale !== t.scale || e.elements !== t.elements || e.visibleElements !== t.visibleElements || e.selectedElements !== t.selectedElements ? !1 : Tr(R4(e.appState), R4(t.appState))
  , EY = ee.memo(vY, yY)
  , wY = e=>{
    const t = x.useRef(null)
      , n = x.useRef(!1);
    return x.useEffect(()=>{
        const r = t.current;
        if (!r)
            return;
        const i = e.canvas;
        n.current || (n.current = !0,
        r.replaceChildren(i),
        i.classList.add("excalidraw__canvas", "static"));
        const o = `${e.appState.width}px`
          , s = `${e.appState.height}px`;
        i.style.width !== o && (i.style.width = o),
        i.style.height !== s && (i.style.height = s);
        const a = e.appState.width * e.scale
          , l = e.appState.height * e.scale;
        i.width !== a && (i.width = a),
        i.height !== l && (i.height = l),
        A7({
            canvas: i,
            rc: e.rc,
            scale: e.scale,
            elements: e.elements,
            visibleElements: e.visibleElements,
            appState: e.appState,
            renderConfig: e.renderConfig
        }, Ax())
    }
    ),
    p("div", {
        className: "excalidraw__canvas-wrapper",
        ref: t
    })
}
  , O4 = e=>({
    zoom: e.zoom,
    scrollX: e.scrollX,
    scrollY: e.scrollY,
    width: e.width,
    height: e.height,
    viewModeEnabled: e.viewModeEnabled,
    offsetLeft: e.offsetLeft,
    offsetTop: e.offsetTop,
    theme: e.theme,
    pendingImageElementId: e.pendingImageElementId,
    shouldCacheIgnoreZoom: e.shouldCacheIgnoreZoom,
    viewBackgroundColor: e.viewBackgroundColor,
    exportScale: e.exportScale,
    selectedElementsAreBeingDragged: e.selectedElementsAreBeingDragged,
    gridSize: e.gridSize,
    frameRendering: e.frameRendering,
    selectedElementIds: e.selectedElementIds,
    frameToHighlight: e.frameToHighlight,
    editingGroupId: e.editingGroupId
})
  , bY = (e,t)=>e.versionNonce !== t.versionNonce || e.scale !== t.scale || e.elements !== t.elements || e.visibleElements !== t.visibleElements ? !1 : Tr(O4(e.appState), O4(t.appState)) && Tr(e.renderConfig, t.renderConfig)
  , _Y = ee.memo(wY, bY);
class D4 {
    constructor(t) {
        M(this, "scene");
        M(this, "getRenderableElements", (()=>{
            const t = ({elements: r, zoom: i, offsetLeft: o, offsetTop: s, scrollX: a, scrollY: l, height: c, width: u})=>r.filter(d=>c1(d, u, c, {
                zoom: i,
                offsetLeft: o,
                offsetTop: s,
                scrollX: a,
                scrollY: l
            }))
              , n = ({editingElement: r, elements: i, pendingImageElementId: o})=>i.filter(s=>Ni(s) && o === s.id ? !1 : !r || r.type !== "text" || s.id !== r.id);
            return JL(({zoom: r, offsetLeft: i, offsetTop: o, scrollX: s, scrollY: a, height: l, width: c, editingElement: u, pendingImageElementId: d, versionNonce: f})=>{
                const h = this.scene.getNonDeletedElements()
                  , m = n({
                    elements: h,
                    editingElement: u,
                    pendingImageElementId: d
                })
                  , g = t({
                    elements: m,
                    zoom: r,
                    offsetLeft: i,
                    offsetTop: o,
                    scrollX: s,
                    scrollY: a,
                    height: l,
                    width: c
                });
                return {
                    canvasElements: m,
                    visibleElements: g
                }
            }
            )
        }
        )());
        this.scene = t
    }
    destroy() {
        GD(),
        this.getRenderableElements.clear()
    }
}
const xY = ({manager: e})=>{
    const t = x.useRef(null);
    return x.useEffect(()=>(t.current && e.start(t.current),
    ()=>{
        e.stop()
    }
    ), [e]),
    p("div", {
        className: "LaserToolOverlay",
        children: p("svg", {
            ref: t,
            className: "LaserToolOverlayCanvas"
        })
    })
}
;
function IY(e, t, n, r) {
    Object.defineProperty(e, t, {
        get: n,
        set: r,
        enumerable: !0,
        configurable: !0
    })
}
var SY = {};
IY(SY, "LaserPointer", ()=>ad);
function Et([e,t,n], [r,i,o]) {
    return [e + r, t + i, n + o]
}
function Nc([e,t,n], [r,i,o]) {
    return [e - r, t - i, n - o]
}
function Dt([e,t,n], r) {
    return [e * r, t * r, n * r]
}
function Ia([e,t,n]) {
    return [e / Math.sqrt(e ** 2 + t ** 2), t / Math.sqrt(e ** 2 + t ** 2), n]
}
function hn([e,t,n], r) {
    return [Math.cos(r) * e - Math.sin(r) * t, Math.sin(r) * e + Math.cos(r) * t, n]
}
function CY(e, t, n) {
    return Et(e, Dt(Nc(t, e), n))
}
function N4(e, t, n) {
    return Math.atan2(n[1] - e[1], n[0] - e[0]) - Math.atan2(t[1] - e[1], t[0] - e[0])
}
function F4(e) {
    return Math.atan2(Math.sin(e), Math.cos(e))
}
function $4([e,t]) {
    return Math.sqrt(e ** 2 + t ** 2)
}
function ll([e,t], [n,r]) {
    return Math.sqrt((n - e) ** 2 + (r - t) ** 2)
}
function kY(e) {
    if (e.length < 2)
        return 0;
    let t = 0;
    for (let n = 1; n <= e.length - 1; n++)
        t += ll(e[n - 1], e[n]);
    return t += ll(e[e.length - 2], e[e.length - 1]),
    t
}
const TY = (e,t,n)=>Math.max(t, Math.min(n, e));
function MY(e, t, n) {
    const r = ll(t, n);
    if (r === 0)
        return ll(e, t);
    const i = TY(((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / r ** 2, 0, 1)
      , o = [t[0] + i * (n[0] - t[0]), t[1] + i * (n[1] - t[1]), e[2]];
    return ll(o, e)
}
function v1(e, t) {
    if (t === 0 || e.length <= 2)
        return e;
    const n = e[0]
      , r = e[e.length - 1]
      , [i,o] = e.reduce(([s,a],l,c)=>{
        const u = MY(l, n, r);
        return u > s ? [u, c] : [s, a]
    }
    , [0, -1]);
    if (i >= t) {
        const s = e[o];
        return [...v1([n, ...e.slice(1, o), s], t).slice(0, -1), s, ...v1([s, ...e.slice(o, -1), r], t).slice(1)]
    } else
        return [n, r]
}
var P2, R2;
const Jr = class Jr {
    constructor(t) {
        this.originalPoints = [],
        this.stablePoints = [],
        this.tailPoints = [],
        this.isFresh = !0,
        this.options = Object.assign({}, Jr.defaults, t)
    }
    get lastPoint() {
        return this.tailPoints[this.tailPoints.length - 1] ?? this.stablePoints[this.stablePoints.length - 1]
    }
    addPoint(t) {
        const n = this.originalPoints[this.originalPoints.length - 1];
        if (!(n && n[0] === t[0] && n[1] === t[1])) {
            if (this.originalPoints.push(t),
            this.isFresh) {
                this.isFresh = !1,
                this.stablePoints.push(t);
                return
            }
            this.options.streamline > 0 && (t = CY(this.lastPoint, t, 1 - this.options.streamline)),
            this.tailPoints.push(t),
            kY(this.tailPoints) > Jr.constants.maxTailLength && this.stabilizeTail()
        }
    }
    close() {
        this.stabilizeTail()
    }
    stabilizeTail() {
        if (this.options.simplify > 0 && this.options.simplifyPhase == "tail")
            throw new Error("Not implemented yet");
        this.stablePoints.push(...this.tailPoints),
        this.tailPoints = []
    }
    getSize(t, n, r, i, o) {
        return (t ?? this.options.size) * this.options.sizeMapping({
            pressure: n,
            runningLength: o,
            currentIndex: r,
            totalLength: i
        })
    }
    getStrokeOutline(t) {
        if (this.isFresh)
            return [];
        let n = [...this.stablePoints, ...this.tailPoints];
        this.options.simplify > 0 && this.options.simplifyPhase === "input" && (n = v1(n, this.options.simplify));
        const r = n.length;
        if (r === 0)
            return [];
        if (r === 1) {
            const C = n[0]
              , T = [];
            for (let L = 0; L <= Math.PI * 2; L += Math.PI / 16)
                T.push(Et(C, Dt(hn([1, 0, 0], L), this.getSize(t, C[2], 0, r, 0))));
            return T.push(Et(C, Dt([1, 0, 0], this.getSize(t, C[2], 0, r, 0)))),
            T
        }
        if (r === 2) {
            const C = n[0]
              , T = n[1]
              , L = []
              , A = N4(C, [C[0], C[1] - 100, C[2]], T);
            for (let P = A; P <= Math.PI + A; P += Math.PI / 16)
                L.push(Et(C, Dt(hn([1, 0, 0], P), this.getSize(t, C[2], 0, r, 0))));
            for (let P = Math.PI + A; P <= Math.PI * 2 + A; P += Math.PI / 16)
                L.push(Et(T, Dt(hn([1, 0, 0], P), this.getSize(t, T[2], 0, r, 0))));
            return L.push(L[0]),
            L
        }
        const i = []
          , o = [];
        let s = 0
          , a = 0
          , l = 0
          , c = 0;
        for (let C = 1; C < r - 1; C++) {
            const T = n[C - 1]
              , L = n[C]
              , A = n[C + 1];
            let P = L[2];
            const O = ll(T, L);
            c += O,
            s = a + (O - a) * .2;
            const N = this.getSize(t, P, C, r, c);
            if (N === 0) {
                l = C + 1;
                continue
            }
            const $ = Ia(Nc(T, L))
              , V = Ia(Nc(A, L))
              , te = hn($, Math.PI / 2)
              , Z = hn($, -Math.PI / 2)
              , z = hn(V, Math.PI / 2)
              , W = hn(V, -Math.PI / 2)
              , D = Et(L, Dt(te, N))
              , F = Et(L, Dt(Z, N))
              , B = Et(L, Dt(z, N))
              , Y = Et(L, Dt(W, N))
              , G = Et(te, W)
              , K = Et(Z, z)
              , q = Et(L, Dt($4(G) === 0 ? $ : Ia(G), N))
              , oe = Et(L, Dt($4(K) === 0 ? V : Ia(K), N))
              , $e = F4(N4(L, T, A))
              , Ie = Jr.constants.cornerDetectionMaxAngle / 180 * Math.PI * Jr.constants.cornerDetectionVariance(s);
            if (Math.abs($e) < Ie) {
                const Se = Math.abs(F4(Math.PI - $e));
                if (Se === 0)
                    continue;
                if ($e < 0) {
                    o.push(F, oe);
                    for (let Ce = 0; Ce <= Se; Ce += Se / 4)
                        i.push(Et(L, hn(Dt(te, N), Ce)));
                    for (let Ce = Se; Ce >= 0; Ce -= Se / 4)
                        o.push(Et(L, hn(Dt(te, N), Ce)));
                    o.push(oe, B)
                } else {
                    i.push(D, q);
                    for (let Ce = 0; Ce <= Se; Ce += Se / 4)
                        o.push(Et(L, hn(Dt(te, -N), -Ce)));
                    for (let Ce = Se; Ce >= 0; Ce -= Se / 4)
                        i.push(Et(L, hn(Dt(te, -N), -Ce)));
                    i.push(q, Y)
                }
            } else
                i.push(q),
                o.push(oe);
            a = s
        }
        const u = n[l]
          , d = n[l + 1]
          , f = n[r - 2]
          , h = n[r - 1];
        if (l >= r - 2)
            return [];
        const m = Ia(Nc(d, u))
          , g = Ia(Nc(f, h))
          , E = hn(m, -Math.PI / 2)
          , v = hn(g, Math.PI / 2)
          , y = this.getSize(t, u[2], 0, r, 0)
          , w = []
          , b = this.getSize(t, f[2], r - 2, r, c)
          , I = [];
        for (let C = 0; C <= Math.PI; C += Math.PI / 16)
            w.unshift(Et(u, hn(Dt(E, y), -C)));
        w.unshift(Et(u, Dt(E, -y)));
        for (let C = 0; C <= Math.PI; C += Math.PI / 16)
            I.push(Et(h, hn(Dt(v, -b), -C)));
        const S = [...w, ...i, ...I.reverse(), ...o.reverse()];
        return w.length > 0 && S.push(w[0]),
        this.options.simplify > 0 && this.options.simplifyPhase === "output" ? v1(S, this.options.simplify) : S
    }
}
;
P2 = new WeakMap,
R2 = new WeakMap,
D0(Jr, P2, (()=>{
    Jr.defaults = {
        size: 2,
        streamline: .45,
        simplify: .1,
        simplifyPhase: "output",
        sizeMapping: ()=>1
    }
}
)()),
D0(Jr, R2, (()=>{
    Jr.constants = {
        cornerDetectionMaxAngle: 120,
        cornerDetectionVariance: t=>t > 35 ? .5 : 1,
        maxTailLength: 50
    }
}
)());
let ad = Jr;
const y2 = 1e3
  , AY = 50
  , Tf = (e,t)=>(e + t) / 2;
function LY(e, t=!0) {
    const n = e.length;
    if (n < 4)
        return "";
    let r = e[0]
      , i = e[1];
    const o = e[2];
    let s = `M ${r[0].toFixed(2)},${r[1].toFixed(2)} Q ${i[0].toFixed(2)},${i[1].toFixed(2)} ${Tf(i[0], o[0]).toFixed(2)},${Tf(i[1], o[1]).toFixed(2)} T`;
    for (let a = 2, l = n - 1; a < l; a++)
        r = e[a],
        i = e[a + 1],
        s += `${Tf(r[0], i[0]).toFixed(2)},${Tf(r[1], i[1]).toFixed(2)} `;
    return t && (s += "Z"),
    s
}
function B4(e) {
    return 1 - Math.pow(1 - e, 3)
}
function Jp() {
    return {
        currentPath: void 0,
        finishedPaths: [],
        lastPoint: [-1e4, -1e4],
        svg: document.createElementNS("http://www.w3.org/2000/svg", "path")
    }
}
function z4() {
    return ad.constants.cornerDetectionMaxAngle = 70,
    new ad({
        simplify: 0,
        streamline: .4,
        sizeMapping: e=>{
            const t = y2
              , n = AY
              , r = Math.max(0, 1 - (performance.now() - e.pressure) / t)
              , i = (n - Math.min(n, e.totalLength - e.currentIndex)) / n;
            return Math.min(B4(i), B4(r))
        }
    })
}
class PY {
    constructor(t) {
        M(this, "ownState");
        M(this, "collaboratorsState", new Map);
        M(this, "rafId");
        M(this, "isDrawing", !1);
        M(this, "container");
        M(this, "isRunning", !1);
        this.app = t,
        this.ownState = Jp()
    }
    destroy() {
        this.stop(),
        this.isDrawing = !1,
        this.ownState = Jp(),
        this.collaboratorsState = new Map
    }
    startPath(t, n) {
        this.ownState.currentPath = z4(),
        this.ownState.currentPath.addPoint([t, n, performance.now()]),
        this.updatePath(this.ownState)
    }
    addPointToPath(t, n) {
        var r;
        this.ownState.currentPath && ((r = this.ownState.currentPath) == null || r.addPoint([t, n, performance.now()]),
        this.updatePath(this.ownState))
    }
    endPath() {
        this.ownState.currentPath && (this.ownState.currentPath.close(),
        this.ownState.finishedPaths.push(this.ownState.currentPath),
        this.updatePath(this.ownState))
    }
    updatePath(t) {
        this.isDrawing = !0,
        this.isRunning || this.start()
    }
    start(t) {
        t && (this.container = t,
        this.container.appendChild(this.ownState.svg)),
        this.stop(),
        this.isRunning = !0,
        this.loop()
    }
    stop() {
        this.isRunning = !1,
        this.rafId && cancelAnimationFrame(this.rafId),
        this.rafId = void 0
    }
    loop() {
        this.rafId = requestAnimationFrame(this.loop.bind(this)),
        this.updateCollabolatorsState(),
        this.isDrawing ? this.update() : this.isRunning = !1
    }
    draw(t) {
        const n = t.getStrokeOutline(t.options.size / this.app.state.zoom.value).map(([r,i])=>{
            const o = Cr({
                sceneX: r,
                sceneY: i
            }, this.app.state);
            return [o.x, o.y]
        }
        );
        return LY(n, !0)
    }
    updateCollabolatorsState() {
        if (!(!this.container || !this.app.state.collaborators.size))
            for (const [t,n] of this.app.state.collaborators.entries()) {
                if (!this.collaboratorsState.has(t)) {
                    const i = Jp();
                    this.container.appendChild(i.svg),
                    this.collaboratorsState.set(t, i),
                    this.updatePath(i)
                }
                const r = this.collaboratorsState.get(t);
                n.pointer && n.pointer.tool === "laser" && (n.button === "down" && r.currentPath === void 0 && (r.lastPoint = [n.pointer.x, n.pointer.y],
                r.currentPath = z4(),
                r.currentPath.addPoint([n.pointer.x, n.pointer.y, performance.now()]),
                this.updatePath(r)),
                n.button === "down" && r.currentPath !== void 0 && (n.pointer.x !== r.lastPoint[0] || n.pointer.y !== r.lastPoint[1]) && (r.lastPoint = [n.pointer.x, n.pointer.y],
                r.currentPath.addPoint([n.pointer.x, n.pointer.y, performance.now()]),
                this.updatePath(r)),
                n.button === "up" && r.currentPath !== void 0 && (r.lastPoint = [n.pointer.x, n.pointer.y],
                r.currentPath.addPoint([n.pointer.x, n.pointer.y, performance.now()]),
                r.currentPath.close(),
                r.finishedPaths.push(r.currentPath),
                r.currentPath = void 0,
                this.updatePath(r)))
            }
    }
    update() {
        if (!this.container)
            return;
        let t = !1;
        for (const [r,i] of this.collaboratorsState.entries()) {
            if (!this.app.state.collaborators.has(r)) {
                i.svg.remove(),
                this.collaboratorsState.delete(r);
                continue
            }
            i.finishedPaths = i.finishedPaths.filter(s=>{
                const a = s.originalPoints[s.originalPoints.length - 1];
                return !(a && a[2] < performance.now() - y2)
            }
            );
            let o = i.finishedPaths.map(s=>this.draw(s)).join(" ");
            i.currentPath && (o += ` ${this.draw(i.currentPath)}`),
            o.trim() && (t = !0),
            i.svg.setAttribute("d", o),
            i.svg.setAttribute("fill", Gh(r))
        }
        this.ownState.finishedPaths = this.ownState.finishedPaths.filter(r=>{
            const i = r.originalPoints[r.originalPoints.length - 1];
            return !(i && i[2] < performance.now() - y2)
        }
        );
        let n = this.ownState.finishedPaths.map(r=>this.draw(r)).join(" ");
        this.ownState.currentPath && (n += ` ${this.draw(this.ownState.currentPath)}`),
        n = n.trim(),
        n && (t = !0),
        this.ownState.svg.setAttribute("d", n),
        this.ownState.svg.setAttribute("fill", "red"),
        t || (this.isDrawing = !1)
    }
}
const Vk = ee.createContext(null)
  , Wk = ee.createContext(null)
  , Gk = {
    isSmScreen: !1,
    isMobile: !1,
    isTouchScreen: !1,
    canDeviceFitSidebar: !1,
    isLandscape: !1
}
  , d3 = ee.createContext(Gk);
d3.displayName = "DeviceContext";
const f3 = ee.createContext({
    container: null,
    id: null
});
f3.displayName = "ExcalidrawContainerContext";
const h3 = ee.createContext([]);
h3.displayName = "ExcalidrawElementsContext";
const p3 = ee.createContext({
    ...di(),
    width: 0,
    height: 0,
    offsetLeft: 0,
    offsetTop: 0
});
p3.displayName = "ExcalidrawAppStateContext";
const m3 = ee.createContext(()=>{
    console.warn("unitialized ExcalidrawSetAppStateContext context!")
}
);
m3.displayName = "ExcalidrawSetAppStateContext";
const g3 = ee.createContext(null);
g3.displayName = "ExcalidrawActionManagerContext";
const T0 = ()=>x.useContext(Vk)
  , M0 = ()=>x.useContext(Wk)
  , Xt = ()=>x.useContext(d3)
  , eo = ()=>x.useContext(f3)
  , A0 = ()=>x.useContext(h3)
  , jk = ()=>x.useContext(p3)
  , Xn = ()=>x.useContext(m3)
  , pr = ()=>x.useContext(g3);
let bc = !1
  , em = 0
  , as = !1
  , _c = !1
  , tm = !1
  , nm = {
    horizontal: null,
    vertical: null
}
  , ro = 0
  , xc = !1;
const rm = new Map;
let im = !1
  , H4 = 0
  , U4 = !1
  , io = null;
const ke = {
    pointers: new Map,
    lastCenter: null,
    initialDistance: null,
    initialScale: null
}
  , C1 = class C1 extends ee.Component {
    constructor(n) {
        var d;
        super(n);
        M(this, "canvas");
        M(this, "interactiveCanvas", null);
        M(this, "rc");
        M(this, "unmounted", !1);
        M(this, "actionManager");
        M(this, "device", Gk);
        M(this, "detachIsMobileMqHandler");
        M(this, "excalidrawContainerRef", ee.createRef());
        M(this, "scene");
        M(this, "renderer");
        M(this, "fonts");
        M(this, "resizeObserver");
        M(this, "nearestScrollableContainer");
        M(this, "library");
        M(this, "libraryItemsFromStorage");
        M(this, "id");
        M(this, "history");
        M(this, "excalidrawContainerValue");
        M(this, "files", {});
        M(this, "imageCache", new Map);
        M(this, "iFrameRefs", new Map);
        M(this, "hitLinkElement");
        M(this, "lastPointerDownEvent", null);
        M(this, "lastPointerUpEvent", null);
        M(this, "lastViewportPosition", {
            x: 0,
            y: 0
        });
        M(this, "laserPathManager", new PY(this));
        M(this, "updateEmbeddables", ()=>{
            const n = new Map;
            let r = !1;
            this.scene.getNonDeletedElements().filter(i=>{
                if (ht(i) && (n.set(i.id, !0),
                i.validated == null)) {
                    r = !0;
                    const o = qf(i.link, this.props.validateEmbeddable);
                    Q(i, {
                        validated: o
                    }, !1),
                    We.delete(i)
                }
                return !1
            }
            ),
            r && this.scene.informMutation(),
            this.iFrameRefs.forEach((i,o)=>{
                n.has(o) || this.iFrameRefs.delete(o)
            }
            )
        }
        );
        M(this, "getFrameNameDOMId", n=>`${this.id}-frame-name-${n.id}`);
        M(this, "frameNameBoundsCache", {
            get: n=>{
                let r = this.frameNameBoundsCache._cache.get(n.id);
                if (!r || r.zoom !== this.state.zoom.value || r.versionNonce !== n.versionNonce) {
                    const i = document.getElementById(this.getFrameNameDOMId(n));
                    if (i) {
                        const o = i.getBoundingClientRect()
                          , s = Ke({
                            clientX: o.x,
                            clientY: o.y
                        }, this.state)
                          , a = Ke({
                            clientX: o.right,
                            clientY: o.bottom
                        }, this.state);
                        return r = {
                            x: s.x,
                            y: s.y,
                            width: a.x - s.x,
                            height: a.y - s.y,
                            angle: 0,
                            zoom: this.state.zoom.value,
                            versionNonce: n.versionNonce
                        },
                        this.frameNameBoundsCache._cache.set(n.id, r),
                        r
                    }
                    return null
                }
                return r
            }
            ,
            _cache: new Map
        });
        M(this, "renderFrameNames", ()=>{
            if (!this.state.frameRendering.enabled || !this.state.frameRendering.name)
                return null;
            const n = this.state.theme === "dark";
            return this.scene.getNonDeletedFrames().map((r,i)=>{
                if (!c1(r, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, {
                    offsetLeft: this.state.offsetLeft,
                    offsetTop: this.state.offsetTop,
                    scrollX: this.state.scrollX,
                    scrollY: this.state.scrollY,
                    zoom: this.state.zoom
                }))
                    return null;
                const {x: o, y: s} = Cr({
                    sceneX: r.x,
                    sceneY: r.y
                }, this.state)
                  , {x: a} = Cr({
                    sceneX: r.x + r.width,
                    sceneY: r.y + r.height
                }, this.state)
                  , l = 20
                  , c = 6
                  , u = ()=>{
                    var f;
                    ((f = r.name) == null ? void 0 : f.trim()) === "" && Q(r, {
                        name: null
                    }),
                    this.setState({
                        editingFrame: null
                    })
                }
                ;
                let d;
                if (r.id === this.state.editingFrame) {
                    const f = r.name == null ? `Frame ${i + 1}` : r.name;
                    d = p("input", {
                        autoFocus: !0,
                        value: f,
                        onChange: h=>{
                            Q(r, {
                                name: h.target.value
                            })
                        }
                        ,
                        onBlur: ()=>u(),
                        onKeyDown: h=>{
                            (h.key === R.ESCAPE || h.key === R.ENTER) && u()
                        }
                        ,
                        style: {
                            background: this.state.viewBackgroundColor,
                            filter: n ? Rv : "none",
                            zIndex: 2,
                            border: "none",
                            display: "block",
                            padding: `${c}px`,
                            borderRadius: 4,
                            boxShadow: "inset 0 0 0 1px var(--color-primary)",
                            fontFamily: "Assistant",
                            fontSize: "14px",
                            transform: `translateY(-${c}px)`,
                            color: "var(--color-gray-80)",
                            overflow: "hidden",
                            maxWidth: `${Math.min(a - o - c, document.body.clientWidth - o - c)}px`
                        },
                        size: f.length + 1 || 1,
                        dir: "auto",
                        autoComplete: "off",
                        autoCapitalize: "off",
                        autoCorrect: "off"
                    })
                } else
                    d = r.name == null || r.name.trim() === "" ? `Frame ${i + 1}` : r.name.trim();
                return p("div", {
                    id: this.getFrameNameDOMId(r),
                    style: {
                        position: "absolute",
                        top: `${s - l - this.state.offsetTop}px`,
                        left: `${o - this.state.offsetLeft - (this.state.editingFrame === r.id ? c : 0)}px`,
                        zIndex: 2,
                        fontSize: "14px",
                        color: n ? "var(--color-gray-60)" : "var(--color-gray-50)",
                        width: "max-content",
                        maxWidth: `${a - o + c * 2}px`,
                        overflow: r.id === this.state.editingFrame ? "visible" : "hidden",
                        whiteSpace: "nowrap",
                        textOverflow: "ellipsis",
                        cursor: De.MOVE,
                        pointerEvents: this.state.viewModeEnabled ? ds.disabled : ds.enabled
                    },
                    onPointerDown: f=>this.handleCanvasPointerDown(f),
                    onWheel: f=>this.handleWheel(f),
                    onContextMenu: this.handleCanvasContextMenu,
                    onDoubleClick: ()=>{
                        this.setState({
                            editingFrame: r.id
                        })
                    }
                    ,
                    children: d
                }, r.id)
            }
            )
        }
        );
        M(this, "focusContainer", ()=>{
            var n;
            (n = this.excalidrawContainerRef.current) == null || n.focus()
        }
        );
        M(this, "getSceneElementsIncludingDeleted", ()=>this.scene.getElementsIncludingDeleted());
        M(this, "getSceneElements", ()=>this.scene.getNonDeletedElements());
        M(this, "onInsertElements", n=>{
            this.addElementsFromPasteOrLibrary({
                elements: n,
                position: "center",
                files: null
            })
        }
        );
        M(this, "onExportImage", async(n,r)=>{
            nt("export", n, "ui");
            const i = await E0(n, r, this.state, this.files, {
                exportBackground: this.state.exportBackground,
                name: this.state.name,
                viewBackgroundColor: this.state.viewBackgroundColor
            }).catch(Sx).catch(o=>{
                console.error(o),
                this.setState({
                    errorMessage: o.message
                })
            }
            );
            this.state.exportEmbedScene && i && My(i) && this.setState({
                fileHandle: i
            })
        }
        );
        M(this, "openEyeDropper", ({type: n})=>{
            Di.set(u0, {
                swapPreviewOnAlt: !0,
                colorPickerType: n === "stroke" ? "elementStroke" : "elementBackground",
                onSelect: (r,i)=>{
                    const o = n === "background" && i.altKey || n === "stroke" && !i.altKey;
                    !this.scene.getSelectedElements(this.state).length || this.state.activeTool.type !== "selection" ? o ? this.syncActionResult({
                        appState: {
                            ...this.state,
                            currentItemStrokeColor: r
                        },
                        commitToHistory: !0
                    }) : this.syncActionResult({
                        appState: {
                            ...this.state,
                            currentItemBackgroundColor: r
                        },
                        commitToHistory: !0
                    }) : this.updateScene({
                        elements: this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id] ? fe(a, {
                            [o ? "strokeColor" : "backgroundColor"]: r
                        }) : a)
                    })
                }
                ,
                keepOpenOnAlt: !1
            })
        }
        );
        M(this, "syncActionResult", Ze(n=>{
            var i, o, s, a, l, c, u;
            if (this.unmounted || n === !1)
                return;
            let r = null;
            if (n.elements && (n.elements.forEach(d=>{
                var f;
                ((f = this.state.editingElement) == null ? void 0 : f.id) === d.id && this.state.editingElement !== d && e2(d) && (r = d)
            }
            ),
            this.scene.replaceAllElements(n.elements),
            n.commitToHistory && this.history.resumeRecording()),
            n.files && (this.files = n.replaceFiles ? n.files : {
                ...this.files,
                ...n.files
            },
            this.addNewImagesToImageCache()),
            n.appState || r || this.state.contextMenu) {
                n.commitToHistory && this.history.resumeRecording();
                let d = ((i = n == null ? void 0 : n.appState) == null ? void 0 : i.viewModeEnabled) || !1
                  , f = ((o = n == null ? void 0 : n.appState) == null ? void 0 : o.zenModeEnabled) || !1
                  , h = ((s = n == null ? void 0 : n.appState) == null ? void 0 : s.gridSize) || null;
                const m = ((a = n == null ? void 0 : n.appState) == null ? void 0 : a.theme) || this.props.theme || $t.LIGHT;
                let g = ((l = n == null ? void 0 : n.appState) == null ? void 0 : l.name) ?? this.state.name;
                const E = ((c = n == null ? void 0 : n.appState) == null ? void 0 : c.errorMessage) ?? this.state.errorMessage;
                typeof this.props.viewModeEnabled < "u" && (d = this.props.viewModeEnabled),
                typeof this.props.zenModeEnabled < "u" && (f = this.props.zenModeEnabled),
                typeof this.props.gridModeEnabled < "u" && (h = this.props.gridModeEnabled ? tl : null),
                typeof this.props.name < "u" && (g = this.props.name),
                r = r || ((u = n.appState) == null ? void 0 : u.editingElement) || null,
                r != null && r.isDeleted && (r = null),
                this.setState(v=>Object.assign(n.appState || {}, {
                    contextMenu: null,
                    editingElement: r,
                    viewModeEnabled: d,
                    zenModeEnabled: f,
                    gridSize: h,
                    theme: m,
                    name: g,
                    errorMessage: E
                }), ()=>{
                    n.syncHistory && this.history.setCurrentState(this.state, this.scene.getElementsIncludingDeleted())
                }
                )
            }
        }
        ));
        M(this, "onBlur", Ze(()=>{
            as = !1,
            this.setState({
                isBindingEnabled: !0
            })
        }
        ));
        M(this, "onUnload", ()=>{
            this.onBlur()
        }
        );
        M(this, "disableEvent", n=>{
            n.preventDefault()
        }
        );
        M(this, "resetHistory", ()=>{
            this.history.clear()
        }
        );
        M(this, "resetScene", Ze(n=>{
            this.scene.replaceAllElements([]),
            this.setState(r=>({
                ...di(),
                isLoading: n != null && n.resetLoadingState ? !1 : r.isLoading,
                theme: this.state.theme
            })),
            this.resetHistory()
        }
        ));
        M(this, "initializeScene", async()=>{
            var i;
            "launchQueue"in window && "LaunchParams"in window && window.launchQueue.setConsumer(async o=>{
                if (!o.files.length)
                    return;
                const s = o.files[0]
                  , a = await s.getFile();
                this.loadFileToCanvas(new File([a],a.name || "",{
                    type: a.type
                }), s)
            }
            ),
            this.props.theme && this.setState({
                theme: this.props.theme
            }),
            this.state.isLoading || this.setState({
                isLoading: !0
            });
            let n = null;
            try {
                n = await this.props.initialData || null,
                n != null && n.libraryItems && this.library.updateLibrary({
                    libraryItems: n.libraryItems,
                    merge: !0
                }).catch(o=>{
                    console.error(o)
                }
                )
            } catch (o) {
                console.error(o),
                n = {
                    appState: {
                        errorMessage: o.message || "Encountered an error during importing or restoring scene data"
                    }
                }
            }
            const r = qs(n, null, null, {
                repairBindings: !0
            });
            r.appState = {
                ...r.appState,
                theme: this.props.theme || r.appState.theme,
                openSidebar: ((i = r.appState) == null ? void 0 : i.openSidebar) || this.state.openSidebar,
                activeTool: r.appState.activeTool.type === "image" ? {
                    ...r.appState.activeTool,
                    type: "selection"
                } : r.appState.activeTool,
                isLoading: !1,
                toast: this.state.toast
            },
            n != null && n.scrollToContent && (r.appState = {
                ...r.appState,
                ...Yu(r.elements, {
                    ...r.appState,
                    width: this.state.width,
                    height: this.state.height,
                    offsetTop: this.state.offsetTop,
                    offsetLeft: this.state.offsetLeft
                })
            }),
            this.fonts.loadFontsForElements(r.elements),
            this.resetHistory(),
            this.syncActionResult({
                ...r,
                commitToHistory: !0
            })
        }
        );
        M(this, "refreshDeviceState", n=>{
            const {width: r, height: i} = n.getBoundingClientRect()
              , o = this.props.UIOptions.dockedSidebarBreakpoint != null ? this.props.UIOptions.dockedSidebarBreakpoint : fw;
            this.device = Zf(this.device, {
                isLandscape: r > i,
                isSmScreen: r < lw,
                isMobile: r < cw || i < dw && r < uw,
                canDeviceFitSidebar: r > o
            })
        }
        );
        M(this, "onResize", Ze(()=>{
            this.scene.getElementsIncludingDeleted().forEach(n=>We.delete(n)),
            this.setState({})
        }
        ));
        M(this, "renderInteractiveSceneCallback", ({atLeastOneVisibleElement: n, scrollBars: r, elements: i})=>{
            r && (nm = r);
            const o = ue(this.state.editingElement) ? !1 : !n && i.length > 0;
            this.state.scrolledOutside !== o && this.setState({
                scrolledOutside: o
            }),
            this.scheduleImageRefresh()
        }
        );
        M(this, "onScroll", yl(()=>{
            const {offsetTop: n, offsetLeft: r} = this.getCanvasOffsets();
            this.setState(i=>i.offsetLeft === r && i.offsetTop === n ? null : {
                offsetTop: n,
                offsetLeft: r
            })
        }
        , hL));
        M(this, "onCut", Ze(n=>{
            var i;
            !((i = this.excalidrawContainerRef.current) != null && i.contains(document.activeElement)) || vs(n.target) || (this.cutAll(),
            n.preventDefault(),
            n.stopPropagation())
        }
        ));
        M(this, "onCopy", Ze(n=>{
            var i;
            !((i = this.excalidrawContainerRef.current) != null && i.contains(document.activeElement)) || vs(n.target) || (this.copyAll(),
            n.preventDefault(),
            n.stopPropagation())
        }
        ));
        M(this, "cutAll", ()=>{
            this.actionManager.executeAction(hb, "keyboard")
        }
        );
        M(this, "copyAll", ()=>{
            this.actionManager.executeAction(ih, "keyboard")
        }
        );
        M(this, "onTouchStart", n=>{
            if (rw || n.preventDefault(),
            !bc) {
                bc = !0,
                clearTimeout(em),
                em = window.setTimeout(C1.resetTapTwice, cL);
                return
            }
            if (bc && n.touches.length === 1) {
                const r = n.touches[0];
                this.handleCanvasDoubleClick({
                    clientX: r.clientX,
                    clientY: r.clientY
                }),
                bc = !1,
                clearTimeout(em)
            }
            rw && n.preventDefault(),
            n.touches.length === 2 && this.setState({
                selectedElementIds: Oe({}, this.state),
                activeEmbeddable: null
            })
        }
        );
        M(this, "onTouchEnd", n=>{
            this.resetContextMenuTimer(),
            n.touches.length > 0 ? this.setState({
                previousSelectedElementIds: {},
                selectedElementIds: Oe(this.state.previousSelectedElementIds, this.state)
            }) : ke.pointers.clear()
        }
        );
        M(this, "pasteFromClipboard", Ze(async n=>{
            var d, f, h;
            const r = !!(im && n)
              , i = document.activeElement
              , o = (d = this.excalidrawContainerRef.current) == null ? void 0 : d.contains(i);
            if (n && !o)
                return;
            const s = document.elementFromPoint(this.lastViewportPosition.x, this.lastViewportPosition.y);
            if (n && (!(s instanceof HTMLCanvasElement) || vs(i)))
                return;
            let a = (f = n == null ? void 0 : n.clipboardData) == null ? void 0 : f.files[0];
            const l = await VI(n, r);
            if (!a && l.text && !r) {
                const m = l.text.trim();
                m.startsWith("<svg") && m.endsWith("</svg>") && (a = B6(m))
            }
            const {x: c, y: u} = Ke({
                clientX: this.lastViewportPosition.x,
                clientY: this.lastViewportPosition.y
            }, this.state);
            if (eu(a) && !l.spreadsheet) {
                const m = this.createImageElement({
                    sceneX: c,
                    sceneY: u
                });
                this.insertImageElement(m, a),
                this.initializeImageDimensions(m),
                this.setState({
                    selectedElementIds: Oe({
                        [m.id]: !0
                    }, this.state)
                });
                return
            }
            if (this.props.onPaste)
                try {
                    if (await this.props.onPaste(l, n) === !1)
                        return
                } catch (m) {
                    console.error(m)
                }
            if (l.errorMessage)
                this.setState({
                    errorMessage: l.errorMessage
                });
            else if (l.spreadsheet && !r)
                this.setState({
                    pasteDialog: {
                        data: l.spreadsheet,
                        shown: !0
                    }
                });
            else if (l.elements) {
                const m = l.programmaticAPI ? gY(l.elements) : l.elements;
                this.addElementsFromPasteOrLibrary({
                    elements: m,
                    files: l.files || null,
                    position: "cursor",
                    retainSeed: r
                })
            } else if (l.text) {
                const m = RR(l.text);
                if (!r && qf(m, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(m) || ((h = Va(m)) == null ? void 0 : h.type) === "video")) {
                    const g = this.insertEmbeddableElement({
                        sceneX: c,
                        sceneY: u,
                        link: ci(m)
                    });
                    g && this.setState({
                        selectedElementIds: {
                            [g.id]: !0
                        }
                    });
                    return
                }
                this.addTextFromPaste(l.text, r)
            }
            this.setActiveTool({
                type: "selection"
            }),
            n == null || n.preventDefault()
        }
        ));
        M(this, "addElementsFromPasteOrLibrary", n=>{
            const r = kd(n.elements, null, void 0)
              , [i,o,s,a] = mt(r)
              , l = on(i, s) / 2
              , c = on(o, a) / 2
              , u = typeof n.position == "object" ? n.position.clientX : n.position === "cursor" ? this.lastViewportPosition.x : this.state.width / 2 + this.state.offsetLeft
              , d = typeof n.position == "object" ? n.position.clientY : n.position === "cursor" ? this.lastViewportPosition.y : this.state.height / 2 + this.state.offsetTop
              , {x: f, y: h} = Ke({
                clientX: u,
                clientY: d
            }, this.state)
              , m = f - l
              , g = h - c
              , [E,v] = en(m, g, this.state.gridSize)
              , y = ey(r.map(I=>fe(I, {
                x: I.x + E - i,
                y: I.y + v - o
            })), {
                randomizeSeed: !n.retainSeed
            })
              , w = [...this.scene.getElementsIncludingDeleted(), ...y];
            this.scene.replaceAllElements(w),
            y.forEach(I=>{
                if (ue(I) && _t(I)) {
                    const S = Lt(I);
                    mi(I, S)
                }
            }
            ),
            n.files && (this.files = {
                ...this.files,
                ...n.files
            }),
            this.history.resumeRecording();
            const b = y0(y);
            this.setState({
                ...this.state,
                openSidebar: this.state.openSidebar && this.device.canDeviceFitSidebar && Di.get(o3) ? this.state.openSidebar : null,
                ...Nn({
                    editingGroupId: null,
                    selectedElementIds: b.reduce((I,S)=>(_t(S) || (I[S.id] = !0),
                    I), {})
                }, this.scene.getNonDeletedElements(), this.state, this)
            }, ()=>{
                n.files && this.addNewImagesToImageCache()
            }
            ),
            this.setActiveTool({
                type: "selection"
            })
        }
        );
        M(this, "setAppState", (n,r)=>{
            this.setState(n, r)
        }
        );
        M(this, "removePointer", n=>{
            ro && this.resetContextMenuTimer(),
            ke.pointers.delete(n.pointerId)
        }
        );
        M(this, "toggleLock", (n="ui")=>{
            this.state.activeTool.locked || nt("toolbar", "toggleLock", `${n} (${this.device.isMobile ? "mobile" : "desktop"})`),
            this.setState(r=>({
                activeTool: {
                    ...r.activeTool,
                    ...Ct(this.state, r.activeTool.locked ? {
                        type: "selection"
                    } : r.activeTool),
                    locked: !r.activeTool.locked
                }
            }))
        }
        );
        M(this, "updateFrameRendering", n=>{
            this.setState(r=>{
                const i = typeof n == "function" ? n(r.frameRendering) : n;
                return {
                    frameRendering: {
                        enabled: (i == null ? void 0 : i.enabled) ?? r.frameRendering.enabled,
                        clip: (i == null ? void 0 : i.clip) ?? r.frameRendering.clip,
                        name: (i == null ? void 0 : i.name) ?? r.frameRendering.name,
                        outline: (i == null ? void 0 : i.outline) ?? r.frameRendering.outline
                    }
                }
            }
            )
        }
        );
        M(this, "togglePenMode", n=>{
            this.setState(r=>({
                penMode: n ?? !r.penMode,
                penDetected: !0
            }))
        }
        );
        M(this, "onHandToolToggle", ()=>{
            this.actionManager.executeAction(gB)
        }
        );
        M(this, "zoomCanvas", n=>{
            this.setState({
                ...As({
                    viewportX: this.state.width / 2 + this.state.offsetLeft,
                    viewportY: this.state.height / 2 + this.state.offsetTop,
                    nextZoom: Ms(n)
                }, this.state)
            })
        }
        );
        M(this, "cancelInProgresAnimation", null);
        M(this, "scrollToContent", (n=this.scene.getNonDeletedElements(),r)=>{
            var l;
            (l = this.cancelInProgresAnimation) == null || l.call(this);
            const i = Array.isArray(n) ? n : [n];
            let o = this.state.zoom
              , s = this.state.scrollX
              , a = this.state.scrollY;
            if (r != null && r.fitToContent || r != null && r.fitToViewport) {
                const {appState: c} = d0({
                    targetElements: i,
                    appState: this.state,
                    fitToViewport: !!(r != null && r.fitToViewport),
                    viewportZoomFactor: r == null ? void 0 : r.viewportZoomFactor
                });
                o = c.zoom,
                s = c.scrollX,
                a = c.scrollY
            } else {
                const c = Yu(i, this.state);
                s = c.scrollX,
                a = c.scrollY
            }
            if (r != null && r.animate) {
                const c = this.state.scrollX
                  , u = this.state.scrollY
                  , d = this.state.zoom.value
                  , f = BL({
                    fromValues: {
                        scrollX: c,
                        scrollY: u,
                        zoom: d
                    },
                    toValues: {
                        scrollX: s,
                        scrollY: a,
                        zoom: o.value
                    },
                    interpolateValue: (h,m,g,E)=>{
                        if (E === "zoom")
                            return h * Math.pow(m / h, Uv(g))
                    }
                    ,
                    onStep: ({scrollX: h, scrollY: m, zoom: g})=>{
                        this.setState({
                            scrollX: h,
                            scrollY: m,
                            zoom: {
                                value: g
                            }
                        })
                    }
                    ,
                    onStart: ()=>{
                        this.setState({
                            shouldCacheIgnoreZoom: !0
                        })
                    }
                    ,
                    onEnd: ()=>{
                        this.setState({
                            shouldCacheIgnoreZoom: !1
                        })
                    }
                    ,
                    onCancel: ()=>{
                        this.setState({
                            shouldCacheIgnoreZoom: !1
                        })
                    }
                    ,
                    duration: (r == null ? void 0 : r.duration) ?? 500
                });
                this.cancelInProgresAnimation = ()=>{
                    f(),
                    this.cancelInProgresAnimation = null
                }
            } else
                this.setState({
                    scrollX: s,
                    scrollY: a,
                    zoom: o
                })
        }
        );
        M(this, "translateCanvas", n=>{
            var r;
            (r = this.cancelInProgresAnimation) == null || r.call(this),
            this.setState(n)
        }
        );
        M(this, "setToast", n=>{
            this.setState({
                toast: n
            })
        }
        );
        M(this, "restoreFileFromShare", async()=>{
            try {
                const n = await caches.open("web-share-target")
                  , r = await n.match("shared-file");
                if (r) {
                    const i = await r.blob()
                      , o = new File([i],i.name || "",{
                        type: i.type
                    });
                    this.loadFileToCanvas(o, null),
                    await n.delete("shared-file"),
                    window.history.replaceState(null, Oi, window.location.pathname)
                }
            } catch (n) {
                this.setState({
                    errorMessage: n.message
                })
            }
        }
        );
        M(this, "addFiles", Ze(n=>{
            const r = n.reduce((i,o)=>(i.set(o.id, o),
            i), new Map);
            this.files = {
                ...this.files,
                ...Object.fromEntries(r)
            },
            this.scene.getNonDeletedElements().forEach(i=>{
                At(i) && r.has(i.fileId) && (this.imageCache.delete(i.fileId),
                We.delete(i))
            }
            ),
            this.scene.informMutation(),
            this.addNewImagesToImageCache()
        }
        ));
        M(this, "updateScene", Ze(n=>{
            n.commitToHistory && this.history.resumeRecording(),
            n.appState && this.setState(n.appState),
            n.elements && this.scene.replaceAllElements(n.elements),
            n.collaborators && this.setState({
                collaborators: n.collaborators
            })
        }
        ));
        M(this, "onSceneUpdated", ()=>{
            this.setState({})
        }
        );
        M(this, "toggleSidebar", ({name: n, tab: r, force: i})=>{
            var s;
            let o;
            return i === void 0 ? o = ((s = this.state.openSidebar) == null ? void 0 : s.name) === n ? null : n : o = i ? n : null,
            this.setState({
                openSidebar: o ? {
                    name: o,
                    tab: r
                } : null
            }),
            !!o
        }
        );
        M(this, "updateCurrentCursorPosition", Ze(n=>{
            this.lastViewportPosition.x = n.clientX,
            this.lastViewportPosition.y = n.clientY
        }
        ));
        M(this, "onKeyDown", Ze(n=>{
            if ("Proxy"in window && (!n.shiftKey && /^[A-Z]$/.test(n.key) || n.shiftKey && /^[a-z]$/.test(n.key)) && (n = new Proxy(n,{
                get(s, a) {
                    const l = s[a];
                    return typeof l == "function" ? l.bind(s) : a === "key" ? n.shiftKey ? s.key.toUpperCase() : s.key.toLowerCase() : l
                }
            })),
            n[R.CTRL_OR_CMD] && n.key.toLowerCase() === R.V && (im = n.shiftKey,
            clearTimeout(H4),
            H4 = window.setTimeout(()=>{
                im = !1
            }
            , 100)),
            n[R.CTRL_OR_CMD] && vs(n.target) && (n.code === Me.MINUS || n.code === Me.EQUAL)) {
                n.preventDefault();
                return
            }
            if (vs(n.target) && n.key !== R.ESCAPE || Qf(n.key) && xx(n.target))
                return;
            if (n.key === R.QUESTION_MARK) {
                this.setState({
                    openDialog: "help"
                });
                return
            } else if (n.key.toLowerCase() === R.E && n.shiftKey && n[R.CTRL_OR_CMD]) {
                n.preventDefault(),
                this.setState({
                    openDialog: "imageExport"
                });
                return
            }
            if (n.key === R.PAGE_UP || n.key === R.PAGE_DOWN) {
                let s = (n.shiftKey ? this.state.width : this.state.height) / this.state.zoom.value;
                n.key === R.PAGE_DOWN && (s = -s),
                n.shiftKey ? this.translateCanvas(a=>({
                    scrollX: a.scrollX + s
                })) : this.translateCanvas(a=>({
                    scrollY: a.scrollY + s
                }))
            }
            if (this.actionManager.handleKeyDown(n) || this.state.viewModeEnabled)
                return;
            if (n[R.CTRL_OR_CMD] && this.state.isBindingEnabled && this.setState({
                isBindingEnabled: !1
            }),
            Qf(n.key)) {
                const s = this.state.gridSize && (n.shiftKey ? iw : this.state.gridSize) || (n.shiftKey ? sL : iw);
                let a = 0
                  , l = 0;
                n.key === R.ARROW_LEFT ? a = -s : n.key === R.ARROW_RIGHT ? a = s : n.key === R.ARROW_UP ? l = -s : n.key === R.ARROW_DOWN && (l = s);
                const c = this.scene.getSelectedElements({
                    selectedElementIds: this.state.selectedElementIds,
                    includeBoundTextElement: !0,
                    includeElementsInFrames: !0
                });
                c.forEach(u=>{
                    Q(u, {
                        x: u.x + a,
                        y: u.y + l
                    }),
                    Ko(u, {
                        simultaneouslyUpdated: c
                    })
                }
                ),
                this.maybeSuggestBindingForAll(c),
                n.preventDefault()
            } else if (n.key === R.ENTER) {
                const s = this.scene.getSelectedElements(this.state);
                if (s.length === 1) {
                    const a = s[0];
                    if (n[R.CTRL_OR_CMD])
                        ye(a) && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== s[0].id) && (this.history.resumeRecording(),
                        this.setState({
                            editingLinearElement: new ce(a,this.scene)
                        }));
                    else if (ue(a) || dz(a)) {
                        let l;
                        ue(a) || (l = a);
                        const c = Mp(a, this.state)
                          , u = c.x
                          , d = c.y;
                        this.startTextEditing({
                            sceneX: u,
                            sceneY: d,
                            container: l
                        }),
                        n.preventDefault();
                        return
                    } else
                        cn(a) && this.setState({
                            editingFrame: a.id
                        })
                }
            } else if (!n.ctrlKey && !n.altKey && !n.metaKey && this.state.draggingElement === null) {
                const s = wW(n.key);
                s ? (this.state.activeTool.type !== s && nt("toolbar", s, `keyboard (${this.device.isMobile ? "mobile" : "desktop"})`),
                this.setActiveTool({
                    type: s
                }),
                n.stopPropagation()) : n.key === R.Q && (this.toggleLock("keyboard"),
                n.stopPropagation())
            }
            if (n.key === R.SPACE && ke.pointers.size === 0 && (as = !0,
            Re(this.interactiveCanvas, De.GRAB),
            n.preventDefault()),
            (n.key === R.G || n.key === R.S) && !n.altKey && !n[R.CTRL_OR_CMD]) {
                const s = this.scene.getSelectedElements(this.state);
                if (this.state.activeTool.type === "selection" && !s.length)
                    return;
                n.key === R.G && (Wa(this.state.activeTool.type) || s.some(a=>Wa(a.type))) && (this.setState({
                    openPopup: "elementBackground"
                }),
                n.stopPropagation()),
                n.key === R.S && (this.setState({
                    openPopup: "elementStroke"
                }),
                n.stopPropagation())
            }
            if (n.key === R.K && !n.altKey && !n[R.CTRL_OR_CMD]) {
                this.state.activeTool.type === "laser" ? this.setActiveTool({
                    type: "selection"
                }) : this.setActiveTool({
                    type: "laser"
                });
                return
            }
            n[R.CTRL_OR_CMD] && (n.key === R.BACKSPACE || n.key === R.DELETE) && Di.set(l3, "clearCanvas");
            const r = n.key.toLocaleLowerCase()
              , i = r === R.S && n.shiftKey
              , o = n.key === R.I || r === R.G && n.shiftKey;
            (i || o) && this.openEyeDropper({
                type: i ? "stroke" : "background"
            })
        }
        ));
        M(this, "onWheel", Ze(n=>{
            !(n.target instanceof HTMLCanvasElement) && n.ctrlKey && n.preventDefault()
        }
        ));
        M(this, "onKeyUp", Ze(n=>{
            if (n.key === R.SPACE && (this.state.viewModeEnabled ? Re(this.interactiveCanvas, De.GRAB) : this.state.activeTool.type === "selection" ? Er(this.interactiveCanvas) : (ki(this.interactiveCanvas, this.state),
            this.setState({
                selectedElementIds: Oe({}, this.state),
                selectedGroupIds: {},
                editingGroupId: null,
                activeEmbeddable: null
            })),
            as = !1),
            !n[R.CTRL_OR_CMD] && !this.state.isBindingEnabled && this.setState({
                isBindingEnabled: !0
            }),
            Qf(n.key)) {
                const r = this.scene.getSelectedElements(this.state);
                Ts(this.state) ? kg(r) : Mg(r),
                this.setState({
                    suggestedBindings: []
                })
            }
        }
        ));
        M(this, "setActiveTool", n=>{
            const r = Ct(this.state, n);
            r.type === "hand" ? Re(this.interactiveCanvas, De.GRAB) : as || ki(this.interactiveCanvas, this.state),
            FL(document.activeElement) && this.focusContainer(),
            Zv(r.type) || this.setState({
                suggestedBindings: []
            }),
            r.type === "image" && this.onImageAction({
                insertOnCanvasDirectly: (n.type === "image" && n.insertOnCanvasDirectly) ?? !1
            }),
            this.setState(i=>{
                const o = {
                    snapLines: i.snapLines.length ? [] : i.snapLines,
                    originSnapOffset: null,
                    activeEmbeddable: null
                };
                return r.type !== "selection" ? {
                    ...i,
                    activeTool: r,
                    selectedElementIds: Oe({}, i),
                    selectedGroupIds: Oe({}, i),
                    editingGroupId: null,
                    multiElement: null,
                    ...o
                } : {
                    ...i,
                    activeTool: r,
                    ...o
                }
            }
            )
        }
        );
        M(this, "setCursor", n=>{
            Re(this.interactiveCanvas, n)
        }
        );
        M(this, "resetCursor", ()=>{
            Er(this.interactiveCanvas)
        }
        );
        M(this, "isTouchScreenMultiTouchGesture", ()=>ke.pointers.size >= 2);
        M(this, "onGestureStart", Ze(n=>{
            n.preventDefault(),
            this.isTouchScreenMultiTouchGesture() && this.setState({
                selectedElementIds: Oe({}, this.state),
                activeEmbeddable: null
            }),
            ke.initialScale = this.state.zoom.value
        }
        ));
        M(this, "onGestureChange", Ze(n=>{
            if (n.preventDefault(),
            this.isTouchScreenMultiTouchGesture())
                return;
            const r = ke.initialScale;
            r && this.setState(i=>({
                ...As({
                    viewportX: this.lastViewportPosition.x,
                    viewportY: this.lastViewportPosition.y,
                    nextZoom: Ms(r * n.scale)
                }, i)
            }))
        }
        ));
        M(this, "onGestureEnd", Ze(n=>{
            n.preventDefault(),
            this.isTouchScreenMultiTouchGesture() && this.setState({
                previousSelectedElementIds: {},
                selectedElementIds: Oe(this.state.previousSelectedElementIds, this.state)
            }),
            ke.initialScale = null
        }
        ));
        M(this, "startTextEditing", ({sceneX: n, sceneY: r, insertAtParentCenter: i=!0, container: o})=>{
            let s = !1
              , a = i && this.getTextWysiwygSnappedToCenterPosition(n, r, this.state, o);
            o && a && (Ae(o) || (s = !0));
            let l = null;
            const c = this.scene.getSelectedElements(this.state);
            c.length === 1 ? ue(c[0]) ? l = c[0] : o ? l = Ae(c[0]) : l = this.getTextElementAtPosition(n, r) : l = this.getTextElementAtPosition(n, r);
            const u = (l == null ? void 0 : l.fontFamily) || this.state.currentItemFontFamily
              , d = (l == null ? void 0 : l.lineHeight) || ea(u)
              , f = this.state.currentItemFontSize;
            if (!l && s && o && !rt(o)) {
                const E = qI(xt({
                    fontSize: f,
                    fontFamily: u
                }), d)
                  , v = ZI(f, d)
                  , y = Math.max(o.height, v)
                  , w = Math.max(o.width, E);
                Q(o, {
                    height: y,
                    width: w
                }),
                n = o.x + w / 2,
                r = o.y + y / 2,
                a && (a = this.getTextWysiwygSnappedToCenterPosition(n, r, this.state, o))
            }
            const h = this.getTopLayerFrameAtSceneCoords({
                x: n,
                y: r
            })
              , m = l || Br({
                x: a ? a.elementCenterX : n,
                y: a ? a.elementCenterY : r,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                opacity: this.state.currentItemOpacity,
                text: "",
                fontSize: f,
                fontFamily: u,
                textAlign: a ? "center" : this.state.currentItemTextAlign,
                verticalAlign: a ? Bn.MIDDLE : Fh,
                containerId: s ? o == null ? void 0 : o.id : void 0,
                groupIds: (o == null ? void 0 : o.groupIds) ?? [],
                lineHeight: d,
                angle: (o == null ? void 0 : o.angle) ?? 0,
                frameId: h ? h.id : null
            });
            if (!l && s && o && Q(o, {
                boundElements: (o.boundElements || []).concat({
                    type: "text",
                    id: m.id
                })
            }),
            this.setState({
                editingElement: m
            }),
            !l)
                if (o && s) {
                    const g = this.scene.getElementIndex(o.id);
                    this.scene.insertElementAtIndex(m, g + 1)
                } else
                    this.scene.addNewElement(m);
            this.setState({
                editingElement: m
            }),
            this.handleTextWysiwyg(m, {
                isExistingElement: !!l
            })
        }
        );
        M(this, "handleCanvasDoubleClick", n=>{
            if (this.state.multiElement || this.state.activeTool.type !== "selection")
                return;
            const r = this.scene.getSelectedElements(this.state);
            if (r.length === 1 && ye(r[0])) {
                if (n[R.CTRL_OR_CMD] && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== r[0].id)) {
                    this.history.resumeRecording(),
                    this.setState({
                        editingLinearElement: new ce(r[0],this.scene)
                    });
                    return
                } else if (this.state.editingLinearElement && this.state.editingLinearElement.elementId === r[0].id)
                    return
            }
            Er(this.interactiveCanvas);
            let {x: i, y: o} = Ke(n, this.state);
            if (rl(this.state).length > 0) {
                const a = this.getElementAtPosition(i, o)
                  , l = a && fR(a, this.state.selectedGroupIds);
                if (l) {
                    this.setState(c=>({
                        ...c,
                        ...Nn({
                            editingGroupId: l,
                            selectedElementIds: {
                                [a.id]: !0
                            }
                        }, this.scene.getNonDeletedElements(), c, this)
                    }));
                    return
                }
            }
            if (Er(this.interactiveCanvas),
            !n[R.CTRL_OR_CMD] && !this.state.viewModeEnabled) {
                const a = this.getElementAtPosition(i, o);
                if (ht(a)) {
                    this.setState({
                        activeEmbeddable: {
                            element: a,
                            state: "active"
                        }
                    });
                    return
                }
                const l = V6(this.scene.getNonDeletedElements(), this.state, i, o);
                if (l && (jo(l) || !Ys(l.backgroundColor) || Uu(l, this.state, this.frameNameBoundsCache, [i, o]))) {
                    const c = Mp(l, this.state);
                    i = c.x,
                    o = c.y
                }
                this.startTextEditing({
                    sceneX: i,
                    sceneY: o,
                    insertAtParentCenter: !n.altKey,
                    container: l
                })
            }
        }
        );
        M(this, "getElementLinkAtPosition", (n,r)=>{
            const i = this.scene.getNonDeletedElements().slice().reverse();
            let o = 1 / 0;
            return i.find((s,a)=>(r && s.id === r.id && (o = a),
            s.link && a <= o && gp(s, this.state, [n.x, n.y], this.device.isMobile)))
        }
        );
        M(this, "redirectToLink", (n,r)=>{
            const i = wt(this.lastPointerDownEvent.clientX, this.lastPointerDownEvent.clientY, this.lastPointerUpEvent.clientX, this.lastPointerUpEvent.clientY);
            if (!this.hitLinkElement || r && i > us || !r && i !== 0)
                return;
            const o = Ke(this.lastPointerDownEvent, this.state)
              , s = gp(this.hitLinkElement, this.state, [o.x, o.y], this.device.isMobile)
              , a = Ke(this.lastPointerUpEvent, this.state)
              , l = gp(this.hitLinkElement, this.state, [a.x, a.y], this.device.isMobile);
            if (s && l) {
                let c = this.hitLinkElement.link;
                if (c) {
                    c = ci(c);
                    let u;
                    if (this.props.onLinkOpen && (u = Mx(U.EXCALIDRAW_LINK, n.nativeEvent),
                    this.props.onLinkOpen({
                        ...this.hitLinkElement,
                        link: c
                    }, u)),
                    !(u != null && u.defaultPrevented)) {
                        const d = v7(c) ? "_self" : "_blank"
                          , f = window.open(void 0, d);
                        f && (f.opener = null,
                        f.location = c)
                    }
                }
            }
        }
        );
        M(this, "getTopLayerFrameAtSceneCoords", n=>{
            const r = this.scene.getNonDeletedFrames().filter(i=>J6(n, i));
            return r.length ? r[r.length - 1] : null
        }
        );
        M(this, "handleCanvasPointerMove", n=>{
            var h;
            this.savePointer(n.clientX, n.clientY, this.state.cursorButton),
            ke.pointers.has(n.pointerId) && ke.pointers.set(n.pointerId, {
                x: n.clientX,
                y: n.clientY
            });
            const r = ke.initialScale;
            if (ke.pointers.size === 2 && ke.lastCenter && r && ke.initialDistance) {
                const m = u4(ke.pointers)
                  , g = m.x - ke.lastCenter.x
                  , E = m.y - ke.lastCenter.y;
                ke.lastCenter = m;
                const v = d4(Array.from(ke.pointers.values()))
                  , y = this.state.activeTool.type === "freedraw" && this.state.penMode ? 1 : v / ke.initialDistance
                  , w = y ? Ms(r * y) : this.state.zoom.value;
                this.setState(b=>{
                    const I = As({
                        viewportX: m.x,
                        viewportY: m.y,
                        nextZoom: w
                    }, b);
                    this.translateCanvas({
                        zoom: I.zoom,
                        scrollX: I.scrollX + g / w,
                        scrollY: I.scrollY + E / w,
                        shouldCacheIgnoreZoom: !0
                    })
                }
                ),
                this.resetShouldCacheIgnoreZoomDebounced()
            } else
                ke.lastCenter = ke.initialDistance = ke.initialScale = null;
            if (as || _c || tm || El(this.state))
                return;
            const o = ab(nm, n.clientX - this.state.offsetLeft, n.clientY - this.state.offsetTop).isOverEither;
            !this.state.draggingElement && !this.state.multiElement && (o ? Er(this.interactiveCanvas) : ki(this.interactiveCanvas, this.state));
            const s = Ke(n, this.state)
              , {x: a, y: l} = s;
            if (!this.state.draggingElement && fY(this.state.activeTool.type)) {
                const {originOffset: m, snapLines: g} = dY(this.scene.getNonDeletedElements(), this.state, {
                    x: a,
                    y: l
                }, n);
                this.setState({
                    snapLines: g,
                    originSnapOffset: m
                })
            } else
                this.state.draggingElement || this.setState({
                    snapLines: []
                });
            if (this.state.editingLinearElement && !this.state.editingLinearElement.isDragging) {
                const m = ce.handlePointerMove(n, a, l, this.state);
                m && m !== this.state.editingLinearElement && Vn.flushSync(()=>{
                    this.setState({
                        editingLinearElement: m
                    })
                }
                ),
                (m == null ? void 0 : m.lastUncommittedPoint) != null ? this.maybeSuggestBindingAtCursor(s) : Vn.flushSync(()=>{
                    this.setState({
                        suggestedBindings: []
                    })
                }
                )
            }
            if (Vx(this.state.activeTool.type)) {
                const {draggingElement: m} = this.state;
                sn(m, !1) ? this.maybeSuggestBindingsForLinearElementAtCoords(m, [s], this.state.startBoundElement) : this.maybeSuggestBindingAtCursor(s)
            }
            if (this.state.multiElement) {
                const {multiElement: m} = this.state
                  , {x: g, y: E} = m
                  , {points: v, lastCommittedPoint: y} = m
                  , w = v[v.length - 1];
                if (ki(this.interactiveCanvas, this.state),
                w === y)
                    wt(a - g, l - E, w[0], w[1]) >= Gf ? Q(m, {
                        points: [...v, [a - g, l - E]]
                    }) : Re(this.interactiveCanvas, De.POINTER);
                else if (v.length > 2 && y && wt(a - g, l - E, y[0], y[1]) < Gf)
                    Re(this.interactiveCanvas, De.POINTER),
                    Q(m, {
                        points: v.slice(0, -1)
                    });
                else {
                    const [b,I] = en(a, l, n[R.CTRL_OR_CMD] ? null : this.state.gridSize)
                      , [S,C] = (m == null ? void 0 : m.lastCommittedPoint) ?? [0, 0];
                    let T = b - g - S
                      , L = I - E - C;
                    Kc(n) && ({width: T, height: L} = Qg(S + g, C + E, b, I)),
                    qo(v, this.state.zoom.value) && Re(this.interactiveCanvas, De.POINTER),
                    Q(m, {
                        points: [...v.slice(0, -1), [S + T, C + L]]
                    })
                }
                return
            }
            if (!!n.buttons || this.state.activeTool.type !== "selection" && this.state.activeTool.type !== "text" && this.state.activeTool.type !== "eraser")
                return;
            const u = this.scene.getNonDeletedElements()
              , d = this.scene.getSelectedElements(this.state);
            if (d.length === 1 && !o && !this.state.editingLinearElement) {
                const m = nb(u, this.state, a, l, this.state.zoom, n.pointerType);
                if (m && m.transformHandleType) {
                    Re(this.interactiveCanvas, ib(m));
                    return
                }
            } else if (d.length > 1 && !o) {
                const m = rb(mt(d), a, l, this.state.zoom, n.pointerType);
                if (m) {
                    Re(this.interactiveCanvas, ib({
                        transformHandleType: m
                    }));
                    return
                }
            }
            const f = this.getElementAtPosition(s.x, s.y);
            this.hitLinkElement = this.getElementLinkAtPosition(s, f),
            !Cs(this.state) && (this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? (Re(this.interactiveCanvas, De.POINTER),
            AD(this.hitLinkElement, this.state)) : (PD(),
            f && (f.link || ht(f)) && this.state.selectedElementIds[f.id] && !this.state.contextMenu && !this.state.showHyperlinkPopup ? this.setState({
                showHyperlinkPopup: "info"
            }) : this.state.activeTool.type === "text" ? Re(this.interactiveCanvas, ue(f) ? De.TEXT : De.CROSSHAIR) : this.state.viewModeEnabled ? Re(this.interactiveCanvas, De.GRAB) : o ? Re(this.interactiveCanvas, De.AUTO) : this.state.selectedLinearElement ? this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, a, l) : n[R.CTRL_OR_CMD] ? Re(this.interactiveCanvas, De.AUTO) : (f || this.isHittingCommonBoundingBoxOfSelectedElements(s, d)) && !(f != null && f.locked) && (f && ht(f) && this.isEmbeddableCenter(f, n, a, l) ? (Re(this.interactiveCanvas, De.POINTER),
            this.setState({
                activeEmbeddable: {
                    element: f,
                    state: "hover"
                }
            })) : (Re(this.interactiveCanvas, De.MOVE),
            ((h = this.state.activeEmbeddable) == null ? void 0 : h.state) === "hover" && this.setState({
                activeEmbeddable: null
            })))))
        }
        );
        M(this, "handleEraser", (n,r,i)=>{
            const o = f=>{
                f.forEach(h=>{
                    h.locked || (s.push(h.id),
                    n.altKey ? r.elementIdsToErase[h.id] && r.elementIdsToErase[h.id].erase && (r.elementIdsToErase[h.id].erase = !1) : r.elementIdsToErase[h.id] || (r.elementIdsToErase[h.id] = {
                        erase: !0,
                        opacity: h.opacity
                    }))
                }
                )
            }
              , s = []
              , a = wt(r.lastCoords.x, r.lastCoords.y, i.x, i.y)
              , l = 10 / this.state.zoom.value
              , c = {
                ...r.lastCoords
            };
            let u = 0;
            for (; u <= a; ) {
                const f = this.getElementsAtPosition(c.x, c.y);
                if (o(f),
                u === a)
                    break;
                u = Math.min(u + l, a);
                const h = u / a
                  , m = (1 - h) * c.x + h * i.x
                  , g = (1 - h) * c.y + h * i.y;
                c.x = m,
                c.y = g
            }
            const d = this.scene.getElementsIncludingDeleted().map(f=>{
                const h = _t(f) && s.includes(f.containerId) ? f.containerId : f.id;
                if (s.includes(h))
                    if (n.altKey) {
                        if (r.elementIdsToErase[h] && r.elementIdsToErase[h].erase === !1)
                            return fe(f, {
                                opacity: r.elementIdsToErase[h].opacity
                            })
                    } else
                        return fe(f, {
                            opacity: EL
                        });
                return f
            }
            );
            this.scene.replaceAllElements(d),
            r.lastCoords.x = i.x,
            r.lastCoords.y = i.y
        }
        );
        M(this, "handleTouchMove", n=>{
            xc = !0
        }
        );
        M(this, "handleCanvasPointerDown", n=>{
            var u, d;
            if (this.state.contextMenu && this.setState({
                contextMenu: null
            }),
            this.state.snapLines && this.setAppState({
                snapLines: []
            }),
            this.updateGestureOnPointerDown(n),
            n.pointerType === "touch" && this.state.draggingElement && this.state.draggingElement.type === "freedraw") {
                const f = this.state.draggingElement;
                this.updateScene({
                    ...f.points.length < 10 ? {
                        elements: this.scene.getElementsIncludingDeleted().filter(h=>h.id !== f.id)
                    } : {},
                    appState: {
                        draggingElement: null,
                        editingElement: null,
                        startBoundElement: null,
                        suggestedBindings: [],
                        selectedElementIds: Oe(Object.keys(this.state.selectedElementIds).filter(h=>h !== f.id).reduce((h,m)=>(h[m] = this.state.selectedElementIds[m],
                        h), {}), this.state)
                    }
                });
                return
            }
            const r = document.getSelection();
            if (r != null && r.anchorNode && r.removeAllRanges(),
            this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),
            this.maybeCleanupAfterMissingPointerUp(n),
            !this.state.penDetected && n.pointerType === "pen" && this.setState(f=>({
                penMode: !0,
                penDetected: !0
            })),
            !this.device.isTouchScreen && ["pen", "touch"].includes(n.pointerType) && (this.device = Zf(this.device, {
                isTouchScreen: !0
            })),
            _c || (this.lastPointerDownEvent = n,
            this.handleCanvasPanUsingWheelOrSpaceDrag(n)) || (this.setState({
                lastPointerDownWith: n.pointerType,
                cursorButton: "down"
            }),
            this.savePointer(n.clientX, n.clientY, "down"),
            n.button !== lc.MAIN && n.button !== lc.TOUCH) || ke.pointers.size > 1)
                return;
            const i = this.initialPointerDownState(n);
            if (this.setState({
                selectedElementsAreBeingDragged: !1
            }),
            this.handleDraggingScrollBar(n, i) || (this.clearSelectionIfNotUsingSelection(),
            this.updateBindingEnabledOnPointerMove(n),
            this.handleSelectionOnPointerDown(n, i)) || !(!this.state.penMode || n.pointerType !== "touch" || this.state.activeTool.type === "selection" || this.state.activeTool.type === "text" || this.state.activeTool.type === "image"))
                return;
            if (this.state.activeTool.type === "text") {
                this.handleTextOnPointerDown(n, i);
                return
            } else if (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line")
                this.handleLinearElementOnPointerDown(n, this.state.activeTool.type, i);
            else if (this.state.activeTool.type === "image") {
                Re(this.interactiveCanvas, De.CROSSHAIR);
                const f = this.state.pendingImageElementId && this.scene.getElement(this.state.pendingImageElementId);
                if (!f)
                    return;
                this.setState({
                    draggingElement: f,
                    editingElement: f,
                    pendingImageElementId: null,
                    multiElement: null
                });
                const {x: h, y: m} = Ke(n, this.state);
                Q(f, {
                    x: h,
                    y: m
                })
            } else
                this.state.activeTool.type === "freedraw" ? this.handleFreeDrawElementOnPointerDown(n, this.state.activeTool.type, i) : this.state.activeTool.type === "custom" ? Re(this.interactiveCanvas, De.AUTO) : this.state.activeTool.type === "frame" ? this.createFrameElementOnPointerDown(i) : this.state.activeTool.type === "laser" ? this.laserPathManager.startPath(i.lastCoords.x, i.lastCoords.y) : this.state.activeTool.type !== "eraser" && this.state.activeTool.type !== "hand" && this.createGenericElementOnPointerDown(this.state.activeTool.type, i);
            (d = (u = this.props) == null ? void 0 : u.onPointerDown) == null || d.call(u, this.state.activeTool, i);
            const s = this.onPointerMoveFromPointerDownHandler(i)
              , a = this.onPointerUpFromPointerDownHandler(i)
              , l = this.onKeyDownFromPointerDownHandler(i)
              , c = this.onKeyUpFromPointerDownHandler(i);
            io = a,
            (!this.state.viewModeEnabled || this.state.activeTool.type === "laser") && (window.addEventListener(U.POINTER_MOVE, s),
            window.addEventListener(U.POINTER_UP, a),
            window.addEventListener(U.KEYDOWN, l),
            window.addEventListener(U.KEYUP, c),
            i.eventListeners.onMove = s,
            i.eventListeners.onUp = a,
            i.eventListeners.onKeyUp = c,
            i.eventListeners.onKeyDown = l)
        }
        );
        M(this, "handleCanvasPointerUp", n=>{
            var o;
            this.removePointer(n),
            this.lastPointerUpEvent = n;
            const r = Ke({
                clientX: n.clientX,
                clientY: n.clientY
            }, this.state)
              , i = n.timeStamp - (((o = this.lastPointerDownEvent) == null ? void 0 : o.timeStamp) ?? 0);
            if (this.device.isMobile && i < 300) {
                const s = this.getElementAtPosition(r.x, r.y);
                if (ht(s) && this.isEmbeddableCenter(s, n, r.x, r.y)) {
                    this.handleEmbeddableCenterClick(s);
                    return
                }
            }
            if (this.device.isTouchScreen) {
                const s = this.getElementAtPosition(r.x, r.y);
                this.hitLinkElement = this.getElementLinkAtPosition(r, s)
            }
            this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? i < 300 && this.hitLinkElement.type === "embeddable" && !_7(this.hitLinkElement, this.state, [r.x, r.y]) ? this.handleEmbeddableCenterClick(this.hitLinkElement) : this.redirectToLink(n, this.device.isTouchScreen) : this.state.viewModeEnabled && this.setState({
                activeEmbeddable: null,
                selectedElementIds: {}
            })
        }
        );
        M(this, "maybeOpenContextMenuAfterPointerDownOnTouchDevices", n=>{
            n.pointerType === "touch" && (xc = !1,
            ro ? xc = !0 : ro = window.setTimeout(()=>{
                ro = 0,
                xc || this.handleCanvasContextMenu(n)
            }
            , uL))
        }
        );
        M(this, "resetContextMenuTimer", ()=>{
            clearTimeout(ro),
            ro = 0,
            xc = !1
        }
        );
        M(this, "handleCanvasPanUsingWheelOrSpaceDrag", n=>{
            if (!(ke.pointers.size <= 1 && (n.button === lc.WHEEL || n.button === lc.MAIN && as || El(this.state) || this.state.viewModeEnabled)) || ue(this.state.editingElement))
                return !1;
            _c = !0,
            n.preventDefault();
            let r = !1;
            const i = /Linux/.test(window.navigator.platform);
            Re(this.interactiveCanvas, De.GRABBING);
            let {clientX: o, clientY: s} = n;
            const a = fp(c=>{
                const u = o - c.clientX
                  , d = s - c.clientY;
                if (o = c.clientX,
                s = c.clientY,
                i && !r && (Math.abs(u) > 1 || Math.abs(d) > 1)) {
                    r = !0;
                    const f = m=>{
                        document.body.removeEventListener(U.PASTE, f),
                        m.stopPropagation()
                    }
                      , h = ()=>{
                        setTimeout(()=>{
                            document.body.removeEventListener(U.PASTE, f),
                            window.removeEventListener(U.POINTER_UP, h)
                        }
                        , 100)
                    }
                    ;
                    document.body.addEventListener(U.PASTE, f),
                    window.addEventListener(U.POINTER_UP, h)
                }
                this.translateCanvas({
                    scrollX: this.state.scrollX - u / this.state.zoom.value,
                    scrollY: this.state.scrollY - d / this.state.zoom.value
                })
            }
            )
              , l = Ze(io = ()=>{
                io = null,
                _c = !1,
                as || (this.state.viewModeEnabled ? Re(this.interactiveCanvas, De.GRAB) : ki(this.interactiveCanvas, this.state)),
                this.setState({
                    cursorButton: "up"
                }),
                this.savePointer(n.clientX, n.clientY, "up"),
                window.removeEventListener(U.POINTER_MOVE, a),
                window.removeEventListener(U.POINTER_UP, l),
                window.removeEventListener(U.BLUR, l),
                a.flush()
            }
            );
            return window.addEventListener(U.BLUR, l),
            window.addEventListener(U.POINTER_MOVE, a, {
                passive: !0
            }),
            window.addEventListener(U.POINTER_UP, l),
            !0
        }
        );
        M(this, "clearSelectionIfNotUsingSelection", ()=>{
            this.state.activeTool.type !== "selection" && this.setState({
                selectedElementIds: Oe({}, this.state),
                selectedGroupIds: {},
                editingGroupId: null,
                activeEmbeddable: null
            })
        }
        );
        M(this, "handleSelectionOnPointerDown", (n,r)=>{
            if (this.state.activeTool.type === "selection") {
                const i = this.scene.getNonDeletedElements()
                  , o = this.scene.getSelectedElements(this.state);
                if (o.length === 1 && !this.state.editingLinearElement) {
                    const s = nb(i, this.state, r.origin.x, r.origin.y, this.state.zoom, n.pointerType);
                    s != null && (this.setState({
                        resizingElement: s.element
                    }),
                    r.resize.handleType = s.transformHandleType)
                } else
                    o.length > 1 && (r.resize.handleType = rb(mt(o), r.origin.x, r.origin.y, this.state.zoom, n.pointerType));
                if (r.resize.handleType)
                    r.resize.isResizing = !0,
                    r.resize.offset = bo(oH(r.resize.handleType, o, r.origin.x, r.origin.y)),
                    o.length === 1 && ye(o[0]) && o[0].points.length === 2 && (r.resize.arrowDirection = sH(r.resize.handleType, o[0]));
                else {
                    if (this.state.selectedLinearElement) {
                        const l = this.state.editingLinearElement || this.state.selectedLinearElement
                          , c = ce.handlePointerDown(n, this.state, this.history, r.origin, l);
                        if (c.hitElement && (r.hit.element = c.hitElement),
                        c.linearElementEditor && (this.setState({
                            selectedLinearElement: c.linearElementEditor
                        }),
                        this.state.editingLinearElement && this.setState({
                            editingLinearElement: c.linearElementEditor
                        })),
                        c.didAddPoint)
                            return !0
                    }
                    if (r.hit.element = r.hit.element ?? this.getElementAtPosition(r.origin.x, r.origin.y),
                    r.hit.element && this.getElementLinkAtPosition({
                        x: r.origin.x,
                        y: r.origin.y
                    }, r.hit.element))
                        return !1;
                    r.hit.allHitElements = this.getElementsAtPosition(r.origin.x, r.origin.y);
                    const s = r.hit.element
                      , a = r.hit.allHitElements.some(l=>this.isASelectedElement(l));
                    if ((s === null || !a) && !n.shiftKey && !r.hit.hasHitCommonBoundingBoxOfSelectedElements && this.clearSelection(s),
                    this.state.editingLinearElement)
                        this.setState({
                            selectedElementIds: Oe({
                                [this.state.editingLinearElement.elementId]: !0
                            }, this.state)
                        });
                    else if (s != null) {
                        if (n[R.CTRL_OR_CMD])
                            return this.state.selectedElementIds[s.id] || (r.hit.wasAddedToSelection = !0),
                            this.setState(l=>({
                                ...dR(l, s),
                                previousSelectedElementIds: this.state.selectedElementIds
                            })),
                            !1;
                        this.state.selectedElementIds[s.id] || (this.state.editingGroupId && !Bu(s, this.state.editingGroupId) && this.setState({
                            selectedElementIds: Oe({}, this.state),
                            selectedGroupIds: {},
                            editingGroupId: null,
                            activeEmbeddable: null
                        }),
                        !a && !r.hit.hasHitCommonBoundingBoxOfSelectedElements && (this.setState(l=>{
                            const c = {
                                ...l.selectedElementIds,
                                [s.id]: !0
                            }
                              , u = [];
                            if (Object.keys(l.selectedElementIds).forEach(d=>{
                                const f = this.scene.getElement(d);
                                f && u.push(f)
                            }
                            ),
                            s.type === "frame")
                                Rr(u, s.id).forEach(d=>{
                                    delete c[d.id]
                                }
                                );
                            else if (s.frameId)
                                c[s.frameId] && delete c[s.id];
                            else {
                                const d = s.groupIds
                                  , f = new Set(d.flatMap(h=>Ft(this.scene.getNonDeletedElements(), h)).filter(h=>h.type === "frame").map(h=>h.id));
                                f.size > 0 && u.forEach(h=>{
                                    h.frameId && f.has(h.frameId) && (delete c[h.id],
                                    h.groupIds.flatMap(m=>Ft(this.scene.getNonDeletedElements(), m)).forEach(m=>{
                                        delete c[m.id]
                                    }
                                    ))
                                }
                                )
                            }
                            return {
                                ...Nn({
                                    editingGroupId: l.editingGroupId,
                                    selectedElementIds: c
                                }, this.scene.getNonDeletedElements(), l, this),
                                showHyperlinkPopup: s.link || ht(s) ? "info" : !1
                            }
                        }
                        ),
                        r.hit.wasAddedToSelection = !0))
                    }
                    this.setState({
                        previousSelectedElementIds: this.state.selectedElementIds
                    })
                }
            }
            return !1
        }
        );
        M(this, "handleTextOnPointerDown", (n,r)=>{
            if (ue(this.state.editingElement))
                return;
            let i = r.origin.x
              , o = r.origin.y;
            const s = this.getElementAtPosition(i, o, {
                includeBoundTextElement: !0
            });
            let a = V6(this.scene.getNonDeletedElements(), this.state, i, o);
            jo(s) && (a = s,
            i = s.x + s.width / 2,
            o = s.y + s.height / 2),
            this.startTextEditing({
                sceneX: i,
                sceneY: o,
                insertAtParentCenter: !n.altKey,
                container: a
            }),
            Er(this.interactiveCanvas),
            this.state.activeTool.locked || this.setState({
                activeTool: Ct(this.state, {
                    type: "selection"
                })
            })
        }
        );
        M(this, "handleFreeDrawElementOnPointerDown", (n,r,i)=>{
            const [o,s] = en(i.origin.x, i.origin.y, null)
              , a = this.getTopLayerFrameAtSceneCoords({
                x: o,
                y: s
            })
              , l = xR({
                type: r,
                x: o,
                y: s,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                opacity: this.state.currentItemOpacity,
                roundness: null,
                simulatePressure: n.pressure === .5,
                locked: !1,
                frameId: a ? a.id : null
            });
            this.setState(d=>{
                const f = {
                    ...d.selectedElementIds
                };
                return delete f[l.id],
                {
                    selectedElementIds: Oe(f, d)
                }
            }
            );
            const c = l.simulatePressure ? l.pressures : [...l.pressures, n.pressure];
            Q(l, {
                points: [[0, 0]],
                pressures: c
            });
            const u = _o(i.origin, this.scene);
            this.scene.addNewElement(l),
            this.setState({
                draggingElement: l,
                editingElement: l,
                startBoundElement: u,
                suggestedBindings: []
            })
        }
        );
        M(this, "insertEmbeddableElement", ({sceneX: n, sceneY: r, link: i})=>{
            var c;
            const [o,s] = en(n, r, (c = this.lastPointerDownEvent) != null && c[R.CTRL_OR_CMD] ? null : this.state.gridSize)
              , a = Va(i);
            if (!a)
                return;
            a.warning && this.setToast({
                message: a.warning,
                closable: !0
            });
            const l = Pw({
                type: "embeddable",
                x: o,
                y: s,
                strokeColor: "transparent",
                backgroundColor: "transparent",
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                roundness: this.getCurrentItemRoundness("embeddable"),
                opacity: this.state.currentItemOpacity,
                locked: !1,
                width: a.aspectRatio.w,
                height: a.aspectRatio.h,
                link: i,
                validated: null
            });
            return this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(), l]),
            l
        }
        );
        M(this, "createImageElement", ({sceneX: n, sceneY: r})=>{
            var l;
            const [i,o] = en(n, r, (l = this.lastPointerDownEvent) != null && l[R.CTRL_OR_CMD] ? null : this.state.gridSize)
              , s = this.getTopLayerFrameAtSceneCoords({
                x: i,
                y: o
            });
            return i7({
                type: "image",
                x: i,
                y: o,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                roundness: null,
                opacity: this.state.currentItemOpacity,
                locked: !1,
                frameId: s ? s.id : null
            })
        }
        );
        M(this, "handleLinearElementOnPointerDown", (n,r,i)=>{
            if (this.state.multiElement) {
                const {multiElement: o} = this.state;
                if (o.type === "line" && qo(o.points, this.state.zoom.value)) {
                    Q(o, {
                        lastCommittedPoint: o.points[o.points.length - 1]
                    }),
                    this.actionManager.executeAction(Yr);
                    return
                }
                const {x: s, y: a, lastCommittedPoint: l} = o;
                if (o.points.length > 1 && l && wt(i.origin.x - s, i.origin.y - a, l[0], l[1]) < Gf) {
                    this.actionManager.executeAction(Yr);
                    return
                }
                this.setState(c=>({
                    selectedElementIds: Oe({
                        ...c.selectedElementIds,
                        [o.id]: !0
                    }, c)
                })),
                Q(o, {
                    lastCommittedPoint: o.points[o.points.length - 1]
                }),
                Re(this.interactiveCanvas, De.POINTER)
            } else {
                const [o,s] = en(i.origin.x, i.origin.y, n[R.CTRL_OR_CMD] ? null : this.state.gridSize)
                  , a = this.getTopLayerFrameAtSceneCoords({
                    x: o,
                    y: s
                })
                  , {currentItemStartArrowhead: l, currentItemEndArrowhead: c} = this.state
                  , [u,d] = r === "arrow" ? [l, c] : [null, null]
                  , f = No({
                    type: r,
                    x: o,
                    y: s,
                    strokeColor: this.state.currentItemStrokeColor,
                    backgroundColor: this.state.currentItemBackgroundColor,
                    fillStyle: this.state.currentItemFillStyle,
                    strokeWidth: this.state.currentItemStrokeWidth,
                    strokeStyle: this.state.currentItemStrokeStyle,
                    roughness: this.state.currentItemRoughness,
                    opacity: this.state.currentItemOpacity,
                    roundness: this.state.currentItemRoundness === "round" ? {
                        type: zt.PROPORTIONAL_RADIUS
                    } : null,
                    startArrowhead: u,
                    endArrowhead: d,
                    locked: !1,
                    frameId: a ? a.id : null
                });
                this.setState(m=>{
                    const g = {
                        ...m.selectedElementIds
                    };
                    return delete g[f.id],
                    {
                        selectedElementIds: Oe(g, m)
                    }
                }
                ),
                Q(f, {
                    points: [...f.points, [0, 0]]
                });
                const h = _o(i.origin, this.scene);
                this.scene.addNewElement(f),
                this.setState({
                    draggingElement: f,
                    editingElement: f,
                    startBoundElement: h,
                    suggestedBindings: []
                })
            }
        }
        );
        M(this, "createGenericElementOnPointerDown", (n,r)=>{
            var c;
            const [i,o] = en(r.origin.x, r.origin.y, (c = this.lastPointerDownEvent) != null && c[R.CTRL_OR_CMD] ? null : this.state.gridSize)
              , s = this.getTopLayerFrameAtSceneCoords({
                x: i,
                y: o
            })
              , a = {
                x: i,
                y: o,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                opacity: this.state.currentItemOpacity,
                roundness: this.getCurrentItemRoundness(n),
                locked: !1,
                frameId: s ? s.id : null
            };
            let l;
            n === "embeddable" ? l = Pw({
                type: "embeddable",
                validated: null,
                ...a
            }) : l = Yo({
                type: n,
                ...a
            }),
            l.type === "selection" ? this.setState({
                selectionElement: l,
                draggingElement: l
            }) : (this.scene.addNewElement(l),
            this.setState({
                multiElement: null,
                draggingElement: l,
                editingElement: l
            }))
        }
        );
        M(this, "createFrameElementOnPointerDown", n=>{
            var s;
            const [r,i] = en(n.origin.x, n.origin.y, (s = this.lastPointerDownEvent) != null && s[R.CTRL_OR_CMD] ? null : this.state.gridSize)
              , o = wR({
                x: r,
                y: i,
                opacity: this.state.currentItemOpacity,
                locked: !1,
                ...vl
            });
            this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(), o]),
            this.setState({
                multiElement: null,
                draggingElement: o,
                editingElement: o
            })
        }
        );
        M(this, "restoreReadyToEraseElements", n=>{
            const r = this.scene.getElementsIncludingDeleted().map(i=>n.elementIdsToErase[i.id] && n.elementIdsToErase[i.id].erase ? fe(i, {
                opacity: n.elementIdsToErase[i.id].opacity
            }) : _t(i) && n.elementIdsToErase[i.containerId] && n.elementIdsToErase[i.containerId].erase ? fe(i, {
                opacity: n.elementIdsToErase[i.containerId].opacity
            }) : i.frameId && n.elementIdsToErase[i.frameId] && n.elementIdsToErase[i.frameId].erase ? fe(i, {
                opacity: n.elementIdsToErase[i.frameId].opacity
            }) : i);
            this.scene.replaceAllElements(r)
        }
        );
        M(this, "eraseElements", n=>{
            const r = this.scene.getElementsIncludingDeleted().map(i=>n.elementIdsToErase[i.id] && n.elementIdsToErase[i.id].erase ? fe(i, {
                isDeleted: !0
            }) : _t(i) && n.elementIdsToErase[i.containerId] && n.elementIdsToErase[i.containerId].erase ? fe(i, {
                isDeleted: !0
            }) : i.frameId && n.elementIdsToErase[i.frameId] && n.elementIdsToErase[i.frameId].erase ? fe(i, {
                isDeleted: !0
            }) : i);
            this.history.resumeRecording(),
            this.scene.replaceAllElements(r)
        }
        );
        M(this, "initializeImage", async({imageFile: n, imageElement: r, showCursorImagePreview: i=!1})=>{
            var u, d, f, h;
            if (!eu(n))
                throw new Error(_("errors.unsupportedFileType"));
            const o = n.type;
            if (Re(this.interactiveCanvas, "wait"),
            o === ve.svg)
                try {
                    n = B6(await BB(await n.text()), n.name)
                } catch (m) {
                    throw console.warn(m),
                    new Error(_("errors.svgImageInsertError"))
                }
            const s = await (((d = (u = this.props).generateIdForFile) == null ? void 0 : d.call(u, n)) || AB(n));
            if (!s)
                throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),
                new Error(_("errors.imageInsertError"));
            const a = this.files[s];
            if (!(a != null && a.dataURL)) {
                try {
                    n = await Hg(n, {
                        maxWidthOrHeight: gL
                    })
                } catch (m) {
                    console.error("error trying to resing image file on insertion", m)
                }
                if (n.size > hw)
                    throw new Error(_("errors.fileTooBig", {
                        maxSize: `${Math.trunc(hw / 1024 / 1024)}MB`
                    }))
            }
            if (i) {
                const m = (f = this.files[s]) == null ? void 0 : f.dataURL
                  , g = m && LB(m);
                this.setImagePreviewCursor(g || n)
            }
            const l = ((h = this.files[s]) == null ? void 0 : h.dataURL) || await $6(n)
              , c = Q(r, {
                fileId: s
            }, !1);
            return new Promise(async(m,g)=>{
                var E;
                try {
                    this.files = {
                        ...this.files,
                        [s]: {
                            mimeType: o,
                            id: s,
                            dataURL: l,
                            created: Date.now(),
                            lastRetrieved: Date.now()
                        }
                    };
                    const v = this.imageCache.get(s);
                    v || (this.addNewImagesToImageCache(),
                    await this.updateImageCache([c])),
                    (v == null ? void 0 : v.image)instanceof Promise && await v.image,
                    this.state.pendingImageElementId !== c.id && ((E = this.state.draggingElement) == null ? void 0 : E.id) !== c.id && this.initializeImageDimensions(c, !0),
                    m(c)
                } catch (v) {
                    console.error(v),
                    g(new Error(_("errors.imageInsertError")))
                } finally {
                    i || Er(this.interactiveCanvas)
                }
            }
            )
        }
        );
        M(this, "insertImageElement", async(n,r,i)=>{
            this.scene.addNewElement(n);
            try {
                await this.initializeImage({
                    imageFile: r,
                    imageElement: n,
                    showCursorImagePreview: i
                })
            } catch (o) {
                Q(n, {
                    isDeleted: !0
                }),
                this.actionManager.executeAction(Yr),
                this.setState({
                    errorMessage: o.message || _("errors.imageInsertError")
                })
            }
        }
        );
        M(this, "setImagePreviewCursor", async n=>{
            const i = await Hg(n, {
                maxWidthOrHeight: 96
            });
            let o = await $6(i);
            if (n.type === ve.svg) {
                const s = await DI(o);
                let a = Math.min(s.height, 96)
                  , l = a * (s.width / s.height);
                l > 96 && (l = 96,
                a = l * (s.height / s.width));
                const c = document.createElement("canvas");
                c.height = a,
                c.width = l,
                c.getContext("2d").drawImage(s, 0, 0, l, a),
                o = c.toDataURL(ve.svg)
            }
            this.state.pendingImageElementId && Re(this.interactiveCanvas, `url(${o}) 4 4, auto`)
        }
        );
        M(this, "onImageAction", async({insertOnCanvasDirectly: n})=>{
            try {
                const r = this.state.width / 2 + this.state.offsetLeft
                  , i = this.state.height / 2 + this.state.offsetTop
                  , {x: o, y: s} = Ke({
                    clientX: r,
                    clientY: i
                }, this.state)
                  , a = await Ty({
                    description: "Image",
                    extensions: Object.keys(Lv)
                })
                  , l = this.createImageElement({
                    sceneX: o,
                    sceneY: s
                });
                n ? (this.insertImageElement(l, a),
                this.initializeImageDimensions(l),
                this.setState({
                    selectedElementIds: Oe({
                        [l.id]: !0
                    }, this.state)
                }, ()=>{
                    this.actionManager.executeAction(Yr)
                }
                )) : this.setState({
                    pendingImageElementId: l.id
                }, ()=>{
                    this.insertImageElement(l, a, !0)
                }
                )
            } catch (r) {
                r.name !== "AbortError" ? console.error(r) : console.warn(r),
                this.setState({
                    pendingImageElementId: null,
                    editingElement: null,
                    activeTool: Ct(this.state, {
                        type: "selection"
                    })
                }, ()=>{
                    this.actionManager.executeAction(Yr)
                }
                )
            }
        }
        );
        M(this, "initializeImageDimensions", (n,r=!1)=>{
            var o;
            const i = At(n) && ((o = this.imageCache.get(n.fileId)) == null ? void 0 : o.image);
            if (!i || i instanceof Promise) {
                if (n.width < us / this.state.zoom.value && n.height < us / this.state.zoom.value) {
                    const s = 100 / this.state.zoom.value;
                    Q(n, {
                        x: n.x - s / 2,
                        y: n.y - s / 2,
                        width: s,
                        height: s
                    })
                }
                return
            }
            if (r || n.width < us / this.state.zoom.value && n.height < us / this.state.zoom.value) {
                const s = Math.max(this.state.height - 120, 160)
                  , a = Math.min(s, Math.floor(this.state.height * .5) / this.state.zoom.value)
                  , l = Math.min(i.naturalHeight, a)
                  , c = l * (i.naturalWidth / i.naturalHeight)
                  , u = n.x + n.width / 2 - c / 2
                  , d = n.y + n.height / 2 - l / 2;
                Q(n, {
                    x: u,
                    y: d,
                    width: c,
                    height: l
                })
            }
        }
        );
        M(this, "updateImageCache", async(n,r=this.files)=>{
            const {updatedFiles: i, erroredFiles: o} = await NI({
                imageCache: this.imageCache,
                fileIds: n.map(s=>s.fileId),
                files: r
            });
            if (i.size || o.size)
                for (const s of n)
                    i.has(s.fileId) && We.delete(s);
            return o.size && this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(s=>At(s) && o.has(s.fileId) ? fe(s, {
                status: "error"
            }) : s)),
            {
                updatedFiles: i,
                erroredFiles: o
            }
        }
        );
        M(this, "addNewImagesToImageCache", async(n=FI(this.scene.getNonDeletedElements()),r=this.files)=>{
            const i = n.filter(o=>!o.isDeleted && !this.imageCache.has(o.fileId));
            if (i.length) {
                const {updatedFiles: o} = await this.updateImageCache(i, r);
                o.size && this.scene.informMutation()
            }
        }
        );
        M(this, "scheduleImageRefresh", Os(()=>{
            this.addNewImagesToImageCache()
        }
        , lL));
        M(this, "updateBindingEnabledOnPointerMove", n=>{
            const r = IN(n);
            this.state.isBindingEnabled !== r && this.setState({
                isBindingEnabled: r
            })
        }
        );
        M(this, "maybeSuggestBindingAtCursor", n=>{
            const r = _o(n, this.scene);
            this.setState({
                suggestedBindings: r != null ? [r] : []
            })
        }
        );
        M(this, "maybeSuggestBindingsForLinearElementAtCoords", (n,r,i)=>{
            if (!r.length)
                return;
            const o = r.reduce((s,a)=>{
                const l = _o(a, this.scene);
                return l != null && !z7(n, i == null ? void 0 : i.id, l) && s.push(l),
                s
            }
            , []);
            this.setState({
                suggestedBindings: o
            })
        }
        );
        M(this, "handleInteractiveCanvasRef", n=>{
            var r, i, o;
            n !== null ? (this.interactiveCanvas = n,
            this.interactiveCanvas.addEventListener(U.WHEEL, this.handleWheel),
            this.interactiveCanvas.addEventListener(U.TOUCH_START, this.onTouchStart),
            this.interactiveCanvas.addEventListener(U.TOUCH_END, this.onTouchEnd)) : ((r = this.interactiveCanvas) == null || r.removeEventListener(U.WHEEL, this.handleWheel),
            (i = this.interactiveCanvas) == null || i.removeEventListener(U.TOUCH_START, this.onTouchStart),
            (o = this.interactiveCanvas) == null || o.removeEventListener(U.TOUCH_END, this.onTouchEnd))
        }
        );
        M(this, "handleAppOnDrop", async n=>{
            var l, c, u, d;
            const {file: r, fileHandle: i} = await PB(n)
              , {x: o, y: s} = Ke(n, this.state);
            try {
                if (eu(r)) {
                    if ((r == null ? void 0 : r.type) === ve.png || (r == null ? void 0 : r.type) === ve.svg)
                        try {
                            const h = await Ay(r, this.state, this.scene.getElementsIncludingDeleted(), i);
                            this.syncActionResult({
                                ...h,
                                appState: {
                                    ...h.appState || this.state,
                                    isLoading: !1
                                },
                                replaceFiles: !0,
                                commitToHistory: !0
                            });
                            return
                        } catch (h) {
                            if (h.name !== "EncodingError")
                                throw h
                        }
                    const f = this.createImageElement({
                        sceneX: o,
                        sceneY: s
                    });
                    this.insertImageElement(f, r),
                    this.initializeImageDimensions(f),
                    this.setState({
                        selectedElementIds: Oe({
                            [f.id]: !0
                        }, this.state)
                    });
                    return
                }
            } catch (f) {
                return this.setState({
                    isLoading: !1,
                    errorMessage: f.message
                })
            }
            const a = n.dataTransfer.getData(ve.excalidrawlib);
            if (a && typeof a == "string") {
                try {
                    const f = LI(a);
                    this.addElementsFromPasteOrLibrary({
                        elements: FC(f),
                        position: n,
                        files: null
                    })
                } catch (f) {
                    this.setState({
                        errorMessage: f.message
                    })
                }
                return
            }
            if (r && await this.loadFileToCanvas(r, i),
            (c = (l = n.dataTransfer) == null ? void 0 : l.types) != null && c.includes("text/plain")) {
                const f = (u = n.dataTransfer) == null ? void 0 : u.getData("text");
                if (f && qf(f, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f) || ((d = Va(f)) == null ? void 0 : d.type) === "video")) {
                    const h = this.insertEmbeddableElement({
                        sceneX: o,
                        sceneY: s,
                        link: ci(f)
                    });
                    h && this.setState({
                        selectedElementIds: {
                            [h.id]: !0
                        }
                    })
                }
            }
        }
        );
        M(this, "loadFileToCanvas", async(n,r)=>{
            n = await Ly(n);
            try {
                const i = await AI(n, this.state, this.scene.getElementsIncludingDeleted(), r);
                i.type === ve.excalidraw ? (this.setState({
                    isLoading: !0
                }),
                this.syncActionResult({
                    ...i.data,
                    appState: {
                        ...i.data.appState || this.state,
                        isLoading: !1
                    },
                    replaceFiles: !0,
                    commitToHistory: !0
                })) : i.type === ve.excalidrawlib && await this.library.updateLibrary({
                    libraryItems: n,
                    merge: !0,
                    openLibraryMenu: !0
                }).catch(o=>{
                    console.error(o),
                    this.setState({
                        errorMessage: _("errors.importLibraryError")
                    })
                }
                )
            } catch (i) {
                this.setState({
                    isLoading: !1,
                    errorMessage: i.message
                })
            }
        }
        );
        M(this, "handleCanvasContextMenu", n=>{
            if (n.preventDefault(),
            ("pointerType"in n.nativeEvent && n.nativeEvent.pointerType === "touch" || "pointerType"in n.nativeEvent && n.nativeEvent.pointerType === "pen" && n.button !== lc.SECONDARY) && this.state.activeTool.type !== "selection")
                return;
            const {x: r, y: i} = Ke(n, this.state)
              , o = this.getElementAtPosition(r, i, {
                preferSelected: !0,
                includeLockedElements: !0
            })
              , s = this.scene.getSelectedElements(this.state)
              , a = this.isHittingCommonBoundingBoxOfSelectedElements({
                x: r,
                y: i
            }, s)
              , l = o || a ? "element" : "canvas"
              , c = this.excalidrawContainerRef.current
              , {top: u, left: d} = c.getBoundingClientRect()
              , f = n.clientX - d
              , h = n.clientY - u;
            nt("contextMenu", "openContextMenu", l),
            this.setState({
                ...o && !this.state.selectedElementIds[o.id] ? {
                    ...this.state,
                    ...Nn({
                        editingGroupId: this.state.editingGroupId,
                        selectedElementIds: {
                            [o.id]: !0
                        }
                    }, this.scene.getNonDeletedElements(), this.state, this),
                    selectedLinearElement: ye(o) ? new ce(o,this.scene) : null
                } : this.state,
                showHyperlinkPopup: !1
            }, ()=>{
                this.setState({
                    contextMenu: {
                        top: h,
                        left: f,
                        items: this.getContextMenuItems(l)
                    }
                })
            }
            )
        }
        );
        M(this, "maybeDragNewGenericElement", (n,r)=>{
            var s, a, l;
            const i = this.state.draggingElement
              , o = n.lastCoords;
            if (i)
                if (i.type === "selection" && this.state.activeTool.type !== "eraser")
                    sb(i, this.state.activeTool.type, n.origin.x, n.origin.y, o.x, o.y, on(n.origin.x, o.x), on(n.origin.y, o.y), gc(r), mp(r));
                else {
                    let[c,u] = en(o.x, o.y, r[R.CTRL_OR_CMD] ? null : this.state.gridSize);
                    const d = At(i) && ((s = this.imageCache.get(i.fileId)) == null ? void 0 : s.image)
                      , f = d && !(d instanceof Promise) ? d.width / d.height : null;
                    this.maybeCacheReferenceSnapPoints(r, [i]);
                    const {snapOffset: h, snapLines: m} = uY(i, this.state, r, {
                        x: n.originInGrid.x + (((a = this.state.originSnapOffset) == null ? void 0 : a.x) ?? 0),
                        y: n.originInGrid.y + (((l = this.state.originSnapOffset) == null ? void 0 : l.y) ?? 0)
                    }, {
                        x: c - n.originInGrid.x,
                        y: u - n.originInGrid.y
                    });
                    c += h.x,
                    u += h.y,
                    this.setState({
                        snapLines: m
                    }),
                    sb(i, this.state.activeTool.type, n.originInGrid.x, n.originInGrid.y, c, u, on(n.originInGrid.x, c), on(n.originInGrid.y, u), Ni(i) ? !gc(r) : gc(r), mp(r), f, this.state.originSnapOffset),
                    this.maybeSuggestBindingForAll([i]),
                    this.state.activeTool.type === "frame" && this.setState({
                        elementsToHighlight: rh(this.scene.getNonDeletedElements(), i, this.state)
                    })
                }
        }
        );
        M(this, "maybeHandleResize", (n,r)=>{
            const i = this.scene.getSelectedElements(this.state)
              , o = i.filter(d=>d.type === "frame")
              , s = n.resize.handleType;
            if (o.length > 0 && s === "rotation")
                return !1;
            this.setState({
                isResizing: s && s !== "rotation",
                isRotating: s === "rotation",
                activeEmbeddable: null
            });
            const a = n.lastCoords;
            let[l,c] = en(a.x - n.resize.offset.x, a.y - n.resize.offset.y, r[R.CTRL_OR_CMD] ? null : this.state.gridSize);
            const u = new Map;
            if (o.forEach(d=>{
                Rr(this.scene.getNonDeletedElements(), d.id).forEach(h=>{
                    u.set(d.id + h.id, {
                        x: h.x - d.x,
                        y: h.y - d.y
                    })
                }
                )
            }
            ),
            !this.state.selectedElementsAreBeingDragged) {
                const [d,f] = en(a.x, a.y, r[R.CTRL_OR_CMD] ? null : this.state.gridSize)
                  , h = {
                    x: d - n.originInGrid.x,
                    y: f - n.originInGrid.y
                }
                  , m = [...n.originalElements.values()];
                this.maybeCacheReferenceSnapPoints(r, i);
                const {snapOffset: g, snapLines: E} = cY(i, it(m, this.state), this.state, r, h, s);
                l += g.x,
                c += g.y,
                this.setState({
                    snapLines: E
                })
            }
            if (Qz(n, s, i, n.resize.arrowDirection, Kc(r), mp(r), i.length === 1 && Ni(i[0]) ? !gc(r) : gc(r), l, c, n.resize.center.x, n.resize.center.y, this.state)) {
                this.maybeSuggestBindingForAll(i);
                const d = new Set;
                return o.forEach(f=>{
                    const h = Rr(this.scene.getNonDeletedElements(), f.id);
                    s && (s.includes("w") && h.forEach(m=>{
                        var g, E;
                        Q(m, {
                            x: f.x + (((g = u.get(f.id + m.id)) == null ? void 0 : g.x) || 0),
                            y: f.y + (((E = u.get(f.id + m.id)) == null ? void 0 : E.y) || 0)
                        })
                    }
                    ),
                    s.includes("n") && h.forEach(m=>{
                        var g, E;
                        Q(m, {
                            x: f.x + (((g = u.get(f.id + m.id)) == null ? void 0 : g.x) || 0),
                            y: f.y + (((E = u.get(f.id + m.id)) == null ? void 0 : E.y) || 0)
                        })
                    }
                    )),
                    rh(this.scene.getNonDeletedElements(), f, this.state).forEach(m=>d.add(m))
                }
                ),
                this.setState({
                    elementsToHighlight: [...d]
                }),
                !0
            }
            return !1
        }
        );
        M(this, "getContextMenuItems", n=>{
            const r = [];
            return r.push(mb, pb),
            n === "canvas" ? this.state.viewModeEnabled ? [...r, vb, n2, T4, d1] : [fb, In, mb, pb, gb, In, EH, QH, In, vb, GH, n2, T4, d1] : (r.push(gb),
            this.state.viewModeEnabled ? [ih, ...r] : [hb, ih, fb, eY, tY, In, ...r, In, PH, RH, In, DH, jH, YH, XH, NH, In, $H, In, mH, gH, vH, yH, In, UH, VH, In, JH, MD, xH, qH, In, AS])
        }
        );
        M(this, "handleWheel", Ze(n=>{
            if (n.preventDefault(),
            _c)
                return;
            const {deltaX: r, deltaY: i} = n;
            if (n.metaKey || n.ctrlKey) {
                const o = Math.sign(i)
                  , s = Pu * 100
                  , a = Math.abs(i);
                let l = i;
                a > s && (l = s * o);
                let c = this.state.zoom.value - l / 100;
                c += Math.log10(Math.max(1, this.state.zoom.value)) * -o * Math.min(1, a / 20),
                this.translateCanvas(u=>({
                    ...As({
                        viewportX: this.lastViewportPosition.x,
                        viewportY: this.lastViewportPosition.y,
                        nextZoom: Ms(c)
                    }, u),
                    shouldCacheIgnoreZoom: !0
                })),
                this.resetShouldCacheIgnoreZoomDebounced();
                return
            }
            if (n.shiftKey) {
                this.translateCanvas(({zoom: o, scrollX: s})=>({
                    scrollX: s - (i || r) / o.value
                }));
                return
            }
            this.translateCanvas(({zoom: o, scrollX: s, scrollY: a})=>({
                scrollX: s - r / o.value,
                scrollY: a - i / o.value
            }))
        }
        ));
        M(this, "savePointer", (n,r,i)=>{
            var l, c;
            if (!n || !r)
                return;
            const {x: o, y: s} = Ke({
                clientX: n,
                clientY: r
            }, this.state)
              , a = {
                x: o,
                y: s,
                tool: this.state.activeTool.type === "laser" ? "laser" : "pointer"
            };
            (c = (l = this.props).onPointerUpdate) == null || c.call(l, {
                pointer: a,
                button: i,
                pointersMap: ke.pointers
            })
        }
        );
        M(this, "resetShouldCacheIgnoreZoomDebounced", yl(()=>{
            this.unmounted || this.setState({
                shouldCacheIgnoreZoom: !1
            })
        }
        , 300));
        M(this, "updateDOMRect", n=>{
            var r;
            if ((r = this.excalidrawContainerRef) != null && r.current) {
                const i = this.excalidrawContainerRef.current
                  , {width: o, height: s, left: a, top: l} = i.getBoundingClientRect()
                  , {width: c, height: u, offsetTop: d, offsetLeft: f} = this.state;
                if (o === c && s === u && a === f && l === d) {
                    n && n();
                    return
                }
                this.setState({
                    width: o,
                    height: s,
                    offsetLeft: a,
                    offsetTop: l
                }, ()=>{
                    n && n()
                }
                )
            }
        }
        );
        M(this, "refresh", ()=>{
            this.setState({
                ...this.getCanvasOffsets()
            })
        }
        );
        const r = di()
          , {excalidrawRef: i, viewModeEnabled: o=!1, zenModeEnabled: s=!1, gridModeEnabled: a=!1, objectsSnapModeEnabled: l=!1, theme: c=r.theme, name: u=r.name} = n;
        if (this.state = {
            ...r,
            theme: c,
            isLoading: !0,
            ...this.getCanvasOffsets(),
            viewModeEnabled: o,
            zenModeEnabled: s,
            objectsSnapModeEnabled: l,
            gridSize: a ? tl : null,
            name: u,
            width: window.innerWidth,
            height: window.innerHeight
        },
        this.id = Z1(),
        this.library = new gW(this),
        this.scene = new Fe,
        this.canvas = document.createElement("canvas"),
        this.rc = is.canvas(this.canvas),
        this.renderer = new D4(this.scene),
        i) {
            const f = "current"in i && ((d = i.current) == null ? void 0 : d.readyPromise) || Vv()
              , h = {
                ready: !0,
                readyPromise: f,
                updateScene: this.updateScene,
                updateLibrary: this.library.updateLibrary,
                addFiles: this.addFiles,
                resetScene: this.resetScene,
                getSceneElementsIncludingDeleted: this.getSceneElementsIncludingDeleted,
                history: {
                    clear: this.resetHistory
                },
                scrollToContent: this.scrollToContent,
                getSceneElements: this.getSceneElements,
                getAppState: ()=>this.state,
                getFiles: ()=>this.files,
                refresh: this.refresh,
                setToast: this.setToast,
                id: this.id,
                setActiveTool: this.setActiveTool,
                setCursor: this.setCursor,
                resetCursor: this.resetCursor,
                updateFrameRendering: this.updateFrameRendering,
                toggleSidebar: this.toggleSidebar
            };
            typeof i == "function" ? i(h) : i.current = h,
            f.resolve(h)
        }
        this.excalidrawContainerValue = {
            container: this.excalidrawContainerRef.current,
            id: this.id
        },
        this.fonts = new v2({
            scene: this.scene,
            onSceneUpdated: this.onSceneUpdated
        }),
        this.history = new EW,
        this.actionManager = new nU(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),
        this.actionManager.registerAll(wg),
        this.actionManager.registerAction(eU(this.history)),
        this.actionManager.registerAction(tU(this.history))
    }
    onWindowMessage(n) {
        if (n.origin !== "https://player.vimeo.com" && n.origin !== "https://www.youtube.com")
            return;
        let r = null;
        try {
            r = JSON.parse(n.data)
        } catch {}
        if (r)
            switch (n.origin) {
            case "https://player.vimeo.com":
                if (r.method === "paused") {
                    let i = null;
                    const o = document.body.querySelectorAll("iframe.excalidraw__embeddable");
                    if (!o)
                        break;
                    for (const s of o)
                        s.contentWindow === n.source && (i = s.contentWindow);
                    i == null || i.postMessage(JSON.stringify({
                        method: r.value ? "play" : "pause",
                        value: !0
                    }), "*")
                }
                break;
            case "https://www.youtube.com":
                if (r.event === "infoDelivery" && r.info && r.id && typeof r.info.playerState == "number") {
                    const i = r.id
                      , o = r.info.playerState;
                    Object.values(nf).includes(o) && rm.set(i, o)
                }
                break
            }
    }
    updateEmbeddableRef(n, r) {
        r && this.iFrameRefs.set(n, r)
    }
    getHTMLIFrameElement(n) {
        return this.iFrameRefs.get(n)
    }
    handleEmbeddableCenterClick(n) {
        var i, o, s, a;
        if (((i = this.state.activeEmbeddable) == null ? void 0 : i.element) === n && ((o = this.state.activeEmbeddable) == null ? void 0 : o.state) === "active")
            return;
        setTimeout(()=>{
            this.setState({
                activeEmbeddable: {
                    element: n,
                    state: "active"
                },
                selectedElementIds: {
                    [n.id]: !0
                },
                draggingElement: null,
                selectionElement: null
            })
        }
        , 100);
        const r = this.getHTMLIFrameElement(n.id);
        if (r != null && r.contentWindow) {
            if (r.src.includes("youtube")) {
                const l = rm.get(n.id);
                switch (l || (rm.set(n.id, nf.UNSTARTED),
                r.contentWindow.postMessage(JSON.stringify({
                    event: "listening",
                    id: n.id
                }), "*")),
                l) {
                case nf.PLAYING:
                case nf.BUFFERING:
                    (s = r.contentWindow) == null || s.postMessage(JSON.stringify({
                        event: "command",
                        func: "pauseVideo",
                        args: ""
                    }), "*");
                    break;
                default:
                    (a = r.contentWindow) == null || a.postMessage(JSON.stringify({
                        event: "command",
                        func: "playVideo",
                        args: ""
                    }), "*")
                }
            }
            r.src.includes("player.vimeo.com") && r.contentWindow.postMessage(JSON.stringify({
                method: "paused"
            }), "*")
        }
    }
    isEmbeddableCenter(n, r, i, o) {
        var s, a;
        return n && !r.altKey && !r.shiftKey && !r.metaKey && !r.ctrlKey && (((s = this.state.activeEmbeddable) == null ? void 0 : s.element) !== n || ((a = this.state.activeEmbeddable) == null ? void 0 : a.state) === "hover" || !this.state.activeEmbeddable) && i >= n.x + n.width / 3 && i <= n.x + 2 * n.width / 3 && o >= n.y + n.height / 3 && o <= n.y + 2 * n.height / 3
    }
    renderEmbeddables() {
        const n = this.state.zoom.value
          , r = this.state.width
          , i = this.state.height
          , o = this.scene.getNonDeletedElements().filter(s=>ht(s) && !!s.validated);
        return p(re, {
            children: o.map(s=>{
                var h, m, g, E, v, y;
                const {x: a, y: l} = Cr({
                    sceneX: s.x,
                    sceneY: s.y
                }, this.state)
                  , c = Va(y7(s.link || ""))
                  , u = c1(s, r, i, this.state)
                  , d = ((h = this.state.activeEmbeddable) == null ? void 0 : h.element) === s && ((m = this.state.activeEmbeddable) == null ? void 0 : m.state) === "active"
                  , f = ((g = this.state.activeEmbeddable) == null ? void 0 : g.element) === s && ((E = this.state.activeEmbeddable) == null ? void 0 : E.state) === "hover";
                return p("div", {
                    className: le("excalidraw__embeddable-container", {
                        "is-hovered": f
                    }),
                    style: {
                        transform: u ? `translate(${a - this.state.offsetLeft}px, ${l - this.state.offsetTop}px) scale(${n})` : "none",
                        display: u ? "block" : "none",
                        opacity: s.opacity / 100,
                        "--embeddable-radius": `${ru(Math.min(s.width, s.height), s)}px`
                    },
                    children: k("div", {
                        className: "excalidraw__embeddable-container__inner",
                        style: {
                            width: u ? `${s.width}px` : 0,
                            height: u ? `${s.height}px` : 0,
                            transform: u ? `rotate(${s.angle}rad)` : "none",
                            pointerEvents: d ? ds.enabled : ds.disabled
                        },
                        children: [f && p("div", {
                            className: "excalidraw__embeddable-hint",
                            children: _("buttons.embeddableInteractionButton")
                        }), p("div", {
                            className: "excalidraw__embeddable__outer",
                            style: {
                                padding: `${s.strokeWidth}px`
                            },
                            children: ((y = (v = this.props).renderEmbeddable) == null ? void 0 : y.call(v, s, this.state)) ?? p("iframe", {
                                ref: w=>this.updateEmbeddableRef(s.id, w),
                                className: "excalidraw__embeddable",
                                srcDoc: (c == null ? void 0 : c.type) === "document" ? c.srcdoc(this.state.theme) : void 0,
                                src: (c == null ? void 0 : c.type) !== "document" ? (c == null ? void 0 : c.link) ?? "" : void 0,
                                scrolling: "no",
                                referrerPolicy: "no-referrer-when-downgrade",
                                title: "Excalidraw Embedded Content",
                                allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
                                allowFullScreen: !0,
                                sandbox: "allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads"
                            })
                        })]
                    })
                }, s.id)
            }
            )
        })
    }
    render() {
        var l, c, u;
        const n = this.scene.getSelectedElements(this.state)
          , {renderTopRightUI: r, renderCustomStats: i} = this.props
          , o = this.scene.getVersionNonce()
          , {canvasElements: s, visibleElements: a} = this.renderer.getRenderableElements({
            versionNonce: o,
            zoom: this.state.zoom,
            offsetLeft: this.state.offsetLeft,
            offsetTop: this.state.offsetTop,
            scrollX: this.state.scrollX,
            scrollY: this.state.scrollY,
            height: this.state.height,
            width: this.state.width,
            editingElement: this.state.editingElement,
            pendingImageElementId: this.state.pendingImageElementId
        });
        return p("div", {
            className: le("excalidraw excalidraw-container", {
                "excalidraw--view-mode": this.state.viewModeEnabled,
                "excalidraw--mobile": this.device.isMobile
            }),
            style: {
                "--ui-pointerEvents": this.state.selectionElement || this.state.draggingElement || this.state.resizingElement || this.state.activeTool.type === "laser" && this.state.cursorButton === "down" || this.state.editingElement && !ue(this.state.editingElement) ? ds.disabled : ds.enabled
            },
            ref: this.excalidrawContainerRef,
            onDrop: this.handleAppOnDrop,
            tabIndex: 0,
            onKeyDown: this.props.handleKeyboardGlobally ? void 0 : this.onKeyDown,
            children: p(Vk.Provider, {
                value: this,
                children: p(Wk.Provider, {
                    value: this.props,
                    children: p(f3.Provider, {
                        value: this.excalidrawContainerValue,
                        children: p(d3.Provider, {
                            value: this.device,
                            children: p(m3.Provider, {
                                value: this.setAppState,
                                children: p(p3.Provider, {
                                    value: this.state,
                                    children: k(h3.Provider, {
                                        value: this.scene.getNonDeletedElements(),
                                        children: [k(g3.Provider, {
                                            value: this.actionManager,
                                            children: [p(qj, {
                                                canvas: this.canvas,
                                                appState: this.state,
                                                files: this.files,
                                                setAppState: this.setAppState,
                                                actionManager: this.actionManager,
                                                elements: this.scene.getNonDeletedElements(),
                                                onLockToggle: this.toggleLock,
                                                onPenModeToggle: this.togglePenMode,
                                                onHandToolToggle: this.onHandToolToggle,
                                                langCode: vd().code,
                                                renderTopRightUI: r,
                                                renderCustomStats: i,
                                                showExitZenModeBtn: typeof ((l = this.props) == null ? void 0 : l.zenModeEnabled) > "u" && this.state.zenModeEnabled,
                                                UIOptions: this.props.UIOptions,
                                                onExportImage: this.onExportImage,
                                                renderWelcomeScreen: !this.state.isLoading && this.state.showWelcomeScreen && this.state.activeTool.type === "selection" && !this.state.zenModeEnabled && !this.scene.getElementsIncludingDeleted().length,
                                                app: this,
                                                isCollaborating: this.props.isCollaborating,
                                                children: this.props.children
                                            }), p("div", {
                                                className: "excalidraw-textEditorContainer"
                                            }), p("div", {
                                                className: "excalidraw-contextMenuContainer"
                                            }), p("div", {
                                                className: "excalidraw-eye-dropper-container"
                                            }), p(xY, {
                                                manager: this.laserPathManager
                                            }), n.length === 1 && !this.state.contextMenu && this.state.showHyperlinkPopup && p(TD, {
                                                element: n[0],
                                                setAppState: this.setAppState,
                                                onLinkOpen: this.props.onLinkOpen,
                                                setToast: this.setToast
                                            }, n[0].id), this.state.toast !== null && p(Jj, {
                                                message: this.state.toast.message,
                                                onClose: ()=>this.setToast(null),
                                                duration: this.state.toast.duration,
                                                closable: this.state.toast.closable
                                            }), this.state.contextMenu && p(_W, {
                                                items: this.state.contextMenu.items,
                                                top: this.state.contextMenu.top,
                                                left: this.state.contextMenu.left,
                                                actionManager: this.actionManager
                                            }), p(_Y, {
                                                canvas: this.canvas,
                                                rc: this.rc,
                                                elements: s,
                                                visibleElements: a,
                                                versionNonce: o,
                                                selectionNonce: (c = this.state.selectionElement) == null ? void 0 : c.versionNonce,
                                                scale: window.devicePixelRatio,
                                                appState: this.state,
                                                renderConfig: {
                                                    imageCache: this.imageCache,
                                                    isExporting: !1,
                                                    renderGrid: !0
                                                }
                                            }), p(EY, {
                                                containerRef: this.excalidrawContainerRef,
                                                canvas: this.interactiveCanvas,
                                                elements: s,
                                                visibleElements: a,
                                                selectedElements: n,
                                                versionNonce: o,
                                                selectionNonce: (u = this.state.selectionElement) == null ? void 0 : u.versionNonce,
                                                scale: window.devicePixelRatio,
                                                appState: this.state,
                                                renderInteractiveSceneCallback: this.renderInteractiveSceneCallback,
                                                handleCanvasRef: this.handleInteractiveCanvasRef,
                                                onContextMenu: this.handleCanvasContextMenu,
                                                onPointerMove: this.handleCanvasPointerMove,
                                                onPointerUp: this.handleCanvasPointerUp,
                                                onPointerCancel: this.removePointer,
                                                onTouchMove: this.handleTouchMove,
                                                onPointerDown: this.handleCanvasPointerDown,
                                                onDoubleClick: this.handleCanvasDoubleClick
                                            }), this.renderFrameNames()]
                                        }), this.renderEmbeddables()]
                                    })
                                })
                            })
                        })
                    })
                })
            })
        })
    }
    async componentDidMount() {
        var r, i;
        if (this.unmounted = !1,
        this.excalidrawContainerValue.container = this.excalidrawContainerRef.current,
        this.scene.addCallback(this.onSceneUpdated),
        this.addEventListeners(),
        this.props.autoFocus && this.excalidrawContainerRef.current && this.focusContainer(),
        this.excalidrawContainerRef.current && !XL() && this.refreshDeviceState(this.excalidrawContainerRef.current),
        "ResizeObserver"in window && ((r = this.excalidrawContainerRef) != null && r.current))
            this.resizeObserver = new ResizeObserver(()=>{
                this.refreshDeviceState(this.excalidrawContainerRef.current),
                this.updateDOMRect()
            }
            ),
            (i = this.resizeObserver) == null || i.observe(this.excalidrawContainerRef.current);
        else if (window.matchMedia) {
            const o = window.matchMedia(`(max-width: ${cw}px), (max-height: ${dw}px) and (max-width: ${uw}px)`)
              , s = window.matchMedia(`(max-width: ${lw}px)`)
              , a = window.matchMedia(`(min-width: ${this.props.UIOptions.dockedSidebarBreakpoint != null ? this.props.UIOptions.dockedSidebarBreakpoint : fw}px)`)
              , l = ()=>{
                this.excalidrawContainerRef.current.getBoundingClientRect(),
                this.device = Zf(this.device, {
                    isSmScreen: s.matches,
                    isMobile: o.matches,
                    canDeviceFitSidebar: a.matches
                })
            }
            ;
            o.addListener(l),
            this.detachIsMobileMqHandler = ()=>o.removeListener(l)
        }
        new URLSearchParams(window.location.search.slice(1)).has("web-share-target") ? this.restoreFileFromShare() : this.updateDOMRect(this.initializeScene),
        oL() && !fz() && this.setState({
            errorMessage: p(hY, {})
        })
    }
    componentWillUnmount() {
        var n;
        this.renderer.destroy(),
        this.scene = new Fe,
        this.renderer = new D4(this.scene),
        this.files = {},
        this.imageCache.clear(),
        (n = this.resizeObserver) == null || n.disconnect(),
        this.unmounted = !0,
        this.removeEventListeners(),
        this.scene.destroy(),
        this.library.destroy(),
        this.laserPathManager.destroy(),
        We.destroy(),
        xr.destroy(),
        clearTimeout(ro),
        Pt.clearCache(),
        Nn.clearCache(),
        ro = 0
    }
    removeEventListeners() {
        var n, r, i, o, s;
        document.removeEventListener(U.POINTER_UP, this.removePointer),
        document.removeEventListener(U.COPY, this.onCopy),
        document.removeEventListener(U.PASTE, this.pasteFromClipboard),
        document.removeEventListener(U.CUT, this.onCut),
        (n = this.excalidrawContainerRef.current) == null || n.removeEventListener(U.WHEEL, this.onWheel),
        (r = this.nearestScrollableContainer) == null || r.removeEventListener(U.SCROLL, this.onScroll),
        document.removeEventListener(U.KEYDOWN, this.onKeyDown, !1),
        document.removeEventListener(U.MOUSE_MOVE, this.updateCurrentCursorPosition, !1),
        document.removeEventListener(U.KEYUP, this.onKeyUp),
        window.removeEventListener(U.RESIZE, this.onResize, !1),
        window.removeEventListener(U.UNLOAD, this.onUnload, !1),
        window.removeEventListener(U.BLUR, this.onBlur, !1),
        (i = this.excalidrawContainerRef.current) == null || i.removeEventListener(U.DRAG_OVER, this.disableEvent, !1),
        (o = this.excalidrawContainerRef.current) == null || o.removeEventListener(U.DROP, this.disableEvent, !1),
        document.removeEventListener(U.GESTURE_START, this.onGestureStart, !1),
        document.removeEventListener(U.GESTURE_CHANGE, this.onGestureChange, !1),
        document.removeEventListener(U.GESTURE_END, this.onGestureEnd, !1),
        (s = this.detachIsMobileMqHandler) == null || s.call(this),
        window.removeEventListener(U.MESSAGE, this.onWindowMessage, !1)
    }
    addEventListeners() {
        var n, r, i, o, s;
        this.removeEventListeners(),
        window.addEventListener(U.MESSAGE, this.onWindowMessage, !1),
        document.addEventListener(U.POINTER_UP, this.removePointer),
        document.addEventListener(U.COPY, this.onCopy),
        (n = this.excalidrawContainerRef.current) == null || n.addEventListener(U.WHEEL, this.onWheel, {
            passive: !1
        }),
        this.props.handleKeyboardGlobally && document.addEventListener(U.KEYDOWN, this.onKeyDown, !1),
        document.addEventListener(U.KEYUP, this.onKeyUp, {
            passive: !0
        }),
        document.addEventListener(U.MOUSE_MOVE, this.updateCurrentCursorPosition),
        (i = (r = document.fonts) == null ? void 0 : r.addEventListener) == null || i.call(r, "loadingdone", a=>{
            const l = a.fontfaces;
            this.fonts.onFontsLoaded(l)
        }
        ),
        document.addEventListener(U.GESTURE_START, this.onGestureStart, !1),
        document.addEventListener(U.GESTURE_CHANGE, this.onGestureChange, !1),
        document.addEventListener(U.GESTURE_END, this.onGestureEnd, !1),
        !this.state.viewModeEnabled && (document.addEventListener(U.PASTE, this.pasteFromClipboard),
        document.addEventListener(U.CUT, this.onCut),
        this.props.detectScroll && (this.nearestScrollableContainer = ZL(this.excalidrawContainerRef.current),
        this.nearestScrollableContainer.addEventListener(U.SCROLL, this.onScroll)),
        window.addEventListener(U.RESIZE, this.onResize, !1),
        window.addEventListener(U.UNLOAD, this.onUnload, !1),
        window.addEventListener(U.BLUR, this.onBlur, !1),
        (o = this.excalidrawContainerRef.current) == null || o.addEventListener(U.DRAG_OVER, this.disableEvent, !1),
        (s = this.excalidrawContainerRef.current) == null || s.addEventListener(U.DROP, this.disableEvent, !1))
    }
    componentDidUpdate(n, r) {
        var o, s, a, l, c, u;
        this.updateEmbeddables(),
        !this.state.showWelcomeScreen && !this.scene.getElementsIncludingDeleted().length && this.setState({
            showWelcomeScreen: !0
        }),
        this.excalidrawContainerRef.current && n.UIOptions.dockedSidebarBreakpoint !== this.props.UIOptions.dockedSidebarBreakpoint && this.refreshDeviceState(this.excalidrawContainerRef.current),
        (r.scrollX !== this.state.scrollX || r.scrollY !== this.state.scrollY) && ((s = (o = this.props) == null ? void 0 : o.onScrollChange) == null || s.call(o, this.state.scrollX, this.state.scrollY)),
        Object.keys(this.state.selectedElementIds).length && Cs(this.state) && this.setState({
            activeTool: Ct(this.state, {
                type: "selection"
            })
        }),
        this.state.activeTool.type === "eraser" && r.theme !== this.state.theme && n7(this.interactiveCanvas, this.state.theme),
        r.activeTool.type === "selection" && this.state.activeTool.type !== "selection" && this.state.showHyperlinkPopup && this.setState({
            showHyperlinkPopup: !1
        }),
        n.langCode !== this.props.langCode && this.updateLanguage(),
        n.viewModeEnabled !== this.props.viewModeEnabled && this.setState({
            viewModeEnabled: !!this.props.viewModeEnabled
        }),
        r.viewModeEnabled !== this.state.viewModeEnabled && (this.addEventListeners(),
        this.deselectElements()),
        n.zenModeEnabled !== this.props.zenModeEnabled && this.setState({
            zenModeEnabled: !!this.props.zenModeEnabled
        }),
        n.theme !== this.props.theme && this.props.theme && this.setState({
            theme: this.props.theme
        }),
        n.gridModeEnabled !== this.props.gridModeEnabled && this.setState({
            gridSize: this.props.gridModeEnabled ? tl : null
        }),
        this.props.name && n.name !== this.props.name && this.setState({
            name: this.props.name
        }),
        (a = this.excalidrawContainerRef.current) == null || a.classList.toggle("theme--dark", this.state.theme === "dark"),
        this.state.editingLinearElement && !this.state.selectedElementIds[this.state.editingLinearElement.elementId] && setTimeout(()=>{
            this.state.editingLinearElement && this.actionManager.executeAction(Yr)
        }
        ),
        (l = this.state.editingElement) != null && l.isDeleted && this.setState({
            editingElement: null
        }),
        this.state.selectedLinearElement && !this.state.selectedElementIds[this.state.selectedLinearElement.elementId] && this.setState({
            selectedLinearElement: null
        });
        const {multiElement: i} = r;
        r.activeTool !== this.state.activeTool && i != null && Ts(this.state) && sn(i, !1) && Tg(i, this.state, this.scene, bo(ce.getPointAtIndexGlobalCoordinates(i, -1))),
        this.history.record(this.state, this.scene.getElementsIncludingDeleted()),
        this.state.isLoading || (u = (c = this.props).onChange) == null || u.call(c, this.scene.getElementsIncludingDeleted(), this.state, this.files)
    }
    static resetTapTwice() {
        bc = !1
    }
    addTextFromPaste(n, r=!1) {
        const {x: i, y: o} = Ke({
            clientX: this.lastViewportPosition.x,
            clientY: this.lastViewportPosition.y
        }, this.state)
          , s = {
            x: i,
            y: o,
            strokeColor: this.state.currentItemStrokeColor,
            backgroundColor: this.state.currentItemBackgroundColor,
            fillStyle: this.state.currentItemFillStyle,
            strokeWidth: this.state.currentItemStrokeWidth,
            strokeStyle: this.state.currentItemStrokeStyle,
            roundness: null,
            roughness: this.state.currentItemRoughness,
            opacity: this.state.currentItemOpacity,
            text: n,
            fontSize: this.state.currentItemFontSize,
            fontFamily: this.state.currentItemFontFamily,
            textAlign: this.state.currentItemTextAlign,
            verticalAlign: Fh,
            locked: !1
        }
          , a = 10;
        let l = o;
        const c = r ? [n] : n.split(`
`)
          , u = c.reduce((f,h,m)=>{
            var v;
            const g = h.trim()
              , E = ea(s.fontFamily);
            if (g.length) {
                const y = this.getTopLayerFrameAtSceneCoords({
                    x: i,
                    y: l
                })
                  , w = Br({
                    ...s,
                    x: i,
                    y: l,
                    text: g,
                    lineHeight: E,
                    frameId: y ? y.id : null
                });
                f.push(w),
                l += w.height + a
            } else
                ((v = c[m - 1]) == null ? void 0 : v.trim()) && (l += Td(s.fontSize, E) + a);
            return f
        }
        , []);
        if (u.length === 0)
            return;
        const d = u[0].frameId;
        d ? this.scene.insertElementsAtIndex(u, this.scene.getElementIndex(d)) : this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(), ...u]),
        this.setState({
            selectedElementIds: Oe(Object.fromEntries(u.map(f=>[f.id, !0])), this.state)
        }),
        !r && u.length > 1 && U4 === !1 && !this.device.isMobile && (this.setToast({
            message: _("toast.pasteAsSingleElement", {
                shortcut: j("CtrlOrCmd+Shift+V")
            }),
            duration: 5e3
        }),
        U4 = !0),
        this.history.resumeRecording()
    }
    handleTextWysiwyg(n, {isExistingElement: r=!1}) {
        const i = (o,s,a)=>{
            this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id === n.id && ue(l) ? _R(l, {
                text: o,
                isDeleted: a,
                originalText: s
            }) : l)])
        }
        ;
        iz({
            id: n.id,
            canvas: this.canvas,
            getViewportCoords: (o,s)=>{
                const {x: a, y: l} = Cr({
                    sceneX: o,
                    sceneY: s
                }, this.state);
                return [a - this.state.offsetLeft, l - this.state.offsetTop]
            }
            ,
            onChange: Ze(o=>{
                i(o, o, !1),
                e2(n) && Ko(n)
            }
            ),
            onSubmit: Ze(({text: o, viaKeyboard: s, originalText: a})=>{
                const l = !o.trim();
                if (i(o, a, l),
                !l && s) {
                    const c = n.containerId ? n.containerId : n.id;
                    this.setState(u=>({
                        selectedElementIds: Oe({
                            ...u.selectedElementIds,
                            [c]: !0
                        }, u)
                    }))
                }
                l && py(this.scene.getNonDeletedElements(), [n]),
                (!l || r) && this.history.resumeRecording(),
                this.setState({
                    draggingElement: null,
                    editingElement: null
                }),
                this.state.activeTool.locked && ki(this.interactiveCanvas, this.state),
                this.focusContainer()
            }
            ),
            element: n,
            excalidrawContainer: this.excalidrawContainerRef.current,
            app: this
        }),
        this.deselectElements(),
        i(n.text, n.originalText, !1)
    }
    deselectElements() {
        this.setState({
            selectedElementIds: Oe({}, this.state),
            selectedGroupIds: {},
            editingGroupId: null,
            activeEmbeddable: null
        })
    }
    getTextElementAtPosition(n, r) {
        const i = this.getElementAtPosition(n, r, {
            includeBoundTextElement: !0
        });
        return i && ue(i) && !i.isDeleted ? i : null
    }
    getElementAtPosition(n, r, i) {
        const o = this.getElementsAtPosition(n, r, i == null ? void 0 : i.includeBoundTextElement, i == null ? void 0 : i.includeLockedElements);
        if (o.length > 1) {
            if (i != null && i.preferSelected) {
                for (let a = o.length - 1; a > -1; a--)
                    if (this.state.selectedElementIds[o[a].id])
                        return o[a]
            }
            const s = o[o.length - 1];
            return Ep(s, this.state, this.frameNameBoundsCache, n, r) ? o[o.length - 2] : s
        }
        return o.length === 1 ? o[0] : null
    }
    getElementsAtPosition(n, r, i=!1, o=!1) {
        const s = i && o ? this.scene.getNonDeletedElements() : this.scene.getNonDeletedElements().filter(a=>(o || !a.locked) && (i || !(ue(a) && a.containerId)));
        return fB(s, a=>Zh(a, this.state, this.frameNameBoundsCache, n, r)).filter(a=>{
            const l = dr(a);
            return l && this.state.frameRendering.enabled && this.state.frameRendering.clip ? J6({
                x: n,
                y: r
            }, l) : !0
        }
        )
    }
    handleHoverSelectedLinearElement(n, r, i) {
        const o = ce.getElement(n.elementId)
          , s = Ae(o);
        if (o)
            if (this.state.selectedLinearElement) {
                let a = -1
                  , l = null;
                Uu(o, this.state, this.frameNameBoundsCache, [r, i]) ? (a = ce.getPointIndexUnderCursor(o, this.state.zoom, r, i),
                l = ce.getSegmentMidpointHitCoords(n, {
                    x: r,
                    y: i
                }, this.state),
                a >= 0 || l ? Re(this.interactiveCanvas, De.POINTER) : Re(this.interactiveCanvas, De.MOVE)) : uy([o], this.state) && Ep(o, this.state, this.frameNameBoundsCache, r, i) ? Re(this.interactiveCanvas, De.MOVE) : s && Zh(s, this.state, this.frameNameBoundsCache, r, i) && Re(this.interactiveCanvas, De.MOVE),
                this.state.selectedLinearElement.hoverPointIndex !== a && this.setState({
                    selectedLinearElement: {
                        ...this.state.selectedLinearElement,
                        hoverPointIndex: a
                    }
                }),
                ce.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords, l) || this.setState({
                    selectedLinearElement: {
                        ...this.state.selectedLinearElement,
                        segmentMidPointHoveredCoords: l
                    }
                })
            } else
                Re(this.interactiveCanvas, De.AUTO)
    }
    maybeCleanupAfterMissingPointerUp(n) {
        io !== null && io(n)
    }
    updateGestureOnPointerDown(n) {
        ke.pointers.set(n.pointerId, {
            x: n.clientX,
            y: n.clientY
        }),
        ke.pointers.size === 2 && (ke.lastCenter = u4(ke.pointers),
        ke.initialScale = this.state.zoom.value,
        ke.initialDistance = d4(Array.from(ke.pointers.values())))
    }
    initialPointerDownState(n) {
        const r = Ke(n, this.state)
          , i = this.scene.getSelectedElements(this.state)
          , [o,s,a,l] = mt(i);
        return {
            origin: r,
            withCmdOrCtrl: n[R.CTRL_OR_CMD],
            originInGrid: bo(en(r.x, r.y, n[R.CTRL_OR_CMD] ? null : this.state.gridSize)),
            scrollbars: ab(nm, n.clientX - this.state.offsetLeft, n.clientY - this.state.offsetTop),
            lastCoords: {
                ...r
            },
            originalElements: this.scene.getNonDeletedElements().reduce((c,u)=>(c.set(u.id, bd(u)),
            c), new Map),
            resize: {
                handleType: !1,
                isResizing: !1,
                offset: {
                    x: 0,
                    y: 0
                },
                arrowDirection: "origin",
                center: {
                    x: (a + o) / 2,
                    y: (l + s) / 2
                }
            },
            hit: {
                element: null,
                allHitElements: [],
                wasAddedToSelection: !1,
                hasBeenDuplicated: !1,
                hasHitCommonBoundingBoxOfSelectedElements: this.isHittingCommonBoundingBoxOfSelectedElements(r, i)
            },
            drag: {
                hasOccurred: !1,
                offset: null
            },
            eventListeners: {
                onMove: null,
                onUp: null,
                onKeyUp: null,
                onKeyDown: null
            },
            boxSelection: {
                hasOccurred: !1
            },
            elementIdsToErase: {}
        }
    }
    handleDraggingScrollBar(n, r) {
        if (!(r.scrollbars.isOverEither && !this.state.multiElement))
            return !1;
        tm = !0,
        r.lastCoords.x = n.clientX,
        r.lastCoords.y = n.clientY;
        const i = fp(s=>{
            s.target instanceof HTMLElement && this.handlePointerMoveOverScrollbars(s, r)
        }
        )
          , o = Ze(()=>{
            tm = !1,
            ki(this.interactiveCanvas, this.state),
            io = null,
            this.setState({
                cursorButton: "up"
            }),
            this.savePointer(n.clientX, n.clientY, "up"),
            window.removeEventListener(U.POINTER_MOVE, i),
            window.removeEventListener(U.POINTER_UP, o),
            i.flush()
        }
        );
        return io = o,
        window.addEventListener(U.POINTER_MOVE, i),
        window.addEventListener(U.POINTER_UP, o),
        !0
    }
    isASelectedElement(n) {
        return n != null && this.state.selectedElementIds[n.id]
    }
    isHittingCommonBoundingBoxOfSelectedElements(n, r) {
        if (r.length < 2)
            return !1;
        const i = 10 / this.state.zoom.value
          , [o,s,a,l] = mt(r);
        return n.x > o - i && n.x < a + i && n.y > s - i && n.y < l + i
    }
    getCurrentItemRoundness(n) {
        return this.state.currentItemRoundness === "round" ? {
            type: Nl(n) ? zt.ADAPTIVE_RADIUS : zt.PROPORTIONAL_RADIUS
        } : null
    }
    maybeCacheReferenceSnapPoints(n, r, i=!1) {
        Qo({
            event: n,
            appState: this.state,
            selectedElements: r
        }) && (i || !xr.getReferenceSnapPoints()) && xr.setReferenceSnapPoints(oY(this.scene.getNonDeletedElements(), r, this.state))
    }
    maybeCacheVisibleGaps(n, r, i=!1) {
        Qo({
            event: n,
            appState: this.state,
            selectedElements: r
        }) && (i || !xr.getVisibleGaps()) && xr.setVisibleGaps(iY(this.scene.getNonDeletedElements(), r, this.state))
    }
    onKeyDownFromPointerDownHandler(n) {
        return Ze(r=>{
            this.maybeHandleResize(n, r) || this.maybeDragNewGenericElement(n, r)
        }
        )
    }
    onKeyUpFromPointerDownHandler(n) {
        return Ze(r=>{
            r.key === R.ALT && r.preventDefault(),
            !this.maybeHandleResize(n, r) && this.maybeDragNewGenericElement(n, r)
        }
        )
    }
    onPointerMoveFromPointerDownHandler(n) {
        return fp(r=>{
            var d, f;
            if (n.drag.offset === null && (n.drag.offset = bo(lH(this.scene.getSelectedElements(this.state), n.origin.x, n.origin.y))),
            !(r.target instanceof HTMLElement) || this.handlePointerMoveOverScrollbars(r, n))
                return;
            const o = Ke(r, this.state);
            if (Cs(this.state)) {
                this.handleEraser(r, n, o);
                return
            }
            this.state.activeTool.type === "laser" && this.laserPathManager.addPointToPath(o.x, o.y);
            const [s,a] = en(o.x, o.y, r[R.CTRL_OR_CMD] ? null : this.state.gridSize);
            if (!n.drag.hasOccurred && (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line") && wt(o.x, o.y, n.origin.x, n.origin.y) < us)
                return;
            if (n.resize.isResizing && (n.lastCoords.x = o.x,
            n.lastCoords.y = o.y,
            this.maybeHandleResize(n, r)))
                return !0;
            if (this.state.selectedLinearElement) {
                const h = this.state.editingLinearElement || this.state.selectedLinearElement;
                if (ce.shouldAddMidpoint(this.state.selectedLinearElement, o, this.state)) {
                    const g = ce.addMidpoint(this.state.selectedLinearElement, o, this.state, !r[R.CTRL_OR_CMD]);
                    if (!g)
                        return;
                    Vn.flushSync(()=>{
                        this.state.selectedLinearElement && this.setState({
                            selectedLinearElement: {
                                ...this.state.selectedLinearElement,
                                pointerDownState: g.pointerDownState,
                                selectedPointsIndices: g.selectedPointsIndices
                            }
                        }),
                        this.state.editingLinearElement && this.setState({
                            editingLinearElement: {
                                ...this.state.editingLinearElement,
                                pointerDownState: g.pointerDownState,
                                selectedPointsIndices: g.selectedPointsIndices
                            }
                        })
                    }
                    );
                    return
                } else if (h.pointerDownState.segmentMidpoint.value !== null && !h.pointerDownState.segmentMidpoint.added)
                    return;
                if (ce.handlePointDragging(r, this.state, o.x, o.y, (g,E)=>{
                    this.maybeSuggestBindingsForLinearElementAtCoords(g, E)
                }
                , h)) {
                    n.lastCoords.x = o.x,
                    n.lastCoords.y = o.y,
                    n.drag.hasOccurred = !0,
                    this.state.editingLinearElement && !this.state.editingLinearElement.isDragging && this.setState({
                        editingLinearElement: {
                            ...this.state.editingLinearElement,
                            isDragging: !0
                        }
                    }),
                    this.state.selectedLinearElement.isDragging || this.setState({
                        selectedLinearElement: {
                            ...this.state.selectedLinearElement,
                            isDragging: !0
                        }
                    });
                    return
                }
            }
            const l = n.hit.allHitElements.some(h=>this.isASelectedElement(h))
              , c = this.state.editingLinearElement && r.shiftKey && this.state.editingLinearElement.elementId === ((d = n.hit.element) == null ? void 0 : d.id);
            if ((l || n.hit.hasHitCommonBoundingBoxOfSelectedElements) && !c) {
                const h = this.scene.getSelectedElements(this.state);
                if (h.every(E=>E.locked))
                    return;
                const m = h.find(E=>cn(E))
                  , g = this.getTopLayerFrameAtSceneCoords(o);
                if (this.setState({
                    frameToHighlight: g && !m ? g : null
                }),
                n.drag.hasOccurred = !0,
                this.setState({
                    selectedElementsAreBeingDragged: !0
                }),
                h.length > 0 && !n.withCmdOrCtrl && !this.state.editingElement && ((f = this.state.activeEmbeddable) == null ? void 0 : f.state) !== "active") {
                    const E = {
                        x: o.x - n.origin.x,
                        y: o.y - n.origin.y
                    }
                      , v = [...n.originalElements.values()]
                      , y = r.shiftKey;
                    if (y) {
                        const I = Math.abs(E.x)
                          , S = Math.abs(E.y)
                          , C = y && I < S
                          , T = y && I > S;
                        C && (E.x = 0),
                        T && (E.y = 0)
                    }
                    this.maybeCacheVisibleGaps(r, h),
                    this.maybeCacheReferenceSnapPoints(r, h);
                    const {snapOffset: w, snapLines: b} = sY(it(v, this.state), E, this.state, r);
                    if (this.setState({
                        snapLines: b
                    }),
                    !this.state.editingFrame && aH(n, h, E, this.state, this.scene, w, r[R.CTRL_OR_CMD] ? null : this.state.gridSize),
                    this.maybeSuggestBindingForAll(h),
                    r.altKey && !n.hit.hasBeenDuplicated) {
                        n.hit.hasBeenDuplicated = !0;
                        const I = []
                          , S = []
                          , C = new Map
                          , T = new Map
                          , L = n.hit.element
                          , A = new Set(this.scene.getSelectedElements({
                            selectedElementIds: this.state.selectedElementIds,
                            includeBoundTextElement: !0,
                            includeElementsInFrames: !0
                        }).map(N=>N.id))
                          , P = this.scene.getElementsIncludingDeleted();
                        for (const N of P)
                            if (A.has(N.id) || N.id === (L == null ? void 0 : L.id) && n.hit.wasAddedToSelection) {
                                const $ = o7(this.state.editingGroupId, C, N)
                                  , V = n.originalElements.get(N.id);
                                Q($, {
                                    x: V.x,
                                    y: V.y
                                }),
                                n.originalElements.set($.id, $),
                                I.push($),
                                S.push(N),
                                T.set(N.id, $.id)
                            } else
                                I.push(N);
                        const O = [...I, ...S];
                        GI(I, S, T),
                        V7(O, S, T, "duplicatesServeAsOld"),
                        yS(O, S, T),
                        this.scene.replaceAllElements(O),
                        this.maybeCacheVisibleGaps(r, h, !0),
                        this.maybeCacheReferenceSnapPoints(r, h, !0)
                    }
                    return
                }
            }
            const u = this.state.draggingElement;
            if (u) {
                if (u.type === "freedraw") {
                    const h = u.points
                      , m = o.x - u.x
                      , g = o.y - u.y
                      , E = h.length > 0 && h[h.length - 1];
                    if (!(E && E[0] === m && E[1] === g)) {
                        const y = u.simulatePressure ? u.pressures : [...u.pressures, r.pressure];
                        Q(u, {
                            points: [...h, [m, g]],
                            pressures: y
                        })
                    }
                } else if (ye(u)) {
                    n.drag.hasOccurred = !0,
                    this.setState({
                        selectedElementsAreBeingDragged: !0
                    });
                    const h = u.points;
                    let m = s - u.x
                      , g = a - u.y;
                    Kc(r) && h.length === 2 && ({width: m, height: g} = Qg(u.x, u.y, o.x, o.y)),
                    h.length === 1 ? Q(u, {
                        points: [...h, [m, g]]
                    }) : h.length === 2 && Q(u, {
                        points: [...h.slice(0, -1), [m, g]]
                    }),
                    sn(u, !1) && this.maybeSuggestBindingsForLinearElementAtCoords(u, [o], this.state.startBoundElement)
                } else
                    n.lastCoords.x = o.x,
                    n.lastCoords.y = o.y,
                    this.maybeDragNewGenericElement(n, r);
                if (this.state.activeTool.type === "selection") {
                    n.boxSelection.hasOccurred = !0;
                    const h = this.scene.getNonDeletedElements();
                    if (this.state.editingLinearElement)
                        ce.handleBoxSelection(r, this.state, this.setState.bind(this));
                    else {
                        let m = !0;
                        !r.shiftKey && Pt(h, this.state) && (n.withCmdOrCtrl && n.hit.element ? this.setState(E=>Nn({
                            ...E,
                            selectedElementIds: {
                                [n.hit.element.id]: !0
                            }
                        }, this.scene.getNonDeletedElements(), E, this)) : m = !1);
                        const g = Hy(h, u);
                        this.setState(E=>{
                            const v = {
                                ...m && E.selectedElementIds,
                                ...g.reduce((y,w)=>(y[w.id] = !0,
                                y), {})
                            };
                            return n.hit.element && (g.length ? delete v[n.hit.element.id] : v[n.hit.element.id] = !0),
                            E = m ? E : {
                                ...E,
                                selectedGroupIds: {},
                                editingGroupId: null
                            },
                            {
                                ...Nn({
                                    editingGroupId: E.editingGroupId,
                                    selectedElementIds: v
                                }, this.scene.getNonDeletedElements(), E, this),
                                selectedLinearElement: g.length === 1 && ye(g[0]) ? new ce(g[0],this.scene) : null,
                                showHyperlinkPopup: g.length === 1 && (g[0].link || ht(g[0])) ? "info" : !1
                            }
                        }
                        )
                    }
                }
            }
        }
        )
    }
    handlePointerMoveOverScrollbars(n, r) {
        if (r.scrollbars.isOverHorizontal) {
            const i = n.clientX
              , o = i - r.lastCoords.x;
            return this.translateCanvas({
                scrollX: this.state.scrollX - o / this.state.zoom.value
            }),
            r.lastCoords.x = i,
            !0
        }
        if (r.scrollbars.isOverVertical) {
            const i = n.clientY
              , o = i - r.lastCoords.y;
            return this.translateCanvas({
                scrollY: this.state.scrollY - o / this.state.zoom.value
            }),
            r.lastCoords.y = i,
            !0
        }
        return !1
    }
    onPointerUpFromPointerDownHandler(n) {
        return Ze(r=>{
            var d, f, h, m, g, E;
            n.eventListeners.onMove && n.eventListeners.onMove.flush();
            const {draggingElement: i, resizingElement: o, multiElement: s, activeTool: a, isResizing: l, isRotating: c} = this.state;
            if (this.setState({
                isResizing: !1,
                isRotating: !1,
                resizingElement: null,
                selectionElement: null,
                frameToHighlight: null,
                elementsToHighlight: null,
                cursorButton: "up",
                editingElement: s || ue(this.state.editingElement) ? this.state.editingElement : null,
                snapLines: [],
                originSnapOffset: null
            }),
            xr.setReferenceSnapPoints(null),
            xr.setVisibleGaps(null),
            this.savePointer(r.clientX, r.clientY, "up"),
            this.setState({
                selectedElementsAreBeingDragged: !1
            }),
            this.state.editingLinearElement)
                if (!n.boxSelection.hasOccurred && ((f = (d = n.hit) == null ? void 0 : d.element) == null ? void 0 : f.id) !== this.state.editingLinearElement.elementId)
                    this.actionManager.executeAction(Yr);
                else {
                    const v = ce.handlePointerUp(r, this.state.editingLinearElement, this.state);
                    v !== this.state.editingLinearElement && this.setState({
                        editingLinearElement: v,
                        suggestedBindings: []
                    })
                }
            else if (this.state.selectedLinearElement)
                if (((m = (h = n.hit) == null ? void 0 : h.element) == null ? void 0 : m.id) !== this.state.selectedLinearElement.elementId)
                    this.scene.getSelectedElements(this.state).length > 1 && this.setState({
                        selectedLinearElement: null
                    });
                else {
                    const v = ce.handlePointerUp(r, this.state.selectedLinearElement, this.state)
                      , {startBindingElement: y, endBindingElement: w} = v
                      , b = this.scene.getElement(v.elementId);
                    sn(b) && Fl(b, y, w),
                    v !== this.state.selectedLinearElement && this.setState({
                        selectedLinearElement: {
                            ...v,
                            selectedPointsIndices: null
                        },
                        suggestedBindings: []
                    })
                }
            if (io = null,
            window.removeEventListener(U.POINTER_MOVE, n.eventListeners.onMove),
            window.removeEventListener(U.POINTER_UP, n.eventListeners.onUp),
            window.removeEventListener(U.KEYDOWN, n.eventListeners.onKeyDown),
            window.removeEventListener(U.KEYUP, n.eventListeners.onKeyUp),
            this.state.pendingImageElementId && this.setState({
                pendingImageElementId: null
            }),
            (i == null ? void 0 : i.type) === "freedraw") {
                const v = Ke(r, this.state)
                  , y = i.points;
                let w = v.x - i.x
                  , b = v.y - i.y;
                w === y[0][0] && b === y[0][1] && (b += 1e-4,
                w += 1e-4);
                const I = i.simulatePressure ? [] : [...i.pressures, r.pressure];
                Q(i, {
                    points: [...y, [w, b]],
                    pressures: I,
                    lastCommittedPoint: [w, b]
                }),
                this.actionManager.executeAction(Yr);
                return
            }
            if (Ni(i)) {
                const v = i;
                try {
                    this.initializeImageDimensions(v),
                    this.setState({
                        selectedElementIds: Oe({
                            [v.id]: !0
                        }, this.state)
                    }, ()=>{
                        this.actionManager.executeAction(Yr)
                    }
                    )
                } catch (y) {
                    console.error(y),
                    this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(w=>w.id !== v.id)),
                    this.actionManager.executeAction(Yr)
                }
                return
            }
            if (ye(i)) {
                i.points.length > 1 && this.history.resumeRecording();
                const v = Ke(r, this.state);
                !n.drag.hasOccurred && i && !s ? (Q(i, {
                    points: [...i.points, [v.x - i.x, v.y - i.y]]
                }),
                this.setState({
                    multiElement: i,
                    editingElement: this.state.draggingElement
                })) : n.drag.hasOccurred && !s && (Ts(this.state) && sn(i, !1) && Tg(i, this.state, this.scene, v),
                this.setState({
                    suggestedBindings: [],
                    startBoundElement: null
                }),
                a.locked ? this.setState(y=>({
                    draggingElement: null
                })) : (Er(this.interactiveCanvas),
                this.setState(y=>({
                    draggingElement: null,
                    activeTool: Ct(this.state, {
                        type: "selection"
                    }),
                    selectedElementIds: Oe({
                        ...y.selectedElementIds,
                        [i.id]: !0
                    }, y),
                    selectedLinearElement: new ce(i,this.scene)
                }))));
                return
            }
            if (a.type !== "selection" && i && ta(i)) {
                this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(v=>v.id !== i.id)),
                this.setState({
                    draggingElement: null
                });
                return
            }
            if (i) {
                if (n.drag.hasOccurred) {
                    const v = Ke(r, this.state);
                    if (this.state.selectedLinearElement && this.state.selectedLinearElement.isDragging) {
                        const y = this.scene.getElement(this.state.selectedLinearElement.elementId);
                        if (y != null && y.frameId) {
                            const w = dr(y);
                            w && y && (Xu(y, w) || (Q(y, {
                                groupIds: []
                            }),
                            this.scene.replaceAllElements(v0(this.scene.getElementsIncludingDeleted(), [y], this.state))))
                        }
                    } else {
                        const y = this.getTopLayerFrameAtSceneCoords(v)
                          , w = this.scene.getSelectedElements(this.state);
                        let b = this.scene.getElementsIncludingDeleted();
                        const I = S=>{
                            if (S.length > 0) {
                                for (const C of S) {
                                    const T = C.groupIds.indexOf(this.state.editingGroupId);
                                    Q(C, {
                                        groupIds: C.groupIds.slice(0, T)
                                    }, !1)
                                }
                                b.forEach(C=>{
                                    C.groupIds.length && Ft(b, C.groupIds[C.groupIds.length - 1]).length < 2 && Q(C, {
                                        groupIds: []
                                    }, !1)
                                }
                                ),
                                this.setState({
                                    editingGroupId: null
                                })
                            }
                        }
                        ;
                        if (y && !this.state.selectedElementIds[y.id]) {
                            const S = w.filter(C=>C.frameId !== y.id && qu(C, b, this.state));
                            this.state.editingGroupId && I(S),
                            b = Kg(b, S, y)
                        } else if (!y && this.state.editingGroupId) {
                            const S = w.filter(C=>C.frameId && !qu(C, b, this.state));
                            I(S)
                        }
                        b = Sl(b, this.state, this),
                        this.scene.replaceAllElements(b)
                    }
                }
                if (i.type === "frame") {
                    const v = Yz(this.scene.getElementsIncludingDeleted(), i);
                    this.scene.replaceAllElements(Kg(this.scene.getElementsIncludingDeleted(), v, i))
                }
                Q(i, CS(i))
            }
            if (o && this.history.resumeRecording(),
            o && ta(o) && this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(v=>v.id !== o.id)),
            n.resize.isResizing) {
                let v = Sl(this.scene.getElementsIncludingDeleted(), this.state, this);
                const y = this.scene.getSelectedElements(this.state).filter(w=>w.type === "frame");
                for (const w of y)
                    v = IS(v, rh(this.scene.getElementsIncludingDeleted(), w, this.state), w, this.state);
                this.scene.replaceAllElements(v)
            }
            const u = n.hit.element;
            if (((g = this.state.selectedLinearElement) == null ? void 0 : g.elementId) !== (u == null ? void 0 : u.id) && ye(u) && this.scene.getSelectedElements(this.state).length === 1 && this.setState({
                selectedLinearElement: new ce(u,this.scene)
            }),
            Cs(this.state)) {
                if (wt(this.lastPointerDownEvent.clientX, this.lastPointerDownEvent.clientY, this.lastPointerUpEvent.clientX, this.lastPointerUpEvent.clientY) === 0) {
                    const y = Ke({
                        clientX: this.lastPointerUpEvent.clientX,
                        clientY: this.lastPointerUpEvent.clientY
                    }, this.state);
                    this.getElementsAtPosition(y.x, y.y).forEach(b=>n.elementIdsToErase[b.id] = {
                        erase: !0,
                        opacity: b.opacity
                    })
                }
                this.eraseElements(n);
                return
            } else
                Object.keys(n.elementIdsToErase).length && this.restoreReadyToEraseElements(n);
            if (u && !n.drag.hasOccurred && !n.hit.wasAddedToSelection && (!this.state.editingLinearElement || !n.boxSelection.hasOccurred) && (r.shiftKey && !this.state.editingLinearElement ? this.state.selectedElementIds[u.id] ? Qv(this.state, u) ? this.setState(v=>{
                const y = {
                    ...v.selectedElementIds
                };
                for (const w of u.groupIds.flatMap(b=>Ft(this.scene.getNonDeletedElements(), b)))
                    delete y[w.id];
                return {
                    selectedGroupIds: {
                        ...v.selectedElementIds,
                        ...u.groupIds.map(w=>({
                            [w]: !1
                        })).reduce((w,b)=>({
                            ...w,
                            ...b
                        }), {})
                    },
                    selectedElementIds: Oe(y, v)
                }
            }
            ) : (E = this.state.selectedLinearElement) != null && E.isDragging || this.setState(v=>{
                const y = {
                    ...v.selectedElementIds
                };
                delete y[u.id];
                const w = it(this.scene.getNonDeletedElements(), {
                    selectedElementIds: y
                });
                return {
                    ...Nn({
                        editingGroupId: v.editingGroupId,
                        selectedElementIds: y
                    }, this.scene.getNonDeletedElements(), v, this),
                    selectedLinearElement: w.length === 1 && ye(w[0]) ? new ce(w[0],this.scene) : v.selectedLinearElement
                }
            }
            ) : u.frameId && this.state.selectedElementIds[u.frameId] ? this.setState(v=>{
                var w;
                const y = {
                    ...v.selectedElementIds,
                    [u.id]: !0
                };
                return delete y[u.frameId],
                (((w = this.scene.getElement(u.frameId)) == null ? void 0 : w.groupIds) ?? []).flatMap(b=>Ft(this.scene.getNonDeletedElements(), b)).forEach(b=>{
                    delete y[b.id]
                }
                ),
                {
                    ...Nn({
                        editingGroupId: v.editingGroupId,
                        selectedElementIds: y
                    }, this.scene.getNonDeletedElements(), v, this),
                    showHyperlinkPopup: u.link || ht(u) ? "info" : !1
                }
            }
            ) : this.setState(v=>({
                selectedElementIds: Oe({
                    ...v.selectedElementIds,
                    [u.id]: !0
                }, v)
            })) : this.setState(v=>{
                var y;
                return {
                    ...Nn({
                        editingGroupId: v.editingGroupId,
                        selectedElementIds: {
                            [u.id]: !0
                        }
                    }, this.scene.getNonDeletedElements(), v, this),
                    selectedLinearElement: ye(u) && ((y = v.selectedLinearElement) == null ? void 0 : y.elementId) !== u.id ? new ce(u,this.scene) : v.selectedLinearElement
                }
            }
            )),
            !n.drag.hasOccurred && !this.state.isResizing && (u && Ep(u, this.state, this.frameNameBoundsCache, n.origin.x, n.origin.y) || !u && n.hit.hasHitCommonBoundingBoxOfSelectedElements)) {
                this.state.editingLinearElement ? this.setState({
                    editingLinearElement: null
                }) : this.setState({
                    selectedElementIds: Oe({}, this.state),
                    selectedGroupIds: {},
                    editingGroupId: null,
                    activeEmbeddable: null
                });
                return
            }
            if (!a.locked && a.type !== "freedraw" && i && i.type !== "selection" && this.setState(v=>({
                selectedElementIds: Oe({
                    ...v.selectedElementIds,
                    [i.id]: !0
                }, v),
                showHyperlinkPopup: ht(i) && !i.link ? "editor" : v.showHyperlinkPopup
            })),
            (a.type !== "selection" || Pt(this.scene.getNonDeletedElements(), this.state)) && this.history.resumeRecording(),
            (n.drag.hasOccurred || l || c) && (Ts(this.state) ? kg : Mg)(this.scene.getSelectedElements(this.state)),
            a.type === "laser") {
                this.laserPathManager.endPath();
                return
            }
            !a.locked && a.type !== "freedraw" ? (Er(this.interactiveCanvas),
            this.setState({
                draggingElement: null,
                suggestedBindings: [],
                activeTool: Ct(this.state, {
                    type: "selection"
                })
            })) : this.setState({
                draggingElement: null,
                suggestedBindings: []
            }),
            u && this.lastPointerUpEvent && this.lastPointerDownEvent && this.lastPointerUpEvent.timeStamp - this.lastPointerDownEvent.timeStamp < 300 && ke.pointers.size <= 1 && ht(u) && this.isEmbeddableCenter(u, this.lastPointerUpEvent, n.origin.x, n.origin.y) && this.handleEmbeddableCenterClick(u)
        }
        )
    }
    maybeSuggestBindingForAll(n) {
        if (n.length > 50)
            return;
        const r = AN(n);
        this.setState({
            suggestedBindings: r
        })
    }
    clearSelection(n) {
        this.setState(r=>({
            selectedElementIds: Oe({}, r),
            activeEmbeddable: null,
            selectedGroupIds: {},
            editingGroupId: r.editingGroupId && n != null && Bu(n, r.editingGroupId) ? r.editingGroupId : null
        })),
        this.setState({
            selectedElementIds: Oe({}, this.state),
            activeEmbeddable: null,
            previousSelectedElementIds: this.state.selectedElementIds
        })
    }
    getTextWysiwygSnappedToCenterPosition(n, r, i, o) {
        if (o) {
            let s = o.x + o.width / 2
              , a = o.y + o.height / 2;
            const l = Mp(o, i);
            if (l && (s = l.x,
            a = l.y),
            Math.hypot(n - s, r - a) < aL) {
                const {x: d, y: f} = Cr({
                    sceneX: s,
                    sceneY: a
                }, i);
                return {
                    viewportX: d,
                    viewportY: f,
                    elementCenterX: s,
                    elementCenterY: a
                }
            }
        }
    }
    getCanvasOffsets() {
        var n;
        if ((n = this.excalidrawContainerRef) != null && n.current) {
            const r = this.excalidrawContainerRef.current
              , {left: i, top: o} = r.getBoundingClientRect();
            return {
                offsetLeft: i,
                offsetTop: o
            }
        }
        return {
            offsetLeft: 0,
            offsetTop: 0
        }
    }
    async updateLanguage() {
        const n = Bv.find(r=>r.code === this.props.langCode) || rs;
        await bx(n),
        this.setAppState({})
    }
}
;
M(C1, "defaultProps", {
    UIOptions: ug
});
let E2 = C1;
const RY = e=>{
    const {closeOnClickOutside: t=!0} = e
      , n = _I({
        className: "excalidraw-modal-container"
    });
    if (!n)
        return null;
    const r = i=>{
        i.key === R.ESCAPE && (i.nativeEvent.stopImmediatePropagation(),
        i.stopPropagation(),
        e.onCloseRequest())
    }
    ;
    return Vn.createPortal(k("div", {
        className: le("Modal", e.className),
        role: "dialog",
        "aria-modal": "true",
        onKeyDown: r,
        "aria-labelledby": e.labelledBy,
        "data-prevent-outside-click": !0,
        children: [p("div", {
            className: "Modal__background",
            onClick: t ? e.onCloseRequest : void 0
        }), p("div", {
            className: "Modal__content",
            style: {
                "--max-width": `${e.maxWidth}px`
            },
            tabIndex: 0,
            children: e.children
        })]
    }), n)
}
;
function OY(e) {
    if (e && typeof e == "number")
        return e;
    switch (e) {
    case "small":
        return 550;
    case "wide":
        return 1024;
    case "regular":
    default:
        return 800
    }
}
const Ur = e=>{
    const [t,n] = Ox()
      , [r] = x.useState(document.activeElement)
      , {id: i} = eo()
      , o = Xt();
    x.useEffect(()=>{
        if (!t)
            return;
        const c = pg(t);
        c.length > 0 && e.autofocus !== !1 && (c[1] || c[0]).focus();
        const u = d=>{
            if (d.key === R.TAB) {
                const f = pg(t)
                  , {activeElement: h} = document
                  , m = f.findIndex(g=>g === h);
                m === 0 && d.shiftKey ? (f[f.length - 1].focus(),
                d.preventDefault()) : m === f.length - 1 && !d.shiftKey && (f[0].focus(),
                d.preventDefault())
            }
        }
        ;
        return t.addEventListener("keydown", u),
        ()=>t.removeEventListener("keydown", u)
    }
    , [t, e.autofocus]);
    const s = Xn()
      , a = Ol(a3, Kt)
      , l = ()=>{
        s({
            openMenu: null
        }),
        a(!1),
        r.focus(),
        e.onCloseRequest()
    }
    ;
    return p(RY, {
        className: le("Dialog", e.className),
        labelledBy: "dialog-title",
        maxWidth: OY(e.size),
        onCloseRequest: l,
        closeOnClickOutside: e.closeOnClickOutside,
        children: k(zi, {
            ref: n,
            children: [e.title && p("h2", {
                id: `${i}-dialog-title`,
                className: "Dialog__title",
                children: p("span", {
                    className: "Dialog__titleContent",
                    children: e.title
                })
            }), p("button", {
                className: "Dialog__close",
                onClick: l,
                title: _("buttons.close"),
                "aria-label": _("buttons.close"),
                children: o.isMobile ? RO : _d
            }), p("div", {
                className: "Dialog__content",
                children: e.children
            })]
        })
    })
}
  , v3 = ({children: e, onClose: t})=>{
    const [n,r] = x.useState(!!e)
      , {container: i} = eo()
      , o = ee.useCallback(()=>{
        r(!1),
        t && t(),
        i == null || i.focus()
    }
    , [t, i]);
    return p(re, {
        children: n && p(Ur, {
            size: "small",
            onCloseRequest: o,
            title: _("errorDialog.title"),
            children: p("div", {
                style: {
                    whiteSpace: "pre-wrap"
                },
                children: e
            })
        })
    })
}
;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var w2 = function(e, t) {
    return w2 = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, r) {
        n.__proto__ = r
    }
    || function(n, r) {
        for (var i in r)
            r.hasOwnProperty(i) && (n[i] = r[i])
    }
    ,
    w2(e, t)
};
function L0(e, t) {
    w2(e, t);
    function n() {
        this.constructor = e
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype,
    new n)
}
var Xe = function() {
    return Xe = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    Xe.apply(this, arguments)
};
function V4(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function DY(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function Es() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(DY(arguments[t]));
    return e
}
var zo;
(function(e) {
    e.Ok = "ok",
    e.Exited = "exited",
    e.Crashed = "crashed",
    e.Abnormal = "abnormal"
}
)(zo || (zo = {}));
var zr;
(function(e) {
    e.Fatal = "fatal",
    e.Error = "error",
    e.Warning = "warning",
    e.Log = "log",
    e.Info = "info",
    e.Debug = "debug",
    e.Critical = "critical"
}
)(zr || (zr = {}));
(function(e) {
    function t(n) {
        switch (n) {
        case "debug":
            return e.Debug;
        case "info":
            return e.Info;
        case "warn":
        case "warning":
            return e.Warning;
        case "error":
            return e.Error;
        case "fatal":
            return e.Fatal;
        case "critical":
            return e.Critical;
        case "log":
        default:
            return e.Log
        }
    }
    e.fromString = t
}
)(zr || (zr = {}));
var aa;
(function(e) {
    e.Unknown = "unknown",
    e.Skipped = "skipped",
    e.Success = "success",
    e.RateLimit = "rate_limit",
    e.Invalid = "invalid",
    e.Failed = "failed"
}
)(aa || (aa = {}));
(function(e) {
    function t(n) {
        return n >= 200 && n < 300 ? e.Success : n === 429 ? e.RateLimit : n >= 400 && n < 500 ? e.Invalid : n >= 500 ? e.Failed : e.Unknown
    }
    e.fromHttpCode = t
}
)(aa || (aa = {}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function NY(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function FY() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(NY(arguments[t]));
    return e
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var pe = function() {
    return pe = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    pe.apply(this, arguments)
};
function $Y(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function ms() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat($Y(arguments[t]));
    return e
}
function Yk(e) {
    switch (Object.prototype.toString.call(e)) {
    case "[object Error]":
        return !0;
    case "[object Exception]":
        return !0;
    case "[object DOMException]":
        return !0;
    default:
        return Jo(e, Error)
    }
}
function Zk(e) {
    return Object.prototype.toString.call(e) === "[object ErrorEvent]"
}
function W4(e) {
    return Object.prototype.toString.call(e) === "[object DOMError]"
}
function BY(e) {
    return Object.prototype.toString.call(e) === "[object DOMException]"
}
function Tl(e) {
    return Object.prototype.toString.call(e) === "[object String]"
}
function ld(e) {
    return e === null || typeof e != "object" && typeof e != "function"
}
function P0(e) {
    return Object.prototype.toString.call(e) === "[object Object]"
}
function y3(e) {
    return typeof Event < "u" && Jo(e, Event)
}
function G4(e) {
    return typeof Element < "u" && Jo(e, Element)
}
function zY(e) {
    return Object.prototype.toString.call(e) === "[object RegExp]"
}
function E3(e) {
    return !!(e && e.then && typeof e.then == "function")
}
function HY(e) {
    return P0(e) && "nativeEvent"in e && "preventDefault"in e && "stopPropagation"in e
}
function Jo(e, t) {
    try {
        return e instanceof t
    } catch {
        return !1
    }
}
function y1(e) {
    try {
        for (var t = e, n = 5, r = 80, i = [], o = 0, s = 0, a = " > ", l = a.length, c = void 0; t && o++ < n && (c = UY(t),
        !(c === "html" || o > 1 && s + i.length * l + c.length >= r)); )
            i.push(c),
            s += c.length,
            t = t.parentNode;
        return i.reverse().join(a)
    } catch {
        return "<unknown>"
    }
}
function UY(e) {
    var t = e, n = [], r, i, o, s, a;
    if (!t || !t.tagName)
        return "";
    if (n.push(t.tagName.toLowerCase()),
    t.id && n.push("#" + t.id),
    r = t.className,
    r && Tl(r))
        for (i = r.split(/\s+/),
        a = 0; a < i.length; a++)
            n.push("." + i[a]);
    var l = ["type", "name", "title", "alt"];
    for (a = 0; a < l.length; a++)
        o = l[a],
        s = t.getAttribute(o),
        s && n.push("[" + o + '="' + s + '"]');
    return n.join("")
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var b2 = function(e, t) {
    return b2 = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, r) {
        n.__proto__ = r
    }
    || function(n, r) {
        for (var i in r)
            r.hasOwnProperty(i) && (n[i] = r[i])
    }
    ,
    b2(e, t)
};
function VY(e, t) {
    b2(e, t);
    function n() {
        this.constructor = e
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype,
    new n)
}
var ws = function() {
    return ws = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    ws.apply(this, arguments)
};
function Kk(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function WY(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
var GY = Object.setPrototypeOf || ({
    __proto__: []
}instanceof Array ? jY : YY);
function jY(e, t) {
    return e.__proto__ = t,
    e
}
function YY(e, t) {
    for (var n in t)
        e.hasOwnProperty(n) || (e[n] = t[n]);
    return e
}
var Wt = function(e) {
    VY(t, e);
    function t(n) {
        var r = this.constructor
          , i = e.call(this, n) || this;
        return i.message = n,
        i.name = r.prototype.constructor.name,
        GY(i, r.prototype),
        i
    }
    return t
}(Error)
  , ZY = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/
  , Ic = "Invalid Dsn"
  , Xk = function() {
    function e(t) {
        typeof t == "string" ? this._fromString(t) : this._fromComponents(t),
        this._validate()
    }
    return e.prototype.toString = function(t) {
        t === void 0 && (t = !1);
        var n = this
          , r = n.host
          , i = n.path
          , o = n.pass
          , s = n.port
          , a = n.projectId
          , l = n.protocol
          , c = n.publicKey;
        return l + "://" + c + (t && o ? ":" + o : "") + ("@" + r + (s ? ":" + s : "") + "/" + (i && i + "/") + a)
    }
    ,
    e.prototype._fromString = function(t) {
        var n = ZY.exec(t);
        if (!n)
            throw new Wt(Ic);
        var r = WY(n.slice(1), 6)
          , i = r[0]
          , o = r[1]
          , s = r[2]
          , a = s === void 0 ? "" : s
          , l = r[3]
          , c = r[4]
          , u = c === void 0 ? "" : c
          , d = r[5]
          , f = ""
          , h = d
          , m = h.split("/");
        if (m.length > 1 && (f = m.slice(0, -1).join("/"),
        h = m.pop()),
        h) {
            var g = h.match(/^\d+/);
            g && (h = g[0])
        }
        this._fromComponents({
            host: l,
            pass: a,
            path: f,
            projectId: h,
            port: u,
            protocol: i,
            publicKey: o
        })
    }
    ,
    e.prototype._fromComponents = function(t) {
        "user"in t && !("publicKey"in t) && (t.publicKey = t.user),
        this.user = t.publicKey || "",
        this.protocol = t.protocol,
        this.publicKey = t.publicKey || "",
        this.pass = t.pass || "",
        this.host = t.host,
        this.port = t.port || "",
        this.path = t.path || "",
        this.projectId = t.projectId
    }
    ,
    e.prototype._validate = function() {
        var t = this;
        if (["protocol", "publicKey", "host", "projectId"].forEach(function(n) {
            if (!t[n])
                throw new Wt(Ic + ": " + n + " missing")
        }),
        !this.projectId.match(/^\d+$/))
            throw new Wt(Ic + ": Invalid projectId " + this.projectId);
        if (this.protocol !== "http" && this.protocol !== "https")
            throw new Wt(Ic + ": Invalid protocol " + this.protocol);
        if (this.port && isNaN(parseInt(this.port, 10)))
            throw new Wt(Ic + ": Invalid port " + this.port)
    }
    ,
    e
}();
function w3() {
    return Object.prototype.toString.call(typeof process < "u" ? process : 0) === "[object process]"
}
function KY(e, t) {
    return e.require(t)
}
function uu(e, t) {
    return t === void 0 && (t = 0),
    typeof e != "string" || t === 0 || e.length <= t ? e : e.substr(0, t) + "..."
}
function E1(e, t) {
    if (!Array.isArray(e))
        return "";
    for (var n = [], r = 0; r < e.length; r++) {
        var i = e[r];
        try {
            n.push(String(i))
        } catch {
            n.push("[value cannot be serialized]")
        }
    }
    return n.join(t)
}
function om(e, t) {
    return Tl(e) ? zY(t) ? t.test(e) : typeof t == "string" ? e.indexOf(t) !== -1 : !1 : !1
}
var XY = {};
function It() {
    return w3() ? global : typeof window < "u" ? window : typeof self < "u" ? self : XY
}
function cl() {
    var e = It()
      , t = e.crypto || e.msCrypto;
    if (t !== void 0 && t.getRandomValues) {
        var n = new Uint16Array(8);
        t.getRandomValues(n),
        n[3] = n[3] & 4095 | 16384,
        n[4] = n[4] & 16383 | 32768;
        var r = function(i) {
            for (var o = i.toString(16); o.length < 4; )
                o = "0" + o;
            return o
        };
        return r(n[0]) + r(n[1]) + r(n[2]) + r(n[3]) + r(n[4]) + r(n[5]) + r(n[6]) + r(n[7])
    }
    return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g, function(i) {
        var o = Math.random() * 16 | 0
          , s = i === "x" ? o : o & 3 | 8;
        return s.toString(16)
    })
}
function sm(e) {
    if (!e)
        return {};
    var t = e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
    if (!t)
        return {};
    var n = t[6] || ""
      , r = t[8] || "";
    return {
        host: t[4],
        path: t[5],
        protocol: t[2],
        relative: t[5] + n + r
    }
}
function gs(e) {
    if (e.message)
        return e.message;
    if (e.exception && e.exception.values && e.exception.values[0]) {
        var t = e.exception.values[0];
        return t.type && t.value ? t.type + ": " + t.value : t.type || t.value || e.event_id || "<unknown>"
    }
    return e.event_id || "<unknown>"
}
function fh(e) {
    var t = It()
      , n = ["debug", "info", "warn", "error", "log", "assert"];
    if (!("console"in t))
        return e();
    var r = t.console
      , i = {};
    n.forEach(function(s) {
        s in t.console && r[s].__sentry_original__ && (i[s] = r[s],
        r[s] = r[s].__sentry_original__)
    });
    var o = e();
    return Object.keys(i).forEach(function(s) {
        r[s] = i[s]
    }),
    o
}
function _2(e, t, n) {
    e.exception = e.exception || {},
    e.exception.values = e.exception.values || [],
    e.exception.values[0] = e.exception.values[0] || {},
    e.exception.values[0].value = e.exception.values[0].value || t || "",
    e.exception.values[0].type = e.exception.values[0].type || n || "Error"
}
function Ml(e, t) {
    t === void 0 && (t = {});
    try {
        e.exception.values[0].mechanism = e.exception.values[0].mechanism || {},
        Object.keys(t).forEach(function(n) {
            e.exception.values[0].mechanism[n] = t[n]
        })
    } catch {}
}
function qY() {
    try {
        return document.location.href
    } catch {
        return ""
    }
}
var j4 = 60 * 1e3;
function QY(e, t) {
    if (!t)
        return j4;
    var n = parseInt("" + t, 10);
    if (!isNaN(n))
        return n * 1e3;
    var r = Date.parse("" + t);
    return isNaN(r) ? j4 : r - e
}
var Hs = It()
  , am = "Sentry Logger "
  , JY = function() {
    function e() {
        this._enabled = !1
    }
    return e.prototype.disable = function() {
        this._enabled = !1
    }
    ,
    e.prototype.enable = function() {
        this._enabled = !0
    }
    ,
    e.prototype.log = function() {
        for (var t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
        this._enabled && fh(function() {
            Hs.console.log(am + "[Log]: " + t.join(" "))
        })
    }
    ,
    e.prototype.warn = function() {
        for (var t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
        this._enabled && fh(function() {
            Hs.console.warn(am + "[Warn]: " + t.join(" "))
        })
    }
    ,
    e.prototype.error = function() {
        for (var t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
        this._enabled && fh(function() {
            Hs.console.error(am + "[Error]: " + t.join(" "))
        })
    }
    ,
    e
}();
Hs.__SENTRY__ = Hs.__SENTRY__ || {};
var Ve = Hs.__SENTRY__.logger || (Hs.__SENTRY__.logger = new JY)
  , eZ = function() {
    function e() {
        this._hasWeakSet = typeof WeakSet == "function",
        this._inner = this._hasWeakSet ? new WeakSet : []
    }
    return e.prototype.memoize = function(t) {
        if (this._hasWeakSet)
            return this._inner.has(t) ? !0 : (this._inner.add(t),
            !1);
        for (var n = 0; n < this._inner.length; n++) {
            var r = this._inner[n];
            if (r === t)
                return !0
        }
        return this._inner.push(t),
        !1
    }
    ,
    e.prototype.unmemoize = function(t) {
        if (this._hasWeakSet)
            this._inner.delete(t);
        else
            for (var n = 0; n < this._inner.length; n++)
                if (this._inner[n] === t) {
                    this._inner.splice(n, 1);
                    break
                }
    }
    ,
    e
}()
  , lm = "<anonymous>";
function uo(e) {
    try {
        return !e || typeof e != "function" ? lm : e.name || lm
    } catch {
        return lm
    }
}
function Gt(e, t, n) {
    if (t in e) {
        var r = e[t]
          , i = n(r);
        if (typeof i == "function")
            try {
                i.prototype = i.prototype || {},
                Object.defineProperties(i, {
                    __sentry_original__: {
                        enumerable: !1,
                        value: r
                    }
                })
            } catch {}
        e[t] = i
    }
}
function tZ(e) {
    return Object.keys(e).map(function(t) {
        return encodeURIComponent(t) + "=" + encodeURIComponent(e[t])
    }).join("&")
}
function qk(e) {
    if (Yk(e)) {
        var t = e
          , n = {
            message: t.message,
            name: t.name,
            stack: t.stack
        };
        for (var r in t)
            Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]);
        return n
    }
    if (y3(e)) {
        var i = e
          , o = {};
        o.type = i.type;
        try {
            o.target = G4(i.target) ? y1(i.target) : Object.prototype.toString.call(i.target)
        } catch {
            o.target = "<unknown>"
        }
        try {
            o.currentTarget = G4(i.currentTarget) ? y1(i.currentTarget) : Object.prototype.toString.call(i.currentTarget)
        } catch {
            o.currentTarget = "<unknown>"
        }
        typeof CustomEvent < "u" && Jo(e, CustomEvent) && (o.detail = i.detail);
        for (var r in i)
            Object.prototype.hasOwnProperty.call(i, r) && (o[r] = i);
        return o
    }
    return e
}
function nZ(e) {
    return ~-encodeURI(e).split(/%..|./).length
}
function rZ(e) {
    return nZ(JSON.stringify(e))
}
function Qk(e, t, n) {
    t === void 0 && (t = 3),
    n === void 0 && (n = 100 * 1024);
    var r = Fc(e, t);
    return rZ(r) > n ? Qk(e, t - 1, n) : r
}
function iZ(e) {
    var t = Object.prototype.toString.call(e);
    if (typeof e == "string")
        return e;
    if (t === "[object Object]")
        return "[Object]";
    if (t === "[object Array]")
        return "[Array]";
    var n = Jk(e);
    return ld(n) ? n : t
}
function Jk(e, t) {
    return t === "domain" && e && typeof e == "object" && e._events ? "[Domain]" : t === "domainEmitter" ? "[DomainEmitter]" : typeof global < "u" && e === global ? "[Global]" : typeof window < "u" && e === window ? "[Window]" : typeof document < "u" && e === document ? "[Document]" : HY(e) ? "[SyntheticEvent]" : typeof e == "number" && e !== e ? "[NaN]" : e === void 0 ? "[undefined]" : typeof e == "function" ? "[Function: " + uo(e) + "]" : typeof e == "symbol" ? "[" + String(e) + "]" : typeof e == "bigint" ? "[BigInt: " + String(e) + "]" : e
}
function e9(e, t, n, r) {
    if (n === void 0 && (n = 1 / 0),
    r === void 0 && (r = new eZ),
    n === 0)
        return iZ(t);
    if (t != null && typeof t.toJSON == "function")
        return t.toJSON();
    var i = Jk(t, e);
    if (ld(i))
        return i;
    var o = qk(t)
      , s = Array.isArray(t) ? [] : {};
    if (r.memoize(t))
        return "[Circular ~]";
    for (var a in o)
        Object.prototype.hasOwnProperty.call(o, a) && (s[a] = e9(a, o[a], n - 1, r));
    return r.unmemoize(t),
    s
}
function Fc(e, t) {
    try {
        return JSON.parse(JSON.stringify(e, function(n, r) {
            return e9(n, r, t)
        }))
    } catch {
        return "**non-serializable**"
    }
}
function oZ(e, t) {
    t === void 0 && (t = 40);
    var n = Object.keys(qk(e));
    if (n.sort(),
    !n.length)
        return "[object has no keys]";
    if (n[0].length >= t)
        return uu(n[0], t);
    for (var r = n.length; r > 0; r--) {
        var i = n.slice(0, r).join(", ");
        if (!(i.length > t))
            return r === n.length ? i : uu(i, t)
    }
    return ""
}
function w1(e) {
    var t, n;
    if (P0(e)) {
        var r = e
          , i = {};
        try {
            for (var o = Kk(Object.keys(r)), s = o.next(); !s.done; s = o.next()) {
                var a = s.value;
                typeof r[a] < "u" && (i[a] = w1(r[a]))
            }
        } catch (l) {
            t = {
                error: l
            }
        } finally {
            try {
                s && !s.done && (n = o.return) && n.call(o)
            } finally {
                if (t)
                    throw t.error
            }
        }
        return i
    }
    return Array.isArray(e) ? e.map(w1) : e
}
function b3() {
    if (!("fetch"in It()))
        return !1;
    try {
        return new Headers,
        new Request(""),
        new Response,
        !0
    } catch {
        return !1
    }
}
function x2(e) {
    return e && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())
}
function sZ() {
    if (!b3())
        return !1;
    var e = It();
    if (x2(e.fetch))
        return !0;
    var t = !1
      , n = e.document;
    if (n && typeof n.createElement == "function")
        try {
            var r = n.createElement("iframe");
            r.hidden = !0,
            n.head.appendChild(r),
            r.contentWindow && r.contentWindow.fetch && (t = x2(r.contentWindow.fetch)),
            n.head.removeChild(r)
        } catch (i) {
            Ve.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", i)
        }
    return t
}
function aZ() {
    if (!b3())
        return !1;
    try {
        return new Request("_",{
            referrerPolicy: "origin"
        }),
        !0
    } catch {
        return !1
    }
}
function lZ() {
    var e = It()
      , t = e.chrome
      , n = t && t.app && t.app.runtime
      , r = "history"in e && !!e.history.pushState && !!e.history.replaceState;
    return !n && r
}
var tt = It()
  , du = {}
  , Y4 = {};
function cZ(e) {
    if (!Y4[e])
        switch (Y4[e] = !0,
        e) {
        case "console":
            uZ();
            break;
        case "dom":
            EZ();
            break;
        case "xhr":
            pZ();
            break;
        case "fetch":
            dZ();
            break;
        case "history":
            mZ();
            break;
        case "error":
            wZ();
            break;
        case "unhandledrejection":
            bZ();
            break;
        default:
            Ve.warn("unknown instrumentation type:", e)
        }
}
function go(e) {
    !e || typeof e.type != "string" || typeof e.callback != "function" || (du[e.type] = du[e.type] || [],
    du[e.type].push(e.callback),
    cZ(e.type))
}
function Dr(e, t) {
    var n, r;
    if (!(!e || !du[e]))
        try {
            for (var i = Kk(du[e] || []), o = i.next(); !o.done; o = i.next()) {
                var s = o.value;
                try {
                    s(t)
                } catch (a) {
                    Ve.error(`Error while triggering instrumentation handler.
Type: ` + e + `
Name: ` + uo(s) + `
Error: ` + a)
                }
            }
        } catch (a) {
            n = {
                error: a
            }
        } finally {
            try {
                o && !o.done && (r = i.return) && r.call(i)
            } finally {
                if (n)
                    throw n.error
            }
        }
}
function uZ() {
    "console"in tt && ["debug", "info", "warn", "error", "log", "assert"].forEach(function(e) {
        e in tt.console && Gt(tt.console, e, function(t) {
            return function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                Dr("console", {
                    args: n,
                    level: e
                }),
                t && Function.prototype.apply.call(t, tt.console, n)
            }
        })
    })
}
function dZ() {
    sZ() && Gt(tt, "fetch", function(e) {
        return function() {
            for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
            var r = {
                args: t,
                fetchData: {
                    method: fZ(t),
                    url: hZ(t)
                },
                startTimestamp: Date.now()
            };
            return Dr("fetch", ws({}, r)),
            e.apply(tt, t).then(function(i) {
                return Dr("fetch", ws(ws({}, r), {
                    endTimestamp: Date.now(),
                    response: i
                })),
                i
            }, function(i) {
                throw Dr("fetch", ws(ws({}, r), {
                    endTimestamp: Date.now(),
                    error: i
                })),
                i
            })
        }
    })
}
function fZ(e) {
    return e === void 0 && (e = []),
    "Request"in tt && Jo(e[0], Request) && e[0].method ? String(e[0].method).toUpperCase() : e[1] && e[1].method ? String(e[1].method).toUpperCase() : "GET"
}
function hZ(e) {
    return e === void 0 && (e = []),
    typeof e[0] == "string" ? e[0] : "Request"in tt && Jo(e[0], Request) ? e[0].url : String(e[0])
}
function pZ() {
    if ("XMLHttpRequest"in tt) {
        var e = []
          , t = []
          , n = XMLHttpRequest.prototype;
        Gt(n, "open", function(r) {
            return function() {
                for (var i = [], o = 0; o < arguments.length; o++)
                    i[o] = arguments[o];
                var s = this
                  , a = i[1];
                s.__sentry_xhr__ = {
                    method: Tl(i[0]) ? i[0].toUpperCase() : i[0],
                    url: i[1]
                },
                Tl(a) && s.__sentry_xhr__.method === "POST" && a.match(/sentry_key/) && (s.__sentry_own_request__ = !0);
                var l = function() {
                    if (s.readyState === 4) {
                        try {
                            s.__sentry_xhr__ && (s.__sentry_xhr__.status_code = s.status)
                        } catch {}
                        try {
                            var c = e.indexOf(s);
                            if (c !== -1) {
                                e.splice(c);
                                var u = t.splice(c)[0];
                                s.__sentry_xhr__ && u[0] !== void 0 && (s.__sentry_xhr__.body = u[0])
                            }
                        } catch {}
                        Dr("xhr", {
                            args: i,
                            endTimestamp: Date.now(),
                            startTimestamp: Date.now(),
                            xhr: s
                        })
                    }
                };
                return "onreadystatechange"in s && typeof s.onreadystatechange == "function" ? Gt(s, "onreadystatechange", function(c) {
                    return function() {
                        for (var u = [], d = 0; d < arguments.length; d++)
                            u[d] = arguments[d];
                        return l(),
                        c.apply(s, u)
                    }
                }) : s.addEventListener("readystatechange", l),
                r.apply(s, i)
            }
        }),
        Gt(n, "send", function(r) {
            return function() {
                for (var i = [], o = 0; o < arguments.length; o++)
                    i[o] = arguments[o];
                return e.push(this),
                t.push(i),
                Dr("xhr", {
                    args: i,
                    startTimestamp: Date.now(),
                    xhr: this
                }),
                r.apply(this, i)
            }
        })
    }
}
var Mf;
function mZ() {
    if (!lZ())
        return;
    var e = tt.onpopstate;
    tt.onpopstate = function() {
        for (var n = [], r = 0; r < arguments.length; r++)
            n[r] = arguments[r];
        var i = tt.location.href
          , o = Mf;
        if (Mf = i,
        Dr("history", {
            from: o,
            to: i
        }),
        e)
            return e.apply(this, n)
    }
    ;
    function t(n) {
        return function() {
            for (var r = [], i = 0; i < arguments.length; i++)
                r[i] = arguments[i];
            var o = r.length > 2 ? r[2] : void 0;
            if (o) {
                var s = Mf
                  , a = String(o);
                Mf = a,
                Dr("history", {
                    from: s,
                    to: a
                })
            }
            return n.apply(this, r)
        }
    }
    Gt(tt.history, "pushState", t),
    Gt(tt.history, "replaceState", t)
}
var gZ = 1e3, Af, Lf;
function vZ(e, t) {
    if (!e || e.type !== t.type)
        return !0;
    try {
        if (e.target !== t.target)
            return !0
    } catch {}
    return !1
}
function yZ(e) {
    if (e.type !== "keypress")
        return !1;
    try {
        var t = e.target;
        if (!t || !t.tagName)
            return !0;
        if (t.tagName === "INPUT" || t.tagName === "TEXTAREA" || t.isContentEditable)
            return !1
    } catch {}
    return !0
}
function Z4(e, t) {
    return t === void 0 && (t = !1),
    function(n) {
        if (!(!n || Lf === n) && !yZ(n)) {
            var r = n.type === "keypress" ? "input" : n.type;
            Af === void 0 ? (e({
                event: n,
                name: r,
                global: t
            }),
            Lf = n) : vZ(Lf, n) && (e({
                event: n,
                name: r,
                global: t
            }),
            Lf = n),
            clearTimeout(Af),
            Af = tt.setTimeout(function() {
                Af = void 0
            }, gZ)
        }
    }
}
function EZ() {
    if ("document"in tt) {
        var e = Dr.bind(null, "dom")
          , t = Z4(e, !0);
        tt.document.addEventListener("click", t, !1),
        tt.document.addEventListener("keypress", t, !1),
        ["EventTarget", "Node"].forEach(function(n) {
            var r = tt[n] && tt[n].prototype;
            !r || !r.hasOwnProperty || !r.hasOwnProperty("addEventListener") || (Gt(r, "addEventListener", function(i) {
                return function(o, s, a) {
                    if (o === "click" || o == "keypress")
                        try {
                            var l = this
                              , c = l.__sentry_instrumentation_handlers__ = l.__sentry_instrumentation_handlers__ || {}
                              , u = c[o] = c[o] || {
                                refCount: 0
                            };
                            if (!u.handler) {
                                var d = Z4(e);
                                u.handler = d,
                                i.call(this, o, d, a)
                            }
                            u.refCount += 1
                        } catch {}
                    return i.call(this, o, s, a)
                }
            }),
            Gt(r, "removeEventListener", function(i) {
                return function(o, s, a) {
                    if (o === "click" || o == "keypress")
                        try {
                            var l = this
                              , c = l.__sentry_instrumentation_handlers__ || {}
                              , u = c[o];
                            u && (u.refCount -= 1,
                            u.refCount <= 0 && (i.call(this, o, u.handler, a),
                            u.handler = void 0,
                            delete c[o]),
                            Object.keys(c).length === 0 && delete l.__sentry_instrumentation_handlers__)
                        } catch {}
                    return i.call(this, o, s, a)
                }
            }))
        })
    }
}
var cm = null;
function wZ() {
    cm = tt.onerror,
    tt.onerror = function(e, t, n, r, i) {
        return Dr("error", {
            column: r,
            error: i,
            line: n,
            msg: e,
            url: t
        }),
        cm ? cm.apply(this, arguments) : !1
    }
}
var um = null;
function bZ() {
    um = tt.onunhandledrejection,
    tt.onunhandledrejection = function(e) {
        return Dr("unhandledrejection", e),
        um ? um.apply(this, arguments) : !0
    }
}
var Ti;
(function(e) {
    e.PENDING = "PENDING",
    e.RESOLVED = "RESOLVED",
    e.REJECTED = "REJECTED"
}
)(Ti || (Ti = {}));
var Tn = function() {
    function e(t) {
        var n = this;
        this._state = Ti.PENDING,
        this._handlers = [],
        this._resolve = function(r) {
            n._setResult(Ti.RESOLVED, r)
        }
        ,
        this._reject = function(r) {
            n._setResult(Ti.REJECTED, r)
        }
        ,
        this._setResult = function(r, i) {
            if (n._state === Ti.PENDING) {
                if (E3(i)) {
                    i.then(n._resolve, n._reject);
                    return
                }
                n._state = r,
                n._value = i,
                n._executeHandlers()
            }
        }
        ,
        this._attachHandler = function(r) {
            n._handlers = n._handlers.concat(r),
            n._executeHandlers()
        }
        ,
        this._executeHandlers = function() {
            if (n._state !== Ti.PENDING) {
                var r = n._handlers.slice();
                n._handlers = [],
                r.forEach(function(i) {
                    i.done || (n._state === Ti.RESOLVED && i.onfulfilled && i.onfulfilled(n._value),
                    n._state === Ti.REJECTED && i.onrejected && i.onrejected(n._value),
                    i.done = !0)
                })
            }
        }
        ;
        try {
            t(this._resolve, this._reject)
        } catch (r) {
            this._reject(r)
        }
    }
    return e.resolve = function(t) {
        return new e(function(n) {
            n(t)
        }
        )
    }
    ,
    e.reject = function(t) {
        return new e(function(n, r) {
            r(t)
        }
        )
    }
    ,
    e.all = function(t) {
        return new e(function(n, r) {
            if (!Array.isArray(t)) {
                r(new TypeError("Promise.all requires an array as input."));
                return
            }
            if (t.length === 0) {
                n([]);
                return
            }
            var i = t.length
              , o = [];
            t.forEach(function(s, a) {
                e.resolve(s).then(function(l) {
                    o[a] = l,
                    i -= 1,
                    i === 0 && n(o)
                }).then(null, r)
            })
        }
        )
    }
    ,
    e.prototype.then = function(t, n) {
        var r = this;
        return new e(function(i, o) {
            r._attachHandler({
                done: !1,
                onfulfilled: function(s) {
                    if (!t) {
                        i(s);
                        return
                    }
                    try {
                        i(t(s));
                        return
                    } catch (a) {
                        o(a);
                        return
                    }
                },
                onrejected: function(s) {
                    if (!n) {
                        o(s);
                        return
                    }
                    try {
                        i(n(s));
                        return
                    } catch (a) {
                        o(a);
                        return
                    }
                }
            })
        }
        )
    }
    ,
    e.prototype.catch = function(t) {
        return this.then(function(n) {
            return n
        }, t)
    }
    ,
    e.prototype.finally = function(t) {
        var n = this;
        return new e(function(r, i) {
            var o, s;
            return n.then(function(a) {
                s = !1,
                o = a,
                t && t()
            }, function(a) {
                s = !0,
                o = a,
                t && t()
            }).then(function() {
                if (s) {
                    i(o);
                    return
                }
                r(o)
            })
        }
        )
    }
    ,
    e.prototype.toString = function() {
        return "[object SyncPromise]"
    }
    ,
    e
}()
  , _Z = function() {
    function e(t) {
        this._limit = t,
        this._buffer = []
    }
    return e.prototype.isReady = function() {
        return this._limit === void 0 || this.length() < this._limit
    }
    ,
    e.prototype.add = function(t) {
        var n = this;
        return this.isReady() ? (this._buffer.indexOf(t) === -1 && this._buffer.push(t),
        t.then(function() {
            return n.remove(t)
        }).then(null, function() {
            return n.remove(t).then(null, function() {})
        }),
        t) : Tn.reject(new Wt("Not adding Promise due to buffer limit reached."))
    }
    ,
    e.prototype.remove = function(t) {
        var n = this._buffer.splice(this._buffer.indexOf(t), 1)[0];
        return n
    }
    ,
    e.prototype.length = function() {
        return this._buffer.length
    }
    ,
    e.prototype.drain = function(t) {
        var n = this;
        return new Tn(function(r) {
            var i = setTimeout(function() {
                t && t > 0 && r(!1)
            }, t);
            Tn.all(n._buffer).then(function() {
                clearTimeout(i),
                r(!0)
            }).then(null, function() {
                r(!0)
            })
        }
        )
    }
    ,
    e
}()
  , I2 = {
    nowSeconds: function() {
        return Date.now() / 1e3
    }
};
function xZ() {
    var e = It().performance;
    if (!(!e || !e.now)) {
        var t = Date.now() - e.now();
        return {
            now: function() {
                return e.now()
            },
            timeOrigin: t
        }
    }
}
function IZ() {
    try {
        var e = KY(module, "perf_hooks");
        return e.performance
    } catch {
        return
    }
}
var dm = w3() ? IZ() : xZ()
  , K4 = dm === void 0 ? I2 : {
    nowSeconds: function() {
        return (dm.timeOrigin + dm.now()) / 1e3
    }
}
  , _3 = I2.nowSeconds.bind(I2);
K4.nowSeconds.bind(K4);
(function() {
    var e = It().performance;
    if (e) {
        var t = 3600 * 1e3
          , n = e.timeOrigin && Math.abs(e.timeOrigin + e.now() - Date.now()) < t;
        if (n)
            return e.timeOrigin;
        var r = e.timing && e.timing.navigationStart
          , i = typeof r == "number"
          , o = i && Math.abs(r + e.now() - Date.now()) < t;
        return o ? r : Date.now()
    }
}
)();
var b1 = function() {
    function e() {
        this._notifyingListeners = !1,
        this._scopeListeners = [],
        this._eventProcessors = [],
        this._breadcrumbs = [],
        this._user = {},
        this._tags = {},
        this._extra = {},
        this._contexts = {}
    }
    return e.clone = function(t) {
        var n = new e;
        return t && (n._breadcrumbs = ms(t._breadcrumbs),
        n._tags = pe({}, t._tags),
        n._extra = pe({}, t._extra),
        n._contexts = pe({}, t._contexts),
        n._user = t._user,
        n._level = t._level,
        n._span = t._span,
        n._session = t._session,
        n._transactionName = t._transactionName,
        n._fingerprint = t._fingerprint,
        n._eventProcessors = ms(t._eventProcessors)),
        n
    }
    ,
    e.prototype.addScopeListener = function(t) {
        this._scopeListeners.push(t)
    }
    ,
    e.prototype.addEventProcessor = function(t) {
        return this._eventProcessors.push(t),
        this
    }
    ,
    e.prototype.setUser = function(t) {
        return this._user = t || {},
        this._session && this._session.update({
            user: t
        }),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.getUser = function() {
        return this._user
    }
    ,
    e.prototype.setTags = function(t) {
        return this._tags = pe(pe({}, this._tags), t),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setTag = function(t, n) {
        var r;
        return this._tags = pe(pe({}, this._tags), (r = {},
        r[t] = n,
        r)),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setExtras = function(t) {
        return this._extra = pe(pe({}, this._extra), t),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setExtra = function(t, n) {
        var r;
        return this._extra = pe(pe({}, this._extra), (r = {},
        r[t] = n,
        r)),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setFingerprint = function(t) {
        return this._fingerprint = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setLevel = function(t) {
        return this._level = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setTransactionName = function(t) {
        return this._transactionName = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setTransaction = function(t) {
        return this.setTransactionName(t)
    }
    ,
    e.prototype.setContext = function(t, n) {
        var r;
        return n === null ? delete this._contexts[t] : this._contexts = pe(pe({}, this._contexts), (r = {},
        r[t] = n,
        r)),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setSpan = function(t) {
        return this._span = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.getSpan = function() {
        return this._span
    }
    ,
    e.prototype.getTransaction = function() {
        var t, n, r, i, o = this.getSpan();
        if (!((t = o) === null || t === void 0) && t.transaction)
            return (n = o) === null || n === void 0 ? void 0 : n.transaction;
        if (!((i = (r = o) === null || r === void 0 ? void 0 : r.spanRecorder) === null || i === void 0) && i.spans[0])
            return o.spanRecorder.spans[0]
    }
    ,
    e.prototype.setSession = function(t) {
        return t ? this._session = t : delete this._session,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.getSession = function() {
        return this._session
    }
    ,
    e.prototype.update = function(t) {
        if (!t)
            return this;
        if (typeof t == "function") {
            var n = t(this);
            return n instanceof e ? n : this
        }
        return t instanceof e ? (this._tags = pe(pe({}, this._tags), t._tags),
        this._extra = pe(pe({}, this._extra), t._extra),
        this._contexts = pe(pe({}, this._contexts), t._contexts),
        t._user && Object.keys(t._user).length && (this._user = t._user),
        t._level && (this._level = t._level),
        t._fingerprint && (this._fingerprint = t._fingerprint)) : P0(t) && (t = t,
        this._tags = pe(pe({}, this._tags), t.tags),
        this._extra = pe(pe({}, this._extra), t.extra),
        this._contexts = pe(pe({}, this._contexts), t.contexts),
        t.user && (this._user = t.user),
        t.level && (this._level = t.level),
        t.fingerprint && (this._fingerprint = t.fingerprint)),
        this
    }
    ,
    e.prototype.clear = function() {
        return this._breadcrumbs = [],
        this._tags = {},
        this._extra = {},
        this._user = {},
        this._contexts = {},
        this._level = void 0,
        this._transactionName = void 0,
        this._fingerprint = void 0,
        this._span = void 0,
        this._session = void 0,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.addBreadcrumb = function(t, n) {
        var r = pe({
            timestamp: _3()
        }, t);
        return this._breadcrumbs = n !== void 0 && n >= 0 ? ms(this._breadcrumbs, [r]).slice(-n) : ms(this._breadcrumbs, [r]),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.clearBreadcrumbs = function() {
        return this._breadcrumbs = [],
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.applyToEvent = function(t, n) {
        var r;
        if (this._extra && Object.keys(this._extra).length && (t.extra = pe(pe({}, this._extra), t.extra)),
        this._tags && Object.keys(this._tags).length && (t.tags = pe(pe({}, this._tags), t.tags)),
        this._user && Object.keys(this._user).length && (t.user = pe(pe({}, this._user), t.user)),
        this._contexts && Object.keys(this._contexts).length && (t.contexts = pe(pe({}, this._contexts), t.contexts)),
        this._level && (t.level = this._level),
        this._transactionName && (t.transaction = this._transactionName),
        this._span) {
            t.contexts = pe({
                trace: this._span.getTraceContext()
            }, t.contexts);
            var i = (r = this._span.transaction) === null || r === void 0 ? void 0 : r.name;
            i && (t.tags = pe({
                transaction: i
            }, t.tags))
        }
        return this._applyFingerprint(t),
        t.breadcrumbs = ms(t.breadcrumbs || [], this._breadcrumbs),
        t.breadcrumbs = t.breadcrumbs.length > 0 ? t.breadcrumbs : void 0,
        this._notifyEventProcessors(ms(t9(), this._eventProcessors), t, n)
    }
    ,
    e.prototype._notifyEventProcessors = function(t, n, r, i) {
        var o = this;
        return i === void 0 && (i = 0),
        new Tn(function(s, a) {
            var l = t[i];
            if (n === null || typeof l != "function")
                s(n);
            else {
                var c = l(pe({}, n), r);
                E3(c) ? c.then(function(u) {
                    return o._notifyEventProcessors(t, u, r, i + 1).then(s)
                }).then(null, a) : o._notifyEventProcessors(t, c, r, i + 1).then(s).then(null, a)
            }
        }
        )
    }
    ,
    e.prototype._notifyScopeListeners = function() {
        var t = this;
        this._notifyingListeners || (this._notifyingListeners = !0,
        this._scopeListeners.forEach(function(n) {
            n(t)
        }),
        this._notifyingListeners = !1)
    }
    ,
    e.prototype._applyFingerprint = function(t) {
        t.fingerprint = t.fingerprint ? Array.isArray(t.fingerprint) ? t.fingerprint : [t.fingerprint] : [],
        this._fingerprint && (t.fingerprint = t.fingerprint.concat(this._fingerprint)),
        t.fingerprint && !t.fingerprint.length && delete t.fingerprint
    }
    ,
    e
}();
function t9() {
    var e = It();
    return e.__SENTRY__ = e.__SENTRY__ || {},
    e.__SENTRY__.globalEventProcessors = e.__SENTRY__.globalEventProcessors || [],
    e.__SENTRY__.globalEventProcessors
}
function R0(e) {
    t9().push(e)
}
var SZ = function() {
    function e(t) {
        this.errors = 0,
        this.sid = cl(),
        this.timestamp = Date.now(),
        this.started = Date.now(),
        this.duration = 0,
        this.status = zo.Ok,
        this.init = !0,
        t && this.update(t)
    }
    return e.prototype.update = function(t) {
        t === void 0 && (t = {}),
        t.user && (t.user.ip_address && (this.ipAddress = t.user.ip_address),
        t.did || (this.did = t.user.id || t.user.email || t.user.username)),
        this.timestamp = t.timestamp || Date.now(),
        t.sid && (this.sid = t.sid.length === 32 ? t.sid : cl()),
        t.init !== void 0 && (this.init = t.init),
        t.did && (this.did = "" + t.did),
        typeof t.started == "number" && (this.started = t.started),
        typeof t.duration == "number" ? this.duration = t.duration : this.duration = this.timestamp - this.started,
        t.release && (this.release = t.release),
        t.environment && (this.environment = t.environment),
        t.ipAddress && (this.ipAddress = t.ipAddress),
        t.userAgent && (this.userAgent = t.userAgent),
        typeof t.errors == "number" && (this.errors = t.errors),
        t.status && (this.status = t.status)
    }
    ,
    e.prototype.close = function(t) {
        t ? this.update({
            status: t
        }) : this.status === zo.Ok ? this.update({
            status: zo.Exited
        }) : this.update()
    }
    ,
    e.prototype.toJSON = function() {
        return w1({
            sid: "" + this.sid,
            init: this.init,
            started: new Date(this.started).toISOString(),
            timestamp: new Date(this.timestamp).toISOString(),
            status: this.status,
            errors: this.errors,
            did: typeof this.did == "number" || typeof this.did == "string" ? "" + this.did : void 0,
            duration: this.duration,
            attrs: w1({
                release: this.release,
                environment: this.environment,
                ip_address: this.ipAddress,
                user_agent: this.userAgent
            })
        })
    }
    ,
    e
}()
  , x3 = 3
  , CZ = 100
  , kZ = 100
  , I3 = function() {
    function e(t, n, r) {
        n === void 0 && (n = new b1),
        r === void 0 && (r = x3),
        this._version = r,
        this._stack = [{}],
        this.getStackTop().scope = n,
        this.bindClient(t)
    }
    return e.prototype.isOlderThan = function(t) {
        return this._version < t
    }
    ,
    e.prototype.bindClient = function(t) {
        var n = this.getStackTop();
        n.client = t,
        t && t.setupIntegrations && t.setupIntegrations()
    }
    ,
    e.prototype.pushScope = function() {
        var t = b1.clone(this.getScope());
        return this.getStack().push({
            client: this.getClient(),
            scope: t
        }),
        t
    }
    ,
    e.prototype.popScope = function() {
        return this.getStack().length <= 1 ? !1 : !!this.getStack().pop()
    }
    ,
    e.prototype.withScope = function(t) {
        var n = this.pushScope();
        try {
            t(n)
        } finally {
            this.popScope()
        }
    }
    ,
    e.prototype.getClient = function() {
        return this.getStackTop().client
    }
    ,
    e.prototype.getScope = function() {
        return this.getStackTop().scope
    }
    ,
    e.prototype.getStack = function() {
        return this._stack
    }
    ,
    e.prototype.getStackTop = function() {
        return this._stack[this._stack.length - 1]
    }
    ,
    e.prototype.captureException = function(t, n) {
        var r = this._lastEventId = cl()
          , i = n;
        if (!n) {
            var o = void 0;
            try {
                throw new Error("Sentry syntheticException")
            } catch (s) {
                o = s
            }
            i = {
                originalException: t,
                syntheticException: o
            }
        }
        return this._invokeClient("captureException", t, pe(pe({}, i), {
            event_id: r
        })),
        r
    }
    ,
    e.prototype.captureMessage = function(t, n, r) {
        var i = this._lastEventId = cl()
          , o = r;
        if (!r) {
            var s = void 0;
            try {
                throw new Error(t)
            } catch (a) {
                s = a
            }
            o = {
                originalException: t,
                syntheticException: s
            }
        }
        return this._invokeClient("captureMessage", t, n, pe(pe({}, o), {
            event_id: i
        })),
        i
    }
    ,
    e.prototype.captureEvent = function(t, n) {
        var r = this._lastEventId = cl();
        return this._invokeClient("captureEvent", t, pe(pe({}, n), {
            event_id: r
        })),
        r
    }
    ,
    e.prototype.lastEventId = function() {
        return this._lastEventId
    }
    ,
    e.prototype.addBreadcrumb = function(t, n) {
        var r = this.getStackTop()
          , i = r.scope
          , o = r.client;
        if (!(!i || !o)) {
            var s = o.getOptions && o.getOptions() || {}
              , a = s.beforeBreadcrumb
              , l = a === void 0 ? null : a
              , c = s.maxBreadcrumbs
              , u = c === void 0 ? CZ : c;
            if (!(u <= 0)) {
                var d = _3()
                  , f = pe({
                    timestamp: d
                }, t)
                  , h = l ? fh(function() {
                    return l(f, n)
                }) : f;
                h !== null && i.addBreadcrumb(h, Math.min(u, kZ))
            }
        }
    }
    ,
    e.prototype.setUser = function(t) {
        var n = this.getScope();
        n && n.setUser(t)
    }
    ,
    e.prototype.setTags = function(t) {
        var n = this.getScope();
        n && n.setTags(t)
    }
    ,
    e.prototype.setExtras = function(t) {
        var n = this.getScope();
        n && n.setExtras(t)
    }
    ,
    e.prototype.setTag = function(t, n) {
        var r = this.getScope();
        r && r.setTag(t, n)
    }
    ,
    e.prototype.setExtra = function(t, n) {
        var r = this.getScope();
        r && r.setExtra(t, n)
    }
    ,
    e.prototype.setContext = function(t, n) {
        var r = this.getScope();
        r && r.setContext(t, n)
    }
    ,
    e.prototype.configureScope = function(t) {
        var n = this.getStackTop()
          , r = n.scope
          , i = n.client;
        r && i && t(r)
    }
    ,
    e.prototype.run = function(t) {
        var n = X4(this);
        try {
            t(this)
        } finally {
            X4(n)
        }
    }
    ,
    e.prototype.getIntegration = function(t) {
        var n = this.getClient();
        if (!n)
            return null;
        try {
            return n.getIntegration(t)
        } catch {
            return Ve.warn("Cannot retrieve integration " + t.id + " from the current Hub"),
            null
        }
    }
    ,
    e.prototype.startSpan = function(t) {
        return this._callExtensionMethod("startSpan", t)
    }
    ,
    e.prototype.startTransaction = function(t, n) {
        return this._callExtensionMethod("startTransaction", t, n)
    }
    ,
    e.prototype.traceHeaders = function() {
        return this._callExtensionMethod("traceHeaders")
    }
    ,
    e.prototype.captureSession = function(t) {
        if (t === void 0 && (t = !1),
        t)
            return this.endSession();
        this._sendSessionUpdate()
    }
    ,
    e.prototype.endSession = function() {
        var t, n, r, i, o;
        (r = (n = (t = this.getStackTop()) === null || t === void 0 ? void 0 : t.scope) === null || n === void 0 ? void 0 : n.getSession()) === null || r === void 0 || r.close(),
        this._sendSessionUpdate(),
        (o = (i = this.getStackTop()) === null || i === void 0 ? void 0 : i.scope) === null || o === void 0 || o.setSession()
    }
    ,
    e.prototype.startSession = function(t) {
        var n = this.getStackTop()
          , r = n.scope
          , i = n.client
          , o = i && i.getOptions() || {}
          , s = o.release
          , a = o.environment
          , l = new SZ(pe(pe({
            release: s,
            environment: a
        }, r && {
            user: r.getUser()
        }), t));
        if (r) {
            var c = r.getSession && r.getSession();
            c && c.status === zo.Ok && c.update({
                status: zo.Exited
            }),
            this.endSession(),
            r.setSession(l)
        }
        return l
    }
    ,
    e.prototype._sendSessionUpdate = function() {
        var t = this.getStackTop()
          , n = t.scope
          , r = t.client;
        if (n) {
            var i = n.getSession && n.getSession();
            i && r && r.captureSession && r.captureSession(i)
        }
    }
    ,
    e.prototype._invokeClient = function(t) {
        for (var n, r = [], i = 1; i < arguments.length; i++)
            r[i - 1] = arguments[i];
        var o = this.getStackTop()
          , s = o.scope
          , a = o.client;
        a && a[t] && (n = a)[t].apply(n, ms(r, [s]))
    }
    ,
    e.prototype._callExtensionMethod = function(t) {
        for (var n = [], r = 1; r < arguments.length; r++)
            n[r - 1] = arguments[r];
        var i = O0()
          , o = i.__SENTRY__;
        if (o && o.extensions && typeof o.extensions[t] == "function")
            return o.extensions[t].apply(this, n);
        Ve.warn("Extension method " + t + " couldn't be found, doing nothing.")
    }
    ,
    e
}();
function O0() {
    var e = It();
    return e.__SENTRY__ = e.__SENTRY__ || {
        extensions: {},
        hub: void 0
    },
    e
}
function X4(e) {
    var t = O0()
      , n = vo(t);
    return S3(t, e),
    n
}
function nn() {
    var e = O0();
    return (!n9(e) || vo(e).isOlderThan(x3)) && S3(e, new I3),
    w3() ? TZ(e) : vo(e)
}
function TZ(e) {
    var t, n, r;
    try {
        var i = (r = (n = (t = O0().__SENTRY__) === null || t === void 0 ? void 0 : t.extensions) === null || n === void 0 ? void 0 : n.domain) === null || r === void 0 ? void 0 : r.active;
        if (!i)
            return vo(e);
        if (!n9(i) || vo(i).isOlderThan(x3)) {
            var o = vo(e).getStackTop();
            S3(i, new I3(o.client,b1.clone(o.scope)))
        }
        return vo(i)
    } catch {
        return vo(e)
    }
}
function n9(e) {
    return !!(e && e.__SENTRY__ && e.__SENTRY__.hub)
}
function vo(e) {
    return e && e.__SENTRY__ && e.__SENTRY__.hub || (e.__SENTRY__ = e.__SENTRY__ || {},
    e.__SENTRY__.hub = new I3),
    e.__SENTRY__.hub
}
function S3(e, t) {
    return e ? (e.__SENTRY__ = e.__SENTRY__ || {},
    e.__SENTRY__.hub = t,
    !0) : !1
}
function r9(e) {
    for (var t = [], n = 1; n < arguments.length; n++)
        t[n - 1] = arguments[n];
    var r = nn();
    if (r && r[e])
        return r[e].apply(r, FY(t));
    throw new Error("No hub defined or " + e + " was not found on the hub, please open a bug report.")
}
function i9(e, t) {
    var n;
    try {
        throw new Error("Sentry syntheticException")
    } catch (r) {
        n = r
    }
    return r9("captureException", e, {
        captureContext: t,
        originalException: e,
        syntheticException: n
    })
}
function o9(e) {
    r9("withScope", e)
}
var q4 = "7"
  , s9 = function() {
    function e(t, n) {
        n === void 0 && (n = {}),
        this.dsn = t,
        this._dsnObject = new Xk(t),
        this.metadata = n
    }
    return e.prototype.getDsn = function() {
        return this._dsnObject
    }
    ,
    e.prototype.getBaseApiEndpoint = function() {
        var t = this._dsnObject
          , n = t.protocol ? t.protocol + ":" : ""
          , r = t.port ? ":" + t.port : "";
        return n + "//" + t.host + r + (t.path ? "/" + t.path : "") + "/api/"
    }
    ,
    e.prototype.getStoreEndpoint = function() {
        return this._getIngestEndpoint("store")
    }
    ,
    e.prototype.getStoreEndpointWithUrlEncodedAuth = function() {
        return this.getStoreEndpoint() + "?" + this._encodedAuth()
    }
    ,
    e.prototype.getEnvelopeEndpointWithUrlEncodedAuth = function() {
        return this._getEnvelopeEndpoint() + "?" + this._encodedAuth()
    }
    ,
    e.prototype.getStoreEndpointPath = function() {
        var t = this._dsnObject;
        return (t.path ? "/" + t.path : "") + "/api/" + t.projectId + "/store/"
    }
    ,
    e.prototype.getRequestHeaders = function(t, n) {
        var r = this._dsnObject
          , i = ["Sentry sentry_version=" + q4];
        return i.push("sentry_client=" + t + "/" + n),
        i.push("sentry_key=" + r.publicKey),
        r.pass && i.push("sentry_secret=" + r.pass),
        {
            "Content-Type": "application/json",
            "X-Sentry-Auth": i.join(", ")
        }
    }
    ,
    e.prototype.getReportDialogEndpoint = function(t) {
        t === void 0 && (t = {});
        var n = this._dsnObject
          , r = this.getBaseApiEndpoint() + "embed/error-page/"
          , i = [];
        i.push("dsn=" + n.toString());
        for (var o in t)
            if (o !== "dsn")
                if (o === "user") {
                    if (!t.user)
                        continue;
                    t.user.name && i.push("name=" + encodeURIComponent(t.user.name)),
                    t.user.email && i.push("email=" + encodeURIComponent(t.user.email))
                } else
                    i.push(encodeURIComponent(o) + "=" + encodeURIComponent(t[o]));
        return i.length ? r + "?" + i.join("&") : r
    }
    ,
    e.prototype._getEnvelopeEndpoint = function() {
        return this._getIngestEndpoint("envelope")
    }
    ,
    e.prototype._getIngestEndpoint = function(t) {
        var n = this.getBaseApiEndpoint()
          , r = this._dsnObject;
        return "" + n + r.projectId + "/" + t + "/"
    }
    ,
    e.prototype._encodedAuth = function() {
        var t = this._dsnObject
          , n = {
            sentry_key: t.publicKey,
            sentry_version: q4
        };
        return tZ(n)
    }
    ,
    e
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var gn = function() {
    return gn = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    gn.apply(this, arguments)
};
function MZ(e, t) {
    var n = {};
    for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
    if (e != null && typeof Object.getOwnPropertySymbols == "function")
        for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
            t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
    return n
}
function AZ(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function LZ(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function Ho() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(LZ(arguments[t]));
    return e
}
var Q4 = [];
function PZ(e) {
    var t = e.defaultIntegrations && Ho(e.defaultIntegrations) || []
      , n = e.integrations
      , r = [];
    if (Array.isArray(n)) {
        var i = n.map(function(l) {
            return l.name
        })
          , o = [];
        t.forEach(function(l) {
            i.indexOf(l.name) === -1 && o.indexOf(l.name) === -1 && (r.push(l),
            o.push(l.name))
        }),
        n.forEach(function(l) {
            o.indexOf(l.name) === -1 && (r.push(l),
            o.push(l.name))
        })
    } else
        typeof n == "function" ? (r = n(t),
        r = Array.isArray(r) ? r : [r]) : r = Ho(t);
    var s = r.map(function(l) {
        return l.name
    })
      , a = "Debug";
    return s.indexOf(a) !== -1 && r.push.apply(r, Ho(r.splice(s.indexOf(a), 1))),
    r
}
function RZ(e) {
    Q4.indexOf(e.name) === -1 && (e.setupOnce(R0, nn),
    Q4.push(e.name),
    Ve.log("Integration installed: " + e.name))
}
function OZ(e) {
    var t = {};
    return PZ(e).forEach(function(n) {
        t[n.name] = n,
        RZ(n)
    }),
    t
}
var DZ = function() {
    function e(t, n) {
        this._integrations = {},
        this._processing = 0,
        this._backend = new t(n),
        this._options = n,
        n.dsn && (this._dsn = new Xk(n.dsn))
    }
    return e.prototype.captureException = function(t, n, r) {
        var i = this
          , o = n && n.event_id;
        return this._process(this._getBackend().eventFromException(t, n).then(function(s) {
            return i._captureEvent(s, n, r)
        }).then(function(s) {
            o = s
        })),
        o
    }
    ,
    e.prototype.captureMessage = function(t, n, r, i) {
        var o = this
          , s = r && r.event_id
          , a = ld(t) ? this._getBackend().eventFromMessage(String(t), n, r) : this._getBackend().eventFromException(t, r);
        return this._process(a.then(function(l) {
            return o._captureEvent(l, r, i)
        }).then(function(l) {
            s = l
        })),
        s
    }
    ,
    e.prototype.captureEvent = function(t, n, r) {
        var i = n && n.event_id;
        return this._process(this._captureEvent(t, n, r).then(function(o) {
            i = o
        })),
        i
    }
    ,
    e.prototype.captureSession = function(t) {
        t.release ? (this._sendSession(t),
        t.update({
            init: !1
        })) : Ve.warn("Discarded session because of missing release")
    }
    ,
    e.prototype.getDsn = function() {
        return this._dsn
    }
    ,
    e.prototype.getOptions = function() {
        return this._options
    }
    ,
    e.prototype.flush = function(t) {
        var n = this;
        return this._isClientProcessing(t).then(function(r) {
            return n._getBackend().getTransport().close(t).then(function(i) {
                return r && i
            })
        })
    }
    ,
    e.prototype.close = function(t) {
        var n = this;
        return this.flush(t).then(function(r) {
            return n.getOptions().enabled = !1,
            r
        })
    }
    ,
    e.prototype.setupIntegrations = function() {
        this._isEnabled() && (this._integrations = OZ(this._options))
    }
    ,
    e.prototype.getIntegration = function(t) {
        try {
            return this._integrations[t.id] || null
        } catch {
            return Ve.warn("Cannot retrieve integration " + t.id + " from the current Client"),
            null
        }
    }
    ,
    e.prototype._updateSessionFromEvent = function(t, n) {
        var r, i, o = !1, s = !1, a, l = n.exception && n.exception.values;
        if (l) {
            s = !0;
            try {
                for (var c = AZ(l), u = c.next(); !u.done; u = c.next()) {
                    var d = u.value
                      , f = d.mechanism;
                    if (f && f.handled === !1) {
                        o = !0;
                        break
                    }
                }
            } catch (E) {
                r = {
                    error: E
                }
            } finally {
                try {
                    u && !u.done && (i = c.return) && i.call(c)
                } finally {
                    if (r)
                        throw r.error
                }
            }
        }
        var h = n.user;
        if (!t.userAgent) {
            var m = n.request ? n.request.headers : {};
            for (var g in m)
                if (g.toLowerCase() === "user-agent") {
                    a = m[g];
                    break
                }
        }
        t.update(gn(gn({}, o && {
            status: zo.Crashed
        }), {
            user: h,
            userAgent: a,
            errors: t.errors + Number(s || o)
        })),
        this.captureSession(t)
    }
    ,
    e.prototype._sendSession = function(t) {
        this._getBackend().sendSession(t)
    }
    ,
    e.prototype._isClientProcessing = function(t) {
        var n = this;
        return new Tn(function(r) {
            var i = 0
              , o = 1
              , s = setInterval(function() {
                n._processing == 0 ? (clearInterval(s),
                r(!0)) : (i += o,
                t && i >= t && (clearInterval(s),
                r(!1)))
            }, o)
        }
        )
    }
    ,
    e.prototype._getBackend = function() {
        return this._backend
    }
    ,
    e.prototype._isEnabled = function() {
        return this.getOptions().enabled !== !1 && this._dsn !== void 0
    }
    ,
    e.prototype._prepareEvent = function(t, n, r) {
        var i = this
          , o = this.getOptions().normalizeDepth
          , s = o === void 0 ? 3 : o
          , a = gn(gn({}, t), {
            event_id: t.event_id || (r && r.event_id ? r.event_id : cl()),
            timestamp: t.timestamp || _3()
        });
        this._applyClientOptions(a),
        this._applyIntegrationsMetadata(a);
        var l = n;
        r && r.captureContext && (l = b1.clone(l).update(r.captureContext));
        var c = Tn.resolve(a);
        return l && (c = l.applyToEvent(a, r)),
        c.then(function(u) {
            return typeof s == "number" && s > 0 ? i._normalizeEvent(u, s) : u
        })
    }
    ,
    e.prototype._normalizeEvent = function(t, n) {
        if (!t)
            return null;
        var r = gn(gn(gn(gn(gn({}, t), t.breadcrumbs && {
            breadcrumbs: t.breadcrumbs.map(function(i) {
                return gn(gn({}, i), i.data && {
                    data: Fc(i.data, n)
                })
            })
        }), t.user && {
            user: Fc(t.user, n)
        }), t.contexts && {
            contexts: Fc(t.contexts, n)
        }), t.extra && {
            extra: Fc(t.extra, n)
        });
        return t.contexts && t.contexts.trace && (r.contexts.trace = t.contexts.trace),
        r
    }
    ,
    e.prototype._applyClientOptions = function(t) {
        var n = this.getOptions()
          , r = n.environment
          , i = n.release
          , o = n.dist
          , s = n.maxValueLength
          , a = s === void 0 ? 250 : s;
        "environment"in t || (t.environment = "environment"in n ? r : "production"),
        t.release === void 0 && i !== void 0 && (t.release = i),
        t.dist === void 0 && o !== void 0 && (t.dist = o),
        t.message && (t.message = uu(t.message, a));
        var l = t.exception && t.exception.values && t.exception.values[0];
        l && l.value && (l.value = uu(l.value, a));
        var c = t.request;
        c && c.url && (c.url = uu(c.url, a))
    }
    ,
    e.prototype._applyIntegrationsMetadata = function(t) {
        var n = t.sdk
          , r = Object.keys(this._integrations);
        n && r.length > 0 && (n.integrations = r)
    }
    ,
    e.prototype._sendEvent = function(t) {
        this._getBackend().sendEvent(t)
    }
    ,
    e.prototype._captureEvent = function(t, n, r) {
        return this._processEvent(t, n, r).then(function(i) {
            return i.event_id
        }, function(i) {
            Ve.error(i)
        })
    }
    ,
    e.prototype._processEvent = function(t, n, r) {
        var i = this
          , o = this.getOptions()
          , s = o.beforeSend
          , a = o.sampleRate;
        if (!this._isEnabled())
            return Tn.reject(new Wt("SDK not enabled, will not send event."));
        var l = t.type === "transaction";
        return !l && typeof a == "number" && Math.random() > a ? Tn.reject(new Wt("Discarding event because it's not included in the random sample (sampling rate = " + a + ")")) : this._prepareEvent(t, r, n).then(function(c) {
            if (c === null)
                throw new Wt("An event processor returned null, will not send event.");
            var u = n && n.data && n.data.__sentry__ === !0;
            if (u || l || !s)
                return c;
            var d = s(c, n);
            if (typeof d > "u")
                throw new Wt("`beforeSend` method has to return `null` or a valid event.");
            return E3(d) ? d.then(function(f) {
                return f
            }, function(f) {
                throw new Wt("beforeSend rejected with " + f)
            }) : d
        }).then(function(c) {
            if (c === null)
                throw new Wt("`beforeSend` returned `null`, will not send event.");
            var u = r && r.getSession && r.getSession();
            return !l && u && i._updateSessionFromEvent(u, c),
            i._sendEvent(c),
            c
        }).then(null, function(c) {
            throw c instanceof Wt ? c : (i.captureException(c, {
                data: {
                    __sentry__: !0
                },
                originalException: c
            }),
            new Wt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ` + c))
        })
    }
    ,
    e.prototype._process = function(t) {
        var n = this;
        this._processing += 1,
        t.then(function(r) {
            return n._processing -= 1,
            r
        }, function(r) {
            return n._processing -= 1,
            r
        })
    }
    ,
    e
}()
  , NZ = function() {
    function e() {}
    return e.prototype.sendEvent = function(t) {
        return Tn.resolve({
            reason: "NoopTransport: Event has been skipped because no Dsn is configured.",
            status: aa.Skipped
        })
    }
    ,
    e.prototype.close = function(t) {
        return Tn.resolve(!0)
    }
    ,
    e
}()
  , FZ = function() {
    function e(t) {
        this._options = t,
        this._options.dsn || Ve.warn("No DSN provided, backend will not do anything."),
        this._transport = this._setupTransport()
    }
    return e.prototype.eventFromException = function(t, n) {
        throw new Wt("Backend has to implement `eventFromException` method")
    }
    ,
    e.prototype.eventFromMessage = function(t, n, r) {
        throw new Wt("Backend has to implement `eventFromMessage` method")
    }
    ,
    e.prototype.sendEvent = function(t) {
        this._transport.sendEvent(t).then(null, function(n) {
            Ve.error("Error while sending event: " + n)
        })
    }
    ,
    e.prototype.sendSession = function(t) {
        if (!this._transport.sendSession) {
            Ve.warn("Dropping session because custom transport doesn't implement sendSession");
            return
        }
        this._transport.sendSession(t).then(null, function(n) {
            Ve.error("Error while sending session: " + n)
        })
    }
    ,
    e.prototype.getTransport = function() {
        return this._transport
    }
    ,
    e.prototype._setupTransport = function() {
        return new NZ
    }
    ,
    e
}();
function a9(e) {
    if (!(!e.metadata || !e.metadata.sdk)) {
        var t = e.metadata.sdk
          , n = t.name
          , r = t.version;
        return {
            name: n,
            version: r
        }
    }
}
function $Z(e, t) {
    return t && (e.sdk = e.sdk || {
        name: t.name,
        version: t.version
    },
    e.sdk.name = e.sdk.name || t.name,
    e.sdk.version = e.sdk.version || t.version,
    e.sdk.integrations = Ho(e.sdk.integrations || [], t.integrations || []),
    e.sdk.packages = Ho(e.sdk.packages || [], t.packages || [])),
    e
}
function l9(e, t) {
    var n = a9(t)
      , r = JSON.stringify(gn({
        sent_at: new Date().toISOString()
    }, n && {
        sdk: n
    }))
      , i = JSON.stringify({
        type: "session"
    });
    return {
        body: r + `
` + i + `
` + JSON.stringify(e),
        type: "session",
        url: t.getEnvelopeEndpointWithUrlEncodedAuth()
    }
}
function c9(e, t) {
    var n = a9(t)
      , r = e.type || "event"
      , i = r === "transaction"
      , o = e.debug_meta || {}
      , s = o.transactionSampling
      , a = MZ(o, ["transactionSampling"])
      , l = s || {}
      , c = l.method
      , u = l.rate;
    Object.keys(a).length === 0 ? delete e.debug_meta : e.debug_meta = a;
    var d = {
        body: JSON.stringify(n ? $Z(e, t.metadata.sdk) : e),
        type: r,
        url: i ? t.getEnvelopeEndpointWithUrlEncodedAuth() : t.getStoreEndpointWithUrlEncodedAuth()
    };
    if (i) {
        var f = JSON.stringify(gn({
            event_id: e.event_id,
            sent_at: new Date().toISOString()
        }, n && {
            sdk: n
        }))
          , h = JSON.stringify({
            type: e.type,
            sample_rates: [{
                id: c,
                rate: u
            }]
        })
          , m = f + `
` + h + `
` + d.body;
        d.body = m
    }
    return d
}
function BZ(e, t) {
    t.debug === !0 && Ve.enable();
    var n = nn()
      , r = new e(t);
    n.bindClient(r)
}
var J4 = "6.2.5", e5, zZ = function() {
    function e() {
        this.name = e.id
    }
    return e.prototype.setupOnce = function() {
        e5 = Function.prototype.toString,
        Function.prototype.toString = function() {
            for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
            var r = this.__sentry_original__ || this;
            return e5.apply(r, t)
        }
    }
    ,
    e.id = "FunctionToString",
    e
}(), HZ = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/], UZ = function() {
    function e(t) {
        t === void 0 && (t = {}),
        this._options = t,
        this.name = e.id
    }
    return e.prototype.setupOnce = function() {
        R0(function(t) {
            var n = nn();
            if (!n)
                return t;
            var r = n.getIntegration(e);
            if (r) {
                var i = n.getClient()
                  , o = i ? i.getOptions() : {}
                  , s = r._mergeOptions(o);
                if (r._shouldDropEvent(t, s))
                    return null
            }
            return t
        })
    }
    ,
    e.prototype._shouldDropEvent = function(t, n) {
        return this._isSentryError(t, n) ? (Ve.warn(`Event dropped due to being internal Sentry Error.
Event: ` + gs(t)),
        !0) : this._isIgnoredError(t, n) ? (Ve.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: " + gs(t)),
        !0) : this._isDeniedUrl(t, n) ? (Ve.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: " + gs(t) + `.
Url: ` + this._getEventFilterUrl(t)),
        !0) : this._isAllowedUrl(t, n) ? !1 : (Ve.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: " + gs(t) + `.
Url: ` + this._getEventFilterUrl(t)),
        !0)
    }
    ,
    e.prototype._isSentryError = function(t, n) {
        if (!n.ignoreInternal)
            return !1;
        try {
            return t && t.exception && t.exception.values && t.exception.values[0] && t.exception.values[0].type === "SentryError" || !1
        } catch {
            return !1
        }
    }
    ,
    e.prototype._isIgnoredError = function(t, n) {
        return !n.ignoreErrors || !n.ignoreErrors.length ? !1 : this._getPossibleEventMessages(t).some(function(r) {
            return n.ignoreErrors.some(function(i) {
                return om(r, i)
            })
        })
    }
    ,
    e.prototype._isDeniedUrl = function(t, n) {
        if (!n.denyUrls || !n.denyUrls.length)
            return !1;
        var r = this._getEventFilterUrl(t);
        return r ? n.denyUrls.some(function(i) {
            return om(r, i)
        }) : !1
    }
    ,
    e.prototype._isAllowedUrl = function(t, n) {
        if (!n.allowUrls || !n.allowUrls.length)
            return !0;
        var r = this._getEventFilterUrl(t);
        return r ? n.allowUrls.some(function(i) {
            return om(r, i)
        }) : !0
    }
    ,
    e.prototype._mergeOptions = function(t) {
        return t === void 0 && (t = {}),
        {
            allowUrls: Ho(this._options.whitelistUrls || [], this._options.allowUrls || [], t.whitelistUrls || [], t.allowUrls || []),
            denyUrls: Ho(this._options.blacklistUrls || [], this._options.denyUrls || [], t.blacklistUrls || [], t.denyUrls || []),
            ignoreErrors: Ho(this._options.ignoreErrors || [], t.ignoreErrors || [], HZ),
            ignoreInternal: typeof this._options.ignoreInternal < "u" ? this._options.ignoreInternal : !0
        }
    }
    ,
    e.prototype._getPossibleEventMessages = function(t) {
        if (t.message)
            return [t.message];
        if (t.exception)
            try {
                var n = t.exception.values && t.exception.values[0] || {}
                  , r = n.type
                  , i = r === void 0 ? "" : r
                  , o = n.value
                  , s = o === void 0 ? "" : o;
                return ["" + s, i + ": " + s]
            } catch {
                return Ve.error("Cannot extract message for event " + gs(t)),
                []
            }
        return []
    }
    ,
    e.prototype._getEventFilterUrl = function(t) {
        try {
            if (t.stacktrace) {
                var n = t.stacktrace.frames;
                return n && n[n.length - 1].filename || null
            }
            if (t.exception) {
                var r = t.exception.values && t.exception.values[0].stacktrace && t.exception.values[0].stacktrace.frames;
                return r && r[r.length - 1].filename || null
            }
            return null
        } catch {
            return Ve.error("Cannot extract url for event " + gs(t)),
            null
        }
    }
    ,
    e.id = "InboundFilters",
    e
}(), $c = "?", VZ = /^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, WZ = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i, GZ = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i, jZ = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, YZ = /\((\S*)(?::(\d+))(?::(\d+))\)/, ZZ = /Minified React error #\d+;/i;
function cd(e) {
    var t = null
      , n = 0;
    e && (typeof e.framesToPop == "number" ? n = e.framesToPop : ZZ.test(e.message) && (n = 1));
    try {
        if (t = XZ(e),
        t)
            return t5(t, n)
    } catch {}
    try {
        if (t = KZ(e),
        t)
            return t5(t, n)
    } catch {}
    return {
        message: C3(e),
        name: e && e.name,
        stack: [],
        failed: !0
    }
}
function KZ(e) {
    if (!e || !e.stack)
        return null;
    for (var t = [], n = e.stack.split(`
`), r, i, o, s, a = 0; a < n.length; ++a) {
        if (o = VZ.exec(n[a])) {
            var l = o[2] && o[2].indexOf("native") === 0;
            r = o[2] && o[2].indexOf("eval") === 0,
            r && (i = YZ.exec(o[2])) && (o[2] = i[1],
            o[3] = i[2],
            o[4] = i[3]),
            s = {
                url: o[2] && o[2].indexOf("address at ") === 0 ? o[2].substr(11) : o[2],
                func: o[1] || $c,
                args: l ? [o[2]] : [],
                line: o[3] ? +o[3] : null,
                column: o[4] ? +o[4] : null
            }
        } else if (o = GZ.exec(n[a]))
            s = {
                url: o[2],
                func: o[1] || $c,
                args: [],
                line: +o[3],
                column: o[4] ? +o[4] : null
            };
        else if (o = WZ.exec(n[a]))
            r = o[3] && o[3].indexOf(" > eval") > -1,
            r && (i = jZ.exec(o[3])) ? (o[1] = o[1] || "eval",
            o[3] = i[1],
            o[4] = i[2],
            o[5] = "") : a === 0 && !o[5] && e.columnNumber !== void 0 && (t[0].column = e.columnNumber + 1),
            s = {
                url: o[3],
                func: o[1] || $c,
                args: o[2] ? o[2].split(",") : [],
                line: o[4] ? +o[4] : null,
                column: o[5] ? +o[5] : null
            };
        else
            continue;
        !s.func && s.line && (s.func = $c),
        t.push(s)
    }
    return t.length ? {
        message: C3(e),
        name: e.name,
        stack: t
    } : null
}
function XZ(e) {
    if (!e || !e.stacktrace)
        return null;
    for (var t = e.stacktrace, n = / line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i, r = / line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i, i = t.split(`
`), o = [], s, a = 0; a < i.length; a += 2) {
        var l = null;
        (s = n.exec(i[a])) ? l = {
            url: s[2],
            func: s[3],
            args: [],
            line: +s[1],
            column: null
        } : (s = r.exec(i[a])) && (l = {
            url: s[6],
            func: s[3] || s[4],
            args: s[5] ? s[5].split(",") : [],
            line: +s[1],
            column: +s[2]
        }),
        l && (!l.func && l.line && (l.func = $c),
        o.push(l))
    }
    return o.length ? {
        message: C3(e),
        name: e.name,
        stack: o
    } : null
}
function t5(e, t) {
    try {
        return Xe(Xe({}, e), {
            stack: e.stack.slice(t)
        })
    } catch {
        return e
    }
}
function C3(e) {
    var t = e && e.message;
    return t ? t.error && typeof t.error.message == "string" ? t.error.message : t : "No error message"
}
var qZ = 50;
function u9(e) {
    var t = k3(e.stack)
      , n = {
        type: e.name,
        value: e.message
    };
    return t && t.length && (n.stacktrace = {
        frames: t
    }),
    n.type === void 0 && n.value === "" && (n.value = "Unrecoverable error caught"),
    n
}
function QZ(e, t, n) {
    var r = {
        exception: {
            values: [{
                type: y3(e) ? e.constructor.name : n ? "UnhandledRejection" : "Error",
                value: "Non-Error " + (n ? "promise rejection" : "exception") + " captured with keys: " + oZ(e)
            }]
        },
        extra: {
            __serialized__: Qk(e)
        }
    };
    if (t) {
        var i = cd(t)
          , o = k3(i.stack);
        r.stacktrace = {
            frames: o
        }
    }
    return r
}
function n5(e) {
    var t = u9(e);
    return {
        exception: {
            values: [t]
        }
    }
}
function k3(e) {
    if (!e || !e.length)
        return [];
    var t = e
      , n = t[0].func || ""
      , r = t[t.length - 1].func || "";
    return (n.indexOf("captureMessage") !== -1 || n.indexOf("captureException") !== -1) && (t = t.slice(1)),
    r.indexOf("sentryWrapped") !== -1 && (t = t.slice(0, -1)),
    t.slice(0, qZ).map(function(i) {
        return {
            colno: i.column === null ? void 0 : i.column,
            filename: i.url || t[0].url,
            function: i.func || "?",
            in_app: !0,
            lineno: i.line === null ? void 0 : i.line
        }
    }).reverse()
}
function JZ(e, t, n) {
    var r = n && n.syntheticException || void 0
      , i = S2(t, r, {
        attachStacktrace: e.attachStacktrace
    });
    return Ml(i, {
        handled: !0,
        type: "generic"
    }),
    i.level = zr.Error,
    n && n.event_id && (i.event_id = n.event_id),
    Tn.resolve(i)
}
function eK(e, t, n, r) {
    n === void 0 && (n = zr.Info);
    var i = r && r.syntheticException || void 0
      , o = C2(t, i, {
        attachStacktrace: e.attachStacktrace
    });
    return o.level = n,
    r && r.event_id && (o.event_id = r.event_id),
    Tn.resolve(o)
}
function S2(e, t, n) {
    n === void 0 && (n = {});
    var r;
    if (Zk(e) && e.error) {
        var i = e;
        return e = i.error,
        r = n5(cd(e)),
        r
    }
    if (W4(e) || BY(e)) {
        var o = e
          , s = o.name || (W4(o) ? "DOMError" : "DOMException")
          , a = o.message ? s + ": " + o.message : s;
        return r = C2(a, t, n),
        _2(r, a),
        "code"in o && (r.tags = Xe(Xe({}, r.tags), {
            "DOMException.code": "" + o.code
        })),
        r
    }
    if (Yk(e))
        return r = n5(cd(e)),
        r;
    if (P0(e) || y3(e)) {
        var l = e;
        return r = QZ(l, t, n.rejection),
        Ml(r, {
            synthetic: !0
        }),
        r
    }
    return r = C2(e, t, n),
    _2(r, "" + e, void 0),
    Ml(r, {
        synthetic: !0
    }),
    r
}
function C2(e, t, n) {
    n === void 0 && (n = {});
    var r = {
        message: e
    };
    if (n.attachStacktrace && t) {
        var i = cd(t)
          , o = k3(i.stack);
        r.stacktrace = {
            frames: o
        }
    }
    return r
}
var tK = {
    event: "error",
    transaction: "transaction",
    session: "session"
}
  , d9 = function() {
    function e(t) {
        this.options = t,
        this._buffer = new _Z(30),
        this._rateLimits = {},
        this._api = new s9(t.dsn,t._metadata),
        this.url = this._api.getStoreEndpointWithUrlEncodedAuth()
    }
    return e.prototype.sendEvent = function(t) {
        throw new Wt("Transport Class has to implement `sendEvent` method")
    }
    ,
    e.prototype.close = function(t) {
        return this._buffer.drain(t)
    }
    ,
    e.prototype._handleResponse = function(t) {
        var n = t.requestType
          , r = t.response
          , i = t.headers
          , o = t.resolve
          , s = t.reject
          , a = aa.fromHttpCode(r.status)
          , l = this._handleRateLimit(i);
        if (l && Ve.warn("Too many requests, backing off until: " + this._disabledUntil(n)),
        a === aa.Success) {
            o({
                status: a
            });
            return
        }
        s(r)
    }
    ,
    e.prototype._disabledUntil = function(t) {
        var n = tK[t];
        return this._rateLimits[n] || this._rateLimits.all
    }
    ,
    e.prototype._isRateLimited = function(t) {
        return this._disabledUntil(t) > new Date(Date.now())
    }
    ,
    e.prototype._handleRateLimit = function(t) {
        var n, r, i, o, s = Date.now(), a = t["x-sentry-rate-limits"], l = t["retry-after"];
        if (a) {
            try {
                for (var c = V4(a.trim().split(",")), u = c.next(); !u.done; u = c.next()) {
                    var d = u.value
                      , f = d.split(":", 2)
                      , h = parseInt(f[0], 10)
                      , m = (isNaN(h) ? 60 : h) * 1e3;
                    try {
                        for (var g = (i = void 0,
                        V4(f[1].split(";"))), E = g.next(); !E.done; E = g.next()) {
                            var v = E.value;
                            this._rateLimits[v || "all"] = new Date(s + m)
                        }
                    } catch (y) {
                        i = {
                            error: y
                        }
                    } finally {
                        try {
                            E && !E.done && (o = g.return) && o.call(g)
                        } finally {
                            if (i)
                                throw i.error
                        }
                    }
                }
            } catch (y) {
                n = {
                    error: y
                }
            } finally {
                try {
                    u && !u.done && (r = c.return) && r.call(c)
                } finally {
                    if (n)
                        throw n.error
                }
            }
            return !0
        } else if (l)
            return this._rateLimits.all = new Date(s + QY(s, l)),
            !0;
        return !1
    }
    ,
    e
}();
function nK() {
    var e, t, n = It();
    if (x2(n.fetch))
        return n.fetch.bind(n);
    var r = n.document
      , i = n.fetch;
    if (typeof ((e = r) === null || e === void 0 ? void 0 : e.createElement) == "function")
        try {
            var o = r.createElement("iframe");
            o.hidden = !0,
            r.head.appendChild(o),
            !((t = o.contentWindow) === null || t === void 0) && t.fetch && (i = o.contentWindow.fetch),
            r.head.removeChild(o)
        } catch (s) {
            Ve.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", s)
        }
    return i.bind(n)
}
var rK = function(e) {
    L0(t, e);
    function t(n, r) {
        r === void 0 && (r = nK());
        var i = e.call(this, n) || this;
        return i._fetch = r,
        i
    }
    return t.prototype.sendEvent = function(n) {
        return this._sendRequest(c9(n, this._api), n)
    }
    ,
    t.prototype.sendSession = function(n) {
        return this._sendRequest(l9(n, this._api), n)
    }
    ,
    t.prototype._sendRequest = function(n, r) {
        var i = this;
        if (this._isRateLimited(n.type))
            return Promise.reject({
                event: r,
                type: n.type,
                reason: "Transport locked till " + this._disabledUntil(n.type) + " due to too many requests.",
                status: 429
            });
        var o = {
            body: n.body,
            method: "POST",
            referrerPolicy: aZ() ? "origin" : ""
        };
        return this.options.fetchParameters !== void 0 && Object.assign(o, this.options.fetchParameters),
        this.options.headers !== void 0 && (o.headers = this.options.headers),
        this._buffer.add(new Tn(function(s, a) {
            i._fetch(n.url, o).then(function(l) {
                var c = {
                    "x-sentry-rate-limits": l.headers.get("X-Sentry-Rate-Limits"),
                    "retry-after": l.headers.get("Retry-After")
                };
                i._handleResponse({
                    requestType: n.type,
                    response: l,
                    headers: c,
                    resolve: s,
                    reject: a
                })
            }).catch(a)
        }
        ))
    }
    ,
    t
}(d9)
  , iK = function(e) {
    L0(t, e);
    function t() {
        return e !== null && e.apply(this, arguments) || this
    }
    return t.prototype.sendEvent = function(n) {
        return this._sendRequest(c9(n, this._api), n)
    }
    ,
    t.prototype.sendSession = function(n) {
        return this._sendRequest(l9(n, this._api), n)
    }
    ,
    t.prototype._sendRequest = function(n, r) {
        var i = this;
        return this._isRateLimited(n.type) ? Promise.reject({
            event: r,
            type: n.type,
            reason: "Transport locked till " + this._disabledUntil(n.type) + " due to too many requests.",
            status: 429
        }) : this._buffer.add(new Tn(function(o, s) {
            var a = new XMLHttpRequest;
            a.onreadystatechange = function() {
                if (a.readyState === 4) {
                    var c = {
                        "x-sentry-rate-limits": a.getResponseHeader("X-Sentry-Rate-Limits"),
                        "retry-after": a.getResponseHeader("Retry-After")
                    };
                    i._handleResponse({
                        requestType: n.type,
                        response: a,
                        headers: c,
                        resolve: o,
                        reject: s
                    })
                }
            }
            ,
            a.open("POST", n.url);
            for (var l in i.options.headers)
                i.options.headers.hasOwnProperty(l) && a.setRequestHeader(l, i.options.headers[l]);
            a.send(n.body)
        }
        ))
    }
    ,
    t
}(d9)
  , oK = function(e) {
    L0(t, e);
    function t() {
        return e !== null && e.apply(this, arguments) || this
    }
    return t.prototype.eventFromException = function(n, r) {
        return JZ(this._options, n, r)
    }
    ,
    t.prototype.eventFromMessage = function(n, r, i) {
        return r === void 0 && (r = zr.Info),
        eK(this._options, n, r, i)
    }
    ,
    t.prototype._setupTransport = function() {
        if (!this._options.dsn)
            return e.prototype._setupTransport.call(this);
        var n = Xe(Xe({}, this._options.transportOptions), {
            dsn: this._options.dsn,
            _metadata: this._options._metadata
        });
        return this._options.transport ? new this._options.transport(n) : b3() ? new rK(n) : new iK(n)
    }
    ,
    t
}(FZ)
  , k2 = 0;
function r5() {
    return k2 > 0
}
function sK() {
    k2 += 1,
    setTimeout(function() {
        k2 -= 1
    })
}
function Ta(e, t, n) {
    if (t === void 0 && (t = {}),
    typeof e != "function")
        return e;
    try {
        if (e.__sentry__)
            return e;
        if (e.__sentry_wrapped__)
            return e.__sentry_wrapped__
    } catch {
        return e
    }
    var r = function() {
        var s = Array.prototype.slice.call(arguments);
        try {
            n && typeof n == "function" && n.apply(this, arguments);
            var a = s.map(function(l) {
                return Ta(l, t)
            });
            return e.handleEvent ? e.handleEvent.apply(this, a) : e.apply(this, a)
        } catch (l) {
            throw sK(),
            o9(function(c) {
                c.addEventProcessor(function(u) {
                    var d = Xe({}, u);
                    return t.mechanism && (_2(d, void 0, void 0),
                    Ml(d, t.mechanism)),
                    d.extra = Xe(Xe({}, d.extra), {
                        arguments: s
                    }),
                    d
                }),
                i9(l)
            }),
            l
        }
    };
    try {
        for (var i in e)
            Object.prototype.hasOwnProperty.call(e, i) && (r[i] = e[i])
    } catch {}
    e.prototype = e.prototype || {},
    r.prototype = e.prototype,
    Object.defineProperty(e, "__sentry_wrapped__", {
        enumerable: !1,
        value: r
    }),
    Object.defineProperties(r, {
        __sentry__: {
            enumerable: !1,
            value: !0
        },
        __sentry_original__: {
            enumerable: !1,
            value: e
        }
    });
    try {
        var o = Object.getOwnPropertyDescriptor(r, "name");
        o.configurable && Object.defineProperty(r, "name", {
            get: function() {
                return e.name
            }
        })
    } catch {}
    return r
}
function aK(e) {
    if (e === void 0 && (e = {}),
    !e.eventId) {
        Ve.error("Missing eventId option in showReportDialog call");
        return
    }
    if (!e.dsn) {
        Ve.error("Missing dsn option in showReportDialog call");
        return
    }
    var t = document.createElement("script");
    t.async = !0,
    t.src = new s9(e.dsn).getReportDialogEndpoint(e),
    e.onLoad && (t.onload = e.onLoad),
    (document.head || document.body).appendChild(t)
}
var lK = function() {
    function e(t) {
        this.name = e.id,
        this._onErrorHandlerInstalled = !1,
        this._onUnhandledRejectionHandlerInstalled = !1,
        this._options = Xe({
            onerror: !0,
            onunhandledrejection: !0
        }, t)
    }
    return e.prototype.setupOnce = function() {
        Error.stackTraceLimit = 50,
        this._options.onerror && (Ve.log("Global Handler attached: onerror"),
        this._installGlobalOnErrorHandler()),
        this._options.onunhandledrejection && (Ve.log("Global Handler attached: onunhandledrejection"),
        this._installGlobalOnUnhandledRejectionHandler())
    }
    ,
    e.prototype._installGlobalOnErrorHandler = function() {
        var t = this;
        this._onErrorHandlerInstalled || (go({
            callback: function(n) {
                var r = n.error
                  , i = nn()
                  , o = i.getIntegration(e)
                  , s = r && r.__sentry_own_request__ === !0;
                if (!(!o || r5() || s)) {
                    var a = i.getClient()
                      , l = ld(r) ? t._eventFromIncompleteOnError(n.msg, n.url, n.line, n.column) : t._enhanceEventWithInitialFrame(S2(r, void 0, {
                        attachStacktrace: a && a.getOptions().attachStacktrace,
                        rejection: !1
                    }), n.url, n.line, n.column);
                    Ml(l, {
                        handled: !1,
                        type: "onerror"
                    }),
                    i.captureEvent(l, {
                        originalException: r
                    })
                }
            },
            type: "error"
        }),
        this._onErrorHandlerInstalled = !0)
    }
    ,
    e.prototype._installGlobalOnUnhandledRejectionHandler = function() {
        var t = this;
        this._onUnhandledRejectionHandlerInstalled || (go({
            callback: function(n) {
                var r = n;
                try {
                    "reason"in n ? r = n.reason : "detail"in n && "reason"in n.detail && (r = n.detail.reason)
                } catch {}
                var i = nn()
                  , o = i.getIntegration(e)
                  , s = r && r.__sentry_own_request__ === !0;
                if (!o || r5() || s)
                    return !0;
                var a = i.getClient()
                  , l = ld(r) ? t._eventFromRejectionWithPrimitive(r) : S2(r, void 0, {
                    attachStacktrace: a && a.getOptions().attachStacktrace,
                    rejection: !0
                });
                l.level = zr.Error,
                Ml(l, {
                    handled: !1,
                    type: "onunhandledrejection"
                }),
                i.captureEvent(l, {
                    originalException: r
                })
            },
            type: "unhandledrejection"
        }),
        this._onUnhandledRejectionHandlerInstalled = !0)
    }
    ,
    e.prototype._eventFromIncompleteOnError = function(t, n, r, i) {
        var o = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i, s = Zk(t) ? t.message : t, a;
        if (Tl(s)) {
            var l = s.match(o);
            l && (a = l[1],
            s = l[2])
        }
        var c = {
            exception: {
                values: [{
                    type: a || "Error",
                    value: s
                }]
            }
        };
        return this._enhanceEventWithInitialFrame(c, n, r, i)
    }
    ,
    e.prototype._eventFromRejectionWithPrimitive = function(t) {
        return {
            exception: {
                values: [{
                    type: "UnhandledRejection",
                    value: "Non-Error promise rejection captured with value: " + String(t)
                }]
            }
        }
    }
    ,
    e.prototype._enhanceEventWithInitialFrame = function(t, n, r, i) {
        t.exception = t.exception || {},
        t.exception.values = t.exception.values || [],
        t.exception.values[0] = t.exception.values[0] || {},
        t.exception.values[0].stacktrace = t.exception.values[0].stacktrace || {},
        t.exception.values[0].stacktrace.frames = t.exception.values[0].stacktrace.frames || [];
        var o = isNaN(parseInt(i, 10)) ? void 0 : i
          , s = isNaN(parseInt(r, 10)) ? void 0 : r
          , a = Tl(n) && n.length > 0 ? n : qY();
        return t.exception.values[0].stacktrace.frames.length === 0 && t.exception.values[0].stacktrace.frames.push({
            colno: o,
            filename: a,
            function: "?",
            in_app: !0,
            lineno: s
        }),
        t
    }
    ,
    e.id = "GlobalHandlers",
    e
}()
  , cK = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"]
  , uK = function() {
    function e(t) {
        this.name = e.id,
        this._options = Xe({
            XMLHttpRequest: !0,
            eventTarget: !0,
            requestAnimationFrame: !0,
            setInterval: !0,
            setTimeout: !0
        }, t)
    }
    return e.prototype.setupOnce = function() {
        var t = It();
        if (this._options.setTimeout && Gt(t, "setTimeout", this._wrapTimeFunction.bind(this)),
        this._options.setInterval && Gt(t, "setInterval", this._wrapTimeFunction.bind(this)),
        this._options.requestAnimationFrame && Gt(t, "requestAnimationFrame", this._wrapRAF.bind(this)),
        this._options.XMLHttpRequest && "XMLHttpRequest"in t && Gt(XMLHttpRequest.prototype, "send", this._wrapXHR.bind(this)),
        this._options.eventTarget) {
            var n = Array.isArray(this._options.eventTarget) ? this._options.eventTarget : cK;
            n.forEach(this._wrapEventTarget.bind(this))
        }
    }
    ,
    e.prototype._wrapTimeFunction = function(t) {
        return function() {
            for (var n = [], r = 0; r < arguments.length; r++)
                n[r] = arguments[r];
            var i = n[0];
            return n[0] = Ta(i, {
                mechanism: {
                    data: {
                        function: uo(t)
                    },
                    handled: !0,
                    type: "instrument"
                }
            }),
            t.apply(this, n)
        }
    }
    ,
    e.prototype._wrapRAF = function(t) {
        return function(n) {
            return t.call(this, Ta(n, {
                mechanism: {
                    data: {
                        function: "requestAnimationFrame",
                        handler: uo(t)
                    },
                    handled: !0,
                    type: "instrument"
                }
            }))
        }
    }
    ,
    e.prototype._wrapEventTarget = function(t) {
        var n = It()
          , r = n[t] && n[t].prototype;
        !r || !r.hasOwnProperty || !r.hasOwnProperty("addEventListener") || (Gt(r, "addEventListener", function(i) {
            return function(o, s, a) {
                try {
                    typeof s.handleEvent == "function" && (s.handleEvent = Ta(s.handleEvent.bind(s), {
                        mechanism: {
                            data: {
                                function: "handleEvent",
                                handler: uo(s),
                                target: t
                            },
                            handled: !0,
                            type: "instrument"
                        }
                    }))
                } catch {}
                return i.call(this, o, Ta(s, {
                    mechanism: {
                        data: {
                            function: "addEventListener",
                            handler: uo(s),
                            target: t
                        },
                        handled: !0,
                        type: "instrument"
                    }
                }), a)
            }
        }),
        Gt(r, "removeEventListener", function(i) {
            return function(o, s, a) {
                var l, c = s;
                try {
                    var u = (l = c) === null || l === void 0 ? void 0 : l.__sentry_wrapped__;
                    u && i.call(this, o, u, a)
                } catch {}
                return i.call(this, o, c, a)
            }
        }))
    }
    ,
    e.prototype._wrapXHR = function(t) {
        return function() {
            for (var n = [], r = 0; r < arguments.length; r++)
                n[r] = arguments[r];
            var i = this
              , o = ["onload", "onerror", "onprogress", "onreadystatechange"];
            return o.forEach(function(s) {
                s in i && typeof i[s] == "function" && Gt(i, s, function(a) {
                    var l = {
                        mechanism: {
                            data: {
                                function: s,
                                handler: uo(a)
                            },
                            handled: !0,
                            type: "instrument"
                        }
                    };
                    return a.__sentry_original__ && (l.mechanism.data.handler = uo(a.__sentry_original__)),
                    Ta(a, l)
                })
            }),
            t.apply(this, n)
        }
    }
    ,
    e.id = "TryCatch",
    e
}()
  , f9 = function() {
    function e(t) {
        this.name = e.id,
        this._options = Xe({
            console: !0,
            dom: !0,
            fetch: !0,
            history: !0,
            sentry: !0,
            xhr: !0
        }, t)
    }
    return e.prototype.addSentryBreadcrumb = function(t) {
        this._options.sentry && nn().addBreadcrumb({
            category: "sentry." + (t.type === "transaction" ? "transaction" : "event"),
            event_id: t.event_id,
            level: t.level,
            message: gs(t)
        }, {
            event: t
        })
    }
    ,
    e.prototype.setupOnce = function() {
        var t = this;
        this._options.console && go({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._consoleBreadcrumb.apply(t, Es(n))
            },
            type: "console"
        }),
        this._options.dom && go({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._domBreadcrumb.apply(t, Es(n))
            },
            type: "dom"
        }),
        this._options.xhr && go({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._xhrBreadcrumb.apply(t, Es(n))
            },
            type: "xhr"
        }),
        this._options.fetch && go({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._fetchBreadcrumb.apply(t, Es(n))
            },
            type: "fetch"
        }),
        this._options.history && go({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._historyBreadcrumb.apply(t, Es(n))
            },
            type: "history"
        })
    }
    ,
    e.prototype._consoleBreadcrumb = function(t) {
        var n = {
            category: "console",
            data: {
                arguments: t.args,
                logger: "console"
            },
            level: zr.fromString(t.level),
            message: E1(t.args, " ")
        };
        if (t.level === "assert")
            if (t.args[0] === !1)
                n.message = "Assertion failed: " + (E1(t.args.slice(1), " ") || "console.assert"),
                n.data.arguments = t.args.slice(1);
            else
                return;
        nn().addBreadcrumb(n, {
            input: t.args,
            level: t.level
        })
    }
    ,
    e.prototype._domBreadcrumb = function(t) {
        var n;
        try {
            n = t.event.target ? y1(t.event.target) : y1(t.event)
        } catch {
            n = "<unknown>"
        }
        n.length !== 0 && nn().addBreadcrumb({
            category: "ui." + t.name,
            message: n
        }, {
            event: t.event,
            name: t.name,
            global: t.global
        })
    }
    ,
    e.prototype._xhrBreadcrumb = function(t) {
        if (t.endTimestamp) {
            if (t.xhr.__sentry_own_request__)
                return;
            var n = t.xhr.__sentry_xhr__ || {}
              , r = n.method
              , i = n.url
              , o = n.status_code
              , s = n.body;
            nn().addBreadcrumb({
                category: "xhr",
                data: {
                    method: r,
                    url: i,
                    status_code: o
                },
                type: "http"
            }, {
                xhr: t.xhr,
                input: s
            });
            return
        }
    }
    ,
    e.prototype._fetchBreadcrumb = function(t) {
        t.endTimestamp && (t.fetchData.url.match(/sentry_key/) && t.fetchData.method === "POST" || (t.error ? nn().addBreadcrumb({
            category: "fetch",
            data: t.fetchData,
            level: zr.Error,
            type: "http"
        }, {
            data: t.error,
            input: t.args
        }) : nn().addBreadcrumb({
            category: "fetch",
            data: Xe(Xe({}, t.fetchData), {
                status_code: t.response.status
            }),
            type: "http"
        }, {
            input: t.args,
            response: t.response
        })))
    }
    ,
    e.prototype._historyBreadcrumb = function(t) {
        var n = It()
          , r = t.from
          , i = t.to
          , o = sm(n.location.href)
          , s = sm(r)
          , a = sm(i);
        s.path || (s = o),
        o.protocol === a.protocol && o.host === a.host && (i = a.relative),
        o.protocol === s.protocol && o.host === s.host && (r = s.relative),
        nn().addBreadcrumb({
            category: "navigation",
            data: {
                from: r,
                to: i
            }
        })
    }
    ,
    e.id = "Breadcrumbs",
    e
}()
  , dK = "cause"
  , fK = 5
  , hK = function() {
    function e(t) {
        t === void 0 && (t = {}),
        this.name = e.id,
        this._key = t.key || dK,
        this._limit = t.limit || fK
    }
    return e.prototype.setupOnce = function() {
        R0(function(t, n) {
            var r = nn().getIntegration(e);
            return r ? r._handler(t, n) : t
        })
    }
    ,
    e.prototype._handler = function(t, n) {
        if (!t.exception || !t.exception.values || !n || !Jo(n.originalException, Error))
            return t;
        var r = this._walkErrorTree(n.originalException, this._key);
        return t.exception.values = Es(r, t.exception.values),
        t
    }
    ,
    e.prototype._walkErrorTree = function(t, n, r) {
        if (r === void 0 && (r = []),
        !Jo(t[n], Error) || r.length + 1 >= this._limit)
            return r;
        var i = cd(t[n])
          , o = u9(i);
        return this._walkErrorTree(t[n], n, Es([o], r))
    }
    ,
    e.id = "LinkedErrors",
    e
}()
  , Sa = It()
  , pK = function() {
    function e() {
        this.name = e.id
    }
    return e.prototype.setupOnce = function() {
        R0(function(t) {
            var n, r, i;
            if (nn().getIntegration(e)) {
                if (!Sa.navigator && !Sa.location && !Sa.document)
                    return t;
                var o = ((n = t.request) === null || n === void 0 ? void 0 : n.url) || ((r = Sa.location) === null || r === void 0 ? void 0 : r.href)
                  , s = (Sa.document || {}).referrer
                  , a = (Sa.navigator || {}).userAgent
                  , l = Xe(Xe(Xe({}, (i = t.request) === null || i === void 0 ? void 0 : i.headers), s && {
                    Referer: s
                }), a && {
                    "User-Agent": a
                })
                  , c = Xe(Xe({}, o && {
                    url: o
                }), {
                    headers: l
                });
                return Xe(Xe({}, t), {
                    request: c
                })
            }
            return t
        })
    }
    ,
    e.id = "UserAgent",
    e
}()
  , mK = function(e) {
    L0(t, e);
    function t(n) {
        n === void 0 && (n = {});
        var r = this;
        return n._metadata = n._metadata || {},
        n._metadata.sdk = n._metadata.sdk || {
            name: "sentry.javascript.browser",
            packages: [{
                name: "npm:@sentry/browser",
                version: J4
            }],
            version: J4
        },
        r = e.call(this, oK, n) || this,
        r
    }
    return t.prototype.showReportDialog = function(n) {
        n === void 0 && (n = {});
        var r = It().document;
        if (r) {
            if (!this._isEnabled()) {
                Ve.error("Trying to call showReportDialog with Sentry Client disabled");
                return
            }
            aK(Xe(Xe({}, n), {
                dsn: n.dsn || this.getDsn()
            }))
        }
    }
    ,
    t.prototype._prepareEvent = function(n, r, i) {
        return n.platform = n.platform || "javascript",
        e.prototype._prepareEvent.call(this, n, r, i)
    }
    ,
    t.prototype._sendEvent = function(n) {
        var r = this.getIntegration(f9);
        r && r.addSentryBreadcrumb(n),
        e.prototype._sendEvent.call(this, n)
    }
    ,
    t
}(DZ)
  , gK = [new UZ, new zZ, new uK, new f9, new lK, new hK, new pK];
function vK(e) {
    if (e === void 0 && (e = {}),
    e.defaultIntegrations === void 0 && (e.defaultIntegrations = gK),
    e.release === void 0) {
        var t = It();
        t.SENTRY_RELEASE && t.SENTRY_RELEASE.id && (e.release = t.SENTRY_RELEASE.id)
    }
    e.autoSessionTracking === void 0 && (e.autoSessionTracking = !0),
    BZ(mK, e),
    e.autoSessionTracking && yK()
}
function yK() {
    var e = It()
      , t = e.document;
    if (typeof t > "u") {
        Ve.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");
        return
    }
    var n = nn();
    "startSession"in n && (n.startSession(),
    n.captureSession(),
    go({
        callback: function() {
            n.startSession(),
            n.captureSession()
        },
        type: "history"
    }))
}
class EK extends ee.Component {
    constructor() {
        super(...arguments);
        M(this, "state", {
            hasError: !1,
            sentryEventId: "",
            localStorage: ""
        })
    }
    render() {
        return this.state.hasError ? this.errorSplash() : this.props.children
    }
    componentDidCatch(n, r) {
        const i = {};
        for (const [o,s] of Object.entries({
            ...localStorage
        }))
            try {
                i[o] = JSON.parse(s)
            } catch {
                i[o] = s
            }
        o9(o=>{
            o.setExtras(r);
            const s = i9(n);
            this.setState(a=>({
                hasError: !0,
                sentryEventId: s,
                localStorage: JSON.stringify(i)
            }))
        }
        )
    }
    selectTextArea(n) {
        n.target !== document.activeElement && (n.preventDefault(),
        n.target.select())
    }
    async createGithubIssue() {
        let n = "";
        try {
            const r = (await ne(()=>import("./bug-issue-template-f174eaf6.js"), [])).default;
            n = encodeURIComponent(r(this.state.sentryEventId))
        } catch (r) {
            console.error(r)
        }
        window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`)
    }
    errorSplash() {
        return p("div", {
            className: "ErrorSplash excalidraw",
            children: k("div", {
                className: "ErrorSplash-messageContainer",
                children: [p("div", {
                    className: "ErrorSplash-paragraph bigger align-center",
                    children: p(Hn, {
                        i18nKey: "errorSplash.headingMain",
                        button: n=>p("button", {
                            onClick: ()=>window.location.reload(),
                            children: n
                        })
                    })
                }), k("div", {
                    className: "ErrorSplash-paragraph align-center",
                    children: [p(Hn, {
                        i18nKey: "errorSplash.clearCanvasMessage",
                        button: n=>p("button", {
                            onClick: ()=>{
                                try {
                                    localStorage.clear(),
                                    window.location.reload()
                                } catch (r) {
                                    console.error(r)
                                }
                            }
                            ,
                            children: n
                        })
                    }), p("br", {}), k("div", {
                        className: "smaller",
                        children: [p("span", {
                            role: "img",
                            "aria-label": "warning",
                            children: ""
                        }), _("errorSplash.clearCanvasCaveat"), p("span", {
                            role: "img",
                            "aria-hidden": "true",
                            children: ""
                        })]
                    })]
                }), k("div", {
                    children: [p("div", {
                        className: "ErrorSplash-paragraph",
                        children: _("errorSplash.trackedToSentry", {
                            eventId: this.state.sentryEventId
                        })
                    }), p("div", {
                        className: "ErrorSplash-paragraph",
                        children: p(Hn, {
                            i18nKey: "errorSplash.openIssueMessage",
                            button: n=>p("button", {
                                onClick: ()=>this.createGithubIssue(),
                                children: n
                            })
                        })
                    }), p("div", {
                        className: "ErrorSplash-paragraph",
                        children: k("div", {
                            className: "ErrorSplash-details",
                            children: [p("label", {
                                children: _("errorSplash.sceneContent")
                            }), p("textarea", {
                                rows: 5,
                                onPointerDown: this.selectTextArea,
                                readOnly: !0,
                                value: this.state.localStorage
                            })]
                        })
                    })]
                })]
            })
        })
    }
}
const wK = e=>{
    const [t,n] = x.useState(!0);
    return x.useEffect(()=>{
        const r = async()=>{
            await bx(i),
            n(!1)
        }
          , i = Bv.find(o=>o.code === e.langCode) || rs;
        r()
    }
    , [e.langCode]),
    t ? p(qC, {
        theme: e.theme
    }) : e.children
}
;
const h9 = ({children: e})=>{
    const {FooterCenterTunnel: t} = Kn()
      , n = On();
    return p(t.In, {
        children: p("div", {
            className: le("footer-center zen-mode-transition", {
                "layer-ui__wrapper__footer-left--transition-bottom": n.zenModeEnabled
            }),
            children: e
        })
    })
}
;
h9.displayName = "FooterCenter";
const bK = ()=>p("svg", {
    viewBox: "0 0 40 40",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: "ExcalidrawLogo-icon",
    children: p("path", {
        d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",
        fill: "currentColor"
    })
})
  , _K = ()=>k("svg", {
    viewBox: "0 0 450 55",
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    className: "ExcalidrawLogo-text",
    children: [p("path", {
        d: "M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",
        transform: "translate(-144.023 -51.76)"
    }), p("path", {
        d: "M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",
        transform: "translate(-144.023 -51.76)"
    }), p("path", {
        d: "M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",
        transform: "translate(-144.023 -51.76)"
    }), p("path", {
        d: "m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",
        fill: "currentColor",
        transform: "translate(-144.023 -51.76)"
    })]
})
  , p9 = ({style: e, size: t="small", withText: n})=>k("div", {
    className: `ExcalidrawLogo is-${t}`,
    style: e,
    children: [p(bK, {}), n && p(_K, {})]
})
  , T3 = ({icon: e, shortcut: t, children: n})=>{
    const r = Xt();
    return k(re, {
        children: [p("div", {
            className: "welcome-screen-menu-item__icon",
            children: e
        }), p("div", {
            className: "welcome-screen-menu-item__text",
            children: n
        }), t && !r.isMobile && p("div", {
            className: "welcome-screen-menu-item__shortcut",
            children: t
        })]
    })
}
;
T3.displayName = "WelcomeScreenMenuItemContent";
const Od = ({onSelect: e, children: t, icon: n, shortcut: r, className: i="", ...o})=>p("button", {
    ...o,
    type: "button",
    className: `welcome-screen-menu-item ${i}`,
    onClick: e,
    children: p(T3, {
        icon: n,
        shortcut: r,
        children: t
    })
});
Od.displayName = "WelcomeScreenMenuItem";
const m9 = ({children: e, href: t, icon: n, shortcut: r, className: i="", ...o})=>p("a", {
    ...o,
    className: `welcome-screen-menu-item ${i}`,
    href: t,
    target: "_blank",
    rel: "noreferrer",
    children: p(T3, {
        icon: n,
        shortcut: r,
        children: e
    })
});
m9.displayName = "WelcomeScreenMenuItemLink";
const Vr = ({children: e})=>{
    const {WelcomeScreenCenterTunnel: t} = Kn();
    return p(t.In, {
        children: p("div", {
            className: "welcome-screen-center",
            children: e || k(re, {
                children: [p(M3, {}), p(A3, {
                    children: _("welcomeScreen.defaults.center_heading")
                }), k(L3, {
                    children: [p(R3, {}), p(P3, {})]
                })]
            })
        })
    })
}
;
Vr.displayName = "Center";
const M3 = ({children: e})=>p("div", {
    className: "welcome-screen-center__logo virgil welcome-screen-decor",
    children: e || p(p9, {
        withText: !0
    })
});
M3.displayName = "Logo";
const A3 = ({children: e})=>p("div", {
    className: "welcome-screen-center__heading welcome-screen-decor virgil",
    children: e
});
A3.displayName = "Heading";
const L3 = ({children: e})=>p("div", {
    className: "welcome-screen-menu",
    children: e
});
L3.displayName = "Menu";
const P3 = ()=>{
    const e = pr();
    return p(Od, {
        onSelect: ()=>e.executeAction(Yy),
        shortcut: "?",
        icon: ny,
        children: _("helpDialog.title")
    })
}
;
P3.displayName = "MenuItemHelp";
const R3 = ()=>{
    const e = On()
      , t = pr();
    return e.viewModeEnabled ? null : p(Od, {
        onSelect: ()=>t.executeAction(t2),
        shortcut: Kl("loadScene"),
        icon: ry,
        children: _("buttons.load")
    })
}
;
R3.displayName = "MenuItemLoadScene";
const g9 = ({onSelect: e})=>{
    const {t} = Ot();
    return p(Od, {
        shortcut: null,
        onSelect: e,
        icon: iy,
        children: t("labels.liveCollaboration")
    })
}
;
g9.displayName = "MenuItemLiveCollaborationTrigger";
Vr.Logo = M3;
Vr.Heading = A3;
Vr.Menu = L3;
Vr.MenuItem = Od;
Vr.MenuItemLink = m9;
Vr.MenuItemHelp = P3;
Vr.MenuItemLoadScene = R3;
Vr.MenuItemLiveCollaborationTrigger = g9;
const O3 = ({children: e})=>{
    const {WelcomeScreenMenuHintTunnel: t} = Kn();
    return p(t.In, {
        children: k("div", {
            className: "virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",
            children: [HR, p("div", {
                className: "welcome-screen-decor-hint__label",
                children: e || _("welcomeScreen.defaults.menuHint")
            })]
        })
    })
}
;
O3.displayName = "MenuHint";
const D3 = ({children: e})=>{
    const {WelcomeScreenToolbarHintTunnel: t} = Kn();
    return p(t.In, {
        children: k("div", {
            className: "virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",
            children: [p("div", {
                className: "welcome-screen-decor-hint__label",
                children: e || _("welcomeScreen.defaults.toolbarHint")
            }), VR]
        })
    })
}
;
D3.displayName = "ToolbarHint";
const N3 = ({children: e})=>{
    const {WelcomeScreenHelpHintTunnel: t} = Kn();
    return p(t.In, {
        children: k("div", {
            className: "virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",
            children: [p("div", {
                children: e || _("welcomeScreen.defaults.helpHint")
            }), UR]
        })
    })
}
;
N3.displayName = "HelpHint";
const mn = e=>p(re, {
    children: e.children || k(re, {
        children: [p(Vr, {}), p(O3, {}), p(D3, {}), p(N3, {})]
    })
});
mn.displayName = "WelcomeScreen";
mn.Center = Vr;
mn.Hints = {
    MenuHint: O3,
    ToolbarHint: D3,
    HelpHint: N3
};
const v9 = ({isCollaborating: e, onSelect: t, ...n})=>{
    const r = On();
    return k(p2, {
        ...n,
        className: le("collab-button", {
            active: e
        }),
        type: "button",
        onSelect: t,
        style: {
            position: "relative"
        },
        title: _("labels.liveCollaboration"),
        children: [iy, r.collaborators.size > 0 && p("div", {
            className: "CollabButton-collaborators",
            children: r.collaborators.size
        })]
    })
}
;
v9.displayName = "LiveCollaborationTrigger";
const xK = e=>{
    var N, $;
    const {onChange: t, initialData: n, excalidrawRef: r, isCollaborating: i=!1, onPointerUpdate: o, renderTopRightUI: s, langCode: a=rs.code, viewModeEnabled: l, zenModeEnabled: c, gridModeEnabled: u, libraryReturnUrl: d, theme: f, name: h, renderCustomStats: m, onPaste: g, detectScroll: E=!0, handleKeyboardGlobally: v=!1, onLibraryChange: y, autoFocus: w=!1, generateIdForFile: b, onLinkOpen: I, onPointerDown: S, onScrollChange: C, children: T, validateEmbeddable: L, renderEmbeddable: A} = e
      , P = (N = e.UIOptions) == null ? void 0 : N.canvasActions
      , O = {
        ...e.UIOptions,
        canvasActions: {
            ...ug.canvasActions,
            ...P
        }
    };
    return P != null && P.export && (O.canvasActions.export.saveFileToDisk = (($ = P.export) == null ? void 0 : $.saveFileToDisk) ?? ug.canvasActions.export.saveFileToDisk),
    O.canvasActions.toggleTheme === null && typeof f > "u" && (O.canvasActions.toggleTheme = !0),
    x.useEffect(()=>{
        const V = te=>{
            typeof te.scale == "number" && te.scale !== 1 && te.preventDefault()
        }
        ;
        return document.addEventListener("touchmove", V, {
            passive: !1
        }),
        ()=>{
            document.removeEventListener("touchmove", V)
        }
    }
    , []),
    p($v, {
        unstable_createStore: ()=>Di,
        scope: Kt,
        children: p(wK, {
            langCode: a,
            theme: f,
            children: p(E2, {
                onChange: t,
                initialData: n,
                excalidrawRef: r,
                isCollaborating: i,
                onPointerUpdate: o,
                renderTopRightUI: s,
                langCode: a,
                viewModeEnabled: l,
                zenModeEnabled: c,
                gridModeEnabled: u,
                libraryReturnUrl: d,
                theme: f,
                name: h,
                renderCustomStats: m,
                UIOptions: O,
                onPaste: g,
                detectScroll: E,
                handleKeyboardGlobally: v,
                onLibraryChange: y,
                autoFocus: w,
                generateIdForFile: b,
                onLinkOpen: I,
                onPointerDown: S,
                onScrollChange: C,
                validateEmbeddable: L,
                renderEmbeddable: A,
                children: T
            })
        })
    })
}
  , IK = (e,t)=>{
    if (e.children !== t.children)
        return !1;
    const {initialData: n, UIOptions: r={}, ...i} = e
      , {initialData: o, UIOptions: s={}, ...a} = t
      , l = Object.keys(r)
      , c = Object.keys(s);
    return l.length !== c.length ? !1 : l.every(d=>d === "canvasActions" ? Object.keys(r.canvasActions).every(h=>{
        var m, g, E, v;
        return h === "export" && ((m = r == null ? void 0 : r.canvasActions) != null && m.export) && ((g = s == null ? void 0 : s.canvasActions) != null && g.export) ? r.canvasActions.export.saveFileToDisk === s.canvasActions.export.saveFileToDisk : ((E = r == null ? void 0 : r.canvasActions) == null ? void 0 : E[h]) === ((v = s == null ? void 0 : s.canvasActions) == null ? void 0 : v[h])
    }
    ) : r[d] === s[d]) && Tr(i, a)
}
  , SK = x.forwardRef((e,t)=>p(xK, {
    ...e,
    excalidrawRef: t
}))
  , y9 = ee.memo(SK, IK);
y9.displayName = "Excalidraw";
const CK = 300
  , kK = 5e3
  , TK = 300
  , MK = 500
  , i5 = 2e4
  , AK = 50
  , LK = 33
  , PK = 24 * 60 * 60 * 1e3
  , F3 = 3 * 1024 * 1024
  , RK = 31536e3
  , o5 = {
    SERVER_VOLATILE: "server-volatile-broadcast",
    SERVER: "server-broadcast"
};
var Ns = (e=>(e.INIT = "SCENE_INIT",
e.UPDATE = "SCENE_UPDATE",
e))(Ns || {});
const E9 = {
    shareLinkFiles: "/files/shareLinks",
    collabFiles: "/files/rooms"
}
  , OK = 10
  , yt = {
    LOCAL_STORAGE_ELEMENTS: "excalidraw",
    LOCAL_STORAGE_APP_STATE: "excalidraw-state",
    LOCAL_STORAGE_COLLAB: "excalidraw-collab",
    LOCAL_STORAGE_LIBRARY: "excalidraw-library",
    LOCAL_STORAGE_THEME: "excalidraw-theme",
    VERSION_DATA_STATE: "version-dataState",
    VERSION_FILES: "version-files"
}
  , DK = {
    AUTH_STATE_COOKIE: "excplus-auth"
}
  , _1 = document.cookie.includes(DK.AUTH_STATE_COOKIE);
class w9 {
    constructor({getFiles: t, saveFiles: n}) {
        M(this, "fetchingFiles", new Map);
        M(this, "savingFiles", new Map);
        M(this, "savedFiles", new Map);
        M(this, "erroredFiles", new Map);
        M(this, "_getFiles");
        M(this, "_saveFiles");
        M(this, "isFileHandled", t=>this.savedFiles.has(t) || this.fetchingFiles.has(t) || this.savingFiles.has(t) || this.erroredFiles.has(t));
        M(this, "isFileSaved", t=>this.savedFiles.has(t));
        M(this, "saveFiles", async({elements: t, files: n})=>{
            const r = new Map;
            for (const i of t)
                At(i) && n[i.fileId] && !this.isFileHandled(i.fileId) && (r.set(i.fileId, n[i.fileId]),
                this.savingFiles.set(i.fileId, !0));
            try {
                const {savedFiles: i, erroredFiles: o} = await this._saveFiles({
                    addedFiles: r
                });
                for (const [s] of i)
                    this.savedFiles.set(s, !0);
                return {
                    savedFiles: i,
                    erroredFiles: o
                }
            } finally {
                for (const [i] of r)
                    this.savingFiles.delete(i)
            }
        }
        );
        M(this, "getFiles", async t=>{
            if (!t.length)
                return {
                    loadedFiles: [],
                    erroredFiles: new Map
                };
            for (const n of t)
                this.fetchingFiles.set(n, !0);
            try {
                const {loadedFiles: n, erroredFiles: r} = await this._getFiles(t);
                for (const i of n)
                    this.savedFiles.set(i.id, !0);
                for (const [i] of r)
                    this.erroredFiles.set(i, !0);
                return {
                    loadedFiles: n,
                    erroredFiles: r
                }
            } finally {
                for (const n of t)
                    this.fetchingFiles.delete(n)
            }
        }
        );
        M(this, "shouldPreventUnload", t=>t.some(n=>At(n) && !n.isDeleted && this.savingFiles.has(n.fileId)));
        M(this, "shouldUpdateImageElementStatus", t=>At(t) && this.isFileSaved(t.fileId) && t.status === "pending");
        this._getFiles = t,
        this._saveFiles = n
    }
    reset() {
        this.fetchingFiles.clear(),
        this.savingFiles.clear(),
        this.savedFiles.clear(),
        this.erroredFiles.clear()
    }
}
const $3 = async({files: e, maxBytes: t, encryptionKey: n})=>{
    const r = [];
    for (const [i,o] of e) {
        const s = new TextEncoder().encode(o.dataURL)
          , a = await AC(s, {
            encryptionKey: n,
            metadata: {
                id: i,
                mimeType: o.mimeType,
                created: Date.now(),
                lastRetrieved: Date.now()
            }
        });
        if (s.byteLength > t)
            throw new Error(_("errors.fileTooBig", {
                maxSize: `${Math.trunc(t / 1024 / 1024)}MB`
            }));
        r.push({
            id: i,
            buffer: a
        })
    }
    return r
}
  , Bc = e=>{
    e.erroredFiles.size && e.excalidrawAPI.updateScene({
        elements: e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>At(t) && e.erroredFiles.has(t.fileId) ? fe(t, {
            status: "error"
        }) : t)
    })
}
  , NK = (e,t,n)=>{
    var r, i, o;
    return !!(t && (t.id === ((r = e.editingElement) == null ? void 0 : r.id) || t.id === ((i = e.resizingElement) == null ? void 0 : i.id) || t.id === ((o = e.draggingElement) == null ? void 0 : o.id) || t.version > n.version || t.version === n.version && t.versionNonce < n.versionNonce))
}
  , B3 = (e,t,n)=>{
    var u;
    const r = Tx(e)
      , i = e.slice()
      , o = new WeakMap;
    let s = 0
      , a = 0
      , l = -1;
    for (const d of t) {
        l++;
        const f = r.get(d.id);
        if (NK(n, f == null ? void 0 : f[0], d)) {
            d[wo] && delete d[wo];
            continue
        }
        if (f) {
            if (f[0] === d)
                continue;
            o.set(f[0], !0)
        }
        const h = d[wo] || ((u = t[l - 1]) == null ? void 0 : u.id) || null;
        if (h != null)
            if (delete d[wo],
            h === "^")
                a++,
                s === 0 ? (i.unshift(d),
                r.set(d.id, [d, s - a])) : (i.splice(s + 1, 0, d),
                r.set(d.id, [d, s + 1 - a]),
                s++);
            else {
                let m = r.has(h) ? r.get(h)[1] : null;
                m != null && (m += a),
                m != null && m >= s ? (i.splice(m + 1, 0, d),
                a++,
                r.set(d.id, [d, m + 1 - a]),
                s = m + 1) : m != null ? (i.splice(s + 1, 0, d),
                a++,
                r.set(d.id, [d, s + 1 - a]),
                s++) : (i.push(d),
                r.set(d.id, [d, i.length - 1 - a]))
            }
        else
            f ? (i[f[1]] = d,
            r.set(d.id, [d, f[1]])) : (i.push(d),
            r.set(d.id, [d, i.length - 1 - a]))
    }
    return i.filter(d=>!o.has(d))
}
;
let x1;
try {
    x1 = JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')
} catch {
    console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),
    x1 = {}
}
let fm = null
  , Sc = null
  , Cc = null
  , s5 = !1;
const FK = async()=>{
    const e = (await ne(()=>import("./index.esm-9c190d91.js"), ["assets/index.esm-9c190d91.js", "assets/index.esm-075b41d7.js"])).default;
    if (!s5) {
        try {
            e.initializeApp(x1)
        } catch (t) {
            if (t.code === "app/duplicate-app")
                console.warn(t.name, t.code);
            else
                throw t
        }
        s5 = !0
    }
    return e
}
  , b9 = async()=>(fm || (fm = FK()),
fm)
  , _9 = async()=>{
    const e = await b9();
    return Sc || (Sc = ne(()=>import("./index.esm-c0fde481.js"), ["assets/index.esm-c0fde481.js", "assets/index.esm-075b41d7.js"])),
    Sc !== !0 && (await Sc,
    Sc = !0),
    e
}
  , x9 = async()=>{
    const e = await b9();
    return Cc || (Cc = ne(()=>import("./index.esm-af0aadf3.js"), ["assets/index.esm-af0aadf3.js", "assets/index.esm-075b41d7.js"])),
    Cc !== !0 && (await Cc,
    Cc = !0),
    e
}
  , $K = async(e,t)=>{
    const n = JSON.stringify(t)
      , r = new TextEncoder().encode(n)
      , {encryptedBuffer: i, iv: o} = await I0(e, r);
    return {
        ciphertext: i,
        iv: o
    }
}
  , I9 = async(e,t)=>{
    const n = e.ciphertext.toUint8Array()
      , r = e.iv.toUint8Array()
      , i = await rd(r, n, t)
      , o = new TextDecoder("utf-8").decode(new Uint8Array(i));
    return JSON.parse(o)
}
  , _s = class _s {
}
;
M(_s, "cache", new WeakMap),
M(_s, "get", t=>_s.cache.get(t)),
M(_s, "set", (t,n)=>{
    _s.cache.set(t, po(n))
}
);
let ud = _s;
const S9 = (e,t)=>{
    if (e.socket && e.roomId && e.roomKey) {
        const n = po(t);
        return ud.get(e.socket) === n
    }
    return !0
}
  , z3 = async({prefix: e, files: t})=>{
    const n = await x9()
      , r = new Map
      , i = new Map;
    return await Promise.all(t.map(async({id: o, buffer: s})=>{
        try {
            await n.storage().ref(`${e}/${o}`).put(new Blob([s],{
                type: ve.binary
            }), {
                cacheControl: `public, max-age=${RK}`
            }),
            i.set(o, !0)
        } catch {
            r.set(o, !0)
        }
    }
    )),
    {
        savedFiles: i,
        erroredFiles: r
    }
}
  , a5 = async(e,t,n)=>{
    const r = po(t)
      , {ciphertext: i, iv: o} = await $K(n, t);
    return {
        sceneVersion: r,
        ciphertext: e.firestore.Blob.fromUint8Array(new Uint8Array(i)),
        iv: e.firestore.Blob.fromUint8Array(o)
    }
}
  , BK = async(e,t,n)=>{
    const {roomId: r, roomKey: i, socket: o} = e;
    if (!r || !i || !o || S9(e, t))
        return !1;
    const s = await _9()
      , a = s.firestore()
      , l = a.collection("scenes").doc(r)
      , c = await a.runTransaction(async u=>{
        const d = await u.get(l);
        if (!d.exists) {
            const E = await a5(s, t, i);
            return u.set(l, E),
            {
                elements: t,
                reconciledElements: null
            }
        }
        const f = d.data()
          , h = Fs(await I9(f, i))
          , m = Fs(B3(t, h, n))
          , g = await a5(s, m, i);
        return u.update(l, g),
        {
            elements: t,
            reconciledElements: m
        }
    }
    );
    return ud.set(o, c.elements),
    {
        reconciledElements: c.reconciledElements
    }
}
  , zK = async(e,t,n)=>{
    const s = await (await _9()).firestore().collection("scenes").doc(e).get();
    if (!s.exists)
        return null;
    const a = s.data()
      , l = Fs(await I9(a, t));
    return n && ud.set(n, l),
    kd(l, null)
}
  , C9 = async(e,t,n)=>{
    const r = []
      , i = new Map;
    return await Promise.all([...new Set(n)].map(async o=>{
        try {
            const s = `https://firebasestorage.googleapis.com/v0/b/${x1.storageBucket}/o/${encodeURIComponent(e.replace(/^\//, ""))}%2F ${o}`
              , a = await fetch(`${s}?alt=media`);
            if (a.status < 400) {
                const l = await a.arrayBuffer()
                  , {data: c, metadata: u} = await LC(new Uint8Array(l), {
                    decryptionKey: t
                })
                  , d = new TextDecoder().decode(c);
                r.push({
                    mimeType: u.mimeType || ve.binary,
                    id: o,
                    dataURL: d,
                    created: (u == null ? void 0 : u.created) || Date.now(),
                    lastRetrieved: (u == null ? void 0 : u.created) || Date.now()
                })
            } else
                i.set(o, !0)
        } catch (s) {
            i.set(o, !0),
            console.error(s)
        }
    }
    )),
    {
        loadedFiles: r,
        erroredFiles: i
    }
}
  , k9 = e=>e.isDeleted ? e.updated > Date.now() - PK : !ta(e)
  , Fs = e=>e.filter(t=>k9(t))
  , HK = "https://json.excalidraw.com/api/v2/"
  , UK = "https://json.excalidraw.com/api/v2/post/"
  , VK = async()=>{
    const e = new Uint8Array(OK);
    return window.crypto.getRandomValues(e),
    kx(e)
}
  , WK = async()=>{
    try {
        return await (await fetch("https://portal.excalidraw.com/collab-server")).json()
    } catch (e) {
        throw console.error(e),
        new Error(_("errors.cannotResolveCollabServer"))
    }
}
  , T9 = /^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/
  , l5 = e=>{
    const t = new URL(e).hash;
    return T9.test(t)
}
  , GK = e=>{
    const n = new URL(e).hash.match(T9);
    return n && n[2].length !== 22 ? (window.alert(_("alerts.invalidEncryptionKey")),
    null) : n ? {
        roomId: n[1],
        roomKey: n[2]
    } : null
}
  , jK = async()=>{
    const e = await VK()
      , t = await n3();
    if (!t)
        throw new Error("Couldn't generate room key");
    return {
        roomId: e,
        roomKey: t
    }
}
  , YK = e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`
  , ZK = async({buffer: e, decryptionKey: t})=>{
    let n;
    try {
        const o = e.slice(0, uh)
          , s = e.slice(uh, e.byteLength);
        n = await rd(new Uint8Array(o), s, t)
    } catch {
        const s = new Uint8Array(uh);
        n = await rd(s, e, t)
    }
    const r = new window.TextDecoder("utf-8").decode(new Uint8Array(n))
      , i = JSON.parse(r);
    return {
        elements: i.elements || null,
        appState: i.appState || null
    }
}
  , KK = async(e,t)=>{
    try {
        const n = await fetch(`${HK}${e}`);
        if (!n.ok)
            return window.alert(_("alerts.importBackendFailed")),
            {};
        const r = await n.arrayBuffer();
        try {
            const {data: i} = await LC(new Uint8Array(r), {
                decryptionKey: t
            })
              , o = JSON.parse(new TextDecoder().decode(i));
            return {
                elements: o.elements || null,
                appState: o.appState || null
            }
        } catch (i) {
            return console.warn("error when decoding shareLink data using the new format:", i),
            ZK({
                buffer: r,
                decryptionKey: t
            })
        }
    } catch (n) {
        return window.alert(_("alerts.importBackendFailed")),
        console.error(n),
        {}
    }
}
  , c5 = async(e,t,n)=>{
    let r;
    return e != null && t != null ? r = qs(await KK(e, t), n == null ? void 0 : n.appState, n == null ? void 0 : n.elements, {
        repairBindings: !0,
        refreshDimensions: !1
    }) : r = qs(n || null, null, null, {
        repairBindings: !0
    }),
    {
        elements: r.elements,
        appState: r.appState,
        files: r.files,
        commitToHistory: !1
    }
}
  , XK = async(e,t,n)=>{
    const r = await n3("string")
      , i = await AC(new TextEncoder().encode(Hl(e, t, n, "database")), {
        encryptionKey: r
    });
    try {
        const o = new Map;
        for (const c of e)
            At(c) && n[c.fileId] && o.set(c.fileId, n[c.fileId]);
        const s = await $3({
            files: o,
            encryptionKey: r,
            maxBytes: F3
        })
          , l = await (await fetch(UK, {
            method: "POST",
            body: i.buffer
        })).json();
        if (l.id) {
            const c = new URL(window.location.href);
            c.hash = `json=${l.id},${r}`;
            const u = c.toString();
            return await z3({
                prefix: `/files/shareLinks/${l.id}`,
                files: s
            }),
            {
                url: u,
                errorMessage: null
            }
        } else if (l.error_class === "RequestTooLargeError")
            return {
                url: null,
                errorMessage: _("alerts.couldNotCreateShareableLinkTooBig")
            };
        return {
            url: null,
            errorMessage: _("alerts.couldNotCreateShareableLink")
        }
    } catch (o) {
        return console.error(o),
        {
            url: null,
            errorMessage: _("alerts.couldNotCreateShareableLink")
        }
    }
}
  , qK = e=>{
    try {
        localStorage.setItem(yt.LOCAL_STORAGE_COLLAB, JSON.stringify({
            username: e
        }))
    } catch (t) {
        console.error(t)
    }
}
  , M9 = ()=>{
    try {
        const e = localStorage.getItem(yt.LOCAL_STORAGE_COLLAB);
        if (e)
            return JSON.parse(e).username
    } catch (e) {
        console.error(e)
    }
    return null
}
  , T2 = ()=>{
    let e = null
      , t = null;
    try {
        e = localStorage.getItem(yt.LOCAL_STORAGE_ELEMENTS),
        t = localStorage.getItem(yt.LOCAL_STORAGE_APP_STATE)
    } catch (i) {
        console.error(i)
    }
    let n = [];
    if (e)
        try {
            n = MS(JSON.parse(e))
        } catch (i) {
            console.error(i)
        }
    let r = null;
    if (t)
        try {
            r = {
                ...di(),
                ...Lx(JSON.parse(t))
            }
        } catch (i) {
            console.error(i)
        }
    return {
        elements: n,
        appState: r
    }
}
  , A9 = ()=>{
    try {
        const e = localStorage.getItem(yt.LOCAL_STORAGE_ELEMENTS);
        return (e == null ? void 0 : e.length) || 0
    } catch (e) {
        return console.error(e),
        0
    }
}
  , QK = ()=>{
    try {
        const e = localStorage.getItem(yt.LOCAL_STORAGE_APP_STATE)
          , t = localStorage.getItem(yt.LOCAL_STORAGE_COLLAB)
          , n = localStorage.getItem(yt.LOCAL_STORAGE_LIBRARY)
          , r = (e == null ? void 0 : e.length) || 0
          , i = (t == null ? void 0 : t.length) || 0
          , o = (n == null ? void 0 : n.length) || 0;
        return r + i + o + A9()
    } catch (e) {
        return console.error(e),
        0
    }
}
  , u5 = ()=>{
    try {
        return JSON.parse(localStorage.getItem(yt.LOCAL_STORAGE_LIBRARY)) || []
    } catch (e) {
        return console.error(e),
        []
    }
}
;
class JK {
    constructor(t) {
        M(this, "collab");
        M(this, "socket", null);
        M(this, "socketInitialized", !1);
        M(this, "roomId", null);
        M(this, "roomKey", null);
        M(this, "broadcastedElementVersions", new Map);
        M(this, "queueFileUpload", Os(async()=>{
            try {
                await this.collab.fileManager.saveFiles({
                    elements: this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),
                    files: this.collab.excalidrawAPI.getFiles()
                })
            } catch (t) {
                t.name !== "AbortError" && this.collab.excalidrawAPI.updateScene({
                    appState: {
                        errorMessage: t.message
                    }
                })
            }
            this.collab.excalidrawAPI.updateScene({
                elements: this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>this.collab.fileManager.shouldUpdateImageElementStatus(t) ? fe(t, {
                    status: "saved"
                }) : t)
            })
        }
        , TK));
        M(this, "broadcastScene", async(t,n,r)=>{
            if (t === Ns.INIT && !r)
                throw new Error("syncAll must be true when sending SCENE.INIT");
            const i = n.reduce((s,a,l,c)=>{
                var u;
                return (r || !this.broadcastedElementVersions.has(a.id) || a.version > this.broadcastedElementVersions.get(a.id)) && k9(a) && s.push({
                    ...a,
                    [wo]: l === 0 ? "^" : (u = c[l - 1]) == null ? void 0 : u.id
                }),
                s
            }
            , [])
              , o = {
                type: t,
                payload: {
                    elements: i
                }
            };
            for (const s of i)
                this.broadcastedElementVersions.set(s.id, s.version);
            this.queueFileUpload(),
            await this._broadcastSocketData(o)
        }
        );
        M(this, "broadcastIdleChange", t=>{
            var n;
            if ((n = this.socket) != null && n.id) {
                const r = {
                    type: "IDLE_STATUS",
                    payload: {
                        socketId: this.socket.id,
                        userState: t,
                        username: this.collab.state.username
                    }
                };
                return this._broadcastSocketData(r, !0)
            }
        }
        );
        M(this, "broadcastMouseLocation", t=>{
            var n;
            if ((n = this.socket) != null && n.id) {
                const r = {
                    type: "MOUSE_LOCATION",
                    payload: {
                        socketId: this.socket.id,
                        pointer: t.pointer,
                        button: t.button || "up",
                        selectedElementIds: this.collab.excalidrawAPI.getAppState().selectedElementIds,
                        username: this.collab.state.username
                    }
                };
                return this._broadcastSocketData(r, !0)
            }
        }
        );
        this.collab = t
    }
    open(t, n, r) {
        return this.socket = t,
        this.roomId = n,
        this.roomKey = r,
        this.socket.on("init-room", ()=>{
            this.socket && (this.socket.emit("join-room", this.roomId),
            nt("share", "room joined"))
        }
        ),
        this.socket.on("new-user", async i=>{
            this.broadcastScene(Ns.INIT, this.collab.getSceneElementsIncludingDeleted(), !0)
        }
        ),
        this.socket.on("room-user-change", i=>{
            this.collab.setCollaborators(i)
        }
        ),
        t
    }
    close() {
        this.socket && (this.queueFileUpload.flush(),
        this.socket.close(),
        this.socket = null,
        this.roomId = null,
        this.roomKey = null,
        this.socketInitialized = !1,
        this.broadcastedElementVersions = new Map)
    }
    isOpen() {
        return !!(this.socketInitialized && this.socket && this.roomId && this.roomKey)
    }
    async _broadcastSocketData(t, n=!1) {
        var r;
        if (this.isOpen()) {
            const i = JSON.stringify(t)
              , o = new TextEncoder().encode(i)
              , {encryptedBuffer: s, iv: a} = await I0(this.roomKey, o);
            (r = this.socket) == null || r.emit(n ? o5.SERVER_VOLATILE : o5.SERVER, this.roomId, s, a)
        }
    }
}
const M2 = x.forwardRef(({value: e, onChange: t, label: n, fullWidth: r, placeholder: i, readonly: o, selectOnRender: s, onKeyDown: a},l)=>{
    const c = x.useRef(null);
    return x.useImperativeHandle(l, ()=>c.current),
    x.useLayoutEffect(()=>{
        var u;
        s && ((u = c.current) == null || u.select())
    }
    , [s]),
    k("div", {
        className: le("ExcTextField", {
            "ExcTextField--fullWidth": r
        }),
        onClick: ()=>{
            var u;
            (u = c.current) == null || u.focus()
        }
        ,
        children: [p("div", {
            className: "ExcTextField__label",
            children: n
        }), p("div", {
            className: le("ExcTextField__input", {
                "ExcTextField__input--readonly": o
            }),
            children: p("input", {
                readOnly: o,
                type: "text",
                value: e,
                placeholder: i,
                ref: c,
                onChange: u=>t == null ? void 0 : t(u.target.value),
                onKeyDown: a
            })
        })]
    })
}
)
  , eX = e=>x.createElement("svg", {
    width: 178,
    height: 162,
    viewBox: "0 0 178 162",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    ...e
}, x.createElement("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M40.3329 54.3823L38.5547 94.3134L39.7731 111.754L40.1282 118.907L41.0832 123.59L44.3502 131.942L48.9438 137.693L52.5472 143.333L58.5544 147.755L62.5364 150.239L72.3634 154.486L83.15 156.361L91.1212 158.708L101.174 157.525L110.808 156.719L115.983 154.049L124.511 151.377L129.276 148.71L133.701 143.947L139.666 135.877L142.001 128.136L145.746 118.192L145.188 111.065L145.489 94.3675L145.873 75.2546L143.227 59.7779L142.022 47.4695L138.595 46.8345L102.952 45.4703L56.9173 46.7498L46.0719 49.1207L41.9323 50.6825L39.5684 53.4297",
    fill: "#E3E2FE"
}), x.createElement("path", {
    d: "M41.0014 54.2859C41.0861 64.8796 38.3765 102.581 40.9779 117.876C43.5793 133.17 48.2646 139.346 56.6121 146.047C64.9596 152.746 79.1214 157.662 91.0653 158.078C103.009 158.492 119.347 155.242 128.277 148.543C137.206 141.842 142.112 133.527 144.641 117.874C147.169 102.221 146.061 66.4132 143.446 54.6222C140.83 42.8289 143.97 48.2857 128.948 47.1238C113.925 45.9619 67.9608 46.477 53.3051 47.6483C38.6493 48.8197 43.2053 53.0675 41.0155 54.1518M40.5263 53.9801C40.5404 64.6138 37.9249 103.418 40.5921 118.587C43.257 133.755 48.147 138.325 56.5251 144.991C64.9008 151.655 78.7263 157.935 90.8536 158.577C102.981 159.221 120.212 155.413 129.289 148.844C138.368 142.277 142.872 134.995 145.321 119.168C147.767 103.343 146.805 65.8698 143.977 53.8837C141.148 41.8975 143.615 48.4292 128.348 47.2508C113.081 46.0724 67.14 45.6726 52.3737 46.8157C37.6074 47.9564 41.7776 53.091 39.7524 54.1024",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M64.7935 45.726L66.36 36.6964L65.5979 34.4501L67.3384 30.7668L70.4197 26.5048L74.8157 21.0598L81.9095 16.9131L89.9419 14.4951L95.6127 12.8534L97.7555 13.2133L103.819 15.269L106.552 18.5807L109.967 22.3793L114.45 27.2387L114.904 34.3937L117.153 38.9214L116.031 44.5005L116.765 45.5448L118.863 47.3559L126.164 47.6782L127.744 46.7797L128.76 44.7052L123.882 25.8227L120.641 20.4835L116.351 15.8758L112.809 11.0729L108.617 7.36601L101.352 5.43025L93.263 3.31104L84.2451 5.1433L77.7299 7.86229L76.0011 8.0975L62.1168 19.8532L59.5366 24.5597L55.7733 32.3215L55.0371 39.5282L56.0626 44.8933L56.5636 47.1725L59.6401 46.8644L66.1648 46.0388",
    fill: "#E3E2FE"
}), x.createElement("path", {
    d: "M65.0037 46.0106C65.1166 43.8231 64.9237 36.8492 66.1421 33.2412C67.3605 29.6307 69.0799 27.2857 72.314 24.3527C75.5481 21.422 81.273 17.6093 85.5444 15.6453C89.8157 13.6813 94.3317 12.1148 97.9421 12.5664C101.555 13.0157 104.544 15.857 107.219 18.3478C109.893 20.8387 112.356 24.0869 113.986 27.5115C115.618 30.9338 116.389 35.8684 117.006 38.8861C117.622 41.9038 115.992 44.2888 117.69 45.6178C119.388 46.949 125.617 48.1721 127.195 46.8667C128.773 45.5613 127.717 41.1888 127.157 37.7877C126.597 34.3866 125.494 30.1247 123.838 26.4601C122.183 22.7956 119.746 18.9029 117.222 15.7982C114.698 12.6934 112.791 9.9086 108.696 7.83642C104.601 5.76189 97.8081 3.42863 92.6547 3.35337C87.5013 3.2781 81.5529 5.74308 77.7708 7.38717C73.991 9.03127 72.8879 10.6166 69.9666 13.218C67.043 15.8217 62.4306 19.6768 60.2384 23.0026C58.0486 26.3284 57.4818 29.252 56.8185 33.1753C56.1529 37.0962 54.6499 44.39 56.2517 46.5327C57.8511 48.6731 64.7756 45.98 66.4267 46.0247M65.9704 45.5096C65.9845 43.348 64.2652 37.5525 65.5423 33.8456C66.8172 30.1364 70.2959 26.4789 73.6264 23.259C76.9546 20.039 81.3177 16.3015 85.5208 14.5281C89.7216 12.7523 95.1079 11.7903 98.8383 12.6111C102.569 13.432 105.283 16.8072 107.903 19.4486C110.526 22.09 113.146 25.3029 114.567 28.4664C115.987 31.6276 116.03 35.4051 116.425 38.4204C116.82 41.4334 115.124 45.1426 116.937 46.5515C118.751 47.9604 125.539 48.2968 127.31 46.8761C129.081 45.4578 127.978 41.4428 127.562 38.0347C127.145 34.6265 126.501 30.1646 124.81 26.4296C123.116 22.6921 120.195 18.7594 117.413 15.6194C114.63 12.4818 112.247 9.39349 108.117 7.58945C103.987 5.78541 97.5776 5.02099 92.6335 4.79519C87.6895 4.56939 82.3503 4.78813 78.4505 6.23466C74.5484 7.68118 72.0882 10.6542 69.228 13.4696C66.3679 16.2851 63.4725 19.7873 61.2898 23.1319C59.1071 26.4789 56.9761 29.4896 56.1293 33.5469C55.285 37.6043 54.577 45.2132 56.2117 47.4759C57.8487 49.7409 64.2675 47.3418 65.9445 47.1301",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M140.37 54.8958C137.884 58.1322 127.704 71.2286 125.185 74.5427M139.697 54.209C137.098 57.5466 127.005 71.7884 124.51 75.3565",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M141.663 63.1765C139.661 66.0413 131.311 77.1501 129.077 79.9726M141.065 62.5908C139.021 65.2792 130.631 76.1364 128.717 78.8625",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M141.888 72.9917C139.475 75.8589 130.268 86.8478 127.966 89.7455M141.02 72.726C138.503 75.6496 129.775 87.2476 127.58 90.3242",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M141.948 82.215C139.815 85.1057 130.308 96.8214 127.961 99.7709M141.459 81.7375C139.298 84.4119 129.816 95.9888 127.479 98.8606",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M141.357 91.7838C138.885 95.2484 128.808 108.535 126.428 111.76M142.474 91.4757C139.917 94.7921 128.38 107.493 125.781 110.883",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M142.568 101.479C140.028 104.403 129.867 115.528 127.195 118.356M141.811 101.018C139.212 104.055 129.477 115.975 126.828 118.97",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M141.023 112.172C138.591 114.775 128.028 125.905 125.422 128.664M140.51 113.465C138.008 116.147 127.36 125.233 124.742 127.582",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M139.004 123.69C136.501 126.275 125.952 137.248 123.287 140.108M138.343 124.817C135.805 127.454 125.487 138.261 122.848 140.75",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M132.192 139.862C129.854 141.624 120.87 148.168 118.574 150.012M131.39 139.496C128.97 141.333 120.524 148.89 118.322 150.621",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    fillRule: "evenodd",
    clipRule: "evenodd",
    d: "M82.6351 92.3124L78.2767 89.0148L78.6718 88.8784L75.6282 79.6865L74.4922 76.0525L75.0379 74.1074L78.6248 69.5444L83.6182 65.186L86.6924 64.0711L93.7768 63.9864L99.9181 63.9276L103.905 64.4215L106.038 66.068L109.333 67.6392L110.251 69.4479L112.438 73.1877L112.702 81.928L111.674 82.93L110.907 85.5573L107.828 89.2336L101.273 92.9193L102.785 120.401L99.5488 125.521L98.0059 127.838L96.1313 129.414L93.17 130.237L92.2198 130.033L90.1358 129.233L88.8328 126.594L87.8378 95.2549L88.9386 93.3215L86.0409 91.294L80.9533 91.1552",
    fill: "white"
}), x.createElement("path", {
    d: "M82.8214 92.0607C82.0664 91.4327 79.291 90.7201 77.8539 88.2033C76.4167 85.6866 73.5284 80.4438 74.1964 76.9581C74.862 73.4723 78.6959 69.6384 81.8524 67.2887C85.0089 64.939 88.9227 63.1138 93.1353 62.8574C97.3478 62.6034 103.957 63.9888 107.132 65.7575C110.31 67.5263 111.416 70.5651 112.196 73.4747C112.977 76.3842 112.606 80.6626 111.82 83.2122C111.035 85.7642 109.078 87.1661 107.481 88.7749C105.883 90.3837 103.106 91.2751 102.233 92.8651C101.363 94.4551 102.327 95.3254 102.25 98.3125C102.172 101.3 101.76 107.227 101.767 110.788C101.772 114.349 102.487 116.981 102.285 119.676C102.085 122.374 101.52 125.126 100.556 126.965C99.5917 128.805 98.077 130.256 96.5011 130.715C94.9275 131.171 92.4485 130.36 91.1101 129.713C89.7742 129.066 89.0144 128.341 88.4805 126.836C87.9489 125.331 87.9678 123.964 87.9137 120.681C87.8596 117.397 88.1159 111.599 88.1583 107.14C88.203 102.68 89.2779 96.445 88.1724 93.9236C87.0693 91.4022 82.7791 92.4347 81.5325 92.0137M82.0194 91.6068C81.222 90.7624 78.4536 89.7886 77.3623 87.1567C76.2733 84.5247 74.6621 79.3125 75.4783 75.815C76.2921 72.3151 79.1428 68.3166 82.2522 66.1597C85.3617 64.0029 90.1693 63.062 94.1302 62.8739C98.0911 62.6857 102.925 63.0832 106.02 65.0331C109.118 66.9853 111.834 71.5836 112.705 74.5801C113.572 77.5743 111.949 80.7731 111.234 83.0076C110.519 85.2444 109.835 86.3711 108.417 87.9916C107.001 89.6146 103.738 90.9623 102.732 92.7358C101.725 94.5092 102.351 95.6382 102.377 98.6301C102.405 101.62 102.866 106.949 102.894 110.682C102.922 114.417 102.955 118.291 102.544 121.038C102.13 123.783 101.408 125.54 100.42 127.161C99.4318 128.781 98.1005 130.233 96.6163 130.759C95.1322 131.286 92.9353 130.893 91.51 130.322C90.0846 129.753 88.7769 128.889 88.0618 127.335C87.3468 125.78 87.0128 124.317 87.2198 120.998C87.4268 117.68 89.0874 112.046 89.299 107.422C89.5107 102.798 89.8494 95.9322 88.4946 93.2509C87.1398 90.5695 82.4804 91.4845 81.1679 91.3316",
    stroke: "#6965DB",
    strokeWidth: 2,
    strokeLinecap: "round"
}), x.createElement("path", {
    d: "M28.1943 139.31C26.7936 139.432 25.332 140.402 23.8703 140.523C23.1395 140.766 22.5914 140.16 21.9824 139.735C21.5561 139.553 21.008 138.461 20.8253 138.219C20.5817 136.884 19.9118 134.276 20.0336 133.002C19.7291 131.364 21.5561 129.787 23.0786 129.727C23.2613 129.727 23.8094 129.787 23.8703 129.787C25.7583 130.151 27.5853 131.546 29.5341 131.728C29.595 131.728 29.6559 131.728 29.6559 131.668C30.4476 130.333 30.204 126.937 30.813 125.542C30.813 125.36 31.1784 123.54 31.1784 123.237C31.6048 122.327 32.1529 121.781 33.1273 122.084C33.7972 122.266 34.6498 122.388 34.6498 123.237V128.635C34.8325 129.242 36.1114 128.999 36.5986 128.999C38.7911 128.028 40.8617 127.422 43.3586 127.058C45.6729 127.179 46.7082 129.242 46.5864 131.304C46.6473 132.396 45.4293 133.245 44.6985 133.973C44.4549 134.094 43.4804 134.519 43.115 134.397C42.2624 133.791 41.1662 134.033 40.1309 134.094C40.1309 134.155 40.0091 134.337 40.07 134.397C41.288 135.853 43.5413 136.096 45.0639 137.066C46.1601 138.34 47.4999 138.643 47.1345 140.341C47.0736 141.191 47.1345 142.1 46.221 142.404C45.9774 142.586 44.5767 142.828 44.2722 142.828C43.9677 142.768 43.3586 142.343 43.115 142.04C40.9835 141.13 38.6693 140.402 36.2332 140.159V145.133C35.9896 146.468 35.6851 147.923 34.6498 148.955C34.2844 149.015 33.1273 149.015 32.7619 148.955C32.4574 148.773 31.4221 147.741 31.1784 147.438C30.5694 145.133 30.4476 142.404 29.6559 140.159C29.1687 139.553 28.986 139.25 28.1943 139.31Z",
    fill: "#6965DB"
}), x.createElement("path", {
    d: "M59.5964 139.31C58.1956 139.432 56.734 140.402 55.2724 140.523C54.5416 140.766 53.9935 140.16 53.3845 139.735C52.9582 139.553 52.41 138.461 52.2273 138.219C51.9837 136.884 51.3138 134.276 51.4356 133.002C51.1311 131.364 52.9582 129.787 54.4807 129.727C54.6634 129.727 55.2115 129.787 55.2724 129.787C57.1603 130.151 58.9874 131.546 60.9362 131.728C60.9971 131.728 61.058 131.728 61.058 131.668C61.8497 130.333 61.6061 126.937 62.2151 125.542C62.2151 125.36 62.5805 123.54 62.5805 123.237C63.0068 122.327 63.5549 121.781 64.5293 122.084C65.1992 122.266 66.0519 122.388 66.0519 123.237V128.635C66.2346 129.242 67.5135 128.999 68.0007 128.999C70.1931 128.028 72.2638 127.422 74.7607 127.058C77.0749 127.179 78.1103 129.242 77.9885 131.304C78.0494 132.396 76.8313 133.245 76.1005 133.973C75.8569 134.094 74.8825 134.519 74.5171 134.397C73.6645 133.791 72.5683 134.033 71.5329 134.094C71.5329 134.155 71.4112 134.337 71.4721 134.397C72.6901 135.853 74.9434 136.096 76.4659 137.066C77.5621 138.34 78.902 138.643 78.5366 140.341C78.4757 141.191 78.5366 142.1 77.623 142.404C77.3794 142.586 75.9787 142.828 75.6742 142.828C75.3697 142.768 74.7607 142.343 74.5171 142.04C72.3856 141.13 70.0713 140.402 67.6353 140.159V145.133C67.3917 146.468 67.0872 147.923 66.0519 148.955C65.6865 149.015 64.5293 149.015 64.1639 148.955C63.8594 148.773 62.8241 147.741 62.5805 147.438C61.9715 145.133 61.8497 142.404 61.058 140.159C60.5708 139.553 60.3881 139.25 59.5964 139.31Z",
    fill: "#6965DB"
}), x.createElement("path", {
    d: "M90.9984 139.31C89.5977 139.432 88.1361 140.402 86.6745 140.523C85.9436 140.766 85.3955 140.16 84.7865 139.735C84.3602 139.553 83.8121 138.461 83.6294 138.219C83.3858 136.884 82.7159 134.276 82.8377 133.002C82.5332 131.364 84.3602 129.787 85.8827 129.727C86.0654 129.727 86.6136 129.787 86.6745 129.787C88.5624 130.151 90.3894 131.546 92.3382 131.728C92.3991 131.728 92.46 131.728 92.46 131.668C93.2518 130.333 93.0082 126.937 93.6172 125.542C93.6172 125.36 93.9826 123.54 93.9826 123.237C94.4089 122.327 94.957 121.781 95.9314 122.084C96.6013 122.266 97.4539 122.388 97.4539 123.237V128.635C97.6366 129.242 98.9155 128.999 99.4028 128.999C101.595 128.028 103.666 127.422 106.163 127.058C108.477 127.179 109.512 129.242 109.391 131.304C109.451 132.396 108.233 133.245 107.503 133.973C107.259 134.094 106.285 134.519 105.919 134.397C105.067 133.791 103.97 134.033 102.935 134.094C102.935 134.155 102.813 134.337 102.874 134.397C104.092 135.853 106.345 136.096 107.868 137.066C108.964 138.34 110.304 138.643 109.939 140.341C109.878 141.191 109.939 142.1 109.025 142.404C108.782 142.586 107.381 142.828 107.076 142.828C106.772 142.768 106.163 142.343 105.919 142.04C103.788 141.13 101.473 140.402 99.0373 140.159V145.133C98.7937 146.468 98.4892 147.923 97.4539 148.955C97.0885 149.015 95.9314 149.015 95.566 148.955C95.2615 148.773 94.2262 147.741 93.9826 147.438C93.3736 145.133 93.2518 142.404 92.46 140.159C91.9728 139.553 91.7901 139.25 90.9984 139.31Z",
    fill: "#6965DB"
}));
const tX = ()=>{
    const e = window.navigator
      , t = /Apple/.test(e.vendor)
      , n = e.appVersion.indexOf("Win") !== -1;
    return t ? EO : n ? wO : yO
}
  , nX = ({activeRoomLink: e, onRoomCreate: t, onRoomDestroy: n, setErrorMessage: r, username: i, onUsernameChange: o, handleClose: s})=>{
    const {t: a} = Ot()
      , [l,c] = x.useState(!1)
      , u = x.useRef(0)
      , d = x.useRef(null)
      , f = "share"in navigator
      , h = async()=>{
        var g;
        try {
            await Ul(e),
            c(!0),
            u.current && window.clearTimeout(u.current),
            u.current = window.setTimeout(()=>{
                c(!1)
            }
            , 3e3)
        } catch (E) {
            r(E.message)
        }
        (g = d.current) == null || g.select()
    }
      , m = async()=>{
        try {
            await navigator.share({
                title: a("roomDialog.shareTitle"),
                text: a("roomDialog.shareTitle"),
                url: e
            })
        } catch {}
    }
    ;
    return e ? k(re, {
        children: [p("h3", {
            className: "RoomDialog__active__header",
            children: a("labels.liveCollaboration")
        }), p(M2, {
            value: i,
            placeholder: "Your name",
            label: "Your name",
            onChange: o,
            onKeyDown: g=>g.key === R.ENTER && s()
        }), k("div", {
            className: "RoomDialog__active__linkRow",
            children: [p(M2, {
                ref: d,
                label: "Link",
                readonly: !0,
                fullWidth: !0,
                value: e
            }), f && p(oi, {
                size: "large",
                variant: "icon",
                label: "Share",
                startIcon: tX(),
                className: "RoomDialog__active__share",
                onClick: m
            }), k(by, {
                open: l,
                children: [p(_y, {
                    asChild: !0,
                    children: p(oi, {
                        size: "large",
                        label: "Copy link",
                        startIcon: oy,
                        onClick: h
                    })
                }), k(xy, {
                    onOpenAutoFocus: g=>g.preventDefault(),
                    onCloseAutoFocus: g=>g.preventDefault(),
                    className: "RoomDialog__popover",
                    side: "top",
                    align: "end",
                    sideOffset: 5.5,
                    children: [h7, " copied"]
                })]
            })]
        }), k("div", {
            className: "RoomDialog__active__description",
            children: [k("p", {
                children: [k("span", {
                    role: "img",
                    "aria-hidden": "true",
                    className: "RoomDialog__active__description__emoji",
                    children: ["", " "]
                }), a("roomDialog.desc_privacy")]
            }), p("p", {
                children: a("roomDialog.desc_exitSession")
            })]
        }), p("div", {
            className: "RoomDialog__active__actions",
            children: p(oi, {
                size: "large",
                variant: "outlined",
                color: "danger",
                label: a("roomDialog.button_stopSession"),
                startIcon: fD,
                onClick: ()=>{
                    nt("share", "room closed"),
                    n()
                }
            })
        })]
    }) : k(re, {
        children: [p("div", {
            className: "RoomDialog__inactive__illustration",
            children: p(eX, {})
        }), p("div", {
            className: "RoomDialog__inactive__header",
            children: a("labels.liveCollaboration")
        }), k("div", {
            className: "RoomDialog__inactive__description",
            children: [p("strong", {
                children: a("roomDialog.desc_intro")
            }), a("roomDialog.desc_privacy")]
        }), p("div", {
            className: "RoomDialog__inactive__start_session",
            children: p(oi, {
                size: "large",
                label: a("roomDialog.button_startSession"),
                startIcon: dD,
                onClick: ()=>{
                    nt("share", "room creation", `ui (${yd()})`),
                    t()
                }
            })
        })]
    })
}
  , rX = e=>p(Ur, {
    size: "small",
    onCloseRequest: e.handleClose,
    title: !1,
    children: p("div", {
        className: "RoomDialog",
        children: p(nX, {
            ...e
        })
    })
})
  , I1 = {
    [yt.VERSION_DATA_STATE]: -1,
    [yt.VERSION_FILES]: -1
}
  , d5 = e=>JSON.parse(localStorage.getItem(e) || "-1") > I1[e]
  , L9 = e=>{
    const t = Date.now();
    try {
        localStorage.setItem(e, JSON.stringify(t)),
        I1[e] = t
    } catch (n) {
        console.error("error while updating browser state verison", n)
    }
}
  , iX = ()=>{
    try {
        for (const e of Object.keys(I1))
            localStorage.setItem(e, JSON.stringify(-1)),
            I1[e] = -1
    } catch (e) {
        console.error("error while resetting browser state verison", e)
    }
}
;
function oX() {
    var e = !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent);
    if (!e || !indexedDB.databases)
        return Promise.resolve();
    var t;
    return new Promise(function(n) {
        var r = function() {
            return indexedDB.databases().finally(n)
        };
        t = setInterval(r, 100),
        r()
    }
    ).finally(function() {
        return clearInterval(t)
    })
}
function Xl(e) {
    return new Promise((t,n)=>{
        e.oncomplete = e.onsuccess = ()=>t(e.result),
        e.onabort = e.onerror = ()=>n(e.error)
    }
    )
}
function P9(e, t) {
    const n = oX().then(()=>{
        const r = indexedDB.open(e);
        return r.onupgradeneeded = ()=>r.result.createObjectStore(t),
        Xl(r)
    }
    );
    return (r,i)=>n.then(o=>i(o.transaction(t, r).objectStore(t)))
}
let hm;
function Dd() {
    return hm || (hm = P9("keyval-store", "keyval")),
    hm
}
function sX(e, t, n=Dd()) {
    return n("readwrite", r=>(r.put(t, e),
    Xl(r.transaction)))
}
function aX(e, t=Dd()) {
    return t("readwrite", n=>(e.forEach(r=>n.put(r[1], r[0])),
    Xl(n.transaction)))
}
function lX(e, t=Dd()) {
    return t("readonly", n=>Promise.all(e.map(r=>Xl(n.get(r)))))
}
function cX(e, t=Dd()) {
    return t("readwrite", n=>(n.delete(e),
    Xl(n.transaction)))
}
function uX(e, t) {
    return e("readonly", n=>(n.openCursor().onsuccess = function() {
        this.result && (t(this.result),
        this.result.continue())
    }
    ,
    Xl(n.transaction)))
}
function dX(e=Dd()) {
    const t = [];
    return uX(e, n=>t.push([n.key, n.value])).then(()=>t)
}
class fX {
    constructor() {
        M(this, "locks", new Map);
        M(this, "lock", t=>{
            this.locks.set(t, !0)
        }
        );
        M(this, "unlock", t=>(this.locks.delete(t),
        !this.isLocked()))
    }
    isLocked(t) {
        return t ? this.locks.has(t) : !!this.locks.size
    }
}
const fu = P9("files-db", "files-store");
class hX extends w9 {
    constructor() {
        super(...arguments);
        M(this, "clearObsoleteFiles", async n=>{
            await dX(fu).then(r=>{
                for (const [i,o] of r)
                    (!o.lastRetrieved || Date.now() - o.lastRetrieved > 24 * 3600 * 1e3) && !n.currentFileIds.includes(i) && cX(i, fu)
            }
            )
        }
        )
    }
}
const pX = (e,t)=>{
    try {
        localStorage.setItem(yt.LOCAL_STORAGE_ELEMENTS, JSON.stringify(MS(e))),
        localStorage.setItem(yt.LOCAL_STORAGE_APP_STATE, JSON.stringify(Lx(t))),
        L9(yt.VERSION_DATA_STATE)
    } catch (n) {
        console.error(n)
    }
}
  , Ut = class Ut {
}
;
M(Ut, "_save", yl(async(t,n,r,i)=>{
    pX(t, n),
    await Ut.fileStorage.saveFiles({
        elements: t,
        files: r
    }),
    i()
}
, CK)),
M(Ut, "save", (t,n,r,i)=>{
    Ut.isSavePaused() || Ut._save(t, n, r, i)
}
),
M(Ut, "flushSave", ()=>{
    Ut._save.flush()
}
),
M(Ut, "locker", new fX),
M(Ut, "pauseSave", t=>{
    Ut.locker.lock(t)
}
),
M(Ut, "resumeSave", t=>{
    Ut.locker.unlock(t)
}
),
M(Ut, "isSavePaused", ()=>document.hidden || Ut.locker.isLocked()),
M(Ut, "fileStorage", new hX({
    getFiles(t) {
        return lX(t, fu).then(async n=>{
            const r = []
              , i = new Map
              , o = [];
            n.forEach((s,a)=>{
                const l = t[a];
                if (s) {
                    const c = {
                        ...s,
                        lastRetrieved: Date.now()
                    };
                    o.push([l, c]),
                    r.push(c)
                } else
                    i.set(l, !0)
            }
            );
            try {
                aX(o, fu)
            } catch (s) {
                console.warn(s)
            }
            return {
                loadedFiles: r,
                erroredFiles: i
            }
        }
        )
    },
    async saveFiles({addedFiles: t}) {
        const n = new Map
          , r = new Map;
        return L9(yt.VERSION_FILES),
        await Promise.all([...t].map(async([i,o])=>{
            try {
                await sX(i, o, fu),
                n.set(i, !0)
            } catch (s) {
                console.error(s),
                r.set(i, !0)
            }
        }
        )),
        {
            savedFiles: n,
            erroredFiles: r
        }
    }
}));
let tn = Ut;
const Ma = yx()
  , R9 = un(null)
  , H3 = un(!1)
  , A2 = un(!1)
  , O9 = un(!1);
class mX extends x.PureComponent {
    constructor(n) {
        super(n);
        M(this, "portal");
        M(this, "fileManager");
        M(this, "excalidrawAPI");
        M(this, "activeIntervalId");
        M(this, "idleTimeoutId");
        M(this, "socketInitializationTimer");
        M(this, "lastBroadcastedOrReceivedSceneVersion", -1);
        M(this, "collaborators", new Map);
        M(this, "onOfflineStatusToggle", ()=>{
            Ma.set(O9, !window.navigator.onLine)
        }
        );
        M(this, "isCollaborating", ()=>Ma.get(A2));
        M(this, "setIsCollaborating", n=>{
            Ma.set(A2, n)
        }
        );
        M(this, "onUnload", ()=>{
            this.destroySocketClient({
                isUnload: !0
            })
        }
        );
        M(this, "beforeUnload", Ze(n=>{
            const r = Fs(this.getSceneElementsIncludingDeleted());
            this.isCollaborating() && (this.fileManager.shouldPreventUnload(r) || !S9(this.portal, r)) && (this.saveCollabRoomToFirebase(r),
            Cx(n))
        }
        ));
        M(this, "saveCollabRoomToFirebase", async n=>{
            try {
                const r = await BK(this.portal, n, this.excalidrawAPI.getAppState());
                this.isCollaborating() && r && r.reconciledElements && this.handleRemoteSceneUpdate(this.reconcileElements(r.reconciledElements))
            } catch (r) {
                this.setState({
                    errorMessage: /is longer than.*?bytes/.test(r.message) ? _("errors.collabSaveFailed_sizeExceeded") : _("errors.collabSaveFailed")
                }),
                console.error(r)
            }
        }
        );
        M(this, "stopCollaboration", (n=!0)=>{
            if (this.queueBroadcastAllElements.cancel(),
            this.queueSaveToFirebase.cancel(),
            this.loadImageFiles.cancel(),
            this.saveCollabRoomToFirebase(Fs(this.excalidrawAPI.getSceneElementsIncludingDeleted())),
            this.portal.socket && this.fallbackInitializationHandler && this.portal.socket.off("connect_error", this.fallbackInitializationHandler),
            !n)
                tn.fileStorage.reset(),
                this.destroySocketClient();
            else if (window.confirm(_("alerts.collabStopOverridePrompt"))) {
                iX(),
                window.history.pushState({}, Oi, window.location.origin),
                this.destroySocketClient(),
                tn.fileStorage.reset();
                const r = this.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>Ni(i) && i.status === "saved" ? fe(i, {
                    status: "pending"
                }) : i);
                this.excalidrawAPI.updateScene({
                    elements: r,
                    commitToHistory: !1
                })
            }
        }
        );
        M(this, "destroySocketClient", n=>{
            this.lastBroadcastedOrReceivedSceneVersion = -1,
            this.portal.close(),
            this.fileManager.reset(),
            n != null && n.isUnload || (this.setIsCollaborating(!1),
            this.setState({
                activeRoomLink: ""
            }),
            this.collaborators = new Map,
            this.excalidrawAPI.updateScene({
                collaborators: this.collaborators
            }),
            tn.resumeSave("collaboration"))
        }
        );
        M(this, "fetchImageFilesFromFirebase", async n=>{
            const r = n.elements.filter(i=>At(i) && !this.fileManager.isFileHandled(i.fileId) && !i.isDeleted && (n.forceFetchFiles ? i.status !== "pending" || Date.now() - i.updated > 1e4 : i.status === "saved")).map(i=>i.fileId);
            return await this.fileManager.getFiles(r)
        }
        );
        M(this, "decryptPayload", async(n,r,i)=>{
            try {
                const o = await rd(n, r, i)
                  , s = new TextDecoder("utf-8").decode(new Uint8Array(o));
                return JSON.parse(s)
            } catch (o) {
                return window.alert(_("alerts.decryptFailed")),
                console.error(o),
                {
                    type: "INVALID_RESPONSE"
                }
            }
        }
        );
        M(this, "fallbackInitializationHandler", null);
        M(this, "startCollaboration", async n=>{
            if (this.state.username || ne(()=>import("./random-username.esm-236d99b1.js"), []).then(({getRandomUsername: l})=>{
                const c = l();
                this.onUsernameChange(c)
            }
            ),
            this.portal.socket)
                return null;
            let r, i;
            n ? {roomId: r, roomKey: i} = n : ({roomId: r, roomKey: i} = await jK(),
            window.history.pushState({}, Oi, YK({
                roomId: r,
                roomKey: i
            })));
            const o = Vv();
            this.setIsCollaborating(!0),
            tn.pauseSave("collaboration");
            const {default: s} = await ne(()=>import("./index-e6d6f040.js").then(l=>l.i), [])
              , a = ()=>{
                this.initializeRoom({
                    roomLinkData: n,
                    fetchScene: !0
                }).then(l=>{
                    o.resolve(l)
                }
                )
            }
            ;
            this.fallbackInitializationHandler = a;
            try {
                const l = await WK();
                this.portal.socket = this.portal.open(s(l.url, {
                    transports: l.polling ? ["websocket", "polling"] : ["websocket"]
                }), r, i),
                this.portal.socket.once("connect_error", a)
            } catch (l) {
                return console.error(l),
                this.setState({
                    errorMessage: l.message
                }),
                null
            }
            if (!n) {
                const l = this.excalidrawAPI.getSceneElements().map(c=>Ni(c) && c.status === "saved" ? fe(c, {
                    status: "pending"
                }) : c);
                this.excalidrawAPI.history.clear(),
                this.excalidrawAPI.updateScene({
                    elements: l,
                    commitToHistory: !0
                }),
                this.saveCollabRoomToFirebase(Fs(l))
            }
            return this.socketInitializationTimer = window.setTimeout(a, kK),
            this.portal.socket.on("client-broadcast", async(l,c)=>{
                if (!this.portal.roomKey)
                    return;
                const u = await this.decryptPayload(c, l, this.portal.roomKey);
                switch (u.type) {
                case "INVALID_RESPONSE":
                    return;
                case Ns.INIT:
                    {
                        if (!this.portal.socketInitialized) {
                            this.initializeRoom({
                                fetchScene: !1
                            });
                            const d = u.payload.elements
                              , f = this.reconcileElements(d);
                            this.handleRemoteSceneUpdate(f, {
                                init: !0
                            }),
                            o.resolve({
                                elements: f,
                                scrollToContent: !0
                            })
                        }
                        break
                    }
                case Ns.UPDATE:
                    this.handleRemoteSceneUpdate(this.reconcileElements(u.payload.elements));
                    break;
                case "MOUSE_LOCATION":
                    {
                        const {pointer: d, button: f, username: h, selectedElementIds: m} = u.payload
                          , g = u.payload.socketId || u.payload.socketID
                          , E = new Map(this.collaborators)
                          , v = E.get(g) || {};
                        v.pointer = d,
                        v.button = f,
                        v.selectedElementIds = m,
                        v.username = h,
                        E.set(g, v),
                        this.excalidrawAPI.updateScene({
                            collaborators: E
                        });
                        break
                    }
                case "IDLE_STATUS":
                    {
                        const {userState: d, socketId: f, username: h} = u.payload
                          , m = new Map(this.collaborators)
                          , g = m.get(f) || {};
                        g.userState = d,
                        g.username = h,
                        this.excalidrawAPI.updateScene({
                            collaborators: m
                        });
                        break
                    }
                }
            }
            ),
            this.portal.socket.on("first-in-room", async()=>{
                this.portal.socket && this.portal.socket.off("first-in-room");
                const l = await this.initializeRoom({
                    fetchScene: !0,
                    roomLinkData: n
                });
                o.resolve(l)
            }
            ),
            this.initializeIdleDetector(),
            this.setState({
                activeRoomLink: window.location.href
            }),
            o
        }
        );
        M(this, "initializeRoom", async({fetchScene: n, roomLinkData: r})=>{
            if (clearTimeout(this.socketInitializationTimer),
            this.portal.socket && this.fallbackInitializationHandler && this.portal.socket.off("connect_error", this.fallbackInitializationHandler),
            n && r && this.portal.socket) {
                this.excalidrawAPI.resetScene();
                try {
                    const i = await zK(r.roomId, r.roomKey, this.portal.socket);
                    if (i)
                        return this.setLastBroadcastedOrReceivedSceneVersion(po(i)),
                        {
                            elements: i,
                            scrollToContent: !0
                        }
                } catch (i) {
                    console.error(i)
                } finally {
                    this.portal.socketInitialized = !0
                }
            } else
                this.portal.socketInitialized = !0;
            return null
        }
        );
        M(this, "reconcileElements", n=>{
            const r = this.getSceneElementsIncludingDeleted()
              , i = this.excalidrawAPI.getAppState();
            n = kd(n, null);
            const o = B3(r, n, i);
            return this.setLastBroadcastedOrReceivedSceneVersion(po(o)),
            o
        }
        );
        M(this, "loadImageFiles", Os(async()=>{
            const {loadedFiles: n, erroredFiles: r} = await this.fetchImageFilesFromFirebase({
                elements: this.excalidrawAPI.getSceneElementsIncludingDeleted()
            });
            this.excalidrawAPI.addFiles(n),
            Bc({
                excalidrawAPI: this.excalidrawAPI,
                erroredFiles: r,
                elements: this.excalidrawAPI.getSceneElementsIncludingDeleted()
            })
        }
        , MK));
        M(this, "handleRemoteSceneUpdate", (n,{init: r=!1}={})=>{
            this.excalidrawAPI.updateScene({
                elements: n,
                commitToHistory: !!r
            }),
            this.excalidrawAPI.history.clear(),
            this.loadImageFiles()
        }
        );
        M(this, "onPointerMove", ()=>{
            this.idleTimeoutId && (window.clearTimeout(this.idleTimeoutId),
            this.idleTimeoutId = null),
            this.idleTimeoutId = window.setTimeout(this.reportIdle, sw),
            this.activeIntervalId || (this.activeIntervalId = window.setInterval(this.reportActive, aw))
        }
        );
        M(this, "onVisibilityChange", ()=>{
            document.hidden ? (this.idleTimeoutId && (window.clearTimeout(this.idleTimeoutId),
            this.idleTimeoutId = null),
            this.activeIntervalId && (window.clearInterval(this.activeIntervalId),
            this.activeIntervalId = null),
            this.onIdleStateChange(ks.AWAY)) : (this.idleTimeoutId = window.setTimeout(this.reportIdle, sw),
            this.activeIntervalId = window.setInterval(this.reportActive, aw),
            this.onIdleStateChange(ks.ACTIVE))
        }
        );
        M(this, "reportIdle", ()=>{
            this.onIdleStateChange(ks.IDLE),
            this.activeIntervalId && (window.clearInterval(this.activeIntervalId),
            this.activeIntervalId = null)
        }
        );
        M(this, "reportActive", ()=>{
            this.onIdleStateChange(ks.ACTIVE)
        }
        );
        M(this, "initializeIdleDetector", ()=>{
            document.addEventListener(U.POINTER_MOVE, this.onPointerMove),
            document.addEventListener(U.VISIBILITY_CHANGE, this.onVisibilityChange)
        }
        );
        M(this, "setLastBroadcastedOrReceivedSceneVersion", n=>{
            this.lastBroadcastedOrReceivedSceneVersion = n
        }
        );
        M(this, "getLastBroadcastedOrReceivedSceneVersion", ()=>this.lastBroadcastedOrReceivedSceneVersion);
        M(this, "getSceneElementsIncludingDeleted", ()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());
        M(this, "onPointerUpdate", Os(n=>{
            n.pointersMap.size < 2 && this.portal.socket && this.portal.broadcastMouseLocation(n)
        }
        , LK));
        M(this, "onIdleStateChange", n=>{
            this.portal.broadcastIdleChange(n)
        }
        );
        M(this, "broadcastElements", n=>{
            po(n) > this.getLastBroadcastedOrReceivedSceneVersion() && (this.portal.broadcastScene(Ns.UPDATE, n, !1),
            this.lastBroadcastedOrReceivedSceneVersion = po(n),
            this.queueBroadcastAllElements())
        }
        );
        M(this, "syncElements", n=>{
            this.broadcastElements(n),
            this.queueSaveToFirebase()
        }
        );
        M(this, "queueBroadcastAllElements", Os(()=>{
            this.portal.broadcastScene(Ns.UPDATE, this.excalidrawAPI.getSceneElementsIncludingDeleted(), !0);
            const n = this.getLastBroadcastedOrReceivedSceneVersion()
              , r = Math.max(n, po(this.getSceneElementsIncludingDeleted()));
            this.setLastBroadcastedOrReceivedSceneVersion(r)
        }
        , i5));
        M(this, "queueSaveToFirebase", Os(()=>{
            this.portal.socketInitialized && this.saveCollabRoomToFirebase(Fs(this.excalidrawAPI.getSceneElementsIncludingDeleted()))
        }
        , i5, {
            leading: !1
        }));
        M(this, "handleClose", ()=>{
            Ma.set(H3, !1)
        }
        );
        M(this, "setUsername", n=>{
            this.setState({
                username: n
            })
        }
        );
        M(this, "onUsernameChange", n=>{
            this.setUsername(n),
            qK(n)
        }
        );
        this.state = {
            errorMessage: "",
            username: M9() || "",
            activeRoomLink: ""
        },
        this.portal = new JK(this),
        this.fileManager = new w9({
            getFiles: async r=>{
                const {roomId: i, roomKey: o} = this.portal;
                if (!i || !o)
                    throw new zu;
                return C9(`files/rooms/${i}`, o, r)
            }
            ,
            saveFiles: async({addedFiles: r})=>{
                const {roomId: i, roomKey: o} = this.portal;
                if (!i || !o)
                    throw new zu;
                return z3({
                    prefix: `${E9.collabFiles}/${i}`,
                    files: await $3({
                        files: r,
                        encryptionKey: o,
                        maxBytes: F3
                    })
                })
            }
        }),
        this.excalidrawAPI = n.excalidrawAPI,
        this.activeIntervalId = null,
        this.idleTimeoutId = null
    }
    componentDidMount() {
        window.addEventListener(U.BEFORE_UNLOAD, this.beforeUnload),
        window.addEventListener("online", this.onOfflineStatusToggle),
        window.addEventListener("offline", this.onOfflineStatusToggle),
        window.addEventListener(U.UNLOAD, this.onUnload),
        this.onOfflineStatusToggle();
        const n = {
            isCollaborating: this.isCollaborating,
            onPointerUpdate: this.onPointerUpdate,
            startCollaboration: this.startCollaboration,
            syncElements: this.syncElements,
            fetchImageFilesFromFirebase: this.fetchImageFilesFromFirebase,
            stopCollaboration: this.stopCollaboration,
            setUsername: this.setUsername
        };
        Ma.set(R9, n)
    }
    componentWillUnmount() {
        window.removeEventListener("online", this.onOfflineStatusToggle),
        window.removeEventListener("offline", this.onOfflineStatusToggle),
        window.removeEventListener(U.BEFORE_UNLOAD, this.beforeUnload),
        window.removeEventListener(U.UNLOAD, this.onUnload),
        window.removeEventListener(U.POINTER_MOVE, this.onPointerMove),
        window.removeEventListener(U.VISIBILITY_CHANGE, this.onVisibilityChange),
        this.activeIntervalId && (window.clearInterval(this.activeIntervalId),
        this.activeIntervalId = null),
        this.idleTimeoutId && (window.clearTimeout(this.idleTimeoutId),
        this.idleTimeoutId = null)
    }
    setCollaborators(n) {
        const r = new Map;
        for (const i of n)
            this.collaborators.has(i) ? r.set(i, this.collaborators.get(i)) : r.set(i, {});
        this.collaborators = r,
        this.excalidrawAPI.updateScene({
            collaborators: r
        })
    }
    render() {
        const {username: n, errorMessage: r, activeRoomLink: i} = this.state
          , {modalIsShown: o} = this.props;
        return k(re, {
            children: [o && p(rX, {
                handleClose: this.handleClose,
                activeRoomLink: i,
                username: n,
                onUsernameChange: this.onUsernameChange,
                onRoomCreate: ()=>this.startCollaboration(null),
                onRoomDestroy: this.stopCollaboration,
                setErrorMessage: s=>{
                    this.setState({
                        errorMessage: s
                    })
                }
            }), r && p(v3, {
                onClose: ()=>this.setState({
                    errorMessage: ""
                }),
                children: r
            })]
        })
    }
}
const gX = e=>{
    const [t] = ut(H3);
    return p(mX, {
        ...e,
        modalIsShown: t
    })
}
  , vX = 500
  , f5 = yl(e=>{
    e({
        scene: A9(),
        total: QK()
    })
}
, vX)
  , yX = e=>{
    const [t,n] = x.useState({
        scene: 0,
        total: 0
    });
    x.useEffect(()=>{
        f5(s=>{
            n(s)
        }
        )
    }
    , [e.elements, e.appState]),
    x.useEffect(()=>()=>f5.cancel(), []);
    const r = hg();
    let i, o;
    return r !== $8 ? (o = r.slice(0, 16).replace("T", " "),
    i = r.slice(21)) : o = _("stats.versionNotAvailable"),
    k(re, {
        children: [p("tr", {
            children: p("th", {
                colSpan: 2,
                children: _("stats.storage")
            })
        }), k("tr", {
            children: [p("td", {
                children: _("stats.scene")
            }), p("td", {
                children: yw(t.scene, 1)
            })]
        }), k("tr", {
            children: [p("td", {
                children: _("stats.total")
            }), p("td", {
                children: yw(t.total, 1)
            })]
        }), p("tr", {
            children: p("th", {
                colSpan: 2,
                children: _("stats.version")
            })
        }), p("tr", {
            children: k("td", {
                colSpan: 2,
                style: {
                    textAlign: "center",
                    cursor: "pointer"
                },
                onClick: async()=>{
                    try {
                        await Ul(hg()),
                        e.setToast(_("toast.copyToClipboard"))
                    } catch {}
                }
                ,
                title: _("stats.versionCopy"),
                children: [o, p("br", {}), i]
            })
        })]
    })
}
  , D9 = async(e,t,n)=>{
    const r = await x9()
      , i = `${Z1(12)}`
      , o = await n3()
      , s = await I0(o, Hl(e, t, n, "database"))
      , a = new Blob([s.iv, new Uint8Array(s.encryptedBuffer)],{
        type: ve.binary
    });
    await r.storage().ref(`/migrations/scenes/${i}`).put(a, {
        customMetadata: {
            data: JSON.stringify({
                version: 2,
                name: t.name
            }),
            created: Date.now().toString()
        }
    });
    const l = new Map;
    for (const c of e)
        At(c) && n[c.fileId] && l.set(c.fileId, n[c.fileId]);
    if (l.size) {
        const c = await $3({
            files: l,
            encryptionKey: o,
            maxBytes: F3
        });
        await z3({
            prefix: `/migrations/files/scenes/${i}`,
            files: c
        })
    }
    window.open(`https://app.excalidraw.com/import?excalidraw=${i},${o}`)
}
  , EX = ({elements: e, appState: t, files: n, onError: r})=>{
    const {t: i} = Ot();
    return k(h2, {
        color: "primary",
        children: [p("div", {
            className: "Card-icon",
            children: p(p9, {
                style: {
                    "--color-logo-icon": "#fff",
                    width: "2.8rem",
                    height: "2.8rem"
                }
            })
        }), p("h2", {
            children: "Excalidraw+"
        }), p("div", {
            className: "Card-details",
            children: i("exportDialog.excalidrawplus_description")
        }), p(Ee, {
            className: "Card-button",
            type: "button",
            title: i("exportDialog.excalidrawplus_button"),
            "aria-label": i("exportDialog.excalidrawplus_button"),
            showAriaLabel: !0,
            onClick: async()=>{
                try {
                    nt("export", "eplus", `ui (${yd()})`),
                    await D9(e, t, n)
                } catch (o) {
                    console.error(o),
                    o.name !== "AbortError" && r(new Error(i("exportDialog.excalidrawplus_exportError")))
                }
            }
        })]
    })
}
  , wX = ({style: e})=>{
    const {t, langCode: n} = Ot()
      , r = Ol(F9);
    return p("select", {
        className: "dropdown-select dropdown-select__language",
        onChange: ({target: i})=>r(i.value),
        value: n,
        "aria-label": t("buttons.selectLanguage"),
        style: e,
        children: Bv.map(i=>p("option", {
            value: i.code,
            children: i.label
        }, i.code))
    })
}
  , bX = ee.memo(e=>k(He, {
    children: [p(He.DefaultItems.LoadScene, {}), p(He.DefaultItems.SaveToActiveFile, {}), p(He.DefaultItems.Export, {}), p(He.DefaultItems.SaveAsImage, {}), e.isCollabEnabled && p(He.DefaultItems.LiveCollaborationTrigger, {
        isCollaborating: e.isCollaborating,
        onSelect: ()=>e.setCollabDialogShown(!0)
    }), p(He.DefaultItems.Help, {}), p(He.DefaultItems.ClearCanvas, {}), p(He.Separator, {}), p(He.ItemLink, {
        icon: l7,
        href: "https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=hamburger",
        className: "ExcalidrawPlus",
        children: "Excalidraw+"
    }), p(He.DefaultItems.Socials, {}), p(He.Separator, {}), p(He.DefaultItems.ToggleTheme, {}), p(He.ItemCustom, {
        children: p(wX, {
            style: {
                width: "100%"
            }
        })
    }), p(He.DefaultItems.ChangeCanvasBackground, {})]
}))
  , _X = ee.memo(e=>{
    const {t} = Ot();
    let n;
    return _1 ? n = t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((r,i)=>r === "Excalidraw+" ? p("a", {
        style: {
            pointerEvents: ds.inheritFromUI
        },
        href: "https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",
        children: "Excalidraw+"
    }, i) : r) : n = t("welcomeScreen.app.center_heading"),
    k(mn, {
        children: [p(mn.Hints.MenuHint, {
            children: t("welcomeScreen.app.menuHint")
        }), p(mn.Hints.ToolbarHint, {}), p(mn.Hints.HelpHint, {}), k(mn.Center, {
            children: [p(mn.Center.Logo, {}), p(mn.Center.Heading, {
                children: n
            }), k(mn.Center.Menu, {
                children: [p(mn.Center.MenuItemLoadScene, {}), p(mn.Center.MenuItemHelp, {}), e.isCollabEnabled && p(mn.Center.MenuItemLiveCollaborationTrigger, {
                    onSelect: ()=>e.setCollabDialogShown(!0)
                }), !_1 && p(mn.Center.MenuItemLink, {
                    href: "https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenGuest",
                    shortcut: null,
                    icon: l7,
                    children: "Try Excalidraw Plus!"
                })]
            })]
        })]
    })
}
)
  , xX = ()=>{
    const {t: e} = Ot();
    return p("a", {
        className: "encrypted-icon tooltip",
        href: "https://blog.excalidraw.com/end-to-end-encryption/",
        target: "_blank",
        rel: "noopener noreferrer",
        "aria-label": e("encrypted.link"),
        children: p(Zo, {
            label: e("encrypted.tooltip"),
            long: !0,
            children: OO
        })
    })
}
  , IX = ()=>_1 ? p("a", {
    href: "https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",
    target: "_blank",
    rel: "noreferrer",
    className: "plus-button",
    children: "Go to Excalidraw+"
}) : null
  , SX = ee.memo(()=>p(h9, {
    children: p("div", {
        style: {
            display: "flex",
            gap: ".5rem",
            alignItems: "center"
        },
        children: _1 ? p(IX, {}) : p(xX, {})
    })
}));
const CX = ({link: e, onCloseRequest: t, setErrorMessage: n})=>{
    const {t: r} = Ot()
      , [i,o] = x.useState(!1)
      , s = x.useRef(0)
      , a = x.useRef(null);
    return p(Ur, {
        onCloseRequest: t,
        title: !1,
        size: "small",
        children: k("div", {
            className: "ShareableLinkDialog",
            children: [p("h3", {
                children: "Shareable link"
            }), k("div", {
                className: "ShareableLinkDialog__linkRow",
                children: [p(M2, {
                    ref: a,
                    label: "Link",
                    readonly: !0,
                    fullWidth: !0,
                    value: e,
                    selectOnRender: !0
                }), k(by, {
                    open: i,
                    children: [p(_y, {
                        asChild: !0,
                        children: p(oi, {
                            size: "large",
                            label: "Copy link",
                            startIcon: oy,
                            onClick: async()=>{
                                var c;
                                try {
                                    await Ul(e),
                                    o(!0),
                                    s.current && window.clearTimeout(s.current),
                                    s.current = window.setTimeout(()=>{
                                        o(!1)
                                    }
                                    , 3e3)
                                } catch (u) {
                                    n(u.message)
                                }
                                (c = a.current) == null || c.select()
                            }
                        })
                    }), k(xy, {
                        onOpenAutoFocus: c=>c.preventDefault(),
                        onCloseAutoFocus: c=>c.preventDefault(),
                        className: "ShareableLinkDialog__popover",
                        side: "top",
                        align: "end",
                        sideOffset: 5.5,
                        children: [h7, " copied"]
                    })]
                })]
            }), k("div", {
                className: "ShareableLinkDialog__description",
                children: [" ", r("alerts.uploadedSecurly")]
            })]
        })
    })
}
;
gA();
window.EXCALIDRAW_THROTTLE_RENDER = !0;
let N9 = !1;
if (window.self !== window.top)
    try {
        const e = new URL(document.referrer)
          , t = new URL(window.location.href);
        e.origin === t.origin && (N9 = !0)
    } catch {}
const S1 = new M8;
S1.init({
    languageUtils: {}
});
const h5 = {
    title: _("overwriteConfirm.modal.shareableLink.title"),
    description: p(Hn, {
        i18nKey: "overwriteConfirm.modal.shareableLink.description",
        bold: e=>p("strong", {
            children: e
        }),
        br: ()=>p("br", {})
    }),
    actionLabel: _("overwriteConfirm.modal.shareableLink.button"),
    color: "danger"
}
  , L2 = async e=>{
    var c, u;
    const n = new URLSearchParams(window.location.search).get("id")
      , r = window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/)
      , i = window.location.hash.match(/^#url=(.*)$/)
      , o = T2();
    let s = await c5(null, null, o)
      , a = GK(window.location.href);
    const l = !!(n || r || a);
    if (l)
        if (!s.elements.length || a || await g2(h5))
            r && (s = await c5(r[1], r[2], o)),
            s.scrollToContent = !0,
            a || window.history.replaceState({}, Oi, window.location.origin);
        else {
            if (document.hidden)
                return new Promise((d,f)=>{
                    window.addEventListener("focus", ()=>L2(e).then(d).catch(f), {
                        once: !0
                    })
                }
                );
            a = null,
            window.history.replaceState({}, Oi, window.location.origin)
        }
    else if (i) {
        window.history.replaceState({}, Oi, window.location.origin);
        const d = i[1];
        try {
            const f = await fetch(window.decodeURIComponent(d))
              , h = await Ay(await f.blob(), null, null);
            if (!s.elements.length || await g2(h5))
                return {
                    scene: h,
                    isExternalScene: l
                }
        } catch {
            return {
                scene: {
                    appState: {
                        errorMessage: _("alerts.invalidSceneUrl")
                    }
                },
                isExternalScene: l
            }
        }
    }
    if (a && e.collabAPI) {
        const {excalidrawAPI: d} = e
          , f = await e.collabAPI.startCollaboration(a);
        return {
            scene: {
                ...f,
                appState: {
                    ...CI({
                        ...f == null ? void 0 : f.appState,
                        theme: ((c = o == null ? void 0 : o.appState) == null ? void 0 : c.theme) || ((u = f == null ? void 0 : f.appState) == null ? void 0 : u.theme)
                    }, d.getAppState()),
                    isLoading: !1
                },
                elements: B3((f == null ? void 0 : f.elements) || [], d.getSceneElementsIncludingDeleted(), d.getAppState())
            },
            isExternalScene: !0,
            id: a.roomId,
            key: a.roomKey
        }
    } else if (s)
        return l && r ? {
            scene: s,
            isExternalScene: l,
            id: r[1],
            key: r[2]
        } : {
            scene: s,
            isExternalScene: !1
        };
    return {
        scene: null,
        isExternalScene: !1
    }
}
  , pm = S1.detect() || rs.code
  , F9 = un(Array.isArray(pm) ? pm[0] : pm)
  , kX = ()=>{
    const [e,t] = x.useState("")
      , [n,r] = ut(F9)
      , i = qL()
      , o = x.useRef({
        promise: null
    });
    o.current.promise || (o.current.promise = Vv()),
    x.useEffect(()=>{
        nt("load", "frame", yd()),
        setTimeout(()=>{
            nt("load", "version", hg())
        }
        , fL)
    }
    , []);
    const [s,a] = Ox()
      , [l] = ut(R9)
      , [,c] = ut(H3)
      , [u] = OL(A2, ()=>l5(window.location.href));
    vW({
        excalidrawAPI: s,
        getInitialLibraryItems: u5
    }),
    x.useEffect(()=>{
        if (!s || !i && !l)
            return;
        const b = (A,P=!1)=>{
            var O;
            if (A.scene)
                if (l != null && l.isCollaborating())
                    A.scene.elements && l.fetchImageFilesFromFirebase({
                        elements: A.scene.elements,
                        forceFetchFiles: !0
                    }).then(({loadedFiles: N, erroredFiles: $})=>{
                        s.addFiles(N),
                        Bc({
                            excalidrawAPI: s,
                            erroredFiles: $,
                            elements: s.getSceneElementsIncludingDeleted()
                        })
                    }
                    );
                else {
                    const N = ((O = A.scene.elements) == null ? void 0 : O.reduce(($,V)=>At(V) ? $.concat(V.fileId) : $, [])) || [];
                    A.isExternalScene ? C9(`${E9.shareLinkFiles}/${A.id}`, A.key, N).then(({loadedFiles: $, erroredFiles: V})=>{
                        s.addFiles($),
                        Bc({
                            excalidrawAPI: s,
                            erroredFiles: V,
                            elements: s.getSceneElementsIncludingDeleted()
                        })
                    }
                    ) : P && (N.length && tn.fileStorage.getFiles(N).then(({loadedFiles: $, erroredFiles: V})=>{
                        $.length && s.addFiles($),
                        Bc({
                            excalidrawAPI: s,
                            erroredFiles: V,
                            elements: s.getSceneElementsIncludingDeleted()
                        })
                    }
                    ),
                    tn.fileStorage.clearObsoleteFiles({
                        currentFileIds: N
                    }))
                }
        }
        ;
        L2({
            collabAPI: l,
            excalidrawAPI: s
        }).then(async A=>{
            b(A, !0),
            o.current.promise.resolve(A.scene)
        }
        );
        const I = async A=>{
            A.preventDefault(),
            f2() || (l != null && l.isCollaborating() && !l5(window.location.href) && l.stopCollaboration(!1),
            s.updateScene({
                appState: {
                    isLoading: !0
                }
            }),
            L2({
                collabAPI: l,
                excalidrawAPI: s
            }).then(O=>{
                b(O),
                O.scene && s.updateScene({
                    ...O.scene,
                    ...qs(O.scene, null, null, {
                        repairBindings: !0
                    }),
                    commitToHistory: !0
                })
            }
            ))
        }
          , S = setTimeout(()=>document.title = Oi, dL)
          , C = yl(()=>{
            if (!document.hidden && (l && !l.isCollaborating() || i)) {
                if (d5(yt.VERSION_DATA_STATE)) {
                    const A = T2()
                      , P = M9();
                    let O = S1.detect() || rs.code;
                    Array.isArray(O) && (O = O[0]),
                    r(O),
                    s.updateScene({
                        ...A
                    }),
                    s.updateLibrary({
                        libraryItems: u5()
                    }),
                    l == null || l.setUsername(P || "")
                }
                if (d5(yt.VERSION_FILES)) {
                    const A = s.getSceneElementsIncludingDeleted()
                      , P = s.getFiles()
                      , O = (A == null ? void 0 : A.reduce((N,$)=>At($) && !P[$.fileId] ? N.concat($.fileId) : N, [])) || [];
                    O.length && tn.fileStorage.getFiles(O).then(({loadedFiles: N, erroredFiles: $})=>{
                        N.length && s.addFiles(N),
                        Bc({
                            excalidrawAPI: s,
                            erroredFiles: $,
                            elements: s.getSceneElementsIncludingDeleted()
                        })
                    }
                    )
                }
            }
        }
        , AK)
          , T = ()=>{
            tn.flushSave()
        }
          , L = A=>{
            (A.type === U.BLUR || document.hidden) && tn.flushSave(),
            (A.type === U.VISIBILITY_CHANGE || A.type === U.FOCUS) && C()
        }
        ;
        return window.addEventListener(U.HASHCHANGE, I, !1),
        window.addEventListener(U.UNLOAD, T, !1),
        window.addEventListener(U.BLUR, L, !1),
        document.addEventListener(U.VISIBILITY_CHANGE, L, !1),
        window.addEventListener(U.FOCUS, L, !1),
        ()=>{
            window.removeEventListener(U.HASHCHANGE, I, !1),
            window.removeEventListener(U.UNLOAD, T, !1),
            window.removeEventListener(U.BLUR, L, !1),
            window.removeEventListener(U.FOCUS, L, !1),
            document.removeEventListener(U.VISIBILITY_CHANGE, L, !1),
            clearTimeout(S)
        }
    }
    , [i, l, s, r]),
    x.useEffect(()=>{
        const b = I=>{
            tn.flushSave(),
            s && tn.fileStorage.shouldPreventUnload(s.getSceneElements()) && Cx(I)
        }
        ;
        return window.addEventListener(U.BEFORE_UNLOAD, b),
        ()=>{
            window.removeEventListener(U.BEFORE_UNLOAD, b)
        }
    }
    , [s]),
    x.useEffect(()=>{
        S1.cacheUserLanguage(n)
    }
    , [n]);
    const [d,f] = x.useState(()=>{
        var b;
        return localStorage.getItem(yt.LOCAL_STORAGE_THEME) || ((b = T2().appState) == null ? void 0 : b.theme) || $t.LIGHT
    }
    );
    x.useEffect(()=>{
        localStorage.setItem(yt.LOCAL_STORAGE_THEME, d),
        document.documentElement.classList.toggle("dark", d === $t.DARK)
    }
    , [d]);
    const h = (b,I,S)=>{
        l != null && l.isCollaborating() && l.syncElements(b),
        f(I.theme),
        tn.isSavePaused() || tn.save(b, I, S, ()=>{
            if (s) {
                let C = !1;
                const T = s.getSceneElementsIncludingDeleted().map(L=>{
                    if (tn.fileStorage.shouldUpdateImageElementStatus(L)) {
                        const A = fe(L, {
                            status: "saved"
                        });
                        return A !== L && (C = !0),
                        A
                    }
                    return L
                }
                );
                C && s.updateScene({
                    elements: T
                })
            }
        }
        )
    }
      , [m,g] = x.useState(null)
      , E = async(b,I,S,C)=>{
        if (b.length === 0)
            return window.alert(_("alerts.cannotExportEmptyCanvas"));
        if (C)
            try {
                const {url: T, errorMessage: L} = await XK(b, {
                    ...I,
                    viewBackgroundColor: I.exportBackground ? I.viewBackgroundColor : di().viewBackgroundColor
                }, S);
                L && t(L),
                T && g(T)
            } catch (T) {
                if (T.name !== "AbortError") {
                    const {width: L, height: A} = C;
                    console.error(T, {
                        width: L,
                        height: A
                    }),
                    t(T.message)
                }
            }
    }
      , v = (b,I)=>p(yX, {
        setToast: S=>s.setToast({
            message: S
        }),
        appState: I,
        elements: b
    })
      , y = async b=>{
        if (!b.length) {
            localStorage.removeItem(yt.LOCAL_STORAGE_LIBRARY);
            return
        }
        const I = JSON.stringify(b);
        localStorage.setItem(yt.LOCAL_STORAGE_LIBRARY, I)
    }
      , w = G1(O9);
    return N9 ? p("div", {
        style: {
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
            textAlign: "center",
            height: "100%"
        },
        children: p("h1", {
            children: "I'm not a pretzel!"
        })
    }) : p("div", {
        style: {
            height: "100%"
        },
        className: le("excalidraw-app", {
            "is-collaborating": u
        }),
        children: k(y9, {
            ref: a,
            onChange: h,
            initialData: o.current.promise,
            isCollaborating: u,
            onPointerUpdate: l == null ? void 0 : l.onPointerUpdate,
            UIOptions: {
                canvasActions: {
                    toggleTheme: !0,
                    export: {
                        onExportToBackend: E,
                        renderCustomUI: (b,I,S)=>p(EX, {
                            elements: b,
                            appState: I,
                            files: S,
                            onError: C=>{
                                s == null || s.updateScene({
                                    appState: {
                                        errorMessage: C.message
                                    }
                                })
                            }
                        })
                    }
                }
            },
            langCode: n,
            renderCustomStats: v,
            detectScroll: !1,
            handleKeyboardGlobally: !0,
            onLibraryChange: y,
            autoFocus: !0,
            theme: d,
            renderTopRightUI: b=>b || !l || i ? null : p(v9, {
                isCollaborating: u,
                onSelect: ()=>c(!0)
            }),
            children: [p(bX, {
                setCollabDialogShown: c,
                isCollaborating: u,
                isCollabEnabled: !i
            }), p(_X, {
                setCollabDialogShown: c,
                isCollabEnabled: !i
            }), k(Ds, {
                children: [p(Ds.Actions.ExportToImage, {}), p(Ds.Actions.SaveToDisk, {}), s && p(Ds.Action, {
                    title: _("overwriteConfirm.action.excalidrawPlus.title"),
                    actionLabel: _("overwriteConfirm.action.excalidrawPlus.button"),
                    onClick: ()=>{
                        D9(s.getSceneElements(), s.getAppState(), s.getFiles())
                    }
                    ,
                    children: _("overwriteConfirm.action.excalidrawPlus.description")
                })]
            }), p(SX, {}), u && w && p("div", {
                className: "collab-offline-warning",
                children: _("alerts.collabOfflineWarning")
            }), m && p(CX, {
                link: m,
                onCloseRequest: ()=>g(null),
                setErrorMessage: t
            }), s && !i && p(gX, {
                excalidrawAPI: s
            }), e && p(v3, {
                onClose: ()=>t(""),
                children: e
            })]
        })
    })
}
  , TX = ()=>p(EK, {
    children: p($v, {
        unstable_createStore: ()=>Ma,
        children: p(kX, {})
    })
});
function MX(e={}) {
    const {immediate: t=!1, onNeedRefresh: n, onOfflineReady: r, onRegistered: i, onRegisteredSW: o, onRegisterError: s} = e;
    let a, l;
    const c = async(d=!0)=>{
        await l
    }
    ;
    async function u() {
        if ("serviceWorker"in navigator) {
            const {Workbox: d} = await ne(()=>import("./workbox-window.prod.es5-a7b12eab.js"), []);
            a = new d("/sw.js",{
                scope: "/",
                type: "classic"
            }),
            a.addEventListener("activated", f=>{
                (f.isUpdate || f.isExternal) && window.location.reload()
            }
            ),
            a.addEventListener("installed", f=>{
                f.isUpdate || r == null || r()
            }
            ),
            a.register({
                immediate: t
            }).then(f=>{
                o ? o("/sw.js", f) : i == null || i(f)
            }
            ).catch(f=>{
                s == null || s(f)
            }
            )
        }
    }
    return l = u(),
    c
}
var Pf = It()
  , AX = function() {
    function e(t) {
        t === void 0 && (t = {}),
        this.name = e.id,
        this._levels = ["log", "info", "warn", "error", "debug", "assert"],
        t.levels && (this._levels = t.levels)
    }
    return e.prototype.setupOnce = function(t, n) {
        "console"in Pf && this._levels.forEach(function(r) {
            r in Pf.console && Gt(Pf.console, r, function(i) {
                return function() {
                    for (var o = [], s = 0; s < arguments.length; s++)
                        o[s] = arguments[s];
                    var a = n();
                    a.getIntegration(e) && a.withScope(function(l) {
                        l.setLevel(zr.fromString(r)),
                        l.setExtra("arguments", o),
                        l.addEventProcessor(function(u) {
                            return u.logger = "console",
                            u
                        });
                        var c = E1(o, " ");
                        r === "assert" ? o[0] === !1 && (c = "Assertion failed: " + (E1(o.slice(1), " ") || "console.assert"),
                        l.setExtra("arguments", o.slice(1)),
                        a.captureMessage(c)) : a.captureMessage(c)
                    }),
                    i && Function.prototype.apply.call(i, Pf.console, o)
                }
            })
        })
    }
    ,
    e.id = "CaptureConsole",
    e
}();
const $9 = {
    "excalidraw.com": "production",
    "vercel.app": "staging"
}
  , LX = {}.VITE_APP_DISABLE_SENTRY === "true"
  , mm = !LX && Object.keys($9).find(e=>window.location.hostname.indexOf(e) >= 0);
vK({
    dsn: mm ? "https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260" : void 0,
    environment: mm ? $9[mm] : void 0,
    release: "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4",
    ignoreErrors: ["undefined is not an object (evaluating 'window.__pad.performLoop')"],
    integrations: [new AX({
        levels: ["error"]
    })],
    beforeSend(e) {
        var t;
        return (t = e.request) != null && t.url && (e.request.url = e.request.url.replace(/#.*$/, "")),
        e
    }
});
window.__EXCALIDRAW_SHA__ = "aaf73c8ff31f58cfd8274e8463e9c960d218c8b4";
const PX = document.getElementById("root")
  , RX = k8(PX);
MX();
RX.render(p(x.StrictMode, {
    children: p(TX, {})
}));
export {li as E, ve as M, NX as _, VX as a, Ga as b, YX as c, UX as d, jX as e, GX as f, Al as g, DX as h, ni as i, BX as j, zX as k, FX as l, $X as m, u$ as n, $S as p, WX as s};
//# sourceMappingURL=index-6f648a0f.js.map
